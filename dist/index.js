class aa extends Error{response;request;options;constructor(e,i,n){const s=e.status||e.status===0?e.status:"",o=e.statusText??"",a=`${s} ${o}`.trim(),l=a?`status code ${a}`:"an unknown error";super(`Request failed with ${l}: ${i.method} ${i.url}`),this.name="HTTPError",this.response=e,this.request=i,this.options=n}}class If extends Error{name="NonError";value;constructor(e){let i="Non-error value was thrown";try{typeof e=="string"?i=e:e&&typeof e=="object"&&"message"in e&&typeof e.message=="string"&&(i=e.message)}catch{}super(i),this.value=e}}class $r extends Error{name="ForceRetryError";customDelay;code;customRequest;constructor(e){const i=e?.cause?e.cause instanceof Error?e.cause:new If(e.cause):void 0;super(e?.code?`Forced retry: ${e.code}`:"Forced retry",i?{cause:i}:void 0),this.customDelay=e?.delay,this.code=e?.code,this.customRequest=e?.request}}const xp=(()=>{let t=!1,e=!1;const i=typeof globalThis.ReadableStream=="function",n=typeof globalThis.Request=="function";if(i&&n)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")}catch(s){if(s instanceof Error&&s.message==="unsupported BodyInit type")return!1;throw s}return t&&!e})(),Rw=typeof globalThis.AbortController=="function",Ef=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",Aw=typeof globalThis.ReadableStream=="function",Mw=typeof globalThis.FormData=="function",Pf=["get","post","put","patch","head","delete"],Dw={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*",bytes:"*/*"},Kr=2147483647,Nw=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,Rf=Symbol("stop");class Af{options;constructor(e){this.options=e}}const Lw=t=>new Af(t),Ow={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0,context:!0},Bw={next:!0},Vw={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,duplex:!0},Uw=t=>{if(!t)return 0;if(t instanceof FormData){let e=0;for(const[i,n]of t)e+=Nw,e+=new TextEncoder().encode(`Content-Disposition: form-data; name="${i}"`).length,e+=typeof n=="string"?new TextEncoder().encode(n).length:n.size;return e}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength;if(typeof t=="string")return new TextEncoder().encode(t).length;if(t instanceof URLSearchParams)return new TextEncoder().encode(t.toString()).length;if("byteLength"in t)return t.byteLength;if(typeof t=="object"&&t!==null)try{const e=JSON.stringify(t);return new TextEncoder().encode(e).length}catch{return 0}return 0},Mf=(t,e,i)=>{let n,s=0;return t.pipeThrough(new TransformStream({transform(o,a){if(a.enqueue(o),n){s+=n.byteLength;let l=e===0?0:s/e;l>=1&&(l=1-Number.EPSILON),i?.({percent:l,totalBytes:Math.max(e,s),transferredBytes:s},n)}n=o},flush(){n&&(s+=n.byteLength,i?.({percent:1,totalBytes:Math.max(e,s),transferredBytes:s},n))}}))},Fw=(t,e)=>{if(!t.body)return t;if(t.status===204)return new Response(null,{status:t.status,statusText:t.statusText,headers:t.headers});const i=Math.max(0,Number(t.headers.get("content-length"))||0);return new Response(Mf(t.body,i,e),{status:t.status,statusText:t.statusText,headers:t.headers})},Hw=(t,e,i)=>{if(!t.body)return t;const n=Uw(i??t.body);return new Request(t,{duplex:"half",body:Mf(t.body,n,e)})},Ai=t=>t!==null&&typeof t=="object",Gs=(...t)=>{for(const e of t)if((!Ai(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return Na({},...t)},Df=(t={},e={})=>{const i=new globalThis.Headers(t),n=e instanceof globalThis.Headers,s=new globalThis.Headers(e);for(const[o,a]of s.entries())n&&a==="undefined"||a===void 0?i.delete(o):i.set(o,a);return i};function qs(t,e,i){return Object.hasOwn(e,i)&&e[i]===void 0?[]:Na(t[i]??[],e[i]??[])}const Nf=(t={},e={})=>({beforeRequest:qs(t,e,"beforeRequest"),beforeRetry:qs(t,e,"beforeRetry"),afterResponse:qs(t,e,"afterResponse"),beforeError:qs(t,e,"beforeError")}),Ww=(t,e)=>{const i=new URLSearchParams;for(const n of[t,e])if(n!==void 0)if(n instanceof URLSearchParams)for(const[s,o]of n.entries())i.append(s,o);else if(Array.isArray(n))for(const s of n){if(!Array.isArray(s)||s.length!==2)throw new TypeError("Array search parameters must be provided in [[key, value], ...] format");i.append(String(s[0]),String(s[1]))}else if(Ai(n))for(const[s,o]of Object.entries(n))o!==void 0&&i.append(s,String(o));else{const s=new URLSearchParams(n);for(const[o,a]of s.entries())i.append(o,a)}return i},Na=(...t)=>{let e={},i={},n={},s;const o=[];for(const a of t)if(Array.isArray(a))Array.isArray(e)||(e=[]),e=[...e,...a];else if(Ai(a)){for(let[l,d]of Object.entries(a)){if(l==="signal"&&d instanceof globalThis.AbortSignal){o.push(d);continue}if(l==="context"){if(d!=null&&(!Ai(d)||Array.isArray(d)))throw new TypeError("The `context` option must be an object");e={...e,context:d==null?{}:{...e.context,...d}};continue}if(l==="searchParams"){d==null?s=void 0:s=s===void 0?d:Ww(s,d);continue}Ai(d)&&l in e&&(d=Na(e[l],d)),e={...e,[l]:d}}Ai(a.hooks)&&(n=Nf(n,a.hooks),e.hooks=n),Ai(a.headers)&&(i=Df(i,a.headers),e.headers=i)}return s!==void 0&&(e.searchParams=s),o.length>0&&(o.length===1?e.signal=o[0]:Ef?e.signal=AbortSignal.any(o):e.signal=o.at(-1)),e.context===void 0&&(e.context={}),e},jw=t=>Pf.includes(t)?t.toUpperCase():t,Gw=["get","put","head","delete","options","trace"],qw=[408,413,429,500,502,503,504],$w=[413,429,503],vp={limit:2,methods:Gw,statusCodes:qw,afterStatusCodes:$w,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3,jitter:void 0,retryOnTimeout:!1},Kw=(t={})=>{if(typeof t=="number")return{...vp,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...vp,...t}};class ca extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}async function Yw(t,e,i,n){return new Promise((s,o)=>{const a=setTimeout(()=>{i&&i.abort(),o(new ca(t))},n.timeout);n.fetch(t,e).then(s).catch(o).then(()=>{clearTimeout(a)})})}async function zw(t,{signal:e}){return new Promise((i,n)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",s,{once:!0}));function s(){clearTimeout(o),n(e.reason)}const o=setTimeout(()=>{e?.removeEventListener("abort",s),i()},t)})}const Xw=(t,e)=>{const i={};for(const n in e)Object.hasOwn(e,n)&&!(n in Vw)&&!(n in Ow)&&(!(n in t)||n in Bw)&&(i[n]=e[n]);return i},Qw=t=>t===void 0?!1:Array.isArray(t)?t.length>0:t instanceof URLSearchParams?t.size>0:typeof t=="object"?Object.keys(t).length>0:typeof t=="string"?t.trim().length>0:!!t;function Jw(t){return t instanceof aa||t?.name===aa.name}function Zw(t){return t instanceof ca||t?.name===ca.name}class us{static create(e,i){const n=new us(e,i),s=async()=>{if(typeof n.#e.timeout=="number"&&n.#e.timeout>Kr)throw new RangeError(`The \`timeout\` option cannot be greater than ${Kr}`);await Promise.resolve();let a=await n.#m();for(const l of n.#e.hooks.afterResponse){const d=n.#l(a.clone()),_=await l(n.request,n.#a(),d,{retryCount:n.#i});if(_ instanceof globalThis.Response&&(a=_),_ instanceof Af)throw await Promise.all([d.body?.cancel(),a.body?.cancel()]),new $r(_.options)}if(n.#l(a),!a.ok&&(typeof n.#e.throwHttpErrors=="function"?n.#e.throwHttpErrors(a.status):n.#e.throwHttpErrors)){let l=new aa(a,n.request,n.#a());for(const d of n.#e.hooks.beforeError)l=await d(l,{retryCount:n.#i});throw l}if(n.#e.onDownloadProgress){if(typeof n.#e.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!Aw)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return Fw(a.clone(),n.#e.onDownloadProgress)}return a},o=n.#h(s).finally(async()=>{const a=n.#o,l=[];a&&!a.bodyUsed&&l.push(a.body?.cancel()),n.request.bodyUsed||l.push(n.request.body?.cancel()),await Promise.all(l)});for(const[a,l]of Object.entries(Dw))a==="bytes"&&typeof globalThis.Response?.prototype?.bytes!="function"||(o[a]=async()=>{n.request.headers.set("accept",n.request.headers.get("accept")||l);const d=await o;if(a==="json"){if(d.status===204)return"";const _=await d.text();return _===""?"":i.parseJson?i.parseJson(_):JSON.parse(_)}return d[a]()});return o}static#d(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof URLSearchParams)?Object.fromEntries(Object.entries(e).filter(([,i])=>i!==void 0)):e}request;#n;#i=0;#t;#e;#o;#s;#r;constructor(e,i={}){if(this.#t=e,this.#e={...i,headers:Df(this.#t.headers,i.headers),hooks:Nf({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},i.hooks),method:jw(i.method??this.#t.method??"GET"),prefixUrl:String(i.prefixUrl||""),retry:Kw(i.retry),throwHttpErrors:i.throwHttpErrors??!0,timeout:i.timeout??1e4,fetch:i.fetch??globalThis.fetch.bind(globalThis),context:i.context??{}},typeof this.#t!="string"&&!(this.#t instanceof URL||this.#t instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this.#e.prefixUrl&&typeof this.#t=="string"){if(this.#t.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this.#e.prefixUrl.endsWith("/")||(this.#e.prefixUrl+="/"),this.#t=this.#e.prefixUrl+this.#t}Rw&&Ef&&(this.#s=this.#e.signal??this.#t.signal,this.#n=new globalThis.AbortController,this.#e.signal=this.#s?AbortSignal.any([this.#s,this.#n.signal]):this.#n.signal),xp&&(this.#e.duplex="half"),this.#e.json!==void 0&&(this.#e.body=this.#e.stringifyJson?.(this.#e.json)??JSON.stringify(this.#e.json),this.#e.headers.set("content-type",this.#e.headers.get("content-type")??"application/json"));const n=i.headers&&new globalThis.Headers(i.headers).has("content-type");if(this.#t instanceof globalThis.Request&&(Mw&&this.#e.body instanceof globalThis.FormData||this.#e.body instanceof URLSearchParams)&&!n&&this.#e.headers.delete("content-type"),this.request=new globalThis.Request(this.#t,this.#e),Qw(this.#e.searchParams)){const o="?"+(typeof this.#e.searchParams=="string"?this.#e.searchParams.replace(/^\?/,""):new URLSearchParams(us.#d(this.#e.searchParams)).toString()),a=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);this.request=new globalThis.Request(a,this.#e)}if(this.#e.onUploadProgress){if(typeof this.#e.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!xp)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request=this.#p(this.request,this.#e.body??void 0)}}#c(){const e=this.#e.retry.delay(this.#i);let i=e;return this.#e.retry.jitter===!0?i=Math.random()*e:typeof this.#e.retry.jitter=="function"&&(i=this.#e.retry.jitter(e),(!Number.isFinite(i)||i<0)&&(i=e)),Math.min(this.#e.retry.backoffLimit,i)}async#f(e){if(this.#i++,this.#i>this.#e.retry.limit)throw e;const i=e instanceof Error?e:new If(e);if(i instanceof $r)return i.customDelay??this.#c();if(!this.#e.retry.methods.includes(this.request.method.toLowerCase()))throw e;if(this.#e.retry.shouldRetry!==void 0){const n=await this.#e.retry.shouldRetry({error:i,retryCount:this.#i});if(n===!1)throw e;if(n===!0)return this.#c()}if(Zw(e)&&!this.#e.retry.retryOnTimeout)throw e;if(Jw(e)){if(!this.#e.retry.statusCodes.includes(e.response.status))throw e;const n=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Retry-After")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(n&&this.#e.retry.afterStatusCodes.includes(e.response.status)){let s=Number(n)*1e3;Number.isNaN(s)?s=Date.parse(n)-Date.now():s>=Date.parse("2024-01-01")&&(s-=Date.now());const o=this.#e.retry.maxRetryAfter??s;return s<o?s:o}if(e.response.status===413)throw e}return this.#c()}#l(e){return this.#e.parseJson&&(e.json=async()=>this.#e.parseJson(await e.text())),e}async#h(e){try{return await e()}catch(i){const n=Math.min(await this.#f(i),Kr);if(this.#i<1)throw i;if(await zw(n,this.#s?{signal:this.#s}:{}),i instanceof $r&&i.customRequest){const s=this.#e.signal?new globalThis.Request(i.customRequest,{signal:this.#e.signal}):new globalThis.Request(i.customRequest);this.#u(s)}for(const s of this.#e.hooks.beforeRetry){const o=await s({request:this.request,options:this.#a(),error:i,retryCount:this.#i});if(o instanceof globalThis.Request){this.#u(o);break}if(o instanceof globalThis.Response)return o;if(o===Rf)return}return this.#h(e)}}async#m(){this.#n?.signal.aborted&&(this.#n=new globalThis.AbortController,this.#e.signal=this.#s?AbortSignal.any([this.#s,this.#n.signal]):this.#n.signal,this.request=new globalThis.Request(this.request,{signal:this.#e.signal}));for(const i of this.#e.hooks.beforeRequest){const n=await i(this.request,this.#a(),{retryCount:this.#i});if(n instanceof Response)return n;if(n instanceof globalThis.Request){this.#u(n);break}}const e=Xw(this.request,this.#e);return this.#o=this.request,this.request=this.#o.clone(),this.#e.timeout===!1?this.#e.fetch(this.#o,e):Yw(this.#o,e,this.#n,this.#e)}#a(){if(!this.#r){const{hooks:e,...i}=this.#e;this.#r=Object.freeze(i)}return this.#r}#u(e){this.#r=void 0,this.request=this.#p(e)}#p(e,i){return!this.#e.onUploadProgress||!e.body?e:Hw(e,this.#e.onUploadProgress,i??this.#e.body??void 0)}}/*! MIT License © Sindre Sorhus */const ua=t=>{const e=(i,n)=>us.create(i,Gs(t,n));for(const i of Pf)e[i]=(n,s)=>us.create(n,Gs(t,s,{method:i}));return e.create=i=>ua(Gs(i)),e.extend=i=>(typeof i=="function"&&(i=i(t??{})),ua(Gs(t,i))),e.stop=Rf,e.retry=Lw,e},Ae=ua(),ex="https://oauth2.googleapis.com/token",Z={get length(){try{return localStorage.length}catch{return 0}},clear:function(){try{localStorage.clear()}catch{}},getItem:function(t){try{return localStorage.getItem(t)}catch{return null}},removeItem:function(t){try{localStorage.removeItem(t)}catch{}},setItem:function(t,e){try{localStorage.setItem(t,e)}catch{}},key:function(t){try{return localStorage.key(t)}catch{return null}}};var gn=(t=>(t.PipedInstances="piped-instances",t.PipedCurrentInstance="piped-current-instance",t.InvidiousInstances="invidious-instances",t.InvidiousCurrentInstance="invidious-current-instance",t))(gn||{});const tx=t=>`https://www.youtube.com/watch?v=${t}`,ix=t=>`https://www.youtube.com/playlist?list=${t}`,nx="https://piped.kavin.rocks",La=async()=>{const e=await Ae.get("https://piped-instances.kavin.rocks/").json();return Z.setItem(gn.PipedInstances,JSON.stringify(e)),e},Lf=async()=>{const t=Z.getItem(gn.PipedInstances);let e=[];if(t)e=JSON.parse(t);else try{e=await La()}catch(n){return console.error(n),nx}const i=e[0].api_url;return Z.setItem(gn.PipedCurrentInstance,i),i},kp=async()=>{const t=Z.getItem(gn.PipedInstances);return t?JSON.parse(t):await La()},Tt=async()=>{let t=Z.getItem(gn.PipedCurrentInstance);return t||(t=await Lf()),t};async function Of(t,e=0){const i=await kp();let n=await Tt();e>0&&e<i.length&&(n=i[e].api_url);try{const s=`${n}/streams/${t}`,o=1e4,a=new Promise((b,k)=>{setTimeout(()=>k(),o)}),l=Ae.get(s).json();await Promise.race([l,a]);const d=await l;return{title:d.title,apiId:t,sources:[{source:d.hls,type:"application/x-mpegURL"}],duration:d.duration,views:d.views,likes:d.likes,dislikes:d.dislikes,description:d.description,channelName:d.uploader,channelApiId:d.uploaderUrl.split("/").slice(-1)[0],uploadDate:new Date(d.uploadDate).toISOString(),recommendedVideos:d.relatedStreams.map(b=>({title:b.title,apiId:b.url.split("=").slice(-1)[0],images:[{url:b.thumbnail}],duration:b.duration,views:b.views,channelName:b.uploaderName,channelApiId:b.uploaderUrl?.split("/").slice(-1)[0]}))}}catch(s){const o=await kp();if(e<o.length)return Of(t,e+1);throw s}}const Oa=t=>({title:t.title,apiId:t.url.split("=").slice(-1)[0],images:[{url:t.thumbnail}],duration:t.duration,views:t.views,channelName:t.uploaderName,channelApiId:t.uploaderUrl?.split("/").slice(-1)[0]}),sx=async t=>{const i=`${await Tt()}/opensearch/suggestions?query=${t.query}`;return(await Ae.get(i).json())[1]},Bf=async t=>{const i=`${await Tt()}/comments/${t.apiId}`,n=await Ae.get(i).json(),s=n.comments.map(a=>({apiId:a.commentId,videoCommentId:t.apiId,content:a.commentText,author:a.author,images:[{url:a.thumbnail}],likes:a.likeCount})),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{comments:s,pageInfo:o}},ox=async t=>{const i=`${await Tt()}/search?q=${t.query}&filter=videos`,n=await Ae.get(i).json(),s=n.items.filter(a=>a.type==="stream").map(a=>({title:a.title,apiId:a.url.split("=").slice(-1)[0],images:[{url:a.thumbnail}],duration:a.duration,views:a.views,channelName:a.uploaderName,channelApiId:a.uploaderUrl?.split("/").slice(-1)[0]})),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{items:s,pageInfo:o}},rx=async t=>{const i=`${await Tt()}/search?q=${t.query}&filter=playlists`,n=await Ae.get(i).json(),s=n.items.filter(a=>a.type==="playlist").map(a=>({name:a.name,apiId:a.url.split("=").slice(-1)[0],images:[{url:a.thumbnail}],videos:[]})),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{items:s,pageInfo:o}},ax=async t=>{const i=`${await Tt()}/search?q=${t.query}&filter=channels`,n=await Ae.get(i).json(),s=n.items.filter(a=>a.type==="channel").map(a=>({name:a.name,apiId:a.url.split("=").slice(-1)[0],images:[{url:a.thumbnail}]})),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{items:s,pageInfo:o}},cx=async t=>{const i=`${await Tt()}/channel/${t.apiId}`,n=await Ae.get(i).json(),s=n.relatedStreams.map(Oa),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{items:s,pageInfo:o}},ux=async t=>{const i=`${await Tt()}/playlists/${t.apiId}`,n=await Ae.get(i).json(),s=n.relatedStreams.map(Oa),o={resultsPerPage:0,offset:0,nextPage:n.nextpage};return{items:s,pageInfo:o}},lx=async()=>{const i=`${await Tt()}/trending?region=US`;return{videos:{items:(await Ae.get(i).json()).map(Oa)}}},Bi="\\d+(?:[\\.,]\\d+)?",hx=`(${Bi}W)`,px=`(${Bi}Y)?(${Bi}M)?(${Bi}D)?`,dx=`T(${Bi}H)?(${Bi}M)?(${Bi}S)?`,fx=`P(?:${hx}|${px}(?:${dx})?)`,mx=["weeks","years","months","days","hours","minutes","seconds"],Vf=Object.freeze({years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0}),_x=new RegExp(fx),bx=t=>t.match(_x).slice(1).reduce((e,i,n)=>(e[mx[n]]=parseFloat(i)||0,e),{}),yx=(t,e)=>{t=Object.assign({},Vf,t);const i=e?e.getTime():Date.now(),n=new Date(i);return n.setFullYear(n.getFullYear()+t.years),n.setMonth(n.getMonth()+t.months),n.setDate(n.getDate()+t.days),n.setHours(n.getHours()+t.hours),n.setMinutes(n.getMinutes()+t.minutes),n.setMilliseconds(n.getMilliseconds()+t.seconds*1e3),n.setDate(n.getDate()+t.weeks*7),n},gx=(t,e)=>{t=Object.assign({},Vf,t);const i=e?e.getTime():Date.now(),n=new Date(i);return(yx(t,n).getTime()-n.getTime())/1e3},Uf="AIzaSyCCwk2lWH7eyv_48Jimp3hBFhR7CFZkWhM",Ba=Ae.create({hooks:{beforeRequest:[t=>{const e=Z.getItem("access_token");e&&t.headers.set("Authorization",`Bearer ${e}`)}],afterResponse:[async(t,e,i)=>{if(i.status===401){const n=await wx();return t.headers.set("Authorization",`Bearer ${n}`),Ba(t,e)}}]}}),Ff=(t,e)=>{Z.setItem("access_token",t),e&&Z.setItem("refresh_token",e)},wx=async()=>{const t=Z.getItem("refresh_token");if(!t)return;const e=Z.getItem("clientId"),i=Z.getItem("clientSecret"),n=ex,s=new URLSearchParams;s.append("refresh_token",t),s.append("grant_type","refresh_token"),e&&i&&(s.append("client_id",e),s.append("client_secret",i));const o=await Ae.post(n,{body:s,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).json();if(o.access_token)return Ff(o.access_token),o.access_token},Oo=()=>Z.getItem("apiKey");function xx(t){return(t.items||[]).map(i=>({apiId:i.id,name:i.snippet?.title||"",images:[{width:i.snippet?.thumbnails?.default?.width||0,url:i.snippet?.thumbnails?.default?.url||"",height:i.snippet?.thumbnails?.default?.height||0}],isUserPlaylist:!0,originalUrl:ix(i.id||"")}))}function Hf(t){return(t.items||[]).map(i=>({apiId:i.id,duration:gx(bx(i.contentDetails?.duration||"0")),images:i.snippet?.thumbnails&&Object.values(i.snippet?.thumbnails).map(n=>({url:n.url||"",height:n.height||0,width:n.width||0})),title:i.snippet?.title||"",originalUrl:tx(i.id||"")}))}async function vx(){const t="https://www.googleapis.com/youtube/v3/videos",e=Oo()||Uf,i=`${t}?key=${e}&chart=mostPopular&part=snippet,contentDetails`,n=await Ae.get(i).json();return{videos:{items:Hf(n)}}}async function Wf(t){const e=t.join(","),i="https://www.googleapis.com/youtube/v3/videos",n=Oo()||Uf,s=`${i}?key=${n}&part=snippet,contentDetails&id=${e}`,o=await Ae.get(s).json();return Hf(o)}async function kx(t){let i=`https://www.googleapis.com/youtube/v3/playlistItems?part=contentDetails&maxResults=50&key=${Oo()}&playlistId=${t.apiId}`;t.isUserPlaylist&&(i+="&mine=true"),t.pageInfo&&(t.pageInfo.nextPage?i+=`&pageToken=${t.pageInfo.nextPage}`:t.pageInfo.prevPage&&(i+=`&pageToken=${t.pageInfo.prevPage}`));const s=await(t.isUserPlaylist?Ba:Ae).get(i).json(),o=s.items?.map(d=>d.contentDetails?.videoId).filter(d=>!!d)||[];return{items:await Wf(o),pageInfo:{totalResults:s.pageInfo?.totalResults||0,resultsPerPage:s.pageInfo?.resultsPerPage||0,offset:t.pageInfo?t.pageInfo.offset:0,nextPage:s.nextPageToken,prevPage:s.prevPageToken}}}async function jf(t){const i=`https://www.googleapis.com/youtube/v3/playlists?part=snippet,contentDetails&mine=true&key=${Oo()}`,n=await Ba.get(i).json();return{items:xx(n),pageInfo:{totalResults:n.pageInfo?.totalResults||0,resultsPerPage:n.pageInfo?.resultsPerPage||0,offset:t.pageInfo?t.pageInfo.offset:0,nextPage:n.nextPageToken,prevPage:n.prevPageToken}}}function Sx(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function r(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)}function v(t,e,i,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i}class U{constructor(e,i){this.node=e,this.visitor=i}run(){}}class Tx extends U{run(){return this.node.elements.map(e=>this.visitor.visitNode(e))}}const Va=(t,e)=>Object.defineProperty(e,"name",{value:t});class bo extends Error{constructor(e,i){super(e),i&&(this.info=i)}}class Cx extends U{run(){const{params:e,body:i}=this.node;return Va("anonymous function",s=>{let o=0;for(const a of e)this.visitor.visitNode(a),a.type==="Identifier"?this.visitor.scope.set(a.name,s[o]):console.warn("Unhandled param type",a.type),o++;return this.visitor.visitNode(i)})}}class Bo extends U{handleMemberExpression(e,i,n){const s=this.visitor.visitNode(e.object),o=this.visitor.visitNode(e.property),a=s[o],l=n(a,i);return s[o]=l}handleIdentifier(e,i,n){const s=this.visitor.visitNode(e),o=n(s,i);return this.visitor.scope.set(e.name,o),this.visitor.scope.get(e.name)}run(){const{operator:e,left:i,right:n}=this.node,s=this.visitor.visitNode(n),o=Bo.operatorMap[e];if(!o){console.warn("Unhandled operator:",e);return}if(i.type==="MemberExpression")return this.handleMemberExpression(i,s,o);if(i.type==="Identifier")return this.handleIdentifier(i,s,o);console.warn("Unhandled left node type:",i.type)}}Bo.operatorMap={"=":(t,e)=>e,"+=":(t,e)=>t+e,"-=":(t,e)=>t-e,"*=":(t,e)=>t*e,"/=":(t,e)=>t/e,"%=":(t,e)=>t%e,"**=":(t,e)=>t**e,"<<=":(t,e)=>t<<e,">>=":(t,e)=>t>>e,">>>=":(t,e)=>t>>>e,"&=":(t,e)=>t&e,"^=":(t,e)=>t^e,"|=":(t,e)=>t|e};class Vo extends U{run(){const{operator:e,left:i,right:n}=this.node,s=this.visitor.visitNode(i),o=this.visitor.visitNode(n),a=Vo.operatorMap[e];if(!a){console.warn("Unhandled binary operator:",e);return}return a(s,o)}}Vo.operatorMap={"!=":(t,e)=>t!=e,"!==":(t,e)=>t!==e,"==":(t,e)=>t==e,"===":(t,e)=>t===e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"**":(t,e)=>t**e,"&":(t,e)=>t&e,"|":(t,e)=>t|e,"^":(t,e)=>t^e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,in:(t,e)=>t in e,instanceof:(t,e)=>t instanceof e};class Ix extends U{run(){for(const e of this.node.body){const i=this.visitor.visitNode(e);if(e.type==="ReturnStatement"||i==="$jintr_break_"||i==="$jintr_continue_"||(e.type==="WhileStatement"||e.type==="IfStatement"||e.type==="ForStatement"||e.type==="TryStatement")&&i)return i}}}class Ex extends U{run(){return"$jintr_break_"}}var ss=function(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)},Ni,zs,Sp;const Tp={forEach:(t,e,i)=>{const n=e;t.length>1&&i.scope.set("_this",t.slice(-1)[0]);let s=0;for(const o of n)t[0]([o,s++,n])},toString:(t,e)=>e.toString()};class Px extends U{constructor(){super(...arguments),Ni.add(this)}run(){let e,i;if(this.node.callee.type==="MemberExpression"?(e=this.visitor.getName(this.node.callee.object),i=this.visitor.getName(this.node.callee.property)):this.node.callee.type==="Identifier"&&(i=this.node.callee.name),e&&this.visitor.listeners[e]){const o=this.visitor.listeners[e](this.node,this.visitor);if(o!=="__continue_exec")return o}if(i&&i!=="toString"&&this.visitor.listeners[i]){const o=this.visitor.listeners[i](this.node,this.visitor);if(o!=="__continue_exec")return o}if(this.node.callee.type==="MemberExpression"){const o=this.visitor.visitNode(this.node.callee.object),a=this.node.callee.computed?this.visitor.visitNode(this.node.callee.property):this.visitor.getName(this.node.callee.property),l=this.node.arguments.map(d=>this.visitor.visitNode(d));return a in Tp?Tp[a](l,o,this.visitor):(o||ss(this,Ni,"m",zs).call(this),typeof o[a]!="function"&&ss(this,Ni,"m",zs).call(this),o[a].toString().includes("[native code]")?o[a](...l):o[a](l))}const n=this.visitor.visitNode(this.node.callee),s=this.node.arguments.map(o=>this.visitor.visitNode(o));return typeof n!="function"&&ss(this,Ni,"m",zs).call(this),n(s)}}Ni=new WeakSet,zs=function(){if(this.node.callee.type==="MemberExpression"||this.node.callee.type==="Identifier"){const e=ss(this,Ni,"m",Sp).call(this,this.node.callee);throw new bo(`${e} is not a function`)}else if(this.node.callee.type==="SequenceExpression"){const e=[],i=[];throw e.push("("),this.node.callee.expressions.forEach(n=>{n.type==="Literal"?i.push(n.raw||""):n.type==="Identifier"?i.push(n.name):n.type==="MemberExpression"&&(n.computed?i.push(`${this.visitor.getName(n.object)}[${this.visitor.getName(n.property)||"..."}]`):i.push(`${this.visitor.getName(n.object)}.${this.visitor.getName(n.property)}`))}),e.push(i.join(", ")),e.push(")"),new bo(`${e.join("")} is not a function`)}},Sp=function t(e){if(e.type==="Identifier")return e.name;if(e.type==="MemberExpression"){const i=ss(this,Ni,"m",t).call(this,e.object),n=e.computed?`[${this.visitor.getName(e.property)||"..."}]`:`.${this.visitor.getName(e.property)}`;return`${i}${n}`}return"<unknown>"};class Rx extends U{run(){const{test:e,consequent:i,alternate:n}=this.node;return this.visitor.visitNode(e)?this.visitor.visitNode(i):this.visitor.visitNode(n)}}class Ax extends U{run(){return"$jintr_continue_"}}class Mx extends U{run(){}}class Dx extends U{run(){return this.visitor.visitNode(this.node.expression)}}class Nx extends U{run(){this.visitor.visitNode(this.node.left);const e=this.visitor.visitNode(this.node.right);for(const i of e){if(this.node.left.type==="VariableDeclaration"&&this.node.left.declarations[0].id.type==="Identifier")this.visitor.scope.set(this.node.left.declarations[0].id.name,i);else if(this.node.left.type==="VariableDeclaration"&&this.node.left.declarations[0].id.type==="ObjectPattern")for(const s of this.node.left.declarations[0].id.properties)s.type==="Property"&&s.value.type==="Identifier"&&s.key.type==="Identifier"&&this.visitor.scope.set(s.value.name,i[s.key.name]);const n=this.visitor.visitNode(this.node.body);if(n==="$jintr_break_")break;if(n!=="$jintr_continue_"&&n&&this.node.body.type!=="ExpressionStatement")return n}}}class Lx extends U{run(){this.node.init&&this.visitor.visitNode(this.node.init);const e=()=>this.node.test?this.visitor.visitNode(this.node.test):!0;for(;e();){const n=this.visitor.visitNode(this.node.body);if(n!=="$jintr_continue_"){if(n==="$jintr_break_")break;if(this.node.update&&this.visitor.visitNode(this.node.update),n&&this.node.body.type!=="ExpressionStatement")return n}}}}class Ox extends U{run(){const{params:e,body:i}=this.node,n=this.visitor.visitNode(this.node.id),s=Va(n,o=>{let a=0;for(const l of e)this.visitor.visitNode(l),l.type==="Identifier"?this.visitor.scope.set(l.name,o[a]):console.warn("Unhandled param type",l.type),a++;return this.visitor.visitNode(i)});this.visitor.scope.set(n,s)}}class Bx extends U{run(){const{params:e,body:i}=this.node;return Va("anonymous function",s=>{let o=0;for(const a of e)this.visitor.visitNode(a),a.type==="Identifier"?this.visitor.scope.set(a.name,s[o]):console.warn("Unhandled param type",a.type),o++;return this.visitor.visitNode(i)})}}class Vx extends U{run(){if(this.visitor.listeners[this.node.name]){const e=this.visitor.listeners[this.node.name](this.node,this.visitor);if(e!=="__continue_exec")return e}return this.visitor.scope.has(this.node.name)?this.visitor.scope.get(this.node.name):this.node.name}}class Ux extends U{run(){if(this.visitor.visitNode(this.node.test))return this.visitor.visitNode(this.node.consequent);if(this.node.alternate)return this.visitor.visitNode(this.node.alternate)}}class Fx extends U{run(){return this.node.value}}class Uo extends U{run(){const{operator:e,left:i,right:n}=this.node,s=Uo.operatorMap[e];if(!s){console.warn("Unhandled logical operator:",e);return}return s(this.visitor,i,n)}}Uo.operatorMap={"&&":(t,e,i)=>{const n=t.visitNode(e);return n===!0?t.visitNode(i):n},"||":(t,e,i)=>t.visitNode(e)||t.visitNode(i),"??":(t,e,i)=>{const n=(a,l)=>l&&a==="undefined"?void 0:a,s=n(t.visitNode(e),e.type==="Identifier"),o=n(t.visitNode(i),i.type==="Identifier");return s??o}};class Hx extends U{run(){const{object:e,property:i,computed:n}=this.node,s=this.visitor.visitNode(e),o=n?this.visitor.visitNode(i):this.visitor.getName(i);if(o!==void 0||o!==null){if(this.visitor.listeners[o]){const a=this.visitor.listeners[o](this.node,this.visitor);if(a!=="__continue_exec")return a}return s?.[o]}}}class Wx extends U{run(){const e=this.visitor.visitNode(this.node.callee),i=this.node.arguments.map(n=>this.visitor.visitNode(n));return i.length?new e(i):new e}}class jx extends U{run(){let e={};for(const i of this.node.properties)if(i.type==="Property")e={...e,...this.visitor.visitNode(i)};else throw new Error(`Unhandled property type: ${i.type}`);return e}}var Yr=function(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)},On,Gf,qf,$f;class Gx extends U{constructor(){super(...arguments),On.add(this)}run(){switch(this.node.kind){case"init":return Yr(this,On,"m",Gf).call(this);case"get":return Yr(this,On,"m",qf).call(this);case"set":return Yr(this,On,"m",$f).call(this);default:throw new Error(`Unhandled property kind: ${this.node.kind}`)}}}On=new WeakSet,Gf=function(){const e=this.node.computed?this.visitor.visitNode(this.node.key):this.visitor.getName(this.node.key),i=this.visitor.visitNode(this.node.value);if(e)return{[e]:i}},qf=function(){throw new TypeError("Not implemented: Property.get")},$f=function(){throw new TypeError("Not implemented: Property.set")};class qx extends U{run(){if(this.node.argument)return this.visitor.visitNode(this.node.argument)}}class $x extends U{run(){let e;for(const i of this.node.expressions)e=this.visitor.visitNode(i);return e}}class Kx extends U{run(){for(const e of this.node.consequent){const i=this.visitor.visitNode(e);if(e.type==="ContinueStatement"||e.type==="BreakStatement")return i}}}class Yx extends U{run(){const e=this.visitor.visitNode(this.node.discriminant);let i=!1,n=-1,s=0;for(;;){const o=this.node.cases[s];if(i){const a=this.visitor.visitNode(o);if(a==="$jintr_break_")break;if(a==="$jintr_continue_")return a;if(++s,s>=this.node.cases.length){s=0;break}else continue}if(i=o&&e===this.visitor.visitNode(o.test),i===void 0&&s>this.node.cases.length)break;if(o&&!i&&!o.test){n=s,s+=1;continue}if(!o&&!i&&n!==-1){i=!0,s=n;continue}i||++s}}}class zx extends U{run(){let e="";for(let i=0;i<this.node.quasis.length;++i){const n=this.node.quasis[i];if(n.type==="TemplateElement"){if(n.value.cooked===null)throw new Error(`Invalid template literal: ${n.value.raw}`);if(n.value.cooked!==void 0&&(e+=n.value.cooked),!n.tail){const s=this.node.expressions[i];if(s!==void 0)e+=this.visitor.visitNode(s);else throw new Error(`Expected expression after: ${n.value}`)}}else throw new Error(`Unhandled quasi type: ${n.type}`)}return e}}class Xx extends U{run(){return this.visitor.scope.get("_this")}}class Qx extends U{run(){throw this.visitor.visitNode(this.node.argument)}}class Jx extends U{run(){try{return this.visitor.visitNode(this.node.block)}catch(e){if(this.node.handler)return this.node.handler.param&&this.node.handler.param.type==="Identifier"&&this.visitor.scope.set(this.node.handler.param.name,e),this.visitor.visitNode(this.node.handler.body)}finally{this.visitor.visitNode(this.node.finalizer)}}}class _n extends U{static isValidOperator(e){return e in _n.operatorMap}run(){const{operator:e,argument:i}=this.node;if(!_n.isValidOperator(e)){console.warn("Unhandled unary operator:",e);return}return _n.operatorMap[e](this.visitor,i)}}_n.operatorMap={"-":(t,e)=>-t.visitNode(e),"+":(t,e)=>+t.visitNode(e),"!":(t,e)=>!t.visitNode(e),"~":(t,e)=>~t.visitNode(e),void:(t,e)=>{t.visitNode(e)},typeof:(t,e)=>{const i=t.visitNode(e);return e.type==="Identifier"&&i==="undefined"?"undefined":typeof t.visitNode(e)},delete:(t,e)=>{if(e.type==="MemberExpression"){const i=t.visitNode(e.object),n=e.computed?t.visitNode(e.property):t.getName(e.property);return delete i[n]}return e.type==="Identifier"&&t.scope.has(e.name)?t.scope.delete(e.name):!0}};class Zx extends U{run(){switch(this.node.operator){case"++":if(this.node.argument.type==="MemberExpression"){const i=this.visitor.visitNode(this.node.argument.object);return i[this.visitor.visitNode(this.node.argument.property)]++}else if(this.node.argument.type==="Identifier"){let i=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,i+1),this.node.prefix?++i:i}break;case"--":if(this.node.argument.type==="MemberExpression"){const i=this.visitor.visitNode(this.node.argument.object);return i[this.visitor.visitNode(this.node.argument.property)]--}else if(this.node.argument.type==="Identifier"){let i=this.visitor.visitNode(this.node.argument);return this.visitor.scope.set(this.node.argument.name,i-1),this.node.prefix?--i:i}break}}}class ev extends U{run(){this.node.declarations.forEach(e=>{const{id:i,init:n}=e,s=this.visitor.getName(i),o=n?this.visitor.visitNode(n):void 0;s&&this.visitor.scope.set(s,o),typeof o=="object"&&o!==null&&this.visitor.scope.set("_this",o)})}}class tv extends U{run(){for(;this.visitor.visitNode(this.node.test);){const e=this.visitor.visitNode(this.node.body);if(e==="$jintr_break_")break;if(e!=="$jintr_continue_"&&e)return e}}}const iv=Object.freeze(Object.defineProperty({__proto__:null,ArrayExpression:Tx,ArrowFunctionExpression:Cx,AssignmentExpression:Bo,BinaryExpression:Vo,BlockStatement:Ix,BreakStatement:Ex,CallExpression:Px,ConditionalExpression:Rx,ContinueStatement:Ax,EmptyStatement:Mx,ExpressionStatement:Dx,ForOfStatement:Nx,ForStatement:Lx,FunctionDeclaration:Ox,FunctionExpression:Bx,Identifier:Vx,IfStatement:Ux,Literal:Fx,LogicalExpression:Uo,MemberExpression:Hx,NewExpression:Wx,ObjectExpression:jx,Property:Gx,ReturnStatement:qx,SequenceExpression:$x,SwitchCase:Kx,SwitchStatement:Yx,TemplateLiteral:zx,ThisExpression:Xx,ThrowStatement:Qx,TryStatement:Jx,UnaryExpression:_n,UpdateExpression:Zx,VariableDeclaration:ev,WhileStatement:tv},Symbol.toStringTag,{value:"Module"}));var nv=function(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)},la,Kf;class sv{constructor(){la.add(this),this.scope=new Map,this.listeners={},this.ast=[]}setAST(e){this.ast=e}run(){let e;for(const i of this.ast)e=this.visitNode(i);return e}visitNode(e){if(!e)return null;const i=nv(this,la,"m",Kf).call(this,e.type);return i?new i(e,this).run():null}getName(e){if(e.type==="Identifier")return e.name;if(e.type==="Literal")return e.value}on(e,i){this.listeners[e]=i}}la=new WeakSet,Kf=function(e){const i=iv[e];return i||console.warn("[JINTER]:",`JavaScript node "${e}" not implemented!
If this is causing unexpected behavior, please report it at https://github.com/LuanRT/Jinter/issues/new`),i};var ov=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],Yf=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],rv="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",zf="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",zr={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Xr="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",av={5:Xr,"5module":Xr+" export import",6:Xr+" const class extends export import super"},cv=/^in(stanceof)?$/,uv=new RegExp("["+zf+"]"),lv=new RegExp("["+zf+rv+"]");function ha(t,e){for(var i=65536,n=0;n<e.length;n+=2){if(i+=e[n],i>t)return!1;if(i+=e[n+1],i>=t)return!0}return!1}function xt(t,e){return t<65?t===36:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&uv.test(String.fromCharCode(t)):e===!1?!1:ha(t,Yf)}function ci(t,e){return t<48?t===36:t<58?!0:t<65?!1:t<91?!0:t<97?t===95:t<123?!0:t<=65535?t>=170&&lv.test(String.fromCharCode(t)):e===!1?!1:ha(t,Yf)||ha(t,ov)}var F=function(e,i){i===void 0&&(i={}),this.label=e,this.keyword=i.keyword,this.beforeExpr=!!i.beforeExpr,this.startsExpr=!!i.startsExpr,this.isLoop=!!i.isLoop,this.isAssign=!!i.isAssign,this.prefix=!!i.prefix,this.postfix=!!i.postfix,this.binop=i.binop||null,this.updateContext=null};function Ge(t,e){return new F(t,{beforeExpr:!0,binop:e})}var qe={beforeExpr:!0},De={startsExpr:!0},Ua={};function B(t,e){return e===void 0&&(e={}),e.keyword=t,Ua[t]=new F(t,e)}var p={num:new F("num",De),regexp:new F("regexp",De),string:new F("string",De),name:new F("name",De),privateId:new F("privateId",De),eof:new F("eof"),bracketL:new F("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new F("]"),braceL:new F("{",{beforeExpr:!0,startsExpr:!0}),braceR:new F("}"),parenL:new F("(",{beforeExpr:!0,startsExpr:!0}),parenR:new F(")"),comma:new F(",",qe),semi:new F(";",qe),colon:new F(":",qe),dot:new F("."),question:new F("?",qe),questionDot:new F("?."),arrow:new F("=>",qe),template:new F("template"),invalidTemplate:new F("invalidTemplate"),ellipsis:new F("...",qe),backQuote:new F("`",De),dollarBraceL:new F("${",{beforeExpr:!0,startsExpr:!0}),eq:new F("=",{beforeExpr:!0,isAssign:!0}),assign:new F("_=",{beforeExpr:!0,isAssign:!0}),incDec:new F("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new F("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ge("||",1),logicalAND:Ge("&&",2),bitwiseOR:Ge("|",3),bitwiseXOR:Ge("^",4),bitwiseAND:Ge("&",5),equality:Ge("==/!=/===/!==",6),relational:Ge("</>/<=/>=",7),bitShift:Ge("<</>>/>>>",8),plusMin:new F("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ge("%",10),star:Ge("*",10),slash:Ge("/",10),starstar:new F("**",{beforeExpr:!0}),coalesce:Ge("??",1),_break:B("break"),_case:B("case",qe),_catch:B("catch"),_continue:B("continue"),_debugger:B("debugger"),_default:B("default",qe),_do:B("do",{isLoop:!0,beforeExpr:!0}),_else:B("else",qe),_finally:B("finally"),_for:B("for",{isLoop:!0}),_function:B("function",De),_if:B("if"),_return:B("return",qe),_switch:B("switch"),_throw:B("throw",qe),_try:B("try"),_var:B("var"),_const:B("const"),_while:B("while",{isLoop:!0}),_with:B("with"),_new:B("new",{beforeExpr:!0,startsExpr:!0}),_this:B("this",De),_super:B("super",De),_class:B("class",De),_extends:B("extends",qe),_export:B("export"),_import:B("import",De),_null:B("null",De),_true:B("true",De),_false:B("false",De),_in:B("in",{beforeExpr:!0,binop:7}),_instanceof:B("instanceof",{beforeExpr:!0,binop:7}),_typeof:B("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:B("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:B("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Be=/\r\n?|\n|\u2028|\u2029/,hv=new RegExp(Be.source,"g");function kn(t){return t===10||t===13||t===8232||t===8233}function Xf(t,e,i){i===void 0&&(i=t.length);for(var n=e;n<i;n++){var s=t.charCodeAt(n);if(kn(s))return n<i-1&&s===13&&t.charCodeAt(n+1)===10?n+2:n+1}return-1}var Qf=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Se=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Jf=Object.prototype,pv=Jf.hasOwnProperty,dv=Jf.toString,Sn=Object.hasOwn||(function(t,e){return pv.call(t,e)}),Cp=Array.isArray||(function(t){return dv.call(t)==="[object Array]"}),Ip=Object.create(null);function ni(t){return Ip[t]||(Ip[t]=new RegExp("^(?:"+t.replace(/ /g,"|")+")$"))}function Ut(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}var fv=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,ls=function(e,i){this.line=e,this.column=i};ls.prototype.offset=function(e){return new ls(this.line,this.column+e)};var Fo=function(e,i,n){this.start=i,this.end=n,e.sourceFile!==null&&(this.source=e.sourceFile)};function Zf(t,e){for(var i=1,n=0;;){var s=Xf(t,n,e);if(s<0)return new ls(i,e-n);++i,n=s}}var pa={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ep=!1;function mv(t){var e={};for(var i in pa)e[i]=t&&Sn(t,i)?t[i]:pa[i];if(e.ecmaVersion==="latest"?e.ecmaVersion=1e8:e.ecmaVersion==null?(!Ep&&typeof console=="object"&&console.warn&&(Ep=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),e.allowReserved==null&&(e.allowReserved=e.ecmaVersion<5),(!t||t.allowHashBang==null)&&(e.allowHashBang=e.ecmaVersion>=14),Cp(e.onToken)){var n=e.onToken;e.onToken=function(s){return n.push(s)}}return Cp(e.onComment)&&(e.onComment=_v(e,e.onComment)),e}function _v(t,e){return function(i,n,s,o,a,l){var d={type:i?"Block":"Line",value:n,start:s,end:o};t.locations&&(d.loc=new Fo(this,a,l)),t.ranges&&(d.range=[s,o]),e.push(d)}}var hs=1,Tn=2,Fa=4,em=8,Ha=16,tm=32,Ho=64,im=128,$i=256,vs=512,Wo=hs|Tn|$i;function Wa(t,e){return Tn|(t?Fa:0)|(e?em:0)}var yo=0,ja=1,Wt=2,nm=3,sm=4,om=5,ue=function(e,i,n){this.options=e=mv(e),this.sourceFile=e.sourceFile,this.keywords=ni(av[e.ecmaVersion>=6?6:e.sourceType==="module"?"5module":5]);var s="";e.allowReserved!==!0&&(s=zr[e.ecmaVersion>=6?6:e.ecmaVersion===5?5:3],e.sourceType==="module"&&(s+=" await")),this.reservedWords=ni(s);var o=(s?s+" ":"")+zr.strict;this.reservedWordsStrict=ni(o),this.reservedWordsStrictBind=ni(o+" "+zr.strictBind),this.input=String(i),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf(`
`,n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Be).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=p.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(hs),this.regexpState=null,this.privateNameStack=[]},Ct={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ue.prototype.parse=function(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};Ct.inFunction.get=function(){return(this.currentVarScope().flags&Tn)>0};Ct.inGenerator.get=function(){return(this.currentVarScope().flags&em)>0};Ct.inAsync.get=function(){return(this.currentVarScope().flags&Fa)>0};Ct.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t],i=e.flags;if(i&($i|vs))return!1;if(i&Tn)return(i&Fa)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Ct.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags;return(e&Ho)>0||this.options.allowSuperOutsideMethod};Ct.allowDirectSuper.get=function(){return(this.currentThisScope().flags&im)>0};Ct.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Ct.allowNewDotTarget.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t],i=e.flags;if(i&($i|vs)||i&Tn&&!(i&Ha))return!0}return!1};Ct.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&$i)>0};ue.extend=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];for(var n=this,s=0;s<e.length;s++)n=e[s](n);return n};ue.parse=function(e,i){return new this(i,e).parse()};ue.parseExpressionAt=function(e,i,n){var s=new this(n,e,i);return s.nextToken(),s.parseExpression()};ue.tokenizer=function(e,i){return new this(i,e)};Object.defineProperties(ue.prototype,Ct);var Me=ue.prototype,bv=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;Me.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){Se.lastIndex=t,t+=Se.exec(this.input)[0].length;var e=bv.exec(this.input.slice(t));if(!e)return!1;if((e[1]||e[2])==="use strict"){Se.lastIndex=t+e[0].length;var i=Se.exec(this.input),n=i.index+i[0].length,s=this.input.charAt(n);return s===";"||s==="}"||Be.test(i[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(s)||s==="!"&&this.input.charAt(n+1)==="=")}t+=e[0].length,Se.lastIndex=t,t+=Se.exec(this.input)[0].length,this.input[t]===";"&&t++}};Me.eat=function(t){return this.type===t?(this.next(),!0):!1};Me.isContextual=function(t){return this.type===p.name&&this.value===t&&!this.containsEsc};Me.eatContextual=function(t){return this.isContextual(t)?(this.next(),!0):!1};Me.expectContextual=function(t){this.eatContextual(t)||this.unexpected()};Me.canInsertSemicolon=function(){return this.type===p.eof||this.type===p.braceR||Be.test(this.input.slice(this.lastTokEnd,this.start))};Me.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Me.semicolon=function(){!this.eat(p.semi)&&!this.insertSemicolon()&&this.unexpected()};Me.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0};Me.expect=function(t){this.eat(t)||this.unexpected()};Me.unexpected=function(t){this.raise(t??this.start,"Unexpected token")};var jo=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Me.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,e?"Assigning to rvalue":"Parenthesized pattern")}};Me.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")};Me.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Me.isSimpleAssignTarget=function(t){return t.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(t.expression):t.type==="Identifier"||t.type==="MemberExpression"};var A=ue.prototype;A.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==p.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,s=Object.keys(this.undefinedExports);n<s.length;n+=1){var o=s[n];this.raiseRecoverable(this.undefinedExports[o].start,"Export '"+o+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var Ga={kind:"loop"},yv={kind:"switch"};A.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Se.lastIndex=this.pos;var e=Se.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(n===91||n===92)return!0;if(t)return!1;if(n===123||n>55295&&n<56320)return!0;if(xt(n,!0)){for(var s=i+1;ci(n=this.input.charCodeAt(s),!0);)++s;if(n===92||n>55295&&n<56320)return!0;var o=this.input.slice(i,s);if(!cv.test(o))return!0}return!1};A.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Se.lastIndex=this.pos;var t=Se.exec(this.input),e=this.pos+t[0].length,i;return!Be.test(this.input.slice(this.pos,e))&&this.input.slice(e,e+8)==="function"&&(e+8===this.input.length||!(ci(i=this.input.charCodeAt(e+8))||i>55295&&i<56320))};A.isUsingKeyword=function(t,e){if(this.options.ecmaVersion<17||!this.isContextual(t?"await":"using"))return!1;Se.lastIndex=this.pos;var i=Se.exec(this.input),n=this.pos+i[0].length;if(Be.test(this.input.slice(this.pos,n)))return!1;if(t){var s=n+5,o;if(this.input.slice(n,s)!=="using"||s===this.input.length||ci(o=this.input.charCodeAt(s))||o>55295&&o<56320)return!1;Se.lastIndex=s;var a=Se.exec(this.input);if(a&&Be.test(this.input.slice(s,s+a[0].length)))return!1}if(e){var l=n+2,d;if(this.input.slice(n,l)==="of"&&(l===this.input.length||!ci(d=this.input.charCodeAt(l))&&!(d>55295&&d<56320)))return!1}var _=this.input.charCodeAt(n);return xt(_,!0)||_===92};A.isAwaitUsing=function(t){return this.isUsingKeyword(!0,t)};A.isUsing=function(t){return this.isUsingKeyword(!1,t)};A.parseStatement=function(t,e,i){var n=this.type,s=this.startNode(),o;switch(this.isLet(t)&&(n=p._var,o="let"),n){case p._break:case p._continue:return this.parseBreakContinueStatement(s,n.keyword);case p._debugger:return this.parseDebuggerStatement(s);case p._do:return this.parseDoStatement(s);case p._for:return this.parseForStatement(s);case p._function:return t&&(this.strict||t!=="if"&&t!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case p._class:return t&&this.unexpected(),this.parseClass(s,!0);case p._if:return this.parseIfStatement(s);case p._return:return this.parseReturnStatement(s);case p._switch:return this.parseSwitchStatement(s);case p._throw:return this.parseThrowStatement(s);case p._try:return this.parseTryStatement(s);case p._const:case p._var:return o=o||this.value,t&&o!=="var"&&this.unexpected(),this.parseVarStatement(s,o);case p._while:return this.parseWhileStatement(s);case p._with:return this.parseWithStatement(s);case p.braceL:return this.parseBlock(!0,s);case p.semi:return this.parseEmptyStatement(s);case p._export:case p._import:if(this.options.ecmaVersion>10&&n===p._import){Se.lastIndex=this.pos;var a=Se.exec(this.input),l=this.pos+a[0].length,d=this.input.charCodeAt(l);if(d===40||d===46)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===p._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var _=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(_)return e&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),_==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(s,!1,_),this.semicolon(),this.finishNode(s,"VariableDeclaration");var b=this.value,k=this.parseExpression();return n===p.name&&k.type==="Identifier"&&this.eat(p.colon)?this.parseLabeledStatement(s,b,k,t):this.parseExpressionStatement(s,k)}};A.parseBreakContinueStatement=function(t,e){var i=e==="break";this.next(),this.eat(p.semi)||this.insertSemicolon()?t.label=null:this.type!==p.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var s=this.labels[n];if((t.label==null||s.name===t.label.name)&&(s.kind!=null&&(i||s.kind==="loop")||t.label&&i))break}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")};A.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")};A.parseDoStatement=function(t){return this.next(),this.labels.push(Ga),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(p._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(p.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")};A.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Ga),this.enterScope(0),this.expect(p.parenL),this.type===p.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===p._var||this.type===p._const||i){var n=this.startNode(),s=i?"let":this.value;return this.next(),this.parseVar(n,!0,s),this.finishNode(n,"VariableDeclaration"),this.parseForAfterInit(t,n,e)}var o=this.isContextual("let"),a=!1,l=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(l){var d=this.startNode();return this.next(),l==="await using"&&this.next(),this.parseVar(d,!0,l),this.finishNode(d,"VariableDeclaration"),this.parseForAfterInit(t,d,e)}var _=this.containsEsc,b=new jo,k=this.start,x=e>-1?this.parseExprSubscripts(b,"await"):this.parseExpression(!0,b);return this.type===p._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(e>-1?(this.type===p._in&&this.unexpected(e),t.await=!0):a&&this.options.ecmaVersion>=8&&(x.start===k&&!_&&x.type==="Identifier"&&x.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(t.await=!1)),o&&a&&this.raise(x.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(x,!1,b),this.checkLValPattern(x),this.parseForIn(t,x)):(this.checkExpressionErrors(b,!0),e>-1&&this.unexpected(e),this.parseFor(t,x))};A.parseForAfterInit=function(t,e,i){return(this.type===p._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&e.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===p._in?i>-1&&this.unexpected(i):t.await=i>-1),this.parseForIn(t,e)):(i>-1&&this.unexpected(i),this.parseFor(t,e))};A.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,os|(i?0:da),!1,e)};A.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(p._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")};A.parseReturnStatement=function(t){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(p.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")};A.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(p.braceL),this.labels.push(yv),this.enterScope(0);for(var e,i=!1;this.type!==p.braceR;)if(this.type===p._case||this.type===p._default){var n=this.type===p._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(p.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")};A.parseThrowStatement=function(t){return this.next(),Be.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var gv=[];A.parseCatchClauseParam=function(){var t=this.parseBindingAtom(),e=t.type==="Identifier";return this.enterScope(e?tm:0),this.checkLValPattern(t,e?sm:Wt),this.expect(p.parenR),t};A.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===p._catch){var e=this.startNode();this.next(),this.eat(p.parenL)?e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0)),e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(p._finally)?this.parseBlock():null,!t.handler&&!t.finalizer&&this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")};A.parseVarStatement=function(t,e,i){return this.next(),this.parseVar(t,!1,e,i),this.semicolon(),this.finishNode(t,"VariableDeclaration")};A.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(Ga),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")};A.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")};A.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")};A.parseLabeledStatement=function(t,e,i,n){for(var s=0,o=this.labels;s<o.length;s+=1){var a=o[s];a.name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var l=this.type.isLoop?"loop":this.type===p._switch?"switch":null,d=this.labels.length-1;d>=0;d--){var _=this.labels[d];if(_.statementStart===t.start)_.statementStart=this.start,_.kind=l;else break}return this.labels.push({name:e,kind:l,statementStart:this.start}),t.body=this.parseStatement(n?n.indexOf("label")===-1?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")};A.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")};A.parseBlock=function(t,e,i){for(t===void 0&&(t=!0),e===void 0&&(e=this.startNode()),e.body=[],this.expect(p.braceL),t&&this.enterScope(0);this.type!==p.braceR;){var n=this.parseStatement(null);e.body.push(n)}return i&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")};A.parseFor=function(t,e){return t.init=e,this.expect(p.semi),t.test=this.type===p.semi?null:this.parseExpression(),this.expect(p.semi),t.update=this.type===p.parenR?null:this.parseExpression(),this.expect(p.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")};A.parseForIn=function(t,e){var i=this.type===p._in;return this.next(),e.type==="VariableDeclaration"&&e.declarations[0].init!=null&&(!i||this.options.ecmaVersion<8||this.strict||e.kind!=="var"||e.declarations[0].id.type!=="Identifier")&&this.raise(e.start,(i?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=i?this.parseExpression():this.parseMaybeAssign(),this.expect(p.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i?"ForInStatement":"ForOfStatement")};A.parseVar=function(t,e,i,n){for(t.declarations=[],t.kind=i;;){var s=this.startNode();if(this.parseVarId(s,i),this.eat(p.eq)?s.init=this.parseMaybeAssign(e):!n&&i==="const"&&!(this.type===p._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!n&&(i==="using"||i==="await using")&&this.options.ecmaVersion>=17&&this.type!==p._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+i+" declaration"):!n&&s.id.type!=="Identifier"&&!(e&&(this.type===p._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):s.init=null,t.declarations.push(this.finishNode(s,"VariableDeclarator")),!this.eat(p.comma))break}return t};A.parseVarId=function(t,e){t.id=e==="using"||e==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(t.id,e==="var"?ja:Wt,!1)};var os=1,da=2,rm=4;A.parseFunction=function(t,e,i,n,s){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===p.star&&e&da&&this.unexpected(),t.generator=this.eat(p.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&os&&(t.id=e&rm&&this.type!==p.name?null:this.parseIdent(),t.id&&!(e&da)&&this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?ja:Wt:nm));var o=this.yieldPos,a=this.awaitPos,l=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Wa(t.async,t.generator)),e&os||(t.id=this.type===p.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1,s),this.yieldPos=o,this.awaitPos=a,this.awaitIdentPos=l,this.finishNode(t,e&os?"FunctionDeclaration":"FunctionExpression")};A.parseFunctionParams=function(t){this.expect(p.parenL),t.params=this.parseBindingList(p.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};A.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.enterClassBody(),s=this.startNode(),o=!1;for(s.body=[],this.expect(p.braceL);this.type!==p.braceR;){var a=this.parseClassElement(t.superClass!==null);a&&(s.body.push(a),a.type==="MethodDefinition"&&a.kind==="constructor"?(o&&this.raiseRecoverable(a.start,"Duplicate constructor in the same class"),o=!0):a.key&&a.key.type==="PrivateIdentifier"&&wv(n,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=i,this.next(),t.body=this.finishNode(s,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")};A.parseClassElement=function(t){if(this.eat(p.semi))return null;var e=this.options.ecmaVersion,i=this.startNode(),n="",s=!1,o=!1,a="method",l=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(p.braceL))return this.parseClassStaticBlock(i),i;this.isClassElementNameStart()||this.type===p.star?l=!0:n="static"}if(i.static=l,!n&&e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===p.star)&&!this.canInsertSemicolon()?o=!0:n="async"),!n&&(e>=9||!o)&&this.eat(p.star)&&(s=!0),!n&&!o&&!s){var d=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=d:n=d)}if(n?(i.computed=!1,i.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),i.key.name=n,this.finishNode(i.key,"Identifier")):this.parseClassElementName(i),e<13||this.type===p.parenL||a!=="method"||s||o){var _=!i.static&&go(i,"constructor"),b=_&&t;_&&a!=="method"&&this.raise(i.key.start,"Constructor can't have get/set modifier"),i.kind=_?"constructor":a,this.parseClassMethod(i,s,o,b)}else this.parseClassField(i);return i};A.isClassElementNameStart=function(){return this.type===p.name||this.type===p.privateId||this.type===p.num||this.type===p.string||this.type===p.bracketL||this.type.keyword};A.parseClassElementName=function(t){this.type===p.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)};A.parseClassMethod=function(t,e,i,n){var s=t.key;t.kind==="constructor"?(e&&this.raise(s.start,"Constructor can't be a generator"),i&&this.raise(s.start,"Constructor can't be an async method")):t.static&&go(t,"prototype")&&this.raise(s.start,"Classes may not have a static property named prototype");var o=t.value=this.parseMethod(e,i,n);return t.kind==="get"&&o.params.length!==0&&this.raiseRecoverable(o.start,"getter should have no params"),t.kind==="set"&&o.params.length!==1&&this.raiseRecoverable(o.start,"setter should have exactly one param"),t.kind==="set"&&o.params[0].type==="RestElement"&&this.raiseRecoverable(o.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")};A.parseClassField=function(t){return go(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&go(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(p.eq)?(this.enterScope(vs|Ho),t.value=this.parseMaybeAssign(),this.exitScope()):t.value=null,this.semicolon(),this.finishNode(t,"PropertyDefinition")};A.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope($i|Ho);this.type!==p.braceR;){var i=this.parseStatement(null);t.body.push(i)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")};A.parseClassId=function(t,e){this.type===p.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,Wt,!1)):(e===!0&&this.unexpected(),t.id=null)};A.parseClassSuper=function(t){t.superClass=this.eat(p._extends)?this.parseExprSubscripts(null,!1):null};A.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared};A.exitClassBody=function(){var t=this.privateNameStack.pop(),e=t.declared,i=t.used;if(this.options.checkPrivateFields)for(var n=this.privateNameStack.length,s=n===0?null:this.privateNameStack[n-1],o=0;o<i.length;++o){var a=i[o];Sn(e,a.name)||(s?s.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}};function wv(t,e){var i=e.key.name,n=t[i],s="true";return e.type==="MethodDefinition"&&(e.kind==="get"||e.kind==="set")&&(s=(e.static?"s":"i")+e.kind),n==="iget"&&s==="iset"||n==="iset"&&s==="iget"||n==="sget"&&s==="sset"||n==="sset"&&s==="sget"?(t[i]="true",!1):n?!0:(t[i]=s,!1)}function go(t,e){var i=t.computed,n=t.key;return!i&&(n.type==="Identifier"&&n.name===e||n.type==="Literal"&&n.value===e)}A.parseExportAllDeclaration=function(t,e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==p.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ExportAllDeclaration")};A.parseExport=function(t,e){if(this.next(),this.eat(p.star))return this.parseExportAllDeclaration(t,e);if(this.eat(p._default))return this.checkExport(e,"default",this.lastTokStart),t.declaration=this.parseExportDefaultDeclaration(),this.finishNode(t,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())t.declaration=this.parseExportDeclaration(t),t.declaration.type==="VariableDeclaration"?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null,this.options.ecmaVersion>=16&&(t.attributes=[]);else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==p.string&&this.unexpected(),t.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause());else{for(var i=0,n=t.specifiers;i<n.length;i+=1){var s=n[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local),s.local.type==="Literal"&&this.raise(s.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null,this.options.ecmaVersion>=16&&(t.attributes=[])}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")};A.parseExportDeclaration=function(t){return this.parseStatement(null)};A.parseExportDefaultDeclaration=function(){var t;if(this.type===p._function||(t=this.isAsyncFunction())){var e=this.startNode();return this.next(),t&&this.next(),this.parseFunction(e,os|rm,!1,t)}else if(this.type===p._class){var i=this.startNode();return this.parseClass(i,"nullableID")}else{var n=this.parseMaybeAssign();return this.semicolon(),n}};A.checkExport=function(t,e,i){t&&(typeof e!="string"&&(e=e.type==="Identifier"?e.name:e.value),Sn(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)};A.checkPatternExport=function(t,e){var i=e.type;if(i==="Identifier")this.checkExport(t,e,e.start);else if(i==="ObjectPattern")for(var n=0,s=e.properties;n<s.length;n+=1){var o=s[n];this.checkPatternExport(t,o)}else if(i==="ArrayPattern")for(var a=0,l=e.elements;a<l.length;a+=1){var d=l[a];d&&this.checkPatternExport(t,d)}else i==="Property"?this.checkPatternExport(t,e.value):i==="AssignmentPattern"?this.checkPatternExport(t,e.left):i==="RestElement"&&this.checkPatternExport(t,e.argument)};A.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1){var s=n[i];this.checkPatternExport(t,s.id)}};A.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};A.parseExportSpecifier=function(t){var e=this.startNode();return e.local=this.parseModuleExportName(),e.exported=this.eatContextual("as")?this.parseModuleExportName():e.local,this.checkExport(t,e.exported,e.exported.start),this.finishNode(e,"ExportSpecifier")};A.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(p.braceL);!this.eat(p.braceR);){if(i)i=!1;else if(this.expect(p.comma),this.afterTrailingComma(p.braceR))break;e.push(this.parseExportSpecifier(t))}return e};A.parseImport=function(t){return this.next(),this.type===p.string?(t.specifiers=gv,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===p.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(t.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(t,"ImportDeclaration")};A.parseImportSpecifier=function(){var t=this.startNode();return t.imported=this.parseModuleExportName(),this.eatContextual("as")?t.local=this.parseIdent():(this.checkUnreserved(t.imported),t.local=t.imported),this.checkLValSimple(t.local,Wt),this.finishNode(t,"ImportSpecifier")};A.parseImportDefaultSpecifier=function(){var t=this.startNode();return t.local=this.parseIdent(),this.checkLValSimple(t.local,Wt),this.finishNode(t,"ImportDefaultSpecifier")};A.parseImportNamespaceSpecifier=function(){var t=this.startNode();return this.next(),this.expectContextual("as"),t.local=this.parseIdent(),this.checkLValSimple(t.local,Wt),this.finishNode(t,"ImportNamespaceSpecifier")};A.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===p.name&&(t.push(this.parseImportDefaultSpecifier()),!this.eat(p.comma)))return t;if(this.type===p.star)return t.push(this.parseImportNamespaceSpecifier()),t;for(this.expect(p.braceL);!this.eat(p.braceR);){if(e)e=!1;else if(this.expect(p.comma),this.afterTrailingComma(p.braceR))break;t.push(this.parseImportSpecifier())}return t};A.parseWithClause=function(){var t=[];if(!this.eat(p._with))return t;this.expect(p.braceL);for(var e={},i=!0;!this.eat(p.braceR);){if(i)i=!1;else if(this.expect(p.comma),this.afterTrailingComma(p.braceR))break;var n=this.parseImportAttribute(),s=n.key.type==="Identifier"?n.key.name:n.key.value;Sn(e,s)&&this.raiseRecoverable(n.key.start,"Duplicate attribute key '"+s+"'"),e[s]=!0,t.push(n)}return t};A.parseImportAttribute=function(){var t=this.startNode();return t.key=this.type===p.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(p.colon),this.type!==p.string&&this.unexpected(),t.value=this.parseExprAtom(),this.finishNode(t,"ImportAttribute")};A.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===p.string){var t=this.parseLiteral(this.value);return fv.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)};A.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)};A.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&t.type==="ExpressionStatement"&&t.expression.type==="Literal"&&typeof t.expression.value=="string"&&(this.input[t.start]==='"'||this.input[t.start]==="'")};var ze=ue.prototype;ze.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&t.name==="await"&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,s=t.properties;n<s.length;n+=1){var o=s[n];this.toAssignable(o,e),o.type==="RestElement"&&(o.argument.type==="ArrayPattern"||o.argument.type==="ObjectPattern")&&this.raise(o.argument.start,"Unexpected token")}break;case"Property":t.kind!=="init"&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),t.argument.type==="AssignmentPattern"&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":t.operator!=="="&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t};ze.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var s=t[n];s&&this.toAssignable(s,e)}if(i){var o=t[i-1];this.options.ecmaVersion===6&&e&&o&&o.type==="RestElement"&&o.argument.type!=="Identifier"&&this.unexpected(o.argument.start)}return t};ze.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")};ze.parseRestBinding=function(){var t=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==p.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")};ze.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case p.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(p.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case p.braceL:return this.parseObj(!0)}return this.parseIdent()};ze.parseBindingList=function(t,e,i,n){for(var s=[],o=!0;!this.eat(t);)if(o?o=!1:this.expect(p.comma),e&&this.type===p.comma)s.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===p.ellipsis){var a=this.parseRestBinding();this.parseBindingListItem(a),s.push(a),this.type===p.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}else s.push(this.parseAssignableListItem(n))}return s};ze.parseAssignableListItem=function(t){var e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(e),e};ze.parseBindingListItem=function(t){return t};ze.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(p.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")};ze.checkLValSimple=function(t,e,i){e===void 0&&(e=yo);var n=e!==yo;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(n?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(e===Wt&&t.name==="let"&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),i&&(Sn(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e!==om&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":n&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return n&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,i);default:this.raise(t.start,(n?"Binding":"Assigning to")+" rvalue")}};ze.checkLValPattern=function(t,e,i){switch(e===void 0&&(e=yo),t.type){case"ObjectPattern":for(var n=0,s=t.properties;n<s.length;n+=1){var o=s[n];this.checkLValInnerPattern(o,e,i)}break;case"ArrayPattern":for(var a=0,l=t.elements;a<l.length;a+=1){var d=l[a];d&&this.checkLValInnerPattern(d,e,i)}break;default:this.checkLValSimple(t,e,i)}};ze.checkLValInnerPattern=function(t,e,i){switch(e===void 0&&(e=yo),t.type){case"Property":this.checkLValInnerPattern(t.value,e,i);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,i);break;case"RestElement":this.checkLValPattern(t.argument,e,i);break;default:this.checkLValPattern(t,e,i)}};var Qe=function(e,i,n,s,o){this.token=e,this.isExpr=!!i,this.preserveSpace=!!n,this.override=s,this.generator=!!o},ee={b_stat:new Qe("{",!1),b_expr:new Qe("{",!0),b_tmpl:new Qe("${",!1),p_stat:new Qe("(",!1),p_expr:new Qe("(",!0),q_tmpl:new Qe("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new Qe("function",!1),f_expr:new Qe("function",!0),f_expr_gen:new Qe("function",!0,!1,null,!0),f_gen:new Qe("function",!1,!1,null,!0)},Cn=ue.prototype;Cn.initialContext=function(){return[ee.b_stat]};Cn.curContext=function(){return this.context[this.context.length-1]};Cn.braceIsBlock=function(t){var e=this.curContext();return e===ee.f_expr||e===ee.f_stat?!0:t===p.colon&&(e===ee.b_stat||e===ee.b_expr)?!e.isExpr:t===p._return||t===p.name&&this.exprAllowed?Be.test(this.input.slice(this.lastTokEnd,this.start)):t===p._else||t===p.semi||t===p.eof||t===p.parenR||t===p.arrow?!0:t===p.braceL?e===ee.b_stat:t===p._var||t===p._const||t===p.name?!1:!this.exprAllowed};Cn.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if(e.token==="function")return e.generator}return!1};Cn.updateContext=function(t){var e,i=this.type;i.keyword&&t===p.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr};Cn.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)};p.parenR.updateContext=p.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var t=this.context.pop();t===ee.b_stat&&this.curContext().token==="function"&&(t=this.context.pop()),this.exprAllowed=!t.isExpr};p.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?ee.b_stat:ee.b_expr),this.exprAllowed=!0};p.dollarBraceL.updateContext=function(){this.context.push(ee.b_tmpl),this.exprAllowed=!0};p.parenL.updateContext=function(t){var e=t===p._if||t===p._for||t===p._with||t===p._while;this.context.push(e?ee.p_stat:ee.p_expr),this.exprAllowed=!0};p.incDec.updateContext=function(){};p._function.updateContext=p._class.updateContext=function(t){t.beforeExpr&&t!==p._else&&!(t===p.semi&&this.curContext()!==ee.p_stat)&&!(t===p._return&&Be.test(this.input.slice(this.lastTokEnd,this.start)))&&!((t===p.colon||t===p.braceL)&&this.curContext()===ee.b_stat)?this.context.push(ee.f_expr):this.context.push(ee.f_stat),this.exprAllowed=!1};p.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};p.backQuote.updateContext=function(){this.curContext()===ee.q_tmpl?this.context.pop():this.context.push(ee.q_tmpl),this.exprAllowed=!1};p.star.updateContext=function(t){if(t===p._function){var e=this.context.length-1;this.context[e]===ee.f_expr?this.context[e]=ee.f_expr_gen:this.context[e]=ee.f_gen}this.exprAllowed=!0};p.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==p.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var N=ue.prototype;N.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&t.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n=t.key,s;switch(n.type){case"Identifier":s=n.name;break;case"Literal":s=String(n.value);break;default:return}var o=t.kind;if(this.options.ecmaVersion>=6){s==="__proto__"&&o==="init"&&(e.proto&&(i?i.doubleProto<0&&(i.doubleProto=n.start):this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);return}s="$"+s;var a=e[s];if(a){var l;o==="init"?l=this.strict&&a.init||a.get||a.set:l=a.init||a[o],l&&this.raiseRecoverable(n.start,"Redefinition of property")}else a=e[s]={init:!1,get:!1,set:!1};a[o]=!0}};N.parseExpression=function(t,e){var i=this.start,n=this.startLoc,s=this.parseMaybeAssign(t,e);if(this.type===p.comma){var o=this.startNodeAt(i,n);for(o.expressions=[s];this.eat(p.comma);)o.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return s};N.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,s=-1,o=-1,a=-1;e?(s=e.parenthesizedAssign,o=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new jo,n=!0);var l=this.start,d=this.startLoc;(this.type===p.parenL||this.type===p.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=t==="await");var _=this.parseMaybeConditional(t,e);if(i&&(_=i.call(this,_,l,d)),this.type.isAssign){var b=this.startNodeAt(l,d);return b.operator=this.value,this.type===p.eq&&(_=this.toAssignable(_,!1,e)),n||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=_.start&&(e.shorthandAssign=-1),this.type===p.eq?this.checkLValPattern(_):this.checkLValSimple(_),b.left=_,this.next(),b.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(b,"AssignmentExpression")}else n&&this.checkExpressionErrors(e,!0);return s>-1&&(e.parenthesizedAssign=s),o>-1&&(e.trailingComma=o),_};N.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,s=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return s;if(this.eat(p.question)){var o=this.startNodeAt(i,n);return o.test=s,o.consequent=this.parseMaybeAssign(),this.expect(p.colon),o.alternate=this.parseMaybeAssign(t),this.finishNode(o,"ConditionalExpression")}return s};N.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,s=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||s.start===i&&s.type==="ArrowFunctionExpression"?s:this.parseExprOp(s,i,n,-1,t)};N.parseExprOp=function(t,e,i,n,s){var o=this.type.binop;if(o!=null&&(!s||this.type!==p._in)&&o>n){var a=this.type===p.logicalOR||this.type===p.logicalAND,l=this.type===p.coalesce;l&&(o=p.logicalAND.binop);var d=this.value;this.next();var _=this.start,b=this.startLoc,k=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,s),_,b,o,s),x=this.buildBinary(e,i,t,k,d,a||l);return(a&&this.type===p.coalesce||l&&(this.type===p.logicalOR||this.type===p.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(x,e,i,n,s)}return t};N.buildBinary=function(t,e,i,n,s,o){n.type==="PrivateIdentifier"&&this.raise(n.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=i,a.operator=s,a.right=n,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")};N.parseMaybeUnary=function(t,e,i,n){var s=this.start,o=this.startLoc,a;if(this.isContextual("await")&&this.canAwait)a=this.parseAwait(n),e=!0;else if(this.type.prefix){var l=this.startNode(),d=this.type===p.incDec;l.operator=this.value,l.prefix=!0,this.next(),l.argument=this.parseMaybeUnary(null,!0,d,n),this.checkExpressionErrors(t,!0),d?this.checkLValSimple(l.argument):this.strict&&l.operator==="delete"&&am(l.argument)?this.raiseRecoverable(l.start,"Deleting local variable in strict mode"):l.operator==="delete"&&fa(l.argument)?this.raiseRecoverable(l.start,"Private fields can not be deleted"):e=!0,a=this.finishNode(l,d?"UpdateExpression":"UnaryExpression")}else if(!e&&this.type===p.privateId)(n||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),a=this.parsePrivateIdent(),this.type!==p._in&&this.unexpected();else{if(a=this.parseExprSubscripts(t,n),this.checkExpressionErrors(t))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var _=this.startNodeAt(s,o);_.operator=this.value,_.prefix=!1,_.argument=a,this.checkLValSimple(a),this.next(),a=this.finishNode(_,"UpdateExpression")}}if(!i&&this.eat(p.starstar))if(e)this.unexpected(this.lastTokStart);else return this.buildBinary(s,o,a,this.parseMaybeUnary(null,!1,!1,n),"**",!1);else return a};function am(t){return t.type==="Identifier"||t.type==="ParenthesizedExpression"&&am(t.expression)}function fa(t){return t.type==="MemberExpression"&&t.property.type==="PrivateIdentifier"||t.type==="ChainExpression"&&fa(t.expression)||t.type==="ParenthesizedExpression"&&fa(t.expression)}N.parseExprSubscripts=function(t,e){var i=this.start,n=this.startLoc,s=this.parseExprAtom(t,e);if(s.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return s;var o=this.parseSubscripts(s,i,n,!1,e);return t&&o.type==="MemberExpression"&&(t.parenthesizedAssign>=o.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=o.start&&(t.parenthesizedBind=-1),t.trailingComma>=o.start&&(t.trailingComma=-1)),o};N.parseSubscripts=function(t,e,i,n,s){for(var o=this.options.ecmaVersion>=8&&t.type==="Identifier"&&t.name==="async"&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start===5&&this.potentialArrowAt===t.start,a=!1;;){var l=this.parseSubscript(t,e,i,n,o,a,s);if(l.optional&&(a=!0),l===t||l.type==="ArrowFunctionExpression"){if(a){var d=this.startNodeAt(e,i);d.expression=l,l=this.finishNode(d,"ChainExpression")}return l}t=l}};N.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(p.arrow)};N.parseSubscriptAsyncArrow=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!0,n)};N.parseSubscript=function(t,e,i,n,s,o,a){var l=this.options.ecmaVersion>=11,d=l&&this.eat(p.questionDot);n&&d&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var _=this.eat(p.bracketL);if(_||d&&this.type!==p.parenL&&this.type!==p.backQuote||this.eat(p.dot)){var b=this.startNodeAt(e,i);b.object=t,_?(b.property=this.parseExpression(),this.expect(p.bracketR)):this.type===p.privateId&&t.type!=="Super"?b.property=this.parsePrivateIdent():b.property=this.parseIdent(this.options.allowReserved!=="never"),b.computed=!!_,l&&(b.optional=d),t=this.finishNode(b,"MemberExpression")}else if(!n&&this.eat(p.parenL)){var k=new jo,x=this.yieldPos,I=this.awaitPos,C=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var E=this.parseExprList(p.parenR,this.options.ecmaVersion>=8,!1,k);if(s&&!d&&this.shouldParseAsyncArrow())return this.checkPatternErrors(k,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=x,this.awaitPos=I,this.awaitIdentPos=C,this.parseSubscriptAsyncArrow(e,i,E,a);this.checkExpressionErrors(k,!0),this.yieldPos=x||this.yieldPos,this.awaitPos=I||this.awaitPos,this.awaitIdentPos=C||this.awaitIdentPos;var M=this.startNodeAt(e,i);M.callee=t,M.arguments=E,l&&(M.optional=d),t=this.finishNode(M,"CallExpression")}else if(this.type===p.backQuote){(d||o)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var P=this.startNodeAt(e,i);P.tag=t,P.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(P,"TaggedTemplateExpression")}return t};N.parseExprAtom=function(t,e,i){this.type===p.slash&&this.readRegexp();var n,s=this.potentialArrowAt===this.start;switch(this.type){case p._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type===p.parenL&&!this.allowDirectSuper&&this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==p.dot&&this.type!==p.bracketL&&this.type!==p.parenL&&this.unexpected(),this.finishNode(n,"Super");case p._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case p.name:var o=this.start,a=this.startLoc,l=this.containsEsc,d=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!l&&d.name==="async"&&!this.canInsertSemicolon()&&this.eat(p._function))return this.overrideContext(ee.f_expr),this.parseFunction(this.startNodeAt(o,a),0,!1,!0,e);if(s&&!this.canInsertSemicolon()){if(this.eat(p.arrow))return this.parseArrowExpression(this.startNodeAt(o,a),[d],!1,e);if(this.options.ecmaVersion>=8&&d.name==="async"&&this.type===p.name&&!l&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return d=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(p.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(o,a),[d],!0,e)}return d;case p.regexp:var _=this.value;return n=this.parseLiteral(_.value),n.regex={pattern:_.pattern,flags:_.flags},n;case p.num:case p.string:return this.parseLiteral(this.value);case p._null:case p._true:case p._false:return n=this.startNode(),n.value=this.type===p._null?null:this.type===p._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case p.parenL:var b=this.start,k=this.parseParenAndDistinguishExpression(s,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(k)&&(t.parenthesizedAssign=b),t.parenthesizedBind<0&&(t.parenthesizedBind=b)),k;case p.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(p.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case p.braceL:return this.overrideContext(ee.b_expr),this.parseObj(!1,t);case p._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case p._class:return this.parseClass(this.startNode(),!1);case p._new:return this.parseNew();case p.backQuote:return this.parseTemplate();case p._import:return this.options.ecmaVersion>=11?this.parseExprImport(i):this.unexpected();default:return this.parseExprAtomDefault()}};N.parseExprAtomDefault=function(){this.unexpected()};N.parseExprImport=function(t){var e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===p.parenL&&!t)return this.parseDynamicImport(e);if(this.type===p.dot){var i=this.startNodeAt(e.start,e.loc&&e.loc.start);return i.name="import",e.meta=this.finishNode(i,"Identifier"),this.parseImportMeta(e)}else this.unexpected()};N.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(p.parenR)?t.options=null:(this.expect(p.comma),this.afterTrailingComma(p.parenR)?t.options=null:(t.options=this.parseMaybeAssign(),this.eat(p.parenR)||(this.expect(p.comma),this.afterTrailingComma(p.parenR)||this.unexpected())));else if(!this.eat(p.parenR)){var e=this.start;this.eat(p.comma)&&this.eat(p.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")};N.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="meta"&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")};N.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),e.raw.charCodeAt(e.raw.length-1)===110&&(e.bigint=e.value!=null?e.value.toString():e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")};N.parseParenExpression=function(){this.expect(p.parenL);var t=this.parseExpression();return this.expect(p.parenR),t};N.shouldParseArrow=function(t){return!this.canInsertSemicolon()};N.parseParenAndDistinguishExpression=function(t,e){var i=this.start,n=this.startLoc,s,o=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a=this.start,l=this.startLoc,d=[],_=!0,b=!1,k=new jo,x=this.yieldPos,I=this.awaitPos,C;for(this.yieldPos=0,this.awaitPos=0;this.type!==p.parenR;)if(_?_=!1:this.expect(p.comma),o&&this.afterTrailingComma(p.parenR,!0)){b=!0;break}else if(this.type===p.ellipsis){C=this.start,d.push(this.parseParenItem(this.parseRestBinding())),this.type===p.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else d.push(this.parseMaybeAssign(!1,k,this.parseParenItem));var E=this.lastTokEnd,M=this.lastTokEndLoc;if(this.expect(p.parenR),t&&this.shouldParseArrow(d)&&this.eat(p.arrow))return this.checkPatternErrors(k,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=x,this.awaitPos=I,this.parseParenArrowList(i,n,d,e);(!d.length||b)&&this.unexpected(this.lastTokStart),C&&this.unexpected(C),this.checkExpressionErrors(k,!0),this.yieldPos=x||this.yieldPos,this.awaitPos=I||this.awaitPos,d.length>1?(s=this.startNodeAt(a,l),s.expressions=d,this.finishNodeAt(s,"SequenceExpression",E,M)):s=d[0]}else s=this.parseParenExpression();if(this.options.preserveParens){var P=this.startNodeAt(i,n);return P.expression=s,this.finishNode(P,"ParenthesizedExpression")}else return s};N.parseParenItem=function(t){return t};N.parseParenArrowList=function(t,e,i,n){return this.parseArrowExpression(this.startNodeAt(t,e),i,!1,n)};var xv=[];N.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===p.dot){var e=this.startNodeAt(t.start,t.loc&&t.loc.start);e.name="new",t.meta=this.finishNode(e,"Identifier"),this.next();var i=this.containsEsc;return t.property=this.parseIdent(!0),t.property.name!=="target"&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),i&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var n=this.start,s=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),n,s,!0,!1),this.eat(p.parenL)?t.arguments=this.parseExprList(p.parenR,this.options.ecmaVersion>=8,!1):t.arguments=xv,this.finishNode(t,"NewExpression")};N.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===p.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),i.tail=this.type===p.backQuote,this.finishNode(i,"TemplateElement")};N.parseTemplate=function(t){t===void 0&&(t={});var e=t.isTagged;e===void 0&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(i.quasis=[n];!n.tail;)this.type===p.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(p.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(p.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")};N.isAsyncProp=function(t){return!t.computed&&t.key.type==="Identifier"&&t.key.name==="async"&&(this.type===p.name||this.type===p.num||this.type===p.string||this.type===p.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===p.star)&&!Be.test(this.input.slice(this.lastTokEnd,this.start))};N.parseObj=function(t,e){var i=this.startNode(),n=!0,s={};for(i.properties=[],this.next();!this.eat(p.braceR);){if(n)n=!1;else if(this.expect(p.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(p.braceR))break;var o=this.parseProperty(t,e);t||this.checkPropClash(o,s,e),i.properties.push(o)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")};N.parseProperty=function(t,e){var i=this.startNode(),n,s,o,a;if(this.options.ecmaVersion>=9&&this.eat(p.ellipsis))return t?(i.argument=this.parseIdent(!1),this.type===p.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(i,"RestElement")):(i.argument=this.parseMaybeAssign(!1,e),this.type===p.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(i,"SpreadElement"));this.options.ecmaVersion>=6&&(i.method=!1,i.shorthand=!1,(t||e)&&(o=this.start,a=this.startLoc),t||(n=this.eat(p.star)));var l=this.containsEsc;return this.parsePropertyName(i),!t&&!l&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(i)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(p.star),this.parsePropertyName(i)):s=!1,this.parsePropertyValue(i,t,n,s,o,a,e,l),this.finishNode(i,"Property")};N.parseGetterSetter=function(t){var e=t.key.name;this.parsePropertyName(t),t.value=this.parseMethod(!1),t.kind=e;var i=t.kind==="get"?0:1;if(t.value.params.length!==i){var n=t.value.start;t.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else t.kind==="set"&&t.value.params[0].type==="RestElement"&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")};N.parsePropertyValue=function(t,e,i,n,s,o,a,l){(i||n)&&this.type===p.colon&&this.unexpected(),this.eat(p.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init"):this.options.ecmaVersion>=6&&this.type===p.parenL?(e&&this.unexpected(),t.method=!0,t.value=this.parseMethod(i,n),t.kind="init"):!e&&!l&&this.options.ecmaVersion>=5&&!t.computed&&t.key.type==="Identifier"&&(t.key.name==="get"||t.key.name==="set")&&this.type!==p.comma&&this.type!==p.braceR&&this.type!==p.eq?((i||n)&&this.unexpected(),this.parseGetterSetter(t)):this.options.ecmaVersion>=6&&!t.computed&&t.key.type==="Identifier"?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),t.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=s),e?t.value=this.parseMaybeDefault(s,o,this.copyNode(t.key)):this.type===p.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(s,o,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.kind="init",t.shorthand=!0):this.unexpected()};N.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(p.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(p.bracketR),t.key;t.computed=!1}return t.key=this.type===p.num||this.type===p.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};N.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)};N.parseMethod=function(t,e,i){var n=this.startNode(),s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Wa(e,n.generator)|Ho|(i?im:0)),this.expect(p.parenL),n.params=this.parseBindingList(p.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0,!1),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(n,"FunctionExpression")};N.parseArrowExpression=function(t,e,i,n){var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(Wa(i,!1)|Ha),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,n),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")};N.parseFunctionBody=function(t,e,i,n){var s=e&&this.type!==p.braceL,o=this.strict,a=!1;if(s)t.body=this.parseMaybeAssign(n),t.expression=!0,this.checkParams(t,!1);else{var l=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);(!o||l)&&(a=this.strictDirective(this.end),a&&l&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var d=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!o&&!a&&!e&&!i&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,om),t.body=this.parseBlock(!1,void 0,a&&!o),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=d}this.exitScope()};N.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){var n=i[e];if(n.type!=="Identifier")return!1}return!0};N.checkParams=function(t,e){for(var i=Object.create(null),n=0,s=t.params;n<s.length;n+=1){var o=s[n];this.checkLValInnerPattern(o,ja,e?null:i)}};N.parseExprList=function(t,e,i,n){for(var s=[],o=!0;!this.eat(t);){if(o)o=!1;else if(this.expect(p.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===p.comma?a=null:this.type===p.ellipsis?(a=this.parseSpread(n),n&&this.type===p.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):a=this.parseMaybeAssign(!1,n),s.push(a)}return s};N.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;if(this.inGenerator&&n==="yield"&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Wo)&&n==="arguments"&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(n==="arguments"||n==="await")&&this.raise(e,"Cannot use "+n+" in class static initialization block"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),!(this.options.ecmaVersion<6&&this.input.slice(e,i).indexOf("\\")!==-1)){var s=this.strict?this.reservedWordsStrict:this.reservedWords;s.test(n)&&(!this.inAsync&&n==="await"&&this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))}};N.parseIdent=function(t){var e=this.parseIdentNode();return this.next(!!t),this.finishNode(e,"Identifier"),t||(this.checkUnreserved(e),e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=e.start)),e};N.parseIdentNode=function(){var t=this.startNode();return this.type===p.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,(t.name==="class"||t.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=p.name):this.unexpected(),t};N.parsePrivateIdent=function(){var t=this.startNode();return this.type===p.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t)),t};N.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===p.semi||this.canInsertSemicolon()||this.type!==p.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(p.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")};N.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var wo=ue.prototype;wo.raise=function(t,e){var i=Zf(this.input,t);e+=" ("+i.line+":"+i.column+")",this.sourceFile&&(e+=" in "+this.sourceFile);var n=new SyntaxError(e);throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n};wo.raiseRecoverable=wo.raise;wo.curPosition=function(){if(this.options.locations)return new ls(this.curLine,this.pos-this.lineStart)};var mi=ue.prototype,vv=function(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]};mi.enterScope=function(t){this.scopeStack.push(new vv(t))};mi.exitScope=function(){this.scopeStack.pop()};mi.treatFunctionsAsVarInScope=function(t){return t.flags&Tn||!this.inModule&&t.flags&hs};mi.declareName=function(t,e,i){var n=!1;if(e===Wt){var s=this.currentScope();n=s.lexical.indexOf(t)>-1||s.functions.indexOf(t)>-1||s.var.indexOf(t)>-1,s.lexical.push(t),this.inModule&&s.flags&hs&&delete this.undefinedExports[t]}else if(e===sm){var o=this.currentScope();o.lexical.push(t)}else if(e===nm){var a=this.currentScope();this.treatFunctionsAsVar?n=a.lexical.indexOf(t)>-1:n=a.lexical.indexOf(t)>-1||a.var.indexOf(t)>-1,a.functions.push(t)}else for(var l=this.scopeStack.length-1;l>=0;--l){var d=this.scopeStack[l];if(d.lexical.indexOf(t)>-1&&!(d.flags&tm&&d.lexical[0]===t)||!this.treatFunctionsAsVarInScope(d)&&d.functions.indexOf(t)>-1){n=!0;break}if(d.var.push(t),this.inModule&&d.flags&hs&&delete this.undefinedExports[t],d.flags&Wo)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")};mi.checkLocalExport=function(t){this.scopeStack[0].lexical.indexOf(t.name)===-1&&this.scopeStack[0].var.indexOf(t.name)===-1&&(this.undefinedExports[t.name]=t)};mi.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};mi.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&(Wo|vs|$i))return e}};mi.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(e.flags&(Wo|vs|$i)&&!(e.flags&Ha))return e}};var Go=function(e,i,n){this.type="",this.start=i,this.end=0,e.options.locations&&(this.loc=new Fo(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[i,0])},ks=ue.prototype;ks.startNode=function(){return new Go(this,this.start,this.startLoc)};ks.startNodeAt=function(t,e){return new Go(this,t,e)};function cm(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}ks.finishNode=function(t,e){return cm.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)};ks.finishNodeAt=function(t,e,i,n){return cm.call(this,t,e,i,n)};ks.copyNode=function(t){var e=new Go(this,t.start,this.startLoc);for(var i in t)e[i]=t[i];return e};var kv="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",um="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",lm=um+" Extended_Pictographic",hm=lm,pm=hm+" EBase EComp EMod EPres ExtPict",dm=pm,Sv=dm,Tv={9:um,10:lm,11:hm,12:pm,13:dm,14:Sv},Cv="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Iv={9:"",10:"",11:"",12:"",13:"",14:Cv},Pp="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",fm="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",mm=fm+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",_m=mm+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",bm=_m+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",ym=bm+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ev=ym+" "+kv,Pv={9:fm,10:mm,11:_m,12:bm,13:ym,14:Ev},gm={};function Rv(t){var e=gm[t]={binary:ni(Tv[t]+" "+Pp),binaryOfStrings:ni(Iv[t]),nonBinary:{General_Category:ni(Pp),Script:ni(Pv[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}for(var Qr=0,Rp=[9,10,11,12,13,14];Qr<Rp.length;Qr+=1){var Av=Rp[Qr];Rv(Av)}var R=ue.prototype,xo=function(e,i){this.parent=e,this.base=i||this};xo.prototype.separatedFrom=function(e){for(var i=this;i;i=i.parent)for(var n=e;n;n=n.parent)if(i.base===n.base&&i!==n)return!0;return!1};xo.prototype.sibling=function(){return new xo(this.parent,this.base)};var It=function(e){this.parser=e,this.validFlags="gim"+(e.options.ecmaVersion>=6?"uy":"")+(e.options.ecmaVersion>=9?"s":"")+(e.options.ecmaVersion>=13?"d":"")+(e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=gm[e.options.ecmaVersion>=14?14:e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};It.prototype.reset=function(e,i,n){var s=n.indexOf("v")!==-1,o=n.indexOf("u")!==-1;this.start=e|0,this.source=i+"",this.flags=n,s&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=o&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=o&&this.parser.options.ecmaVersion>=9)};It.prototype.raise=function(e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+e)};It.prototype.at=function(e,i){i===void 0&&(i=!1);var n=this.source,s=n.length;if(e>=s)return-1;var o=n.charCodeAt(e);if(!(i||this.switchU)||o<=55295||o>=57344||e+1>=s)return o;var a=n.charCodeAt(e+1);return a>=56320&&a<=57343?(o<<10)+a-56613888:o};It.prototype.nextIndex=function(e,i){i===void 0&&(i=!1);var n=this.source,s=n.length;if(e>=s)return s;var o=n.charCodeAt(e),a;return!(i||this.switchU)||o<=55295||o>=57344||e+1>=s||(a=n.charCodeAt(e+1))<56320||a>57343?e+1:e+2};It.prototype.current=function(e){return e===void 0&&(e=!1),this.at(this.pos,e)};It.prototype.lookahead=function(e){return e===void 0&&(e=!1),this.at(this.nextIndex(this.pos,e),e)};It.prototype.advance=function(e){e===void 0&&(e=!1),this.pos=this.nextIndex(this.pos,e)};It.prototype.eat=function(e,i){return i===void 0&&(i=!1),this.current(i)===e?(this.advance(i),!0):!1};It.prototype.eatChars=function(e,i){i===void 0&&(i=!1);for(var n=this.pos,s=0,o=e;s<o.length;s+=1){var a=o[s],l=this.at(n,i);if(l===-1||l!==a)return!1;n=this.nextIndex(n,i)}return this.pos=n,!0};R.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=!1,s=!1,o=0;o<i.length;o++){var a=i.charAt(o);e.indexOf(a)===-1&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(a,o+1)>-1&&this.raise(t.start,"Duplicate regular expression flag"),a==="u"&&(n=!0),a==="v"&&(s=!0)}this.options.ecmaVersion>=15&&n&&s&&this.raise(t.start,"Invalid regular expression flag")};function Mv(t){for(var e in t)return!0;return!1}R.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&Mv(t.groupNames)&&(t.switchN=!0,this.regexp_pattern(t))};R.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames=Object.create(null),t.backReferenceNames.length=0,t.branchID=null,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var n=i[e];t.groupNames[n]||t.raise("Invalid named capture referenced")}};R.regexp_disjunction=function(t){var e=this.options.ecmaVersion>=16;for(e&&(t.branchID=new xo(t.branchID,null)),this.regexp_alternative(t);t.eat(124);)e&&(t.branchID=t.branchID.sibling()),this.regexp_alternative(t);e&&(t.branchID=t.branchID.parent),this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")};R.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););};R.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))?(this.regexp_eatQuantifier(t),!0):!1};R.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1};R.regexp_eatQuantifier=function(t,e){return e===void 0&&(e=!1),this.regexp_eatQuantifierPrefix(t,e)?(t.eat(63),!0):!1};R.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)};R.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,s=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(s=t.lastIntValue),t.eat(125)))return s!==-1&&s<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1};R.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)};R.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1};R.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)){if(this.options.ecmaVersion>=16){var i=this.regexp_eatModifiers(t),n=t.eat(45);if(i||n){for(var s=0;s<i.length;s++){var o=i.charAt(s);i.indexOf(o,s+1)>-1&&t.raise("Duplicate regular expression modifiers")}if(n){var a=this.regexp_eatModifiers(t);!i&&!a&&t.current()===58&&t.raise("Invalid regular expression modifiers");for(var l=0;l<a.length;l++){var d=a.charAt(l);(a.indexOf(d,l+1)>-1||i.indexOf(d)>-1)&&t.raise("Duplicate regular expression modifiers")}}}}if(t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}}t.pos=e}return!1};R.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):t.current()===63&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1};R.regexp_eatModifiers=function(t){for(var e="",i=0;(i=t.current())!==-1&&Dv(i);)e+=Ut(i),t.advance();return e};function Dv(t){return t===105||t===109||t===115}R.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)};R.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1};R.regexp_eatSyntaxCharacter=function(t){var e=t.current();return wm(e)?(t.lastIntValue=e,t.advance(),!0):!1};function wm(t){return t===36||t>=40&&t<=43||t===46||t===63||t>=91&&t<=94||t>=123&&t<=125}R.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;(i=t.current())!==-1&&!wm(i);)t.advance();return t.pos!==e};R.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return e!==-1&&e!==36&&!(e>=40&&e<=43)&&e!==46&&e!==63&&e!==91&&e!==94&&e!==124?(t.advance(),!0):!1};R.regexp_groupSpecifier=function(t){if(t.eat(63)){this.regexp_eatGroupName(t)||t.raise("Invalid group");var e=this.options.ecmaVersion>=16,i=t.groupNames[t.lastStringValue];if(i)if(e)for(var n=0,s=i;n<s.length;n+=1){var o=s[n];o.separatedFrom(t.branchID)||t.raise("Duplicate capture group name")}else t.raise("Duplicate capture group name");e?(i||(t.groupNames[t.lastStringValue]=[])).push(t.branchID):t.groupNames[t.lastStringValue]=!0}};R.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1};R.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Ut(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Ut(t.lastIntValue);return!0}return!1};R.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Nv(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)};function Nv(t){return xt(t,!0)||t===36||t===95}R.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=this.options.ecmaVersion>=11,n=t.current(i);return t.advance(i),n===92&&this.regexp_eatRegExpUnicodeEscapeSequence(t,i)&&(n=t.lastIntValue),Lv(n)?(t.lastIntValue=n,!0):(t.pos=e,!1)};function Lv(t){return ci(t,!0)||t===36||t===95||t===8204||t===8205}R.regexp_eatAtomEscape=function(t){return this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t)?!0:(t.switchU&&(t.current()===99&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)};R.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1};R.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1};R.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)};R.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1};R.regexp_eatZero=function(t){return t.current()===48&&!qo(t.lookahead())?(t.lastIntValue=0,t.advance(),!0):!1};R.regexp_eatControlEscape=function(t){var e=t.current();return e===116?(t.lastIntValue=9,t.advance(),!0):e===110?(t.lastIntValue=10,t.advance(),!0):e===118?(t.lastIntValue=11,t.advance(),!0):e===102?(t.lastIntValue=12,t.advance(),!0):e===114?(t.lastIntValue=13,t.advance(),!0):!1};R.regexp_eatControlLetter=function(t){var e=t.current();return xm(e)?(t.lastIntValue=e%32,t.advance(),!0):!1};function xm(t){return t>=65&&t<=90||t>=97&&t<=122}R.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){e===void 0&&(e=!1);var i=t.pos,n=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(n&&s>=55296&&s<=56319){var o=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var a=t.lastIntValue;if(a>=56320&&a<=57343)return t.lastIntValue=(s-55296)*1024+(a-56320)+65536,!0}t.pos=o,t.lastIntValue=s}return!0}if(n&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&Ov(t.lastIntValue))return!0;n&&t.raise("Invalid unicode escape"),t.pos=i}return!1};function Ov(t){return t>=0&&t<=1114111}R.regexp_eatIdentityEscape=function(t){if(t.switchU)return this.regexp_eatSyntaxCharacter(t)?!0:t.eat(47)?(t.lastIntValue=47,!0):!1;var e=t.current();return e!==99&&(!t.switchN||e!==107)?(t.lastIntValue=e,t.advance(),!0):!1};R.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do t.lastIntValue=10*t.lastIntValue+(e-48),t.advance();while((e=t.current())>=48&&e<=57);return!0}return!1};var vm=0,Ft=1,Ke=2;R.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(Bv(e))return t.lastIntValue=-1,t.advance(),Ft;var i=!1;if(t.switchU&&this.options.ecmaVersion>=9&&((i=e===80)||e===112)){t.lastIntValue=-1,t.advance();var n;if(t.eat(123)&&(n=this.regexp_eatUnicodePropertyValueExpression(t))&&t.eat(125))return i&&n===Ke&&t.raise("Invalid property name"),n;t.raise("Invalid property name")}return vm};function Bv(t){return t===100||t===68||t===115||t===83||t===119||t===87}R.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,n),Ft}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var s=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,s)}return vm};R.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){Sn(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")};R.regexp_validateUnicodePropertyNameOrValue=function(t,e){if(t.unicodeProperties.binary.test(e))return Ft;if(t.switchV&&t.unicodeProperties.binaryOfStrings.test(e))return Ke;t.raise("Invalid property name")};R.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";km(e=t.current());)t.lastStringValue+=Ut(e),t.advance();return t.lastStringValue!==""};function km(t){return xm(t)||t===95}R.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";Vv(e=t.current());)t.lastStringValue+=Ut(e),t.advance();return t.lastStringValue!==""};function Vv(t){return km(t)||qo(t)}R.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)};R.regexp_eatCharacterClass=function(t){if(t.eat(91)){var e=t.eat(94),i=this.regexp_classContents(t);return t.eat(93)||t.raise("Unterminated character class"),e&&i===Ke&&t.raise("Negated character class may contain strings"),!0}return!1};R.regexp_classContents=function(t){return t.current()===93?Ft:t.switchV?this.regexp_classSetExpression(t):(this.regexp_nonEmptyClassRanges(t),Ft)};R.regexp_nonEmptyClassRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;t.switchU&&(e===-1||i===-1)&&t.raise("Invalid character class"),e!==-1&&i!==-1&&e>i&&t.raise("Range out of order in character class")}}};R.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(i===99||Cm(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return n!==93?(t.lastIntValue=n,t.advance(),!0):!1};R.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)};R.regexp_classSetExpression=function(t){var e=Ft,i;if(!this.regexp_eatClassSetRange(t))if(i=this.regexp_eatClassSetOperand(t)){i===Ke&&(e=Ke);for(var n=t.pos;t.eatChars([38,38]);){if(t.current()!==38&&(i=this.regexp_eatClassSetOperand(t))){i!==Ke&&(e=Ft);continue}t.raise("Invalid character in character class")}if(n!==t.pos)return e;for(;t.eatChars([45,45]);)this.regexp_eatClassSetOperand(t)||t.raise("Invalid character in character class");if(n!==t.pos)return e}else t.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(t)){if(i=this.regexp_eatClassSetOperand(t),!i)return e;i===Ke&&(e=Ke)}};R.regexp_eatClassSetRange=function(t){var e=t.pos;if(this.regexp_eatClassSetCharacter(t)){var i=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassSetCharacter(t)){var n=t.lastIntValue;return i!==-1&&n!==-1&&i>n&&t.raise("Range out of order in character class"),!0}t.pos=e}return!1};R.regexp_eatClassSetOperand=function(t){return this.regexp_eatClassSetCharacter(t)?Ft:this.regexp_eatClassStringDisjunction(t)||this.regexp_eatNestedClass(t)};R.regexp_eatNestedClass=function(t){var e=t.pos;if(t.eat(91)){var i=t.eat(94),n=this.regexp_classContents(t);if(t.eat(93))return i&&n===Ke&&t.raise("Negated character class may contain strings"),n;t.pos=e}if(t.eat(92)){var s=this.regexp_eatCharacterClassEscape(t);if(s)return s;t.pos=e}return null};R.regexp_eatClassStringDisjunction=function(t){var e=t.pos;if(t.eatChars([92,113])){if(t.eat(123)){var i=this.regexp_classStringDisjunctionContents(t);if(t.eat(125))return i}else t.raise("Invalid escape");t.pos=e}return null};R.regexp_classStringDisjunctionContents=function(t){for(var e=this.regexp_classString(t);t.eat(124);)this.regexp_classString(t)===Ke&&(e=Ke);return e};R.regexp_classString=function(t){for(var e=0;this.regexp_eatClassSetCharacter(t);)e++;return e===1?Ft:Ke};R.regexp_eatClassSetCharacter=function(t){var e=t.pos;if(t.eat(92))return this.regexp_eatCharacterEscape(t)||this.regexp_eatClassSetReservedPunctuator(t)?!0:t.eat(98)?(t.lastIntValue=8,!0):(t.pos=e,!1);var i=t.current();return i<0||i===t.lookahead()&&Uv(i)||Fv(i)?!1:(t.advance(),t.lastIntValue=i,!0)};function Uv(t){return t===33||t>=35&&t<=38||t>=42&&t<=44||t===46||t>=58&&t<=64||t===94||t===96||t===126}function Fv(t){return t===40||t===41||t===45||t===47||t>=91&&t<=93||t>=123&&t<=125}R.regexp_eatClassSetReservedPunctuator=function(t){var e=t.current();return Hv(e)?(t.lastIntValue=e,t.advance(),!0):!1};function Hv(t){return t===33||t===35||t===37||t===38||t===44||t===45||t>=58&&t<=62||t===64||t===96||t===126}R.regexp_eatClassControlLetter=function(t){var e=t.current();return qo(e)||e===95?(t.lastIntValue=e%32,t.advance(),!0):!1};R.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1};R.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;qo(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e};function qo(t){return t>=48&&t<=57}R.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Sm(i=t.current());)t.lastIntValue=16*t.lastIntValue+Tm(i),t.advance();return t.pos!==e};function Sm(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Tm(t){return t>=65&&t<=70?10+(t-65):t>=97&&t<=102?10+(t-97):t-48}R.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=e*64+i*8+t.lastIntValue:t.lastIntValue=e*8+i}else t.lastIntValue=e;return!0}return!1};R.regexp_eatOctalDigit=function(t){var e=t.current();return Cm(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)};function Cm(t){return t>=48&&t<=55}R.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var s=t.current();if(!Sm(s))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Tm(s),t.advance()}return!0};var qa=function(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new Fo(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},O=ue.prototype;O.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qa(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};O.getToken=function(){return this.next(),new qa(this)};typeof Symbol<"u"&&(O[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===p.eof,value:e}}}});O.nextToken=function(){var t=this.curContext();if((!t||!t.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(p.eof);if(t.override)return t.override(this);this.readToken(this.fullCharCodeAtPos())};O.readToken=function(t){return xt(t,this.options.ecmaVersion>=6)||t===92?this.readWord():this.getTokenFromCode(t)};O.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888};O.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(i===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(var n=void 0,s=e;(n=Xf(this.input,s,this.pos))>-1;)++this.curLine,s=this.lineStart=n;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,i),e,this.pos,t,this.curPosition())};O.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!kn(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())};O.skipSpace=function(){e:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(t>8&&t<14||t>=5760&&Qf.test(String.fromCharCode(t)))++this.pos;else break e}}};O.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)};O.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&t===46&&e===46?(this.pos+=3,this.finishToken(p.ellipsis)):(++this.pos,this.finishToken(p.dot))};O.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):t===61?this.finishOp(p.assign,2):this.finishOp(p.slash,1)};O.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=t===42?p.star:p.modulo;return this.options.ecmaVersion>=7&&t===42&&e===42&&(++i,n=p.starstar,e=this.input.charCodeAt(this.pos+2)),e===61?this.finishOp(p.assign,i+1):this.finishOp(n,i)};O.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);if(e===t){if(this.options.ecmaVersion>=12){var i=this.input.charCodeAt(this.pos+2);if(i===61)return this.finishOp(p.assign,3)}return this.finishOp(t===124?p.logicalOR:p.logicalAND,2)}return e===61?this.finishOp(p.assign,2):this.finishOp(t===124?p.bitwiseOR:p.bitwiseAND,1)};O.readToken_caret=function(){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(p.assign,2):this.finishOp(p.bitwiseXOR,1)};O.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Be.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(p.incDec,2):e===61?this.finishOp(p.assign,2):this.finishOp(p.plusMin,1)};O.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=t===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+i)===61?this.finishOp(p.assign,i+1):this.finishOp(p.bitShift,i)):e===33&&t===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(e===61&&(i=2),this.finishOp(p.relational,i))};O.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(p.equality,this.input.charCodeAt(this.pos+2)===61?3:2):t===61&&e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(p.arrow)):this.finishOp(t===61?p.eq:p.prefix,1)};O.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(e===46){var i=this.input.charCodeAt(this.pos+2);if(i<48||i>57)return this.finishOp(p.questionDot,2)}if(e===63){if(t>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(p.assign,3)}return this.finishOp(p.coalesce,2)}}return this.finishOp(p.question,1)};O.readToken_numberSign=function(){var t=this.options.ecmaVersion,e=35;if(t>=13&&(++this.pos,e=this.fullCharCodeAtPos(),xt(e,!0)||e===92))return this.finishToken(p.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ut(e)+"'")};O.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(p.parenL);case 41:return++this.pos,this.finishToken(p.parenR);case 59:return++this.pos,this.finishToken(p.semi);case 44:return++this.pos,this.finishToken(p.comma);case 91:return++this.pos,this.finishToken(p.bracketL);case 93:return++this.pos,this.finishToken(p.bracketR);case 123:return++this.pos,this.finishToken(p.braceL);case 125:return++this.pos,this.finishToken(p.braceR);case 58:return++this.pos,this.finishToken(p.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(p.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(e===120||e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(e===111||e===79)return this.readRadixNumber(8);if(e===98||e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(p.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ut(t)+"'")};O.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)};O.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(Be.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if(n==="[")e=!0;else if(n==="]"&&e)e=!1;else if(n==="/"&&!e)break;t=n==="\\"}++this.pos}var s=this.input.slice(i,this.pos);++this.pos;var o=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(o);var l=this.regexpState||(this.regexpState=new It(this));l.reset(i,s,a),this.validateRegExpFlags(l),this.validateRegExpPattern(l);var d=null;try{d=new RegExp(s,a)}catch{}return this.finishToken(p.regexp,{pattern:s,flags:a,value:d})};O.readInt=function(t,e,i){for(var n=this.options.ecmaVersion>=12&&e===void 0,s=i&&this.input.charCodeAt(this.pos)===48,o=this.pos,a=0,l=0,d=0,_=e??1/0;d<_;++d,++this.pos){var b=this.input.charCodeAt(this.pos),k=void 0;if(n&&b===95){s&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),l===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),d===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),l=b;continue}if(b>=97?k=b-97+10:b>=65?k=b-65+10:b>=48&&b<=57?k=b-48:k=1/0,k>=t)break;l=b,a=a*t+k}return n&&l===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===o||e!=null&&this.pos-o!==e?null:a};function Wv(t,e){return e?parseInt(t,8):parseFloat(t.replace(/_/g,""))}function Im(t){return typeof BigInt!="function"?null:BigInt(t.replace(/_/g,""))}O.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var i=this.readInt(t);return i==null&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(i=Im(this.input.slice(e,this.pos)),++this.pos):xt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(p.num,i)};O.readNumber=function(t){var e=this.pos;!t&&this.readInt(10,void 0,!0)===null&&this.raise(e,"Invalid number");var i=this.pos-e>=2&&this.input.charCodeAt(e)===48;i&&this.strict&&this.raise(e,"Invalid number");var n=this.input.charCodeAt(this.pos);if(!i&&!t&&this.options.ecmaVersion>=11&&n===110){var s=Im(this.input.slice(e,this.pos));return++this.pos,xt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(p.num,s)}i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1),n===46&&!i&&(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),(n===69||n===101)&&!i&&(n=this.input.charCodeAt(++this.pos),(n===43||n===45)&&++this.pos,this.readInt(10)===null&&this.raise(e,"Invalid number")),xt(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o=Wv(this.input.slice(e,this.pos),i);return this.finishToken(p.num,o)};O.readCodePoint=function(){var t=this.input.charCodeAt(this.pos),e;if(t===123){this.options.ecmaVersion<6&&this.unexpected();var i=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(i,"Code point out of bounds")}else e=this.readHexChar(4);return e};O.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;n===92?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):n===8232||n===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(kn(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(p.string,e)};var Em={};O.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t===Em)this.readInvalidTemplateToken();else throw t}this.inTemplateElement=!1};O.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Em;this.raise(t,e)};O.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(i===96||i===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===p.template||this.type===p.invalidTemplate)?i===36?(this.pos+=2,this.finishToken(p.dollarBraceL)):(++this.pos,this.finishToken(p.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(p.template,t));if(i===92)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(kn(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:t+=`
`;break;default:t+=String.fromCharCode(i);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}};O.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(p.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};O.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ut(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var i=this.pos-1;this.invalidStringToken(i,"Invalid escape sequence in template string")}default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],s=parseInt(n,8);return s>255&&(n=n.slice(0,-1),s=parseInt(n,8)),this.pos+=n.length-1,e=this.input.charCodeAt(this.pos),(n!=="0"||e===56||e===57)&&(this.strict||t)&&this.invalidStringToken(this.pos-1-n.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(s)}return kn(e)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(e)}};O.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return i===null&&this.invalidStringToken(e,"Bad character escape sequence"),i};O.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var s=this.fullCharCodeAtPos();if(ci(s,n))this.pos+=s<=65535?1:2;else if(s===92){this.containsEsc=!0,t+=this.input.slice(i,this.pos);var o=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?xt:ci)(a,n)||this.invalidStringToken(o,"Invalid Unicode escape"),t+=Ut(a),i=this.pos}else break;e=!1}return t+this.input.slice(i,this.pos)};O.readWord=function(){var t=this.readWord1(),e=p.name;return this.keywords.test(t)&&(e=Ua[t]),this.finishToken(e,t)};var jv="8.15.0";ue.acorn={Parser:ue,version:jv,defaultOptions:pa,Position:ls,SourceLocation:Fo,getLineInfo:Zf,Node:Go,TokenType:F,tokTypes:p,keywordTypes:Ua,TokContext:Qe,tokContexts:ee,isIdentifierChar:ci,isIdentifierStart:xt,Token:qa,isNewLine:kn,lineBreak:Be,lineBreakG:hv,nonASCIIwhitespace:Qf};function Gv(t,e){return ue.parse(t,e)}var qv=function(t,e,i,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,i):s?s.value=i:e.set(t,i),i},$v=function(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)},Xs;class In{constructor(){Xs.set(this,[]),this.visitor=new sv,this.scope=this.visitor.scope,this.scope.set("print",e=>console.log(...e)),this.defineObject("console",console),this.defineObject("Math",Math),this.defineObject("String",String),this.defineObject("Number",Number),this.defineObject("Array",Array),this.defineObject("Date",Date)}defineObject(e,i){this.visitor.on(e,(n,s)=>{if(n.type==="Identifier")return i;if(n.type==="CallExpression"&&n.callee.type==="MemberExpression"){const o=s.visitNode(n.callee.property),a=n.arguments.map(d=>s.visitNode(d)),l=i[o];return l?l.apply(i,a):"__continue_exec"}return"__continue_exec"})}evaluate(e){const i=In.parseScript(e);return qv(this,Xs,i.body,"f"),this.visitor.setAST($v(this,Xs,"f")),this.visitor.run()}static parseScript(e,i){try{return Gv(e,{ecmaVersion:2020,...i||{}})}catch(n){const s=n.message.match(/\((\d+):(\d+)\)/);if(s){const o=parseInt(s[1],10),a=parseInt(s[2],10),d=e.split(`
`)[o-1],_=d?d.substring(Math.max(0,a-10),a+10):"";throw new bo(`${n.message.replace(/\(.*\)/,"").trim()} at line ${o}, column ${a}: ${_}`,{errorLine:d})}else throw new bo(n.message)}}}Xs=new WeakMap;const Kv="YOUTUBEJS",Bt={ERROR:1,WARNING:2,INFO:3,DEBUG:4},Ap={[Bt.ERROR]:(...t)=>console.error(...t),[Bt.WARNING]:(...t)=>console.warn(...t),[Bt.INFO]:(...t)=>console.info(...t),[Bt.DEBUG]:(...t)=>console.debug(...t)};let Yv=[Bt.WARNING];function $o(t,e,i){if(!Ap[t]||!Yv.includes(t))return;const n=[`[${Kv}]`];e&&n.push(`[${e}]`),Ap[t](`${n.join("")}:`,...i||[])}const ve=(t,...e)=>$o(Bt.WARNING,t,e),Jr=(t,...e)=>$o(Bt.ERROR,t,e),ke=(t,...e)=>$o(Bt.INFO,t,e),ps=(t,...e)=>$o(Bt.DEBUG,t,e);var ce,Y,gt,Et,yi;const Pm=Symbol("ObservedArray.isObserved");class u{constructor(){this.type=this.constructor.type}is(...e){return e.some(i=>this.type===i.type)}as(...e){if(!this.is(...e))throw new qi(`Cannot cast ${this.type} to one of ${e.map(i=>i.type).join(", ")}`);return this}hasKey(e){return Reflect.has(this,e)}key(e){if(!this.hasKey(e))throw new qi(`Missing key ${e}`);return new $a(this[e])}}u.type="YTNode";const zv="Maybe";class $a{constructor(e){ce.add(this),Y.set(this,void 0),v(this,Y,e,"f")}get typeof(){return typeof r(this,Y,"f")}string(){return r(this,ce,"m",Et).call(this,"string")}isString(){return r(this,ce,"m",gt).call(this,"string")}number(){return r(this,ce,"m",Et).call(this,"number")}isNumber(){return r(this,ce,"m",gt).call(this,"number")}bigint(){return r(this,ce,"m",Et).call(this,"bigint")}isBigint(){return r(this,ce,"m",gt).call(this,"bigint")}boolean(){return r(this,ce,"m",Et).call(this,"boolean")}isBoolean(){return r(this,ce,"m",gt).call(this,"boolean")}symbol(){return r(this,ce,"m",Et).call(this,"symbol")}isSymbol(){return r(this,ce,"m",gt).call(this,"symbol")}undefined(){return r(this,ce,"m",Et).call(this,"undefined")}isUndefined(){return r(this,ce,"m",gt).call(this,"undefined")}null(){if(r(this,Y,"f")!==null)throw new TypeError(`Expected null, got ${typeof r(this,Y,"f")}`);return r(this,Y,"f")}isNull(){return r(this,Y,"f")===null}object(){return r(this,ce,"m",Et).call(this,"object")}isObject(){return r(this,ce,"m",gt).call(this,"object")}function(){return r(this,ce,"m",Et).call(this,"function")}isFunction(){return r(this,ce,"m",gt).call(this,"function")}array(){if(!Array.isArray(r(this,Y,"f")))throw new TypeError(`Expected array, got ${typeof r(this,Y,"f")}`);return r(this,Y,"f")}arrayOfMaybe(){const e=[];return new Proxy(this.array(),{get(i,n){return Reflect.has(e,n)?Reflect.get(i,n):new $a(Reflect.get(i,n))}})}isArray(){return Array.isArray(r(this,Y,"f"))}node(){if(!(r(this,Y,"f")instanceof u))throw new TypeError(`Expected YTNode, got ${r(this,Y,"f").constructor.name}`);return r(this,Y,"f")}isNode(){return r(this,Y,"f")instanceof u}nodeOfType(...e){return this.node().as(...e)}isNodeOfType(...e){return this.isNode()&&this.node().is(...e)}observed(){if(!this.isObserved())throw new TypeError(`Expected ObservedArray, got ${typeof r(this,Y,"f")}`);return r(this,Y,"f")}isObserved(){return r(this,Y,"f")?.[Pm]}parsed(){if(!(r(this,Y,"f")instanceof ds))throw new TypeError(`Expected SuperParsedResult, got ${typeof r(this,Y,"f")}`);return r(this,Y,"f")}isParsed(){return r(this,Y,"f")instanceof ds}any(){return ve(zv,"This call is not meant to be used outside of debugging. Please use the specific type getter instead."),r(this,Y,"f")}instanceof(e){if(!this.isInstanceof(e))throw new TypeError(`Expected instance of ${e.name}, got ${r(this,Y,"f").constructor.name}`);return r(this,Y,"f")}isInstanceof(e){return r(this,Y,"f")instanceof e}}Y=new WeakMap,ce=new WeakSet,gt=function(e){return typeof r(this,Y,"f")===e},Et=function(e){if(!r(this,ce,"m",gt).call(this,e))throw new TypeError(`Expected ${e}, got ${this.typeof}`);return r(this,Y,"f")};class ds{constructor(e){yi.set(this,void 0),v(this,yi,e,"f")}get is_null(){return r(this,yi,"f")===null}get is_array(){return!this.is_null&&Array.isArray(r(this,yi,"f"))}get is_node(){return!this.is_array}array(){if(!this.is_array)throw new TypeError("Expected an array, got a node");return r(this,yi,"f")}item(){if(!this.is_node)throw new TypeError("Expected a node, got an array");return r(this,yi,"f")}}yi=new WeakMap;function $(t){return new Proxy(t,{get(e,i){return i=="get"?(n,s)=>e.find((o,a)=>{const l=Cd(n,o);return l&&s&&e.splice(a,1),l}):i==Pm?!0:i=="getAll"?(n,s)=>e.filter((o,a)=>{const l=Cd(n,o);return l&&s&&e.splice(a,1),l}):i=="matchCondition"?n=>e.find(s=>n(s)):i=="filterType"?(...n)=>$(e.filter(s=>!!s.is(...n))):i=="firstOfType"?(...n)=>e.find(s=>!!s.is(...n)):i=="first"?()=>e[0]:i=="as"?(...n)=>$(e.map(s=>{if(s.is(...n))return s;throw new qi(`Expected node of any type ${n.map(o=>o.type).join(", ")}, got ${s.type}`)})):i=="remove"?n=>e.splice(n,1):Reflect.get(e,i)}})}class Rm extends Map{getType(...e){return e=e.flat(),$(e.flatMap(i=>this.get(i.type)||[]))}}class Xv{constructor(e){this.label=e.label}}class vt{constructor(e){"accessibilityIdentifier"in e&&(this.accessibility_identifier=e.accessibilityIdentifier),"identifier"in e&&(this.identifier={accessibility_id_type:e.identifier.accessibilityIdType}),"label"in e&&(this.label=e.label)}}const te={YT_BASE:"https://www.youtube.com",YT_SUGGESTIONS:"https://suggestqueries-clients6.youtube.com",YT_UPLOAD:"https://upload.youtube.com/",API:{PRODUCTION_1:"https://www.youtube.com/youtubei/"},GOOGLE_SEARCH_BASE:"https://www.google.com/"},Mp={REGEX:{TV_SCRIPT:new RegExp('<script\\s+id="base-js"\\s+src="([^"]+)"[^>]*><\\/script>'),CLIENT_IDENTITY:new RegExp('clientId:"(?<client_id>[^"]+)",[^"]*?:"(?<client_secret>[^"]+)"')}},D={IOS:{NAME:"iOS",VERSION:"20.11.6",USER_AGENT:"com.google.ios.youtube/20.11.6 (iPhone10,4; U; CPU iOS 16_7_7 like Mac OS X)",DEVICE_MODEL:"iPhone10,4",OS_NAME:"iOS",OS_VERSION:"16.7.7.20H330"},WEB:{NAME:"WEB",VERSION:"2.20250222.10.00",API_KEY:"AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8",API_VERSION:"v1",SUGG_EXP_ID:"ytzpb5_e2,ytpo.bo.lqp.elu=1,ytpo.bo.lqp.ecsc=1,ytpo.bo.lqp.mcsc=3,ytpo.bo.lqp.mec=1,ytpo.bo.lqp.rw=0.8,ytpo.bo.lqp.fw=0.2,ytpo.bo.lqp.szp=1,ytpo.bo.lqp.mz=3,ytpo.bo.lqp.al=en_us,ytpo.bo.lqp.zrm=1,ytpo.bo.lqp.er=1,ytpo.bo.ro.erl=1,ytpo.bo.ro.mlus=3,ytpo.bo.ro.erls=3,ytpo.bo.qfo.mlus=3,ytzprp.ppp.e=1,ytzprp.ppp.st=772,ytzprp.ppp.p=5"},MWEB:{NAME:"MWEB",VERSION:"2.20250224.01.00"},WEB_KIDS:{NAME:"WEB_KIDS",VERSION:"2.20250221.11.00"},YTMUSIC:{NAME:"WEB_REMIX",VERSION:"1.20250219.01.00"},ANDROID:{NAME:"ANDROID",VERSION:"19.35.36",SDK_VERSION:33,USER_AGENT:"com.google.android.youtube/19.35.36(Linux; U; Android 13; en_US; SM-S908E Build/TP1A.220624.014) gzip"},YTSTUDIO_ANDROID:{NAME:"ANDROID_CREATOR",VERSION:"22.43.101"},YTMUSIC_ANDROID:{NAME:"ANDROID_MUSIC",VERSION:"5.34.51"},TV:{NAME:"TVHTML5",VERSION:"7.20250219.14.00",USER_AGENT:"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version"},TV_EMBEDDED:{NAME:"TVHTML5_SIMPLY_EMBEDDED_PLAYER",VERSION:"2.0"},WEB_EMBEDDED:{NAME:"WEB_EMBEDDED_PLAYER",VERSION:"1.20250219.01.00"},WEB_CREATOR:{NAME:"WEB_CREATOR",VERSION:"1.20241203.01.00"}},ma={iOS:"5",WEB:"1",MWEB:"2",WEB_KIDS:"76",WEB_REMIX:"67",ANDROID:"3",ANDROID_CREATOR:"14",ANDROID_MUSIC:"21",TVHTML5:"7",TVHTML5_SIMPLY_EMBEDDED_PLAYER:"85",WEB_EMBEDDED_PLAYER:"56",WEB_CREATOR:"62"},wn={accept:"*/*",origin:"https://www.youtube.com",referer:"https://www.youtube.com",DNT:"?1"},Dp=["IOS","WEB","MWEB","YTKIDS","YTMUSIC","ANDROID","YTSTUDIO_ANDROID","YTMUSIC_ANDROID","TV","TV_EMBEDDED","WEB_EMBEDDED","WEB_CREATOR"];var Xi;class Am extends EventTarget{constructor(){super(),Xi.set(this,new Map)}emit(e,...i){const n=new V.shim.CustomEvent(e,{detail:i});this.dispatchEvent(n)}on(e,i){const n=s=>{s instanceof V.shim.CustomEvent?i(...s.detail):i(s)};r(this,Xi,"f").set(i,n),this.addEventListener(e,n)}once(e,i){const n=s=>{s instanceof V.shim.CustomEvent?i(...s.detail):i(s),this.off(e,i)};r(this,Xi,"f").set(i,n),this.addEventListener(e,n)}off(e,i){const n=r(this,Xi,"f").get(i);n&&(this.removeEventListener(e,n),r(this,Xi,"f").delete(i))}}Xi=new WeakMap;const Qv={"&":"&amp;",'"':"&quot;","'":"&apos;","<":"&lt;",">":"&gt;"};function Np(t){return t.replace(/([&"<>'])/g,(e,i)=>Qv[i])}function Jv(t){return t.charAt(0).toUpperCase()+t.slice(1)}function H(t,e,...i){const n=i.flat();return typeof t=="function"?t({...e,children:n}):{type:Jv(t),props:{...e,children:n}}}async function Mm(t){if(typeof t=="string")return Np(t);let e=`<${t.type}`;if(t.props)for(const i of Object.keys(t.props))i!=="children"&&t.props[i]!==void 0&&(e+=` ${i}="${Np(`${t.props[i]}`)}"`);if(t.props.children){const i=await Promise.all((await Promise.all(t.props.children.flat())).flat().filter(n=>!!n).map(n=>Mm(n)));if(i.length>0)return e+=`>${i.join("")}</${t.type}>`,e}return`${e}/>`}async function Zv(t){return`<?xml version="1.0" encoding="utf-8"?>${await Mm(await t)}`}function e0(t){return t.children}class Ss extends u{constructor(e){super();const i=e.spec.split("|"),n=new URL(i.shift());this.boards=i.map((s,o)=>{const[a,l,d,_,b,k,x,I]=s.split("#");n.searchParams.set("sigh",I);const C=Math.ceil(parseInt(d,10)/(parseInt(_,10)*parseInt(b,10)));return{type:"vod",template_url:n.toString().replace("$L",o).replace("$N",x),thumbnail_width:parseInt(a,10),thumbnail_height:parseInt(l,10),thumbnail_count:parseInt(d,10),interval:parseInt(k,10),columns:parseInt(_,10),rows:parseInt(b,10),storyboard_count:C}})}}Ss.type="PlayerStoryboardSpec";const t0="StreamingInfo";function i0(t,e){const i=new Map,n=t.some(s=>!!s.audio_track);for(const s of t){if((!s.index_range||!s.init_range)&&!s.is_type_otf&&!e)continue;const o=s.mime_type.split(";")[0],a=rt(s.mime_type,'codecs="','"')?.split(".")[0],l=s.color_info?Object.values(s.color_info).join("-"):"",d=s.audio_track?.id||"",_=s.is_drc?"drc":"",b=`${o}-${a}-${l}-${d}-${_}`;i.has(b)||i.set(b,[]),i.get(b)?.push(s)}return{groups:Array.from(i.values()),has_multiple_audio_tracks:n}}function Dm(t,e){if(t.length>1&&new Set(t.map(i=>rt(i.mime_type,'codecs="','"'))).size===1)return e.push("codecs"),rt(t[0].mime_type,'codecs="','"')}function Nm(t,e,i){if(t.length>1&&new Set(t.map(n=>n.fps)).size===1)return i.push(e),Number(t[0][e])}function n0(t,e){if(t.length>1&&new Set(t.map(i=>i.audio_channels||2)).size===1)return e.push("AudioChannelConfiguration"),t[0].audio_channels}async function s0(t,e){const i=await e.session.http.fetch_function(`${t}&rn=0&sq=0`,{method:"GET",headers:wn,redirect:"follow"}),n=i.url.replace("&rn=0","").replace("&sq=0",""),s=await i.text(),o=rt(s,"Segment-Durations-Ms:",`\r
`)?.split(",");if(!o)throw new m("Failed to extract the segment durations from this OTF stream",{url:t});const a=[];for(const l of o){const d=l.trim();if(d.length===0)continue;let _;const b=rt(d,"(r=",")");b&&(_=parseInt(b)),a.push({duration:parseInt(d),repeat_count:_})}return{init_url:`${n}&sq=0`,media_url:`${n}&sq=$Number$`,timeline:a}}async function Lm(t,e){const i=await e.session.http.fetch_function(`${t}&rn=0&sq=0`,{method:"HEAD",headers:wn,redirect:"follow"}),n=parseInt(i.headers.get("X-Head-Time-Millis")||""),s=parseInt(i.headers.get("X-Head-Seqnum")||"");if(isNaN(n)||isNaN(s))throw new m("Failed to extract the duration or segment count for this Post Live DVR video");return{duration:n/1e3,segment_count:s}}async function o0(t,e,i,n,s,o){if(!t.item){const a=new URL(e.decipher(s));a.searchParams.set("cpn",o||"");const l=i(a).toString();t.item=await Lm(l,n)}return t.item.duration}function Om(t,e,i,n,s,o){const a=new URL(t.decipher(n));a.searchParams.set("cpn",s||"");const l=e(a).toString();if(t.is_type_otf){if(!i)throw new m("Unable to get segment durations for this OTF stream without an Actions instance",{format:t});return{is_oft:!0,is_post_live_dvr:!1,getSegmentTemplate(){return s0(l,i)}}}if(o){if(!i)throw new m("Unable to get segment count for this Post Live DVR video without an Actions instance",{format:t});const _=t.target_duration_dec;if(typeof _!="number")throw new m("Format is missing target_duration_dec",{format:t});return{is_oft:!1,is_post_live_dvr:!0,async getSegmentTemplate(){return o.item||(o.item=await Lm(l,i)),{media_url:`${l}&sq=$Number$`,timeline:[{duration:_*1e3,repeat_count:o.item.segment_count}]}}}}if(!t.index_range||!t.init_range)throw new m("Index and init ranges not available",{format:t});return{is_oft:!1,is_post_live_dvr:!1,base_url:l,index_range:t.index_range,init_range:t.init_range}}function r0(t,e,i,n,s,o,a){new URL(t.decipher(s)).searchParams.set("cpn",o||"");const d=[t.itag.toString()];return t.audio_track&&d.push(t.audio_track.id),t.is_drc&&d.push("drc"),{uid:d.join("-"),bitrate:t.bitrate,codecs:e.includes("codecs")?void 0:rt(t.mime_type,'codecs="','"'),audio_sample_rate:e.includes("audio_sample_rate")?void 0:t.audio_sample_rate,channels:e.includes("AudioChannelConfiguration")?void 0:t.audio_channels||2,segment_info:Om(t,i,n,s,o,a)}}function a0(t,e){if(!t.audio_track&&!e)return;const i=[t.is_original?"main":"alternate"];return(t.is_dubbed||t.is_auto_dubbed)&&i.push("dub"),t.is_descriptive&&i.push("description"),t.is_drc&&i.push("enhanced-audio-intelligibility"),i}function c0(t,e,i,n,s,o,a){const l=t[0],{audio_track:d}=l,_=[],b=!!a;let k;return d?b&&l.is_drc?k=a.label_drc_multiple(d.display_name):k=d.display_name:b&&(k=l.is_drc?a.label_drc:a.label_original),{mime_type:l.mime_type.split(";")[0],language:l.language??void 0,codecs:Dm(t,_),audio_sample_rate:Nm(t,"audio_sample_rate",_),track_name:k,track_roles:a0(l,b),channels:n0(t,_),representations:t.map(I=>r0(I,_,e,i,n,s,o))}}const u0={BT709:"1",BT2020:"9"},Lp={BT709:"1",BT2020_10:"14",SMPTEST2084:"16",ARIB_STD_B67:"18"},l0={BT709:"1",BT2020_NCL:"14"};function h0(t){const e=t.color_info;let i,n,s;if(e){if(e.primaries&&(i=u0[e.primaries]),e.transfer_characteristics&&(n=Lp[e.transfer_characteristics]),e.matrix_coefficients&&(s=l0[e.matrix_coefficients],!s)){const a=new URL(t.url),l=JSON.parse(JSON.stringify(t));l.url="REDACTED",l.signature_cipher="REDACTED",l.cipher="REDACTED",ve(t0,`Unknown matrix coefficients "${e.matrix_coefficients}". The DASH manifest is still usable without this.
Please report it at ${V.shim.info.bugs_url} so we can add support for it.
InnerTube client: ${a.searchParams.get("c")}
format:`,l)}}else rt(t.mime_type,'codecs="','"')?.startsWith("avc1")&&(n=Lp.BT709);return{primaries:i,transfer_characteristics:n,matrix_coefficients:s}}function p0(t,e,i,n,s,o,a){return{uid:t.itag.toString(),bitrate:t.bitrate,width:t.width,height:t.height,codecs:i.includes("codecs")?void 0:rt(t.mime_type,'codecs="','"'),fps:i.includes("fps")?void 0:t.fps,segment_info:Om(t,e,s,n,o,a)}}function d0(t,e,i,n,s,o){const a=t[0],l=h0(a),d=[];return{mime_type:a.mime_type.split(";")[0],color_info:l,codecs:Dm(t,d),fps:Nm(t,"fps",d),representations:t.map(b=>p0(b,e,d,i,n,s,o))}}function f0(t){const e=new Map,i=t.is(Ss)?t.boards:[t.board];for(const n of i){const s=new URL(n.template_url).pathname.split(".").pop(),o=`image/${s==="jpg"?"jpeg":s}`;e.has(o)||e.set(o,[]),e.get(o)?.push(n)}return e}async function m0(t,e,i,n,s){const o=e.template_url,a=i(new URL(o.replace("$M","0"))),l=s.response?s.response:t.session.http.fetch_function(a,{method:"HEAD",headers:wn});return s.response=l,(await l).headers.get("Content-Type")||n}async function _0(t,e,i){const n=e.template_url,s=[],o=Math.min(e.type==="vod"?e.storyboard_count:5,10);for(let d=0;d<o;d++){const _=new URL(n.replace("$M",d.toString())),b=d===0&&i.response?i.response:t.session.http.fetch_function(_,{method:"HEAD",headers:wn});d===0&&(i.response=b),s.push(b)}const a=await Promise.all(s),l=[];for(const d of a)l.push(parseInt(d.headers.get("Content-Length")||"0"));return Math.ceil(Math.max(...l)/(e.rows*e.columns)*8)}function b0(t,e,i,n,s){const o=i.template_url,a=new URL(o.replace("$M","$Number$"));let l;return i.type==="vod"?l=t/i.storyboard_count:l=t*i.columns*i.rows,{uid:`thumbnails_${i.thumbnail_width}x${i.thumbnail_height}`,getBitrate(){return _0(e,i,s)},sheet_width:i.thumbnail_width*i.columns,sheet_height:i.thumbnail_height*i.rows,thumbnail_height:i.thumbnail_height,thumbnail_width:i.thumbnail_width,rows:i.rows,columns:i.columns,template_duration:Math.round(l),template_url:n(a).toString(),getURL(_){return a.toString().replace("$Number$",_.toString())}}}function y0(t,e,i,n){const s=f0(i),o={};return Array.from(s.entries()).map(([a,l])=>({probable_mime_type:a,getMimeType(){return m0(e,l[0],n,a,o)},representations:l.map(d=>b0(t,e,d,n,o))}))}function g0(t,e,i){const n=e==="vtt"?"text/vtt":"application/ttml+xml";return t.map(s=>{const o=new URL(s.base_url);o.searchParams.set("fmt",e);const a=["caption"];return o.searchParams.has("tlang")&&a.push("dub"),{mime_type:n,language:s.language_code,track_name:s.name.toString(),track_roles:a,representation:{uid:`text-${s.vss_id}`,base_url:i(o).toString()}}})}function Bm(t,e=!1,i=b=>b,n,s,o,a,l,d,_){if(!t)throw new m("Streaming data not available");const b=n?t.adaptive_formats.filter(X=>!n(X)):t.adaptive_formats;let k,x;if(e){if(x={},!a)throw new m("Unable to get duration or segment count for this Post Live DVR video without an Actions instance");k=()=>x?o0(x,b[0],i,a,o,s):Promise.resolve(0)}else{const X=b[0].approx_duration_ms/1e3;k=()=>Promise.resolve(X)}const{groups:I,has_multiple_audio_tracks:C}=i0(b,e),{video_groups:E,audio_groups:M}=I.reduce((X,Ce)=>Ce[0].has_audio?(C&&!Ce[0].audio_track||X.audio_groups.push(Ce),X):(X.video_groups.push(Ce),X),{video_groups:[],audio_groups:[]});let P;M.flat().some(X=>X.is_drc)&&(P={label_original:_?.label_original||"Original",label_drc:_?.label_drc||"Stable Volume",label_drc_multiple:_?.label_drc_multiple||(X=>`${X} (Stable Volume)`)});const L=M.map(X=>c0(X,i,a,o,s,x,P)),me=E.map(X=>d0(X,i,o,a,s,x));let jt=[];if(l&&a){let X;if(l.is(Ss))X=b[0].approx_duration_ms/1e3;else{const Ce=b[0].target_duration_dec;if(Ce===void 0)throw new m("Format is missing target_duration_dec",{format:b[0]});X=Ce}jt=y0(X,a,l,i)}let Xe=[];if(d&&_?.captions_format){if(_.captions_format!=="vtt"&&_.captions_format!=="ttml")throw new m("Invalid captions format",_.captions_format);Xe=g0(d,_.captions_format,i)}return{getDuration:k,audio_sets:L,video_sets:me,image_sets:jt,text_sets:Xe}}async function w0({info:t}){if(!t.is_oft&&!t.is_post_live_dvr)return null;const e=await t.getSegmentTemplate();return H("segmentTemplate",{startNumber:e.init_url?"1":"0",timescale:"1000",initialization:e.init_url,media:e.media_url},H("segmentTimeline",null,e.timeline.map(i=>H("s",{d:i.duration,r:i.repeat_count}))))}function Op({info:t}){return t.is_oft||t.is_post_live_dvr?H(w0,{info:t}):H(e0,null,H("baseURL",null,t.base_url),H("segmentBase",{indexRange:`${t.index_range.start}-${t.index_range.end}`},H("initialization",{range:`${t.init_range.start}-${t.init_range.end}`})))}async function x0({streamingData:t,isPostLiveDvr:e,transformURL:i,rejectFormat:n,cpn:s,player:o,actions:a,storyboards:l,captionTracks:d,options:_}){const{getDuration:b,audio_sets:k,video_sets:x,image_sets:I,text_sets:C}=Bm(t,e,i,n,s,o,a,l,d,_);return H("mPD",{xmlns:"urn:mpeg:dash:schema:mpd:2011",minBufferTime:"PT1.500S",profiles:"urn:mpeg:dash:profile:isoff-main:2011",type:"static",mediaPresentationDuration:`PT${await b()}S`,"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"urn:mpeg:dash:schema:mpd:2011 http://standards.iso.org/ittf/PubliclyAvailableStandards/MPEG-DASH_schema_files/DASH-MPD.xsd"},H("period",null,k.map((E,M)=>H("adaptationSet",{id:M,mimeType:E.mime_type,startWithSAP:"1",subsegmentAlignment:"true",lang:E.language,codecs:E.codecs,audioSamplingRate:E.audio_sample_rate,contentType:"audio"},E.track_roles&&E.track_roles.map(P=>H("role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:P})),E.track_name&&H("label",{id:M},E.track_name),E.channels&&H("audioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:E.channels}),E.representations.map(P=>H("representation",{id:P.uid,bandwidth:P.bitrate,codecs:P.codecs,audioSamplingRate:P.audio_sample_rate},P.channels&&H("audioChannelConfiguration",{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:P.channels}),H(Op,{info:P.segment_info}))))),x.map((E,M)=>H("adaptationSet",{id:M+k.length,mimeType:E.mime_type,startWithSAP:"1",subsegmentAlignment:"true",codecs:E.codecs,maxPlayoutRate:"1",frameRate:E.fps,contentType:"video"},E.color_info.primaries&&H("supplementalProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:ColourPrimaries",value:E.color_info.primaries}),E.color_info.transfer_characteristics&&H("supplementalProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:TransferCharacteristics",value:E.color_info.transfer_characteristics}),E.color_info.matrix_coefficients&&H("supplementalProperty",{schemeIdUri:"urn:mpeg:mpegB:cicp:MatrixCoefficients",value:E.color_info.matrix_coefficients}),E.representations.map(P=>H("representation",{id:P.uid,bandwidth:P.bitrate,width:P.width,height:P.height,codecs:P.codecs,frameRate:P.fps},H(Op,{info:P.segment_info}))))),I.map(async(E,M)=>H("adaptationSet",{id:M+k.length+x.length,mimeType:await E.getMimeType(),contentType:"image"},E.representations.map(async P=>H("representation",{id:`thumbnails_${P.thumbnail_width}x${P.thumbnail_height}`,bandwidth:await P.getBitrate(),width:P.sheet_width,height:P.sheet_height},H("essentialProperty",{schemeIdUri:"http://dashif.org/thumbnail_tile",value:`${P.columns}x${P.rows}`}),H("segmentTemplate",{media:P.template_url,duration:P.template_duration,startNumber:"0"}))))),C.map((E,M)=>H("adaptationSet",{id:M+k.length+x.length+I.length,mimeType:E.mime_type,lang:E.language,contentType:"text"},E.track_roles.map(P=>H("role",{schemeIdUri:"urn:mpeg:dash:role:2011",value:P})),H("label",{id:M+k.length},E.track_name),H("representation",{id:E.representation.uid,bandwidth:"0"},H("baseURL",null,E.representation.base_url))))))}function v0(t,e=!1,i=b=>b,n,s,o,a,l,d,_){if(!t)throw new m("Streaming data not available");return Zv(H(x0,{streamingData:t,isPostLiveDvr:e,transformURL:i,options:_,rejectFormat:n,cpn:s,player:o,actions:a,storyboards:l,captionTracks:d}))}async function k0(t,e,i,n,s,o){if(i?.status==="UNPLAYABLE")throw new m("Video is unplayable",{error_type:"UNPLAYABLE"});if(i?.status==="LOGIN_REQUIRED")throw new m("Video is login required",{error_type:"LOGIN_REQUIRED"});if(!n)throw new m("Streaming data not available.",{error_type:"NO_STREAMING_DATA"});const a={quality:"360p",type:"video+audio",format:"mp4",range:void 0,...t},l=Vm(a,n),d=l.decipher(s);if(a.type==="video+audio"&&!t.range){const C=await e.session.http.fetch_function(`${d}&cpn=${o}`,{method:"GET",headers:wn,redirect:"follow"});if(!C.ok)throw new m("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:C});const E=C.body;if(!E)throw new m("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:C});return E}const _=1048576*10;let b=t.range?t.range.start:0,k=t.range?t.range.end:_,x=!1,I;return new V.shim.ReadableStream({start(){},pull:async C=>{if(x){C.close();return}return(k>=(l.content_length?l.content_length:0)||t.range)&&(x=!0),new Promise(async(E,M)=>{try{I=new AbortController;const P=await e.session.http.fetch_function(`${d}&cpn=${o}&range=${b}-${k||""}`,{method:"GET",headers:{...wn},signal:I.signal});if(!P.ok)throw new m("The server responded with a non 2xx status code",{error_type:"FETCH_FAILED",response:P});const L=P.body;if(!L)throw new m("Could not get ReadableStream from fetch Response.",{error_type:"FETCH_FAILED",response:P});for await(const me of iT(L))C.enqueue(me);b=k+1,k+=_,E()}catch(P){M(P)}})},async cancel(C){I.abort(C)}},{highWaterMark:1,size(C){return C.byteLength}})}function Vm(t,e){if(!e)throw new m("Streaming data not available");const i=[...e.formats||[],...e.adaptive_formats||[]];if(t.itag){const k=i.filter(x=>x.itag===t.itag);if(!k.length)throw new m("No matching formats found",{options:t});return k[0]}const n=t.type?t.type.includes("audio"):!0,s=t.type?t.type.includes("video"):!0,o=t.language||"original",a=t.quality||"best";let l=-1;const d=["best","bestefficiency"].includes(a),_=a!=="best";let b=i.filter(k=>n&&!k.has_audio||s&&!k.has_video||t.codec&&!k.mime_type.includes(t.codec)||t.format!=="any"&&!k.mime_type.includes(t.format||"mp4")||!d&&k.quality_label!==a?!1:(k.width&&l<k.width&&(l=k.width),!0));if(!b.length)throw new m("No matching formats found",{options:t});if(d&&s&&(b=b.filter(k=>k.width===l)),n&&!s){const k=b.filter(x=>o!=="original"?!x.has_video&&!x.has_text&&x.language===o:!x.has_video&&!x.has_text&&x.is_original);k.length>0&&(b=k)}return _?b.sort((k,x)=>k.bitrate-x.bitrate):b.sort((k,x)=>x.bitrate-k.bitrate),b[0]}var _a,Qs,Js,Bn,Um;class S0{constructor(e,i,n){_a.add(this),Qs.set(this,void 0),Js.set(this,void 0),Bn.set(this,void 0),v(this,Qs,e,"f"),v(this,Js,i,"f"),v(this,Bn,n||V.shim.fetch,"f")}get fetch_function(){return r(this,Bn,"f")}async fetch(e,i){const n=r(this,Qs,"f"),s=te.API.PRODUCTION_1+n.api_version,o=i?.baseURL||s,a=typeof e=="string"?!o.endsWith("/")&&!e.startsWith("/")?new URL(`${o}/${e}`):new URL(o+e):e instanceof URL?e:new URL(e.url,o),l=i?.headers||(e instanceof V.shim.Request?e.headers:new V.shim.Headers)||new V.shim.Headers,d=i?.body||(e instanceof V.shim.Request?e.body:void 0),_=new V.shim.Headers(l);_.set("Accept","*/*"),_.set("Accept-Language","*"),_.set("X-Goog-Visitor-Id",n.context.client.visitorData||""),_.set("X-Youtube-Client-Version",n.context.client.clientVersion||"");const b=ma[n.context.client.clientName];b&&_.set("X-Youtube-Client-Name",b),V.shim.server&&(_.set("User-Agent",n.user_agent||""),_.set("Origin",a.origin)),a.searchParams.set("prettyPrint","false"),a.searchParams.set("alt","json");const k=_.get("Content-Type");let x=d,I=!1;const C=o===s||o===te.YT_UPLOAD;if(k==="application/json"&&C&&typeof d=="string"){const L={...JSON.parse(d),context:JSON.parse(JSON.stringify(n.context))};r(this,_a,"m",Um).call(this,L.context,L.client),_.set("X-Youtube-Client-Version",L.context.client.clientVersion);const me=ma[L.context.client.clientName];me&&_.set("X-Youtube-Client-Name",me),delete L.client,L.context.client.clientName==="ANDROID"||L.context.client.clientName==="ANDROID_MUSIC"?(_.set("User-Agent",D.ANDROID.USER_AGENT),_.set("X-GOOG-API-FORMAT-VERSION","2")):L.context.client.clientName==="iOS"&&_.set("User-Agent",D.IOS.USER_AGENT),I=L.context.client.clientName==="WEB_KIDS",x=JSON.stringify(L)}else k==="application/x-protobuf"&&V.shim.server&&(_.set("User-Agent",D.ANDROID.USER_AGENT),_.set("X-GOOG-API-FORMAT-VERSION","2"),_.delete("X-Youtube-Client-Version"));if(n.logged_in&&C&&!I){const P=n.oauth;P.oauth2_tokens&&(P.shouldRefreshToken()&&await P.refreshAccessToken(),_.set("Authorization",`Bearer ${P.oauth2_tokens.access_token}`));const L=r(this,Js,"f");if(L){const me=nT(L,"SAPISID");me&&(_.set("Authorization",await eT(me)),_.set("X-Goog-Authuser",n.account_index.toString()),n.context.user.onBehalfOfUser&&_.set("X-Goog-PageId",n.context.user.onBehalfOfUser)),_.set("Cookie",L)}}const E=new V.shim.Request(a,e instanceof V.shim.Request?e:i),M=await r(this,Bn,"f").call(this,E,{body:x,headers:_,redirect:e instanceof V.shim.Request?e.redirect:i?.redirect||"follow",...V.shim.runtime!=="cf-worker"?{credentials:"include"}:{}});if(M.ok)return M;throw new m(`Request to ${M.url} failed with status ${M.status}`,await M.text())}}Qs=new WeakMap,Js=new WeakMap,Bn=new WeakMap,_a=new WeakSet,Um=function(e,i){if(i){if(!Dp.includes(i.toUpperCase()))throw new m(`Invalid client: ${i}`,{available_innertube_clients:Dp});switch((i==="ANDROID"||i==="YTMUSIC_ANDROID"||i==="YTMUSIC_ANDROID"||i==="YTSTUDIO_ANDROID")&&(e.client.androidSdkVersion=D.ANDROID.SDK_VERSION,e.client.userAgent=D.ANDROID.USER_AGENT,e.client.osName="Android",e.client.osVersion="13",e.client.platform="MOBILE"),i.toUpperCase()){case"MWEB":e.client.clientVersion=D.MWEB.VERSION,e.client.clientName=D.MWEB.NAME,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.platform="MOBILE";break;case"IOS":e.client.deviceMake="Apple",e.client.deviceModel=D.IOS.DEVICE_MODEL,e.client.clientVersion=D.IOS.VERSION,e.client.clientName=D.IOS.NAME,e.client.platform="MOBILE",e.client.osName=D.IOS.OS_NAME,e.client.osVersion=D.IOS.OS_VERSION,delete e.client.browserName,delete e.client.browserVersion;break;case"YTMUSIC":e.client.clientVersion=D.YTMUSIC.VERSION,e.client.clientName=D.YTMUSIC.NAME;break;case"ANDROID":e.client.clientVersion=D.ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=D.ANDROID.NAME;break;case"YTMUSIC_ANDROID":e.client.clientVersion=D.YTMUSIC_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=D.YTMUSIC_ANDROID.NAME;break;case"YTSTUDIO_ANDROID":e.client.clientVersion=D.YTSTUDIO_ANDROID.VERSION,e.client.clientFormFactor="SMALL_FORM_FACTOR",e.client.clientName=D.YTSTUDIO_ANDROID.NAME;break;case"TV":{e.client.clientVersion=D.TV.VERSION,e.client.clientName=D.TV.NAME,e.client.userAgent=D.TV.USER_AGENT;break}case"TV_EMBEDDED":e.client.clientName=D.TV_EMBEDDED.NAME,e.client.clientVersion=D.TV_EMBEDDED.VERSION,e.client.clientScreen="EMBED",e.thirdParty={embedUrl:te.YT_BASE};break;case"YTKIDS":e.client.clientVersion=D.WEB_KIDS.VERSION,e.client.clientName=D.WEB_KIDS.NAME,e.client.kidsAppInfo={categorySettings:{enabledCategories:["approved_for_you","black_joy","camp","collections","earth","explore","favorites","gaming","halloween","hero","learning","move","music","reading","shared_by_parents","shows","soccer","sports","spotlight","winter"]},contentSettings:{corpusPreference:"KIDS_CORPUS_PREFERENCE_YOUNGER",kidsNoSearchMode:"YT_KIDS_NO_SEARCH_MODE_OFF"}};break;case"WEB_EMBEDDED":e.client.clientName=D.WEB_EMBEDDED.NAME,e.client.clientVersion=D.WEB_EMBEDDED.VERSION,e.client.clientScreen="EMBED",e.thirdParty={embedUrl:te.GOOGLE_SEARCH_BASE};break;case"WEB_CREATOR":e.client.clientName=D.WEB_CREATOR.NAME,e.client.clientVersion=D.WEB_CREATOR.VERSION;break}}};function ba(t){const e=[],i={};for(let o=0;o<256;o++)i[String.fromCharCode(o)]=o;let n="",s=256;for(let o=0;o<t.length;o++){const a=t[o],l=n+a;i.hasOwnProperty(l)?n=l:(e.push(i[n]),i[l]=s++,n=a)}return n!==""&&e.push(i[n]),e.map(o=>String.fromCharCode(o)).join("")}function ya(t){const e={},i=t.split(""),n=[i.shift()],s=i.length>>>0;let o=256,a=n[0],l=a;for(let d=0;d<s;++d){const _=i[d].charCodeAt(0),b=_<256?i[d]:e[_]?e[_]:l+a;n.push(b),a=b.charAt(0),e[o++]=l+a,l=b}return n.join("")}function T0(){let t=0,e=0;for(let n=0;n<28;n+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[t,e]}let i=this.buf[this.pos++];if(t|=(i&15)<<28,e=(i&112)>>4,(i&128)==0)return this.assertBounds(),[t,e];for(let n=3;n<=31;n+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<n,(s&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Zr(t,e,i){for(let o=0;o<28;o=o+7){const a=t>>>o,l=!(!(a>>>7)&&e==0),d=(l?a|128:a)&255;if(i.push(d),!l)return}const n=t>>>28&15|(e&7)<<4,s=e>>3!=0;if(i.push((s?n|128:n)&255),!!s){for(let o=3;o<31;o=o+7){const a=e>>>o,l=!!(a>>>7),d=(l?a|128:a)&255;if(i.push(d),!l)return}i.push(e>>>31&1)}}const Zs=4294967296;function Bp(t){const e=t[0]==="-";e&&(t=t.slice(1));const i=1e6;let n=0,s=0;function o(a,l){const d=Number(t.slice(a,l));s*=i,n=n*i+d,n>=Zs&&(s=s+(n/Zs|0),n=n%Zs)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Hm(n,s):Ka(n,s)}function C0(t,e){let i=Ka(t,e);const n=i.hi&2147483648;n&&(i=Hm(i.lo,i.hi));const s=Fm(i.lo,i.hi);return n?"-"+s:s}function Fm(t,e){if({lo:t,hi:e}=I0(t,e),e<=2097151)return String(Zs*e+t);const i=t&16777215,n=(t>>>24|e<<8)&16777215,s=e>>16&65535;let o=i+n*6777216+s*6710656,a=n+s*8147497,l=s*2;const d=1e7;return o>=d&&(a+=Math.floor(o/d),o%=d),a>=d&&(l+=Math.floor(a/d),a%=d),l.toString()+Vp(a)+Vp(o)}function I0(t,e){return{lo:t>>>0,hi:e>>>0}}function Ka(t,e){return{lo:t|0,hi:e|0}}function Hm(t,e){return e=~e,t?t=~t+1:e+=1,Ka(t,e)}const Vp=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Up(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let i=0;i<9;i++)e.push(t&127|128),t=t>>7;e.push(1)}}function E0(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let i=5;(t&128)!==0&&i<10;i++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var Fp={};const wt=P0();function P0(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(!!globalThis.Deno||typeof process!="object"||typeof Fp!="object"||Fp.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),s=BigInt("0"),o=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>n||l<i)throw new Error(`invalid int64: ${a}`);return l},uParse(a){const l=typeof a=="bigint"?a:BigInt(a);if(l>o||l<s)throw new Error(`invalid uint64: ${a}`);return l},enc(a){return t.setBigInt64(0,this.parse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(a){return t.setBigInt64(0,this.uParse(a),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(a,l){return t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(a,l){return t.setInt32(0,a,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),Hp(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),Wp(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),Hp(i),Bp(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),Wp(i),Bp(i)},dec(i,n){return C0(i,n)},uDec(i,n){return Fm(i,n)}}}function Hp(t){if(!/^-?[0-9]+$/.test(t))throw new Error("invalid int64: "+t)}function Wp(t){if(!/^[0-9]+$/.test(t))throw new Error("invalid uint64: "+t)}const ea=Symbol.for("@bufbuild/protobuf/text-encoding");function Wm(){if(globalThis[ea]==null){const t=new globalThis.TextEncoder,e=new globalThis.TextDecoder;globalThis[ea]={encodeUtf8(i){return t.encode(i)},decodeUtf8(i){return e.decode(i)},checkUtf8(i){try{return encodeURIComponent(i),!0}catch{return!1}}}}return globalThis[ea]}var Zt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Zt||(Zt={}));const R0=34028234663852886e22,A0=-34028234663852886e22,M0=4294967295,D0=2147483647,N0=-2147483648;class T{constructor(e=Wm().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let s=0;s<this.chunks.length;s++)e+=this.chunks[s].length;let i=new Uint8Array(e),n=0;for(let s=0;s<this.chunks.length;s++)i.set(this.chunks[s],n),n+=this.chunks[s].length;return this.chunks=[],i}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),i=this.stack.pop();if(!i)throw new Error("invalid state, fork stack empty");return this.chunks=i.chunks,this.buf=i.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,i){return this.uint32((e<<3|i)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(jp(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ta(e),Up(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let i=this.encodeUtf8(e);return this.uint32(i.byteLength),this.raw(i)}float(e){L0(e);let i=new Uint8Array(4);return new DataView(i.buffer).setFloat32(0,e,!0),this.raw(i)}double(e){let i=new Uint8Array(8);return new DataView(i.buffer).setFloat64(0,e,!0),this.raw(i)}fixed32(e){jp(e);let i=new Uint8Array(4);return new DataView(i.buffer).setUint32(0,e,!0),this.raw(i)}sfixed32(e){ta(e);let i=new Uint8Array(4);return new DataView(i.buffer).setInt32(0,e,!0),this.raw(i)}sint32(e){return ta(e),e=(e<<1^e>>31)>>>0,Up(e,this.buf),this}sfixed64(e){let i=new Uint8Array(8),n=new DataView(i.buffer),s=wt.enc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(i)}fixed64(e){let i=new Uint8Array(8),n=new DataView(i.buffer),s=wt.uEnc(e);return n.setInt32(0,s.lo,!0),n.setInt32(4,s.hi,!0),this.raw(i)}int64(e){let i=wt.enc(e);return Zr(i.lo,i.hi,this.buf),this}sint64(e){const i=wt.enc(e),n=i.hi>>31,s=i.lo<<1^n,o=(i.hi<<1|i.lo>>>31)^n;return Zr(s,o,this.buf),this}uint64(e){const i=wt.uEnc(e);return Zr(i.lo,i.hi,this.buf),this}}class y{constructor(e,i=Wm().decodeUtf8){this.decodeUtf8=i,this.varint64=T0,this.uint32=E0,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),i=e>>>3,n=e&7;if(i<=0||n<0||n>5)throw new Error("illegal tag: field no "+i+" wire type "+n);return[i,n]}skip(e,i){let n=this.pos;switch(e){case Zt.Varint:for(;this.buf[this.pos++]&128;);break;case Zt.Bit64:this.pos+=4;case Zt.Bit32:this.pos+=4;break;case Zt.LengthDelimited:let s=this.uint32();this.pos+=s;break;case Zt.StartGroup:for(;;){const[o,a]=this.tag();if(a===Zt.EndGroup){if(i!==void 0&&o!==i)throw new Error("invalid end group tag");break}this.skip(a,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return wt.dec(...this.varint64())}uint64(){return wt.uDec(...this.varint64())}sint64(){let[e,i]=this.varint64(),n=-(e&1);return e=(e>>>1|(i&1)<<31)^n,i=i>>>1^n,wt.dec(e,i)}bool(){let[e,i]=this.varint64();return e!==0||i!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return wt.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return wt.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),i=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(i,i+e)}string(){return this.decodeUtf8(this.bytes())}}function ta(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid int32: "+typeof t);if(!Number.isInteger(t)||t>D0||t<N0)throw new Error("invalid int32: "+t)}function jp(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid uint32: "+typeof t);if(!Number.isInteger(t)||t>M0||t<0)throw new Error("invalid uint32: "+t)}function L0(t){if(typeof t=="string"){const e=t;if(t=Number(t),Number.isNaN(t)&&e!=="NaN")throw new Error("invalid float32: "+e)}else if(typeof t!="number")throw new Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>R0||t<A0))throw new Error("invalid float32: "+t)}const O0={RELEVANCE:0,0:"RELEVANCE",RATING:1,1:"RATING",UPLOAD_DATE:2,2:"UPLOAD_DATE",VIEW_COUNT:3,3:"VIEW_COUNT",UNRECOGNIZED:-1,"-1":"UNRECOGNIZED"},B0={ANY_DATE:0,0:"ANY_DATE",HOUR:1,1:"HOUR",TODAY:2,2:"TODAY",WEEK:3,3:"WEEK",MONTH:4,4:"MONTH",YEAR:5,5:"YEAR",UNRECOGNIZED:-1,"-1":"UNRECOGNIZED"},V0={ANY_TYPE:0,0:"ANY_TYPE",VIDEO:1,1:"VIDEO",CHANNEL:2,2:"CHANNEL",PLAYLIST:3,3:"PLAYLIST",MOVIE:4,4:"MOVIE",UNRECOGNIZED:-1,"-1":"UNRECOGNIZED"},U0={ANY_DURATION:0,0:"ANY_DURATION",SHORT:1,1:"SHORT",LONG:2,2:"LONG",MEDIUM:3,3:"MEDIUM",UNRECOGNIZED:-1,"-1":"UNRECOGNIZED"};function F0(){return{id:"",timestamp:0}}const jm={encode(t,e=new T){return t.id!==""&&e.uint32(10).string(t.id),t.timestamp!==0&&e.uint32(40).int32(t.timestamp),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=F0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.id=i.string();continue;case 5:if(o!==40)break;s.timestamp=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function H0(){return{sortBy:void 0,filters:void 0}}const Gm={encode(t,e=new T){return t.sortBy!==void 0&&e.uint32(8).int32(t.sortBy),t.filters!==void 0&&Gp.encode(t.filters,e.uint32(18).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=H0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.sortBy=i.int32();continue;case 2:if(o!==18)break;s.filters=Gp.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function W0(){return{uploadDate:void 0,type:void 0,duration:void 0,musicSearchType:void 0,featuresHd:void 0,featuresSubtitles:void 0,featuresCreativeCommons:void 0,features3d:void 0,featuresLive:void 0,featuresPurchased:void 0,features4k:void 0,features360:void 0,featuresLocation:void 0,featuresHdr:void 0,featuresVr180:void 0}}const Gp={encode(t,e=new T){return t.uploadDate!==void 0&&e.uint32(8).int32(t.uploadDate),t.type!==void 0&&e.uint32(16).int32(t.type),t.duration!==void 0&&e.uint32(24).int32(t.duration),t.musicSearchType!==void 0&&qp.encode(t.musicSearchType,e.uint32(138).fork()).join(),t.featuresHd!==void 0&&e.uint32(32).bool(t.featuresHd),t.featuresSubtitles!==void 0&&e.uint32(40).bool(t.featuresSubtitles),t.featuresCreativeCommons!==void 0&&e.uint32(48).bool(t.featuresCreativeCommons),t.features3d!==void 0&&e.uint32(56).bool(t.features3d),t.featuresLive!==void 0&&e.uint32(64).bool(t.featuresLive),t.featuresPurchased!==void 0&&e.uint32(72).bool(t.featuresPurchased),t.features4k!==void 0&&e.uint32(112).bool(t.features4k),t.features360!==void 0&&e.uint32(120).bool(t.features360),t.featuresLocation!==void 0&&e.uint32(184).bool(t.featuresLocation),t.featuresHdr!==void 0&&e.uint32(200).bool(t.featuresHdr),t.featuresVr180!==void 0&&e.uint32(208).bool(t.featuresVr180),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=W0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.uploadDate=i.int32();continue;case 2:if(o!==16)break;s.type=i.int32();continue;case 3:if(o!==24)break;s.duration=i.int32();continue;case 17:if(o!==138)break;s.musicSearchType=qp.decode(i,i.uint32());continue;case 4:if(o!==32)break;s.featuresHd=i.bool();continue;case 5:if(o!==40)break;s.featuresSubtitles=i.bool();continue;case 6:if(o!==48)break;s.featuresCreativeCommons=i.bool();continue;case 7:if(o!==56)break;s.features3d=i.bool();continue;case 8:if(o!==64)break;s.featuresLive=i.bool();continue;case 9:if(o!==72)break;s.featuresPurchased=i.bool();continue;case 14:if(o!==112)break;s.features4k=i.bool();continue;case 15:if(o!==120)break;s.features360=i.bool();continue;case 23:if(o!==184)break;s.featuresLocation=i.bool();continue;case 25:if(o!==200)break;s.featuresHdr=i.bool();continue;case 26:if(o!==208)break;s.featuresVr180=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function j0(){return{song:void 0,video:void 0,album:void 0,artist:void 0,playlist:void 0}}const qp={encode(t,e=new T){return t.song!==void 0&&e.uint32(8).bool(t.song),t.video!==void 0&&e.uint32(16).bool(t.video),t.album!==void 0&&e.uint32(24).bool(t.album),t.artist!==void 0&&e.uint32(32).bool(t.artist),t.playlist!==void 0&&e.uint32(40).bool(t.playlist),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=j0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.song=i.bool();continue;case 2:if(o!==16)break;s.video=i.bool();continue;case 3:if(o!==24)break;s.album=i.bool();continue;case 4:if(o!==32)break;s.artist=i.bool();continue;case 5:if(o!==40)break;s.playlist=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function G0(){return{channelId:"",prefId:void 0,number0:void 0,number1:void 0}}const q0={encode(t,e=new T){return t.channelId!==""&&e.uint32(10).string(t.channelId),t.prefId!==void 0&&$p.encode(t.prefId,e.uint32(18).fork()).join(),t.number0!==void 0&&e.uint32(24).int32(t.number0),t.number1!==void 0&&e.uint32(32).int32(t.number1),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=G0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.channelId=i.string();continue;case 2:if(o!==18)break;s.prefId=$p.decode(i,i.uint32());continue;case 3:if(o!==24)break;s.number0=i.int32();continue;case 4:if(o!==32)break;s.number1=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function $0(){return{index:0}}const $p={encode(t,e=new T){return t.index!==0&&e.uint32(8).int32(t.index),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=$0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.index=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function K0(){return{params:void 0,number0:void 0,number1:void 0}}const Y0={encode(t,e=new T){return t.params!==void 0&&Kp.encode(t.params,e.uint32(10).fork()).join(),t.number0!==void 0&&e.uint32(16).int32(t.number0),t.number1!==void 0&&e.uint32(24).int32(t.number1),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=K0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.params=Kp.decode(i,i.uint32());continue;case 2:if(o!==16)break;s.number0=i.int32();continue;case 3:if(o!==24)break;s.number1=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function z0(){return{ids:void 0}}const Kp={encode(t,e=new T){return t.ids!==void 0&&Yp.encode(t.ids,e.uint32(42).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=z0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 5:if(o!==42)break;s.ids=Yp.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function X0(){return{channelId:"",videoId:""}}const Yp={encode(t,e=new T){return t.channelId!==""&&e.uint32(10).string(t.channelId),t.videoId!==""&&e.uint32(18).string(t.videoId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=X0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.channelId=i.string();continue;case 2:if(o!==18)break;s.videoId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Q0(){return{ctx:void 0,unkParam:0,params:void 0}}const J0={encode(t,e=new T){return t.ctx!==void 0&&zp.encode(t.ctx,e.uint32(18).fork()).join(),t.unkParam!==0&&e.uint32(24).int32(t.unkParam),t.params!==void 0&&Xp.encode(t.params,e.uint32(50).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Q0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.ctx=zp.decode(i,i.uint32());continue;case 3:if(o!==24)break;s.unkParam=i.int32();continue;case 6:if(o!==50)break;s.params=Xp.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Z0(){return{videoId:""}}const zp={encode(t,e=new T){return t.videoId!==""&&e.uint32(18).string(t.videoId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Z0();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.videoId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ek(){return{unkToken:void 0,opts:void 0,repliesOpts:void 0,page:void 0,target:""}}const Xp={encode(t,e=new T){return t.unkToken!==void 0&&e.uint32(10).string(t.unkToken),t.opts!==void 0&&Qp.encode(t.opts,e.uint32(34).fork()).join(),t.repliesOpts!==void 0&&Jp.encode(t.repliesOpts,e.uint32(26).fork()).join(),t.page!==void 0&&e.uint32(40).int32(t.page),t.target!==""&&e.uint32(66).string(t.target),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ek();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.unkToken=i.string();continue;case 4:if(o!==34)break;s.opts=Qp.decode(i,i.uint32());continue;case 3:if(o!==26)break;s.repliesOpts=Jp.decode(i,i.uint32());continue;case 5:if(o!==40)break;s.page=i.int32();continue;case 8:if(o!==66)break;s.target=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function tk(){return{videoId:"",sortBy:0,type:0,commentId:void 0}}const Qp={encode(t,e=new T){return t.videoId!==""&&e.uint32(34).string(t.videoId),t.sortBy!==0&&e.uint32(48).int32(t.sortBy),t.type!==0&&e.uint32(120).int32(t.type),t.commentId!==void 0&&e.uint32(130).string(t.commentId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=tk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 4:if(o!==34)break;s.videoId=i.string();continue;case 6:if(o!==48)break;s.sortBy=i.int32();continue;case 15:if(o!==120)break;s.type=i.int32();continue;case 16:if(o!==130)break;s.commentId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ik(){return{commentId:"",unkopts:void 0,channelId:void 0,videoId:"",unkParam1:0,unkParam2:0}}const Jp={encode(t,e=new T){return t.commentId!==""&&e.uint32(18).string(t.commentId),t.unkopts!==void 0&&Zp.encode(t.unkopts,e.uint32(34).fork()).join(),t.channelId!==void 0&&e.uint32(42).string(t.channelId),t.videoId!==""&&e.uint32(50).string(t.videoId),t.unkParam1!==0&&e.uint32(64).int32(t.unkParam1),t.unkParam2!==0&&e.uint32(72).int32(t.unkParam2),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ik();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.commentId=i.string();continue;case 4:if(o!==34)break;s.unkopts=Zp.decode(i,i.uint32());continue;case 5:if(o!==42)break;s.channelId=i.string();continue;case 6:if(o!==50)break;s.videoId=i.string();continue;case 8:if(o!==64)break;s.unkParam1=i.int32();continue;case 9:if(o!==72)break;s.unkParam2=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function nk(){return{unkParam:0}}const Zp={encode(t,e=new T){return t.unkParam!==0&&e.uint32(8).int32(t.unkParam),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=nk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.unkParam=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function sk(){return{videoId:"",params:void 0,number:0}}const ok={encode(t,e=new T){return t.videoId!==""&&e.uint32(18).string(t.videoId),t.params!==void 0&&ed.encode(t.params,e.uint32(42).fork()).join(),t.number!==0&&e.uint32(80).int32(t.number),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=sk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.videoId=i.string();continue;case 5:if(o!==42)break;s.params=ed.decode(i,i.uint32());continue;case 10:if(o!==80)break;s.number=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function rk(){return{index:0}}const ed={encode(t,e=new T){return t.index!==0&&e.uint32(8).int32(t.index),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=rk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.index=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ak(){return{type:0,commentId:"",videoId:"",unkNum:void 0,channelId:void 0,translateCommentParams:void 0}}const ck={encode(t,e=new T){return t.type!==0&&e.uint32(8).int32(t.type),t.commentId!==""&&e.uint32(26).string(t.commentId),t.videoId!==""&&e.uint32(42).string(t.videoId),t.unkNum!==void 0&&e.uint32(16).int32(t.unkNum),t.channelId!==void 0&&e.uint32(186).string(t.channelId),t.translateCommentParams!==void 0&&td.encode(t.translateCommentParams,e.uint32(250).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ak();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.type=i.int32();continue;case 3:if(o!==26)break;s.commentId=i.string();continue;case 5:if(o!==42)break;s.videoId=i.string();continue;case 2:if(o!==16)break;s.unkNum=i.int32();continue;case 23:if(o!==186)break;s.channelId=i.string();continue;case 31:if(o!==250)break;s.translateCommentParams=td.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function uk(){return{params:void 0,commentId:"",targetLanguage:""}}const td={encode(t,e=new T){return t.params!==void 0&&id.encode(t.params,e.uint32(26).fork()).join(),t.commentId!==""&&e.uint32(18).string(t.commentId),t.targetLanguage!==""&&e.uint32(34).string(t.targetLanguage),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=uk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 3:if(o!==26)break;s.params=id.decode(i,i.uint32());continue;case 2:if(o!==18)break;s.commentId=i.string();continue;case 4:if(o!==34)break;s.targetLanguage=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function lk(){return{comment:void 0}}const id={encode(t,e=new T){return t.comment!==void 0&&nd.encode(t.comment,e.uint32(10).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=lk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.comment=nd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function hk(){return{text:""}}const nd={encode(t,e=new T){return t.text!==""&&e.uint32(10).string(t.text),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=hk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.text=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function pk(){return{params:void 0}}const dk={encode(t,e=new T){return t.params!==void 0&&sd.encode(t.params,e.uint32(746).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=pk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 93:if(o!==746)break;s.params=sd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function fk(){return{hashtag:"",type:0}}const sd={encode(t,e=new T){return t.hashtag!==""&&e.uint32(10).string(t.hashtag),t.type!==0&&e.uint32(24).int32(t.type),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=fk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.hashtag=i.string();continue;case 3:if(o!==24)break;s.type=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function mk(){return{shortId:"",params:void 0,feature2:0,feature3:0}}const _k={encode(t,e=new T){return t.shortId!==""&&e.uint32(10).string(t.shortId),t.params!==void 0&&od.encode(t.params,e.uint32(42).fork()).join(),t.feature2!==0&&e.uint32(80).int32(t.feature2),t.feature3!==0&&e.uint32(104).int32(t.feature3),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=mk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.shortId=i.string();continue;case 5:if(o!==42)break;s.params=od.decode(i,i.uint32());continue;case 10:if(o!==80)break;s.feature2=i.int32();continue;case 13:if(o!==104)break;s.feature3=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function bk(){return{number:0}}const od={encode(t,e=new T){return t.number!==0&&e.uint32(24).int32(t.number),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=bk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 3:if(o!==24)break;s.number=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function yk(){return{f0:"",f1:void 0,f2:void 0}}const gk={encode(t,e=new T){return t.f0!==""&&e.uint32(18).string(t.f0),t.f1!==void 0&&rd.encode(t.f1,e.uint32(202).fork()).join(),t.f2!==void 0&&ad.encode(t.f2,e.uint32(362).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=yk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.f0=i.string();continue;case 25:if(o!==202)break;s.f1=rd.decode(i,i.uint32());continue;case 45:if(o!==362)break;s.f2=ad.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function wk(){return{postId:""}}const rd={encode(t,e=new T){return t.postId!==""&&e.uint32(178).string(t.postId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=wk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 22:if(o!==178)break;s.postId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function xk(){return{p1:0,p2:0}}const ad={encode(t,e=new T){return t.p1!==0&&e.uint32(16).uint32(t.p1),t.p2!==0&&e.uint32(24).uint32(t.p2),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=xk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==16)break;s.p1=i.uint32();continue;case 3:if(o!==24)break;s.p2=i.uint32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function vk(){return{f0:void 0}}const kk={encode(t,e=new T){return t.f0!==void 0&&cd.encode(t.f0,e.uint32(641815778).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=vk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 80226972:if(o!==641815778)break;s.f0=cd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Sk(){return{location:"",protoData:""}}const cd={encode(t,e=new T){return t.location!==""&&e.uint32(18).string(t.location),t.protoData!==""&&e.uint32(26).string(t.protoData),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Sk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.location=i.string();continue;case 3:if(o!==26)break;s.protoData=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Tk(){return{title:"",postContainer:void 0,f0:void 0,commentDataContainer:void 0}}const Ck={encode(t,e=new T){return t.title!==""&&e.uint32(18).string(t.title),t.postContainer!==void 0&&ud.encode(t.postContainer,e.uint32(202).fork()).join(),t.f0!==void 0&&ld.encode(t.f0,e.uint32(362).fork()).join(),t.commentDataContainer!==void 0&&hd.encode(t.commentDataContainer,e.uint32(426).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Tk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.title=i.string();continue;case 25:if(o!==202)break;s.postContainer=ud.decode(i,i.uint32());continue;case 45:if(o!==362)break;s.f0=ld.decode(i,i.uint32());continue;case 53:if(o!==426)break;s.commentDataContainer=hd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Ik(){return{postId:""}}const ud={encode(t,e=new T){return t.postId!==""&&e.uint32(178).string(t.postId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Ik();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 22:if(o!==178)break;s.postId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Ek(){return{f0:0,f1:0}}const ld={encode(t,e=new T){return t.f0!==0&&e.uint32(16).int32(t.f0),t.f1!==0&&e.uint32(24).int32(t.f1),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Ek();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==16)break;s.f0=i.int32();continue;case 3:if(o!==24)break;s.f1=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Pk(){return{commentData:void 0,title:""}}const hd={encode(t,e=new T){return t.commentData!==void 0&&pd.encode(t.commentData,e.uint32(34).fork()).join(),t.title!==""&&e.uint32(66).string(t.title),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Pk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 4:if(o!==34)break;s.commentData=pd.decode(i,i.uint32());continue;case 8:if(o!==66)break;s.title=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Rk(){return{sortBy:0,f0:0,postId:"",channelId:""}}const pd={encode(t,e=new T){return t.sortBy!==0&&e.uint32(48).int32(t.sortBy),t.f0!==0&&e.uint32(216).int32(t.f0),t.postId!==""&&e.uint32(234).string(t.postId),t.channelId!==""&&e.uint32(242).string(t.channelId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=Rk();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 6:if(o!==48)break;s.sortBy=i.int32();continue;case 27:if(o!==216)break;s.f0=i.int32();continue;case 29:if(o!==234)break;s.postId=i.string();continue;case 30:if(o!==242)break;s.channelId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Ak(t,e){const i=jm.encode({id:t,timestamp:e});return encodeURIComponent(We(i.finish()).replace(/\+/g,"-").replace(/\//g,"_"))}function Mk(t){return jm.decode(hw(decodeURIComponent(t).replace(/-/g,"+").replace(/_/g,"/")))}function qm(t,e={}){const i={type:t,commentId:e.comment_id||" ",videoId:e.video_id||" ",channelId:" ",unkNum:2};if(e.hasOwnProperty("text")){if(typeof e.target_language!="string")throw new Error("target_language must be a string");e.comment_id&&delete i.unkNum,i.translateCommentParams={params:{comment:{text:e.text}},commentId:e.comment_id||" ",targetLanguage:e.target_language}}const n=ck.encode(i);return encodeURIComponent(We(n.finish()))}class Ko extends u{constructor(e){super(),this.popup=h(e.popup),this.popup_type=e.popupType}}Ko.type="OpenPopupAction";class S extends u{constructor(e){super(),Reflect.has(e,"text")&&(this.text=new c(e.text).toString()),Reflect.has(e,"accessibility")&&Reflect.has(e.accessibility,"label")&&(this.label=e.accessibility.label),"accessibilityData"in e&&"accessibilityData"in e.accessibilityData&&(this.accessibility={accessibility_data:new vt(e.accessibilityData.accessibilityData)}),Reflect.has(e,"tooltip")&&(this.tooltip=e.tooltip),Reflect.has(e,"style")&&(this.style=e.style),Reflect.has(e,"size")&&(this.size=e.size),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"isDisabled")&&(this.is_disabled=e.isDisabled),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),this.endpoint=new f(e.navigationEndpoint||e.serviceEndpoint||e.command)}}S.type="Button";class Ya extends u{constructor(e){super(),this.label=new c(e.label).toString(),this.selected=!!e.isSelected,Reflect.has(e,"int32Value")?this.value=e.int32Value:e.stringValue&&(this.value=e.stringValue),Reflect.has(e,"onSelectCommand")&&(this.endpoint=new f(e.onSelectCommand)),Reflect.has(e,"icon")&&(this.icon_type=e.icon?.iconType),Reflect.has(e,"descriptionText")&&(this.description=new c(e.descriptionText))}}Ya.type="DropdownItem";class Ts extends u{constructor(e){super(),this.label=e.label||"",this.entries=g(e.entries,Ya)}}Ts.type="Dropdown";class za extends u{constructor(e){super(),this.title=new c(e.dialogTitle).toString(),this.title_placeholder=e.titlePlaceholder||"",this.privacy_option=h(e.privacyOption,Ts),this.create_button=h(e.cancelButton,S),this.cancel_button=h(e.cancelButton,S)}}za.type="CreatePlaylistDialog";class f extends u{constructor(e){if(super(),e){if(e.serialCommand||e.parallelCommand){const i=e.serialCommand||e.parallelCommand;this.commands=i.commands.map(n=>new f(n))}(e.innertubeCommand||e.command||e.performOnceCommand)&&(e=e.innertubeCommand||e.command||e.performOnceCommand)}this.command=nw(e),Reflect.has(e||{},"openPopupAction")&&(this.open_popup=new Ko(e.openPopupAction)),this.name=Object.keys(e||{}).find(i=>i.endsWith("Endpoint")||i.endsWith("Command")),this.payload=this.name?Reflect.get(e,this.name):{},(Reflect.has(this.payload,"dialog")||Reflect.has(this.payload,"content"))&&(this.dialog=h(this.payload.dialog||this.payload.content)),Reflect.has(this.payload,"modal")&&(this.modal=h(this.payload.modal)),Reflect.has(this.payload,"nextEndpoint")&&(this.next_endpoint=new f(this.payload.nextEndpoint)),e?.serviceEndpoint&&(e=e.serviceEndpoint),this.metadata={},e?.commandMetadata?.webCommandMetadata?.url&&(this.metadata.url=e.commandMetadata.webCommandMetadata.url),e?.commandMetadata?.webCommandMetadata?.webPageType&&(this.metadata.page_type=e.commandMetadata.webCommandMetadata.webPageType),e?.commandMetadata?.webCommandMetadata?.apiUrl?this.metadata.api_url=e.commandMetadata.webCommandMetadata.apiUrl.replace("/youtubei/v1/",""):this.name&&(this.metadata.api_url=this.getPath(this.name)),e?.commandMetadata?.webCommandMetadata?.sendPost&&(this.metadata.send_post=e.commandMetadata.webCommandMetadata.sendPost),e?.createPlaylistEndpoint&&e?.createPlaylistEndpoint.createPlaylistDialog&&(this.dialog=h(e?.createPlaylistEndpoint.createPlaylistDialog,za))}getPath(e){switch(e){case"browseEndpoint":return"/browse";case"watchEndpoint":case"reelWatchEndpoint":return"/player";case"searchEndpoint":return"/search";case"watchPlaylistEndpoint":return"/next";case"liveChatItemContextMenuEndpoint":return"/live_chat/get_item_context_menu"}}call(e,i){if(!e)throw new Error("An API caller must be provided");if(this.command){const n=this.command;return e.execute(n.getApiPath(),{...n.buildRequest(),...i})}if(!this.metadata.api_url)throw new Error("Expected an api_url, but none was found.");return e.execute(this.metadata.api_url,{...this.payload,...i})}toURL(){if(this.metadata.url&&this.metadata.page_type)return this.metadata.page_type==="WEB_PAGE_TYPE_UNKNOWN"?this.metadata.url:`https://www.youtube.com${this.metadata.url}`}}f.type="NavigationEndpoint";class w{constructor(e){this.url=e.url,this.width=e.width,this.height=e.height}static fromResponse(e){if(!e)return[];let i;return e.thumbnails?i=e.thumbnails:e.sources&&(i=e.sources),i?i.map(n=>new w(n)).sort((n,s)=>s.width-n.width):[]}}class Dk{constructor(e){this.text=e.emoji?.emojiId||e.emoji?.shortcuts?.[0]||e.text||"",this.emoji={emoji_id:e.emoji.emojiId,shortcuts:e.emoji?.shortcuts||[],search_terms:e.emoji?.searchTerms||[],image:w.fromResponse(e.emoji.image),is_custom:!!e.emoji?.isCustomEmoji}}toString(){return this.text}toHTML(){const e=$m(this.text);return`<img src="${this.emoji.image[0].url}" alt="${e}" title="${e}" style="display: inline-block; vertical-align: text-top; height: var(--yt-emoji-size, 1rem); width: var(--yt-emoji-size, 1rem);" loading="lazy" crossorigin="anonymous" />`}}class Nk{constructor(e){this.text=e.text,this.bold=!!e.bold,this.bracket=!!e.bracket,this.italics=!!e.italics,this.strikethrough=!!e.strikethrough,this.error_underline=!!e.error_underline,this.underline=!!e.underline,this.deemphasize=!!e.deemphasize,"textColor"in e&&(this.text_color=e.textColor),"navigationEndpoint"in e&&(this.endpoint=new f(e.navigationEndpoint)),"darkModeTextColor"in e&&(this.dark_mode_text_color=e.darkModeTextColor),"fontFace"in e&&(this.font_face=e.fontFace),this.attachment=e.attachment}toString(){return this.text}toHTML(){const e=[];if(this.bold&&e.push("b"),this.italics&&e.push("i"),this.strikethrough&&e.push("s"),this.deemphasize&&e.push("small"),this.underline&&e.push("u"),this.error_underline&&e.push("u"),!this.text?.length)return"";const i=$m(this.text),s=`<span style="white-space: pre-wrap;">${e.map(o=>`<${o}>`).join("")+i+e.map(o=>`</${o}>`).join("")}</span>`;if(this.attachment&&this.attachment.element.type.imageType.image.sources.length&&this.endpoint){const{url:o}=this.attachment.element.type.imageType.image.sources[0];let a="";o&&(a=`<img src="${o}" style="vertical-align: middle; height: ${this.attachment.element.properties.layoutProperties.height.value}px; width: ${this.attachment.element.properties.layoutProperties.width.value}px;" alt="">`);const l=this.endpoint.toURL();if(l)return`<a href="${l}" class="yt-ch-link">${a}${s}</a>`}if(this.endpoint){const o=this.endpoint.toURL();if(o)return`<a href="${o}">${s}</a>`}return s}}function $m(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const Dn="Text";let c=class Km{constructor(e){this.isRunsData(e)?(this.runs=e.runs.map(i=>i.emoji?new Dk(i):new Nk(i)),this.text=this.runs.map(i=>i.text).join("")):this.text=e?.simpleText,this.isObject(e)&&"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)}),this.rtl=!!e?.rtl,this.parseEndpoint(e)}isRunsData(e){return this.isObject(e)&&Reflect.has(e,"runs")&&Array.isArray(e.runs)}parseEndpoint(e){this.isObject(e)&&("navigationEndpoint"in e?this.endpoint=new f(e.navigationEndpoint):"titleNavigationEndpoint"in e?this.endpoint=new f(e.titleNavigationEndpoint):this.runs?.[0]?.endpoint&&(this.endpoint=(this.runs?.[0]).endpoint))}isObject(e){return typeof e=="object"&&e!==null}static fromAttributed(e){const{content:i,commandRuns:n,attachmentRuns:s}=e,o=[{text:i,startIndex:0}],a=e.styleRuns?.map(l=>({...l,startIndex:l.startIndex??0,length:l.length??i.length}));return a?.length&&this.processStyleRuns(o,a,e),n?.length&&this.processCommandRuns(o,n,e),s?.length&&this.processAttachmentRuns(o,s,e),new Km({runs:o})}static processStyleRuns(e,i,n){for(const s of i)if(s.italic||s.strikethrough==="LINE_STYLE_SINGLE"||s.weightLabel==="FONT_WEIGHT_MEDIUM"||s.weightLabel==="FONT_WEIGHT_BOLD"){const o=ia(e,s);if(!o){ve(Dn,"Unable to find matching run for style run. Skipping...",{style_run:s,input_data:n,parsed_runs:JSON.parse(JSON.stringify(e))});continue}$s(e,o,s,{bold:s.weightLabel==="FONT_WEIGHT_MEDIUM"||s.weightLabel==="FONT_WEIGHT_BOLD",italics:s.italic,strikethrough:s.strikethrough==="LINE_STYLE_SINGLE"})}else ps(Dn,"Skipping style run as it is doesn't have any information that we parse.",{style_run:s,input_data:n})}static processCommandRuns(e,i,n){for(const s of i)if(s.onTap){const o=ia(e,s);if(!o){ve(Dn,"Unable to find matching run for command run. Skipping...",{command_run:s,input_data:n,parsed_runs:JSON.parse(JSON.stringify(e))});continue}$s(e,o,s,{navigationEndpoint:s.onTap})}else ps(Dn,'Skipping command run as it is missing the "doTap" property.',{command_run:s,input_data:n})}static processAttachmentRuns(e,i,n){for(const s of i){const o=ia(e,s);if(!o){ve(Dn,"Unable to find matching run for attachment run. Skipping...",{attachment_run:s,input_data:n,parsed_runs:JSON.parse(JSON.stringify(e))});continue}if(s.length===0)o.attachment=s;else{const a=s.startIndex-o.startIndex,l=o.text.substring(a,a+s.length),d=/^:[^:]+:$/.test(l);if(s.element?.type?.imageType?.image&&(d||/^(?:\p{Emoji}|\u200d)+$/u.test(l))){const _={image:s.element.type.imageType.image,isCustomEmoji:d,shortcuts:d?[l]:void 0};$s(e,o,s,{emoji:_})}else $s(e,o,s,{attachment:s})}}}toHTML(){return this.runs?this.runs.map(e=>e.toHTML()).join(""):this.text}isEmpty(){return this.text===void 0}toString(){return this.text||"N/A"}};function ia(t,e){return t.find(i=>i.startIndex<=e.startIndex&&e.startIndex+e.length<=i.startIndex+i.text.length)}function $s(t,e,i,n){const s=t.indexOf(e),o=[],a=i.startIndex-e.startIndex;i.startIndex>e.startIndex&&o.push({...e,text:e.text.substring(0,a)}),o.push({...e,text:e.text.substring(a,a+i.length),startIndex:i.startIndex,...n}),i.startIndex+i.length<e.startIndex+e.text.length&&o.push({...e,text:e.text.substring(a+i.length),startIndex:i.startIndex+i.length}),t.splice(s,1,...o)}class Xa extends u{constructor(e){super(),this.title=c.fromAttributed(e.title),this.link=c.fromAttributed(e.link),this.favicon=w.fromResponse(e.favicon)}}Xa.type="ChannelExternalLinkView";class Qa extends u{constructor(e){super(),Reflect.has(e,"description")&&(this.description=e.description),Reflect.has(e,"descriptionLabel")&&(this.description_label=c.fromAttributed(e.descriptionLabel)),Reflect.has(e,"country")&&(this.country=e.country),Reflect.has(e,"customLinksLabel")&&(this.custom_links_label=c.fromAttributed(e.customLinksLabel)),Reflect.has(e,"subscriberCountText")&&(this.subscriber_count=e.subscriberCountText),Reflect.has(e,"viewCountText")&&(this.view_count=e.viewCountText),Reflect.has(e,"joinedDateText")&&(this.joined_date=c.fromAttributed(e.joinedDateText)),Reflect.has(e,"canonicalChannelUrl")&&(this.canonical_channel_url=e.canonicalChannelUrl),Reflect.has(e,"channelId")&&(this.channel_id=e.channelId),Reflect.has(e,"additionalInfoLabel")&&(this.additional_info_label=c.fromAttributed(e.additionalInfoLabel)),Reflect.has(e,"customUrlOnTap")&&(this.custom_url_on_tap=new f(e.customUrlOnTap)),Reflect.has(e,"videoCountText")&&(this.video_count=e.videoCountText),Reflect.has(e,"signInForBusinessEmail")&&(this.sign_in_for_business_email=c.fromAttributed(e.signInForBusinessEmail)),Reflect.has(e,"links")?this.links=g(e.links,Xa):this.links=[]}}Qa.type="AboutChannelView";class Ja extends u{constructor(e){super(),this.metadata=h(e.metadata,Qa),this.share_channel=h(e.shareChannel,S)}}Ja.type="AboutChannel";class Za extends u{constructor(e){super(),this.title=new c(e.title),this.endpoint=new f(e.navigationEndpoint)}}Za.type="AccountChannel";class Yo extends u{constructor(e){super(),this.account_name=new c(e.accountName),this.account_photo=w.fromResponse(e.accountPhoto),this.is_selected=!!e.isSelected,this.is_disabled=!!e.isDisabled,this.has_channel=!!e.hasChannel,this.endpoint=new f(e.serviceEndpoint),this.account_byline=new c(e.accountByline),this.channel_handle=new c(e.channelHandle)}}Yo.type="AccountItem";class ec extends u{constructor(e){super(),this.title=new c(e.title)}}ec.type="AccountItemSectionHeader";class En extends u{constructor(e){super(),this.title=new c(e.title).toString(),"subtitle"in e&&(this.subtitle=new c(e.subtitle)),"icon"in e&&"iconType"in e.icon&&(this.icon_type=e.icon.iconType),"secondaryIcon"in e&&"iconType"in e.secondaryIcon&&(this.secondary_icon_type=e.secondaryIcon.iconType),this.endpoint=new f(e.navigationEndpoint||e.serviceEndpoint),this.style=e.style}}En.type="CompactLink";class tc extends u{constructor(e){super(),this.contents=g(e.contents,[Yo,En]),this.header=h(e.header,ec)}}tc.type="AccountItemSection";class ic extends u{constructor(e){super(),this.contents=g(e.contents,tc),this.footers=g(e.footers,Za)}}ic.type="AccountSectionList";class kt extends u{constructor(e){super(),this.contents=g(e.continuationItems),this.target=e.target}}kt.type="AppendContinuationItemsAction";class Ym extends u{constructor(e){super(),this.target_id=e.targetId,this.visibility=e.visibility}}Ym.type="ChangeEngagementPanelVisibilityAction";class nc extends u{constructor(e){super(),this.header=h(e.header),this.sections=g(e.sections),this.style=e.style}}nc.type="MultiPageMenu";class zm extends u{constructor(e){super(),this.menu=h(e.menu,nc)}}zm.type="GetMultiPageMenuAction";class Xm extends u{constructor(e){super(),this.bucket=e.bucket}}Xm.type="SendFeedbackAction";class Qm extends u{constructor(e){super(),this.signal=e.signal}}Qm.type="SignalAction";class sc extends u{constructor(e){super(),this.header=h(e.header),this.contents=se(e.contents,!0)}}sc.type="ChannelSwitcherPage";class Jm extends u{constructor(e){super();const i=h(e.page,sc);i&&(this.header=i.header,this.contents=i.contents)}}Jm.type="UpdateChannelSwitcherPageAction";class ui extends u{constructor(e){super(),"title"in e&&(this.title=e.title),"icon"in e&&(this.icon_type=e.icon.iconType),"tooltip"in e&&(this.tooltip=e.tooltip),"subMenuItems"in e&&(this.sub_menu_items=e.subMenuItems.map(i=>({title:i.title,selected:i.selected,continuation:i.continuation?.reloadContinuationData?.continuation,endpoint:new f(i.serviceEndpoint||i.navigationEndpoint),subtitle:i.subtitle||null}))),"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)})}get label(){return this.accessibility?.accessibility_data?.label}}ui.type="SortFilterSubMenu";class oc extends u{constructor(e){super(),this.language_menu=h(e.languageMenu,ui)}}oc.type="TranscriptFooter";class rc extends u{constructor(e){super(),this.formatted_placeholder=new c(e.formattedPlaceholder),this.clear_button=h(e.clearButton,S),this.endpoint=new f(e.onTextChangeCommand),this.search_button=h(e.searchButton,S)}}rc.type="TranscriptSearchBox";class ac extends u{constructor(e){super(),this.start_ms=e.startMs,this.end_ms=e.endMs,this.snippet=new c(e.snippet)}}ac.type="TranscriptSectionHeader";class cc extends u{constructor(e){super(),this.start_ms=e.startMs,this.end_ms=e.endMs,this.snippet=new c(e.snippet),this.start_time_text=new c(e.startTimeText),this.target_id=e.targetId}}cc.type="TranscriptSegment";class uc extends u{constructor(e){super(),this.initial_segments=g(e.initialSegments,[cc,ac]),this.no_result_label=new c(e.noResultLabel),this.retry_label=new c(e.retryLabel),this.touch_captions_enabled=e.touchCaptionsEnabled}}uc.type="TranscriptSegmentList";class lc extends u{constructor(e){super(),this.header=h(e.header,rc),this.body=h(e.body,uc),this.footer=h(e.footer,oc),this.target_id=e.targetId}}lc.type="TranscriptSearchPanel";class zo extends u{constructor(e){super(),this.content=h(e.content,lc)}}zo.type="Transcript";class Zm extends u{constructor(e){super(),this.target_id=e.targetId,this.content=h(e.content,zo)}}Zm.type="UpdateEngagementPanelAction";class e_ extends u{constructor(e){super(),this.channel_id=e.channelId,this.subscribed=e.subscribed}}e_.type="UpdateSubscribeButtonAction";class t_ extends u{constructor(e){super(),this.account_name=new c(e.accountName),this.account_photo=w.fromResponse(e.accountPhoto),this.endpoint=new f(e.serviceEndpoint),this.manage_account_title=new c(e.manageAccountTitle),this.channel_handle=new c(e.channelHandle)}}t_.type="ActiveAccountHeader";class hc extends u{constructor(e){super(),this.title=new c(e.title)}}hc.type="MenuTitle";class pc extends u{constructor(e){super(),this.add_to_playlist_service_endpoint=new f(e.addToPlaylistServiceEndpoint),this.contains_selected_videos=e.containsSelectedVideos,this.playlist_id=e.playlistId,this.privacy=e.privacy,this.privacy_icon={icon_type:e.privacyIcon?.iconType||null},this.remove_from_playlist_service_endpoint=new f(e.removeFromPlaylistServiceEndpoint),this.title=new c(e.title)}}pc.type="PlaylistAddToOption";class i_ extends u{constructor(e){super(),this.actions=g(e.actions,[hc,S]),this.playlists=g(e.playlists,pc)}}i_.type="AddToPlaylist";class Xo extends u{constructor(e){super(),this.text=new c(e.text),this.alert_type=e.type}}Xo.type="Alert";class dc extends u{constructor(e){super(),this.text=new c(e.text),this.alert_type=e.type,this.dismiss_button=h(e.dismissButton,S)}}dc.type="AlertWithButton";class fc extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail)}}fc.type="AnimatedThumbnailOverlayView";class mc extends u{constructor(e){super(),this.text=c.fromAttributed(e.text),this.suffix=c.fromAttributed(e.suffix)}}mc.type="AttributionView";class _c extends u{constructor(e){super(),this.audio_only_availability=e.audioOnlyAvailability}}_c.type="AudioOnlyPlayability";class Cs extends u{constructor(e){super(),e?.content?.automixPlaylistVideoRenderer?.navigationEndpoint&&(this.playlist_video={endpoint:new f(e.content.automixPlaylistVideoRenderer.navigationEndpoint)})}}Cs.type="AutomixPreviewVideo";class Qo extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.avatar_image_size=e.avatarImageSize,e.image.processor&&(this.image_processor={border_image_processor:{circular:e.image.processor.borderImageProcessor.circular}})}}Qo.type="AvatarView";class Lk{constructor(e){"onFocus"in e&&(this.on_focus=new f(e.onFocus)),"onHidden"in e&&(this.on_hidden=new f(e.onHidden)),"onTouchEnd"in e&&(this.on_touch_end=new f(e.onTouchEnd)),"onTouchMove"in e&&(this.on_touch_move=new f(e.onTouchMove)),"onLongPress"in e&&(this.on_long_press=new f(e.onLongPress)),"onTap"in e&&(this.on_tap=new f(e.onTap)),"onTouchStart"in e&&(this.on_touch_start=new f(e.onTouchStart)),"onVisible"in e&&(this.on_visible=new f(e.onVisible)),"onFirstVisible"in e&&(this.on_first_visible=new f(e.onFirstVisible)),"onHover"in e&&(this.on_hover=new f(e.onHover))}}class Is{constructor(e){e&&("commandContext"in e&&(this.command_context=new Lk(e.commandContext)),"accessibilityContext"in e&&(this.accessibility_context=new Xv(e.accessibilityContext)))}}class bc extends u{constructor(e){super(),this.avatars=g(e.avatars,Qo),Reflect.has(e,"text")&&(this.text=c.fromAttributed(e.text)),this.renderer_context=new Is(e.rendererContext)}}bc.type="AvatarStackView";class fe extends u{constructor(e){super(),"secondaryIconImage"in e&&(this.secondary_icon_image=w.fromResponse(e.secondaryIconImage)),"iconName"in e&&(this.icon_name=e.iconName),"enableIconButton"in e&&(this.enable_icon_button=e.enableIconButton),"tooltip"in e&&(this.tooltip=e.tooltip),"iconImageFlipForRtl"in e&&(this.icon_image_flip_for_rtl=e.iconImageFlipForRtl),"buttonSize"in e&&(this.button_size=e.buttonSize),"iconPosition"in e&&(this.icon_position=e.iconPosition),"isFullWidth"in e&&(this.is_full_width=e.isFullWidth),"state"in e&&(this.state=e.state),"onDisabledTap"in e&&(this.on_disabled_tap=new f(e.onDisabledTap)),"customBorderColor"in e&&(this.custom_border_color=e.customBorderColor),"onTap"in e&&(this.on_tap=new f(e.onTap)),"style"in e&&(this.style=e.style),"iconImage"in e&&(this.icon_image=e.iconImage),"customDarkThemeBorderColor"in e&&(this.custom_dark_theme_border_color=e.customDarkThemeBorderColor),"title"in e&&(this.title=e.title),"targetId"in e&&(this.target_id=e.targetId),"enableFullWidthMargins"in e&&(this.enable_full_width_margins=e.enableFullWidthMargins),"customFontColor"in e&&(this.custom_font_color=e.customFontColor),"type"in e&&(this.button_type=e.type),"enabled"in e&&(this.enabled=e.enabled),"accessibilityId"in e&&(this.accessibility_id=e.accessibilityId),"customBackgroundColor"in e&&(this.custom_background_color=e.customBackgroundColor),"onLongPress"in e&&(this.on_long_press=new f(e.onLongPress)),"titleFormatted"in e&&(this.title_formatted=e.titleFormatted),"onVisible"in e&&(this.on_visible=e.onVisible),"iconTrailing"in e&&(this.icon_trailing=e.iconTrailing),"accessibilityText"in e&&(this.accessibility_text=e.accessibilityText)}}fe.type="ButtonView";class n_ extends u{constructor(e){super(),this.body_text=new c(e.bodyText),this.cta_button=h(e.ctaButton,[S,fe]),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),this.title=new c(e.title)}}n_.type="BackgroundPromo";class yc extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.endpoint=new f(e.command)}}yc.type="BackstageImage";class de extends u{constructor(e){super(),this.text=new c(e.defaultText),this.toggled_text=new c(e.toggledText),this.tooltip=e.defaultTooltip,this.toggled_tooltip=e.toggledTooltip,this.is_toggled=e.isToggled,this.is_disabled=e.isDisabled,this.icon_type=e.defaultIcon?.iconType;const i=e?.defaultText?.accessibility?.accessibilityData?.label||e?.accessibilityData?.accessibilityData?.label||e?.accessibility?.label;this.icon_type=="LIKE"&&(this.like_count=parseInt(i.replace(/\D/g,"")),this.short_like_count=new c(e.defaultText).toString()),this.endpoint=e.defaultServiceEndpoint?.commandExecutorCommand?.commands?new f(e.defaultServiceEndpoint.commandExecutorCommand.commands.pop()):new f(e.defaultServiceEndpoint),this.toggled_endpoint=new f(e.toggledServiceEndpoint),Reflect.has(e,"toggleButtonSupportedData")&&Reflect.has(e.toggleButtonSupportedData,"toggleButtonIdData")&&(this.button_id=e.toggleButtonSupportedData.toggleButtonIdData.id),Reflect.has(e,"targetId")&&(this.target_id=e.targetId)}}de.type="ToggleButton";class gc extends u{constructor(e){super(),this.creator_thumbnail=w.fromResponse(e.creatorThumbnail),Reflect.has(e,"heartIcon")&&Reflect.has(e.heartIcon,"iconType")&&(this.heart_icon_type=e.heartIcon.iconType),this.heart_color={basic_color_palette_data:{foreground_title_color:e.heartColor?.basicColorPaletteData?.foregroundTitleColor}},this.hearted_tooltip=e.heartedTooltip,this.is_hearted=e.isHearted,this.is_enabled=e.isEnabled,this.kennedy_heart_color_string=e.kennedyHeartColorString}}gc.type="CreatorHeart";class wc extends u{constructor(e){super(),this.like_button=h(e.likeButton,de),this.dislike_button=h(e.dislikeButton,de),this.reply_button=h(e.replyButton,S),this.creator_heart=h(e.creatorHeart,gc)}}wc.type="CommentActionButtons";class li extends u{constructor(e){super(),this.default_button=h(e.defaultButtonViewModel,fe),this.toggled_button=h(e.toggledButtonViewModel,fe),this.is_toggling_disabled=e.isTogglingDisabled,this.identifier=e.identifier,Reflect.has(e,"isToggled")&&(this.is_toggled=e.isToggled)}}li.type="ToggleButtonView";class xc extends u{constructor(e){super(),this.toggle_button=h(e.toggleButtonViewModel,li),this.like_status_entity_key=e.likeStatusEntityKey,this.like_status_entity={key:e.likeStatusEntity.key,like_status:e.likeStatusEntity.likeStatus}}}xc.type="LikeButtonView";class vc extends u{constructor(e){super(),this.toggle_button=h(e.toggleButtonViewModel,li),this.dislike_entity_key=e.dislikeEntityKey}}vc.type="DislikeButtonView";class Li extends u{constructor(e){if(super(),this.like_button=h(e.likeButtonViewModel,xc),this.dislike_button=h(e.dislikeButtonViewModel,vc),this.icon_type=e.iconType,this.like_button&&this.like_button.toggle_button){const i=this.like_button.toggle_button;i.default_button?(this.short_like_count=i.default_button.title,i.default_button.accessibility_text&&(this.like_count=parseInt(i.default_button.accessibility_text.replace(/\D/g,"")))):i.toggled_button&&(this.short_like_count=i.toggled_button.title,i.toggled_button.accessibility_text&&(this.like_count=parseInt(i.toggled_button.accessibility_text.replace(/\D/g,""))))}this.like_count_entity={key:e.likeCountEntity.key},this.dynamic_like_count_update_data={update_status_key:e.dynamicLikeCountUpdateData.updateStatusKey,placeholder_like_count_values_key:e.dynamicLikeCountUpdateData.placeholderLikeCountValuesKey,update_delay_loop_id:e.dynamicLikeCountUpdateData.updateDelayLoopId,update_delay_sec:e.dynamicLikeCountUpdateData.updateDelaySec}}}Li.type="SegmentedLikeDislikeButtonView";class Vi extends S{constructor(e){super(e)}}Vi.type="MenuServiceItem";class Jo extends u{constructor(e){super(),this.style=e.style,this.size=e.size,this.endpoint=new f(e.command),this.target_id=e.targetId}}Jo.type="DownloadButton";class kc extends u{constructor(e){super(),this.has_separator=!!e.hasSeparator,this.endpoint=new f(e.navigationEndpoint||e.serviceEndpoint)}}kc.type="MenuServiceItemDownload";class Sc extends u{constructor(e){super(),this.menu_item=h(e.menuItem,[Vi,kc]),this.top_level_button=h(e.topLevelButton,[Jo,fe,S])}}Sc.type="MenuFlexibleItem";class Zo extends u{constructor(e){super(),this.target={video_id:e.target.videoId},this.like_status=e.likeStatus,this.likes_allowed=e.likesAllowed,Reflect.has(e,"serviceEndpoints")&&(this.endpoints=e.serviceEndpoints.map(i=>new f(i)))}}Zo.type="LikeButton";class er extends u{constructor(e){super(),this.actions_rows=e.actionsRows.map(i=>({actions:g(i.actions,[fe,li])})),this.style=e.style}}er.type="FlexibleActionsView";class K extends u{constructor(e){super(),this.items=g(e.items),this.flexible_items=g(e.flexibleItems,Sc),this.top_level_buttons=g(e.topLevelButtons,[de,Zo,S,fe,Li,er]),"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)})}get label(){return this.accessibility?.accessibility_data?.label}get contents(){return this.items}}K.type="Menu";class Es extends u{constructor(e){super(),this.id=e.postId,this.author=new G({...e.authorText,navigationEndpoint:e.authorEndpoint},null,e.authorThumbnail),this.content=new c(e.contentText),this.published=new c(e.publishedTimeText),Reflect.has(e,"pollStatus")&&(this.poll_status=e.pollStatus),Reflect.has(e,"voteStatus")&&(this.vote_status=e.voteStatus),Reflect.has(e,"voteCount")&&(this.vote_count=new c(e.voteCount)),Reflect.has(e,"actionMenu")&&(this.menu=h(e.actionMenu,K)),Reflect.has(e,"actionButtons")&&(this.action_buttons=h(e.actionButtons,wc)),Reflect.has(e,"voteButton")&&(this.vote_button=h(e.voteButton,S)),Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new f(e.navigationEndpoint)),Reflect.has(e,"backstageAttachment")&&(this.attachment=h(e.backstageAttachment)),this.surface=e.surface}}Es.type="BackstagePost";class s_ extends u{constructor(e){super(),this.post=h(e.post)}}s_.type="BackstagePostThread";class o_ extends u{constructor(e){super(),this.text=e.badgeText,this.style=e.badgeStyle,this.accessibility_label=e.accessibilityLabel}}class Tc extends u{constructor(e){super(),this.name=new c(e.name),this.is_selected=e.isSelected,this.endpoint=new f(e.navigationEndpoint)}}Tc.type="SubFeedOption";class Cc extends u{constructor(e){super(),this.title=new c(e.title),this.options=g(e.options,Tc)}}Cc.type="SubFeedSelector";class Ic extends u{constructor(e){super(),this.disclaimer=new c(e.disclaimer),this.info_icon={icon_type:e.infoIcon.iconType},this.usage_scenario=e.usageScenario}}Ic.type="EomSettingsDisclaimer";class Ec extends u{constructor(e){super(),this.endpoint=new f(e.endpoint),this.search_button=h(e.searchButton,S),this.clear_button=h(e.clearButton,S),this.placeholder_text=new c(e.placeholderText)}}Ec.type="SearchBox";class tr extends u{constructor(e){super(),this.contents=g(e.contents,[Cc,Ic,de,En,Ec,S])}}tr.type="BrowseFeedActions";class r_ extends u{constructor(e){super(),this.album=new c(e.album),this.thumbnails=w.fromResponse(e.thumbnailDetails)}}r_.type="BrowserMediaSession";class a_ extends u{constructor(e){super(),this.title=e.title,this.icon_name=e.image.sources[0].clientResource.imageName,this.renderer_context=new Is(e.rendererContext)}}a_.type="ButtonCardView";class ga extends u{constructor(e){super(),this.endpoint=new f(e.navigationEndpoint),this.icon=w.fromResponse(e.icon),this.title=new c(e.title)}}ga.type="HeaderLink";class Pc extends u{constructor(e){super(),this.primary=$(e.primaryLinks?.map(i=>new ga(i))||[]),this.secondary=$(e.secondaryLinks?.map(i=>new ga(i))||[])}}Pc.type="ChannelHeaderLinks";class Rc extends u{constructor(e){super(),Reflect.has(e,"firstLink")&&(this.first_link=c.fromAttributed(e.firstLink)),Reflect.has(e,"more")&&(this.more=c.fromAttributed(e.more))}}Rc.type="ChannelHeaderLinksView";class Ac extends u{constructor(e){super(),this.placeholder_text=new c(e.placeholderText),this.max_character_limit=e.maxCharacterLimit}}Ac.type="ClipCreationTextInput";class Mc extends u{constructor(e){super(),this.length_template=e.lengthTemplate,this.max_length_ms=e.maxLengthMs,this.min_length_ms=e.minLengthMs,this.default_length_ms=e.defaultLengthMs,this.window_size_ms=e.windowSizeMs,this.start_label=e.startAccessibility?.accessibilityData?.label,this.end_label=e.endAccessibility?.accessibilityData?.label,this.duration_label=e.durationAccessibility?.accessibilityData?.label}}Mc.type="ClipCreationScrubber";class Dc extends u{constructor(e){super(),this.title=new c(e.title),this.body=new c(e.body)}}Dc.type="ClipAdState";class Nc extends u{constructor(e){super(),this.user_avatar=w.fromResponse(e.userAvatar),this.title_input=h(e.titleInput,[Ac]),this.scrubber=h(e.scrubber,[Mc]),this.save_button=h(e.saveButton,[S]),this.display_name=new c(e.displayName),this.publicity_label=e.publicityLabel,this.cancel_button=h(e.cancelButton,[S]),this.ad_state_overlay=h(e.adStateOverlay,[Dc]),this.external_video_id=e.externalVideoId,this.publicity_label_icon=e.publicityLabelIcon}}Nc.type="ClipCreation";class Lc extends u{constructor(e){super(),this.contents=se(e.contents,!0,[Nc])}}Lc.type="ClipSection";class z extends u{constructor(e){super(),this.trigger=e.trigger,Reflect.has(e,"button")&&(this.button=h(e.button,S)),this.endpoint=new f(e.continuationEndpoint)}}z.type="ContinuationItem";class Oc extends u{constructor(e){super(),this.title=new c(e.title),this.contextual_info=e.contextualInfo?new c(e.contextualInfo):void 0,this.visibility_button=h(e.visibilityButton,S),this.menu=h(e.menu)}}Oc.type="EngagementPanelTitleHeader";class Bc extends u{constructor(e){super(),this.info_text=new c(e.infoText),this.menu=h(e.menu,K)}}Bc.type="MacroMarkersInfoItem";class ir extends u{constructor(e){super(),this.title=new c(e.title),this.time_description=new c(e.timeDescription),this.thumbnail=w.fromResponse(e.thumbnail),this.on_tap_endpoint=new f(e.onTap),this.layout=e.layout,this.is_highlighted=!!e.isHighlighted}}ir.type="MacroMarkersListItem";class Vc extends u{constructor(e){super(),this.contents=g(e.contents,[Bc,ir]),this.sync_button_label=new c(e.syncButtonLabel)}}Vc.type="MacroMarkersList";class Uc extends u{constructor(e){super(),this.contents=g(e.contents)}}Uc.type="ProductList";class Q extends u{constructor(e){super(),this.contents=g(e.contents),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),Reflect.has(e,"continuations")&&(Reflect.has(e.continuations[0],"nextContinuationData")?this.continuation=e.continuations[0].nextContinuationData.continuation:Reflect.has(e.continuations[0],"reloadContinuationData")&&(this.continuation=e.continuations[0].reloadContinuationData.continuation)),Reflect.has(e,"header")&&(this.header=h(e.header)),Reflect.has(e,"subMenu")&&(this.sub_menu=h(e.subMenu))}}Q.type="SectionList";class Fc extends u{constructor(e){super(),this.show_more_text=new c(e.showMoreText),this.show_less_text=new c(e.showLessText),Reflect.has(e,"attributedDescriptionBodyText")&&(this.attributed_description_body_text=c.fromAttributed(e.attributedDescriptionBodyText))}}Fc.type="ExpandableVideoDescriptionBody";class fs extends u{constructor(e){super(),this.thumbnails=w.fromResponse(e.thumbnail),this.endpoint=new f(e.searchEndpoint),this.query=new c(e.query).toString()}}fs.type="SearchRefinementCard";class Hc extends u{constructor(e){super(),this.game=h(e.game)}}Hc.type="GameCard";class Wc extends u{constructor(e){super(),this.visible_item_count=e.visibleItemCount,this.items=g(e.items)}get contents(){return this.items}}Wc.type="HorizontalList";class jc extends u{constructor(e){super(),Reflect.has(e,"header")&&(this.header={collapsed_title:new c(e.header.collapsedTitle),collapsed_thumbnail:w.fromResponse(e.header.collapsedThumbnail),collapsed_label:new c(e.header.collapsedLabel),expanded_title:new c(e.header.expandedTitle)}),this.expanded_content=h(e.expandedContent,[Rs,Wc]),this.expand_button=h(e.expandButton,S),this.collapse_button=h(e.collapseButton,S)}}jc.type="ExpandableMetadata";class _i extends u{constructor(e){super(),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"style")&&(this.style=e.style),Reflect.has(e,"label")&&(this.label=e.label),(Reflect.has(e,"tooltip")||Reflect.has(e,"iconTooltip"))&&(this.tooltip=e.tooltip||e.iconTooltip)}}_i.type="MetadataBadge";class ji extends u{constructor(e){super(),this.text=new c(e.text).toString(),this.style=e.style}}ji.type="ThumbnailOverlayTimeStatus";class nr extends u{constructor(e){super(),this.title=new c(e.title),this.video_id=e.videoId,this.expandable_metadata=h(e.expandableMetadata,jc),"untranslatedTitle"in e&&(this.untranslated_title=new c(e.untranslatedTitle)),"descriptionSnippet"in e&&(this.description_snippet=new c(e.descriptionSnippet)),"detailedMetadataSnippets"in e&&(this.snippets=e.detailedMetadataSnippets.map(i=>({text:new c(i.snippetText),hover_text:new c(i.snippetHoverText)}))),"additionalMetadatas"in e&&(this.additional_metadatas=e.additionalMetadatas.map(i=>new c(i))),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),"richThumbnail"in e&&(this.rich_thumbnail=h(e.richThumbnail)),this.author=new G(e.ownerText,e.ownerBadges,e.channelThumbnailSupportedRenderers?.channelThumbnailWithLinkRenderer?.thumbnail),this.badges=g(e.badges,_i),"navigationEndpoint"in e&&(this.endpoint=new f(e.navigationEndpoint)),"publishedTimeText"in e&&(this.published=new c(e.publishedTimeText)),"viewCountText"in e&&(this.view_count=new c(e.viewCountText)),"shortViewCountText"in e&&(this.short_view_count=new c(e.shortViewCountText)),"upcomingEventData"in e&&(this.upcoming=new Date(+`${e.upcomingEventData.startTime}000`)),this.show_action_menu=!!e.showActionMenu,this.is_watched=!!e.isWatched,this.menu=h(e.menu,K),"searchVideoResultEntityKey"in e&&(this.search_video_result_entity_key=e.searchVideoResultEntityKey),"bylineText"in e&&(this.byline_text=new c(e.bylineText)),"lengthText"in e&&(this.length_text=new c(e.lengthText)),"serviceEndpoints"in e&&(this.service_endpoints=e.serviceEndpoints.map(i=>new f(i))),"serviceEndpoint"in e&&(this.service_endpoint=new f(e.serviceEndpoint)),"style"in e&&(this.style=e.style)}get id(){return this.video_id}get description(){return this.snippets?this.snippets.map(e=>e.text.toString()).join(""):this.description_snippet?.toString()||""}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})||this.thumbnail_overlays.firstOfType(ji)?.style==="LIVE"}get is_upcoming(){return this.upcoming&&this.upcoming>new Date}get is_premiere(){return this.badges.some(e=>e.label==="PREMIERE")}get is_4k(){return this.badges.some(e=>e.label==="4K")}get has_captions(){return this.badges.some(e=>e.label==="CC")}get best_thumbnail(){return this.thumbnails[0]}get duration(){const e=this.thumbnail_overlays.firstOfType(ji),i=this.length_text?.toString()||e?.text.toString();return{text:i,seconds:i?Ht(i):0}}}nr.type="Video";class Gc extends nr{constructor(e){super(e),Reflect.has(e,"metadataText")&&(this.metadata_text=new c(e.metadataText),this.metadata_text.text&&(this.short_view_count=new c({simpleText:this.metadata_text.text.split("·")[0]?.trim()}),this.published=new c({simpleText:this.metadata_text.text.split("·")[1]?.trim()}))),Reflect.has(e,"bylineText")&&(this.author=new G(e.bylineText,e.ownerBadges,e.channelThumbnailSupportedRenderers?.channelThumbnailWithLinkRenderer?.thumbnail))}}Gc.type="VideoCard";class bn extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.style=e.style}}bn.type="ContentPreviewImageView";class Ps extends u{constructor(e){super(),e.image?.sources?this.image=w.fromResponse(e.image):this.image=h(e.image,bn),this.image_style=e.imageStyle,this.title=e.title,this.subtitle=e.subtitle,Reflect.has(e,"secondarySubtitle")&&(this.secondary_subtitle={content:e.secondarySubtitle.content}),this.orientation=e.orientation,this.sizing_rule=e.sizingRule,this.overflow_menu_on_tap=new f(e.overflowMenuOnTap),this.overflow_menu_a11y_label=e.overflowMenuA11yLabel}}Ps.type="VideoAttributeView";class Rs extends u{constructor(e){super(),this.cards=g(e.cards,[Ps,fs,ir,Hc,Gc]),this.header=h(e.header),this.previous_button=h(e.previousButton,S),this.next_button=h(e.nextButton,S)}}Rs.type="HorizontalCardList";class As extends u{constructor(e){super(),this.label=new c(e.label),this.value=new c(e.value),this.accessibility_text=e.accessibilityText}}As.type="Factoid";class qc extends u{constructor(e){super(),this.factoid=h(e.factoid,As)}}qc.type="UploadTimeFactoid";class $c extends u{constructor(e){super(),this.view_count_entity_key=e.viewCountEntityKey,this.factoid=h(e.factoid,[As]),this.view_count_type=e.viewCountType}}$c.type="ViewCountFactoid";class Kc extends u{constructor(e){super(),this.title=new c(e.title),this.channel=new c(e.channel),this.channel_navigation_endpoint=new f(e.channelNavigationEndpoint),this.channel_thumbnail=w.fromResponse(e.channelThumbnail),this.publish_date=new c(e.publishDate),this.views=new c(e.views),this.factoids=g(e.factoid,[As,$c,qc])}}Kc.type="VideoDescriptionHeader";class Yc extends u{constructor(e){super(),this.section_title=new c(e.sectionTitle),this.creator_videos_button=h(e.creatorVideosButton,S),this.creator_about_button=h(e.creatorAboutButton,S),this.section_subtitle=new c(e.sectionSubtitle),this.channel_avatar=w.fromResponse(e.channelAvatar),this.channel_endpoint=new f(e.channelEndpoint)}}Yc.type="VideoDescriptionInfocardsSection";class zc extends u{constructor(e){super(),this.title=new c(e.title),Reflect.has(e,"defaultMetadata")&&(this.default_metadata=new c(e.defaultMetadata)),Reflect.has(e,"expandedMetadata")&&(this.expanded_metadata=new c(e.expandedMetadata)),Reflect.has(e,"infoRowExpandStatusKey")&&(this.info_row_expand_status_key=e.infoRowExpandStatusKey)}}zc.type="InfoRow";class sr extends u{constructor(e){super(),this.video_id=e.videoId,this.thumbnails=w.fromResponse(e.thumbnail),this.title=new c(e.title),this.author=new G(e.longBylineText,e.ownerBadges,e.channelThumbnail),this.is_watched=!!e.isWatched,this.thumbnail_overlays=g(e.thumbnailOverlays),this.menu=h(e.menu,K),this.badges=g(e.badges,_i),"publishedTimeText"in e&&(this.published=new c(e.publishedTimeText)),"shortBylineText"in e&&(this.view_count=new c(e.viewCountText)),"shortViewCountText"in e&&(this.short_view_count=new c(e.shortViewCountText)),"richThumbnail"in e&&(this.rich_thumbnail=h(e.richThumbnail)),"shortBylineText"in e&&(this.short_byline_text=new c(e.shortBylineText)),"longBylineText"in e&&(this.long_byline_text=new c(e.longBylineText)),"lengthText"in e&&(this.length_text=new c(e.lengthText)),"serviceEndpoints"in e&&(this.service_endpoints=e.serviceEndpoints.map(i=>new f(i))),"serviceEndpoint"in e&&(this.service_endpoint=new f(e.serviceEndpoint)),"navigationEndpoint"in e&&(this.endpoint=new f(e.navigationEndpoint)),"style"in e&&(this.style=e.style)}get id(){return this.video_id}get duration(){const e=this.thumbnail_overlays.firstOfType(ji),i=this.length_text?.toString()||e?.text.toString();return{text:i,seconds:i?Ht(i):0}}get best_thumbnail(){return this.thumbnails[0]}get is_fundraiser(){return this.badges.some(e=>e.label==="Fundraiser")}get is_live(){return this.badges.some(e=>{if(e.style==="BADGE_STYLE_TYPE_LIVE_NOW"||e.label==="LIVE")return!0})}get is_new(){return this.badges.some(e=>e.label==="New")}get is_premiere(){return this.badges.some(e=>e.style==="PREMIERE")}}sr.type="CompactVideo";class Xc extends u{constructor(e){super(),this.info_rows=g(e.infoRows,zc),this.video_lockup=h(e.videoLockup,sr)}}Xc.type="CarouselLockup";class or extends u{constructor(e){super(),this.carousel_lockups=g(e.carouselLockups,Xc),this.section_title=new c(e.sectionTitle)}}or.type="VideoDescriptionMusicSection";class vo extends u{constructor(e){super(),this.section_title=new c(e.sectionTitle),this.sub_header_text=new c(e.subHeaderText),this.primary_button=h(e.primaryButton,S)}}vo.type="VideoDescriptionTranscriptSection";class Qc extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail),this.title=new c(e.title),this.short_byline_text=new c(e.shortBylineText),this.video_count_short_text=new c(e.videoCountShortText),this.endpoint=new f(e.navigationEndpoint),this.thumbnail_width=e.thumbnailWidth,this.aspect_ratio=e.aspectRatio,this.max_lines_title=e.maxLinesTitle,this.max_lines_short_byline_text=e.maxLinesShortBylineText,this.overlay_position=e.overlayPosition}}Qc.type="StructuredDescriptionPlaylistLockup";class Jc extends u{constructor(e){super(),this.section_title=new c(e.sectionTitle),this.media_lockups=g(e.mediaLockups,[Qc])}}Jc.type="VideoDescriptionCourseSection";class Zc extends u{constructor(e){super(),this.header_title=e.headerTitle,this.header_subtitle=e.headerSubtitle,this.video_attributes=g(e.videoAttributeViewModels,Ps),this.previous_button=h(e.previousButton,fe),this.next_button=h(e.nextButton,fe)}}Zc.type="VideoAttributesSectionView";class eu extends u{constructor(e){super(),Reflect.has(e,"sectionText")&&(this.section_title=c.fromAttributed(e.sectionText)),Reflect.has(e,"bodyText")&&(this.body_text=c.fromAttributed(e.bodyText)),Reflect.has(e,"bodyHeader")&&(this.body_header=c.fromAttributed(e.bodyHeader))}}eu.type="HowThisWasMadeSectionView";class rr extends u{constructor(e){super(),this.title=new c(e.title),this.items=g(e.items),Reflect.has(e,"endpoint")&&(this.endpoint=new f(e.endpoint))}get contents(){return this.items}}rr.type="ReelShelf";class ms extends u{constructor(e){super(),this.items=g(e.items,[Kc,Fc,or,Yc,Jc,vo,vo,Rs,rr,Zc,eu])}}ms.type="StructuredDescriptionContent";class Ms extends u{constructor(e){super(),this.header=h(e.header,Oc),this.content=h(e.content,[Ps,Q,z,Lc,ms,Vc,Uc]),this.panel_identifier=e.panelIdentifier,this.identifier=e.identifier?{surface:e.identifier.surface,tag:e.identifier.tag}:void 0,this.target_id=e.targetId,this.visibility=e.visibility}}Ms.type="EngagementPanelSectionList";class tu extends u{constructor(e){super(),this.content=e.content,this.max_lines=e.maxLines,this.more_endpoint=e.moreEndpoint.showEngagementPanelEndpoint?{show_engagement_panel_endpoint:{engagement_panel:h(e.moreEndpoint.showEngagementPanelEndpoint.engagementPanel,Ms),engagement_panel_popup_type:e.moreEndpoint.showEngagementPanelEndpoint.engagementPanelPresentationConfigs.engagementPanelPopupPresentationConfig.popupType,identifier:{surface:e.moreEndpoint.showEngagementPanelEndpoint.identifier.surface,tag:e.moreEndpoint.showEngagementPanelEndpoint.identifier.tag}}}:new f(e.moreEndpoint),this.more_icon_type=e.moreIcon.iconType,this.more_label=e.moreLabel,this.target_id=e.targetId}}tu.type="ChannelTagline";class iu extends u{constructor(e){super(),this.states=e.states.map(i=>({id:i.stateId,next_id:i.nextStateId,state:se(i.state)})),this.current_state_id=e.currentStateId,this.target_id=e.targetId}}iu.type="SubscriptionNotificationToggleButton";class ct extends u{constructor(e){super(),this.button_text=new c(e.buttonText),this.subscribed=e.subscribed,this.enabled=e.enabled,this.item_type=e.type,this.channel_id=e.channelId,this.show_preferences=e.showPreferences,Reflect.has(e,"subscribedButtonText")&&(this.subscribed_text=new c(e.subscribedButtonText)),Reflect.has(e,"unsubscribedButtonText")&&(this.unsubscribed_text=new c(e.unsubscribedButtonText)),Reflect.has(e,"unsubscribeButtonText")&&(this.unsubscribe_text=new c(e.unsubscribeButtonText)),this.notification_preference_button=h(e.notificationPreferenceButton,iu),Reflect.has(e,"serviceEndpoints")&&(this.service_endpoints=e.serviceEndpoints.map(i=>new f(i))),Reflect.has(e,"onSubscribeEndpoints")&&(this.on_subscribe_endpoints=e.onSubscribeEndpoints.map(i=>new f(i))),Reflect.has(e,"onUnsubscribeEndpoints")&&(this.on_unsubscribe_endpoints=e.onUnsubscribeEndpoints.map(i=>new f(i))),Reflect.has(e,"subscribedEntityKey")&&(this.subscribed_entity_key=e.subscribedEntityKey),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),Reflect.has(e,"subscribeAccessibility")&&(this.subscribe_accessibility_label=e.subscribeAccessibility.accessibilityData?.label),Reflect.has(e,"unsubscribeAccessibility")&&(this.unsubscribe_accessibility_label=e.unsubscribeAccessibility.accessibilityData?.label)}}ct.type="SubscribeButton";class yn extends u{constructor(e){super(),this.author=new G({simpleText:e.title,navigationEndpoint:e.navigationEndpoint},e.badges,e.avatar),Reflect.has(e,"banner")&&(this.banner=w.fromResponse(e.banner)),Reflect.has(e,"tv_banner")&&(this.tv_banner=w.fromResponse(e.tvBanner)),Reflect.has(e,"mobile_banner")&&(this.mobile_banner=w.fromResponse(e.mobileBanner)),Reflect.has(e,"subscriberCountText")&&(this.subscribers=new c(e.subscriberCountText)),Reflect.has(e,"videosCountText")&&(this.videos_count=new c(e.videosCountText)),Reflect.has(e,"sponsorButton")&&(this.sponsor_button=h(e.sponsorButton,S)),Reflect.has(e,"subscribeButton")&&(this.subscribe_button=h(e.subscribeButton,[ct,S])),Reflect.has(e,"headerLinks")&&(this.header_links=h(e.headerLinks,[Pc,Rc])),Reflect.has(e,"channelHandleText")&&(this.channel_handle=new c(e.channelHandleText)),Reflect.has(e,"channelId")&&(this.channel_id=e.channelId),Reflect.has(e,"tagline")&&(this.tagline=h(e.tagline,tu))}}yn.type="C4TabbedHeader";class c_ extends u{constructor(e){super(),this.label=new c(e.label),this.icon_type=e.icon.iconType,this.style=e.style}}c_.type="CallToActionButton";class u_ extends u{constructor(e){super(),this.teaser=h(e.teaser),this.content=h(e.content),Reflect.has(e,"cardId")&&(this.card_id=e.cardId),Reflect.has(e,"feature")&&(this.feature=e.feature),this.cue_ranges=e.cueRanges.map(i=>({start_card_active_ms:i.startCardActiveMs,end_card_active_ms:i.endCardActiveMs,teaser_duration_ms:i.teaserDurationMs,icon_after_teaser_ms:i.iconAfterTeaserMs}))}}u_.type="Card";class nu extends u{constructor(e){super(),this.cards=g(e.cards),this.header=new c(e.headerText),this.allow_teaser_dismiss=e.allowTeaserDismiss}}nu.type="CardCollection";class su extends u{constructor(e){super(),this.contents=g(e.contents)}}su.type="CarouselHeader";class l_ extends u{constructor(e){super(),this.items=g(e.carouselItems),this.background_color=e.backgroundColor,this.layout_style=e.layoutStyle,this.pagination_thumbnails=w.fromResponse(e.paginationThumbnails),this.paginator_alignment=e.paginatorAlignment}get contents(){return this.items}}l_.type="CarouselItem";class ou extends u{constructor(e){super(),this.icon_name=e.iconName,this.text=c.fromAttributed(e.text),this.on_tap_endpoint=new f(e.onTap),this.button=h(e.button,fe)}}ou.type="TextCarouselItemView";class ru extends u{constructor(e){super(),this.item_type=e.itemType,this.carousel_item=h(e.carouselItem,ou)}}ru.type="CarouselItemView";class au extends u{constructor(e){super(),this.title=e.title,this.previous_button=h(e.previousButton,fe),this.next_button=h(e.nextButton,fe)}}au.type="CarouselTitleView";let cu=class extends u{constructor(e){super(),this.id=e.channelId,this.author=new G({...e.title,navigationEndpoint:e.navigationEndpoint},e.ownerBadges,e.thumbnail),this.subscriber_count=new c(e.subscriberCountText),this.video_count=new c(e.videoCountText),this.long_byline=new c(e.longBylineText),this.short_byline=new c(e.shortBylineText),this.endpoint=new f(e.navigationEndpoint),this.subscribe_button=h(e.subscribeButton,[ct,S]),this.description_snippet=new c(e.descriptionSnippet)}};cu.type="Channel";class ko extends u{constructor(e){super(),this.id=e.channelId,this.name=new c(e.title),this.avatar=w.fromResponse(e.avatar),this.canonical_channel_url=e.canonicalChannelUrl,this.primary_links=e.primaryLinks?.map(i=>({endpoint:new f(i.navigationEndpoint),icon:w.fromResponse(i.icon),title:new c(i.title)}))??[],this.view_count=new c(e.viewCountText),this.joined_date=new c(e.joinedDateText),this.description=new c(e.description),this.email_reveal=new f(e.onBusinessEmailRevealClickCommand),this.can_reveal_email=!e.signInForBusinessEmail,this.country=new c(e.country),this.buttons=g(e.actionButtons,S)}}ko.type="ChannelAboutFullMetadata";class h_ extends u{constructor(e){super(),this.channel_title=e.channelTitle,this.avatar=w.fromResponse(e.avatar),this.header=new c(e.header),this.main_text=new c(e.mainText),this.sign_in_button=h(e.signInButton,S),this.secondary_text=new c(e.secondaryText)}}h_.type="ChannelAgeGate";class p_ extends u{constructor(e){super(),this.title=new c(e.title),this.items=g(e.items)}}p_.type="ChannelFeaturedContent";class uu extends u{constructor(e){super(),this.title=e.title,this.description=e.description,this.url=e.channelUrl,this.rss_url=e.rssUrl,this.vanity_channel_url=e.vanityChannelUrl,this.external_id=e.externalId,this.is_family_safe=e.isFamilySafe,this.keywords=e.keywords,this.avatar=w.fromResponse(e.avatar),this.music_artist_name=typeof e.musicArtistName=="string"&&e.musicArtistName.length>0?e.musicArtistName:void 0,this.available_countries=e.availableCountryCodes,this.android_deep_link=e.androidDeepLink,this.android_appindexing_link=e.androidAppindexingLink,this.ios_appindexing_link=e.iosAppindexingLink}}uu.type="ChannelMetadata";class d_ extends u{constructor(e){super(),this.title=new c(e.title)}}d_.type="ChannelMobileHeader";class lu extends u{constructor(e){super(),this.avatar=w.fromResponse(e.avatar),this.endpoint=new f(e.avatarEndpoint),this.name=e.name,this.links=e.links.map(i=>new c(i))}}lu.type="ChannelOptions";class f_ extends u{constructor(e){super(),this.illustration=w.fromResponse(e.illustration),this.description=new c(e.description)}}f_.type="ChannelOwnerEmptyState";class So extends u{constructor(e){super(),this.content_type_sub_menu_items=e.contentTypeSubMenuItems.map(i=>({endpoint:new f(i.navigationEndpoint||i.endpoint),selected:i.selected,title:i.title})),this.sort_setting=h(e.sortSetting)}}So.type="ChannelSubMenu";class m_ extends u{constructor(e){super(),this.title=new c(e.title).toString(),Reflect.has(e,"button")&&(this.button=h(e.button,S))}}m_.type="ChannelSwitcherHeader";class __ extends u{constructor(e){super(),this.thumbnails=w.fromResponse(e.thumbnail),this.endpoint=new f(e.navigationEndpoint),"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)})}get label(){return this.accessibility?.accessibility_data?.label}}__.type="ChannelThumbnailWithLink";class b_ extends u{constructor(e){super(),this.id=e.videoId,this.title=new c(e.title),this.description=new c(e.description),this.view_count=new c(e.viewCountText),this.published_time=new c(e.publishedTimeText)}}b_.type="ChannelVideoPlayer";class hu extends u{constructor(e){super(),this.title=new c(e.title),this.time_range_start_millis=e.timeRangeStartMillis,this.thumbnail=w.fromResponse(e.thumbnail)}}hu.type="Chapter";class y_ extends u{constructor(e){super(),this.id=e.videoId,this.title=new c(e.title),this.duration={text:e.lengthText.simpleText,seconds:Ht(e.lengthText.simpleText)},this.endpoint=new f(e.navigationEndpoint)}}y_.type="ChildVideo";class pu extends u{constructor(e){super(),this.text=e.text,this.display_type=e.displayType,this.endpoint=new f(e.tapCommand),this.chip_entity_key=e.chipEntityKey}}pu.type="ChipView";class g_ extends u{constructor(e){super(),this.chips=g(e.chips,pu)}}g_.type="ChipBarView";class Re extends u{constructor(e){super(),this.is_selected=e.isSelected,Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new f(e.navigationEndpoint)),this.text=new c(e.text).toString()}}Re.type="ChipCloudChip";class hi extends u{constructor(e){super(),this.chips=g(e.chips,Re),this.next_button=h(e.nextButton,S),this.previous_button=h(e.previousButton,S),this.horizontal_scrollable=e.horizontalScrollable}}hi.type="ChipCloud";class w_ extends u{constructor(e){super(),this.text=new c(e.defaultText),this.icon_type=e.defaultIcon.iconType,this.toggled_text=new c(e.toggledText),this.toggled_icon_type=e.toggledIcon.iconType,Reflect.has(e,"isToggled")&&(this.is_toggled=e.isToggled),this.menu_item_identifier=e.menuItemIdentifier,this.endpoint=new f(e.command),Reflect.has(e,"loggingDirectives")&&(this.logging_directives={visibility:{types:e.loggingDirectives.visibility.types},enable_displaylogger_experiment:e.loggingDirectives.enableDisplayloggerExperiment})}}w_.type="ClientSideToggleMenuItem";class x_ extends u{constructor(e){super(),this.channel_avatar=w.fromResponse(e.channelAvatar),this.custom_text=new c(e.customText),this.channel_name=new c(e.channelName),this.subscriber_count=new c(e.subscriberCountText),this.endpoint=new f(e.endpoint)}}x_.type="CollaboratorInfoCardContent";class v_ extends u{constructor(e){super(),this.left=w.fromResponse(e.leftThumbnail),this.top_right=w.fromResponse(e.topRightThumbnail),this.bottom_right=w.fromResponse(e.bottomRightThumbnail),this.endpoint=new f(e.navigationEndpoint)}}v_.type="CollageHeroImage";class du extends u{constructor(e){super(),this.icon_name=e.icon.sources[0].clientResource.imageName,this.text=c.fromAttributed(e.text),this.style=e.style}}du.type="ThumbnailHoverOverlayView";class ar extends u{constructor(e){super(),this.text=e.text,this.badge_style=e.badgeStyle,e.backgroundColor&&(this.background_color={light_theme:e.backgroundColor.lightTheme,dark_theme:e.backgroundColor.darkTheme}),e.iconName&&(this.icon_name=e.icon.sources[0].clientResource.imageName)}}ar.type="ThumbnailBadgeView";class fu extends u{constructor(e){super(),this.badges=g(e.thumbnailBadges,ar),this.position=e.position}}fu.type="ThumbnailOverlayBadgeView";class mu extends u{constructor(e){super(),this.buttons=g(e.buttons,li)}}mu.type="ThumbnailHoverOverlayToggleActionsView";class _u extends u{constructor(e){super(),this.start_percent=e.startPercent}}_u.type="ThumbnailOverlayProgressBarView";class bu extends u{constructor(e){super(),this.progress_bar=h(e.progressBar,_u),this.badges=g(e.badges,ar)}}bu.type="ThumbnailBottomOverlayView";class cr extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.overlays=g(e.overlays,[mu,bu,fu,du,fc]),"backgroundColor"in e&&(this.background_color={light_theme:e.backgroundColor.lightTheme,dark_theme:e.backgroundColor.darkTheme})}}cr.type="ThumbnailView";class yu extends u{constructor(e){super(),this.primary_thumbnail=h(e.primaryThumbnail,cr),e.stackColor&&(this.stack_color={light_theme:e.stackColor.lightTheme,dark_theme:e.stackColor.darkTheme})}}yu.type="CollectionThumbnailView";class k_ extends u{constructor(e){super(),this.open_miniplayer=e.openMiniplayer,this.video_id=e.videoId,this.list_type=e.listType,this.endpoint=new f(e.onCreateListCommand),this.video_ids=e.videoIds}}k_.type="AddToPlaylistCommand";class S_ extends u{constructor(e){super(),this.commands=CS(e.commands)}}S_.type="CommandExecutorCommand";var Je;let T_=class extends u{constructor(e){super(),Je.set(this,void 0),v(this,Je,e,"f")}getApiPath(){switch(r(this,Je,"f").request){case"CONTINUATION_REQUEST_TYPE_WATCH_NEXT":return"next";case"CONTINUATION_REQUEST_TYPE_BROWSE":return"browse";case"CONTINUATION_REQUEST_TYPE_SEARCH":return"search";case"CONTINUATION_REQUEST_TYPE_ACCOUNTS_LIST":return"account/accounts_list";case"CONTINUATION_REQUEST_TYPE_COMMENTS_NOTIFICATION_MENU":return"notification/get_notification_menu";case"CONTINUATION_REQUEST_TYPE_COMMENT_REPLIES":return"comment/get_comment_replies";case"CONTINUATION_REQUEST_TYPE_REEL_WATCH_SEQUENCE":return"reel/reel_watch_sequence";case"CONTINUATION_REQUEST_TYPE_GET_PANEL":return"get_panel";default:return""}}buildRequest(){const e={};return r(this,Je,"f").formData&&(e.formData=r(this,Je,"f").formData),r(this,Je,"f").token&&(e.continuation=r(this,Je,"f").token),r(this,Je,"f").request==="CONTINUATION_REQUEST_TYPE_COMMENTS_NOTIFICATION_MENU"&&(e.notificationsMenuRequestType="NOTIFICATIONS_MENU_REQUEST_TYPE_COMMENTS",r(this,Je,"f").token&&(e.fetchCommentsParams={continuation:r(this,Je,"f").token},delete e.continuation)),e}};Je=new WeakMap;T_.type="ContinuationCommand";var Vn;const Ok="kids/get_kids_blocklist_picker";class C_ extends u{constructor(e){super(),Vn.set(this,void 0),v(this,Vn,e,"f")}getApiPath(){return Ok}buildRequest(){const e={};return r(this,Vn,"f").blockedForKidsContent&&(e.blockedForKidsContent=r(this,Vn,"f").blockedForKidsContent),e}}Vn=new WeakMap;C_.type="GetKidsBlocklistPickerCommand";class gu extends u{constructor(e){super(),this.engagement_type=e.engagementType,Reflect.has(e,"ids")&&(this.ids=e.ids.map(i=>({encrypted_video_id:i.encryptedVideoId,external_channel_id:i.externalChannelId,comment_id:i.commentId,external_owner_id:i.externalOwnerId,artist_id:i.artistId,playlist_id:i.playlistId,external_post_id:i.externalPostId,share_id:i.shareId})))}}gu.type="RunAttestationCommand";class I_ extends u{constructor(e){super(),this.inline_content=h(e.panelLoadingStrategy?.inlineContent),this.remove_default_padding=!!e.removeDefaultPadding}}I_.type="ShowDialogCommand";class E_ extends u{constructor(e){super(),this.content_source_panel_identifier=e.contentSourcePanelIdentifier,this.target_panel_identifier=e.targetPanelIdentifier}}E_.type="UpdateEngagementPanelContentCommand";var eo;class P_ extends u{constructor(e){super(),eo.set(this,void 0),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.tooltip=e.iconTooltip,this.tooltip==="Verified"&&(this.style="BADGE_STYLE_TYPE_VERIFIED",e.style="BADGE_STYLE_TYPE_VERIFIED"),v(this,eo,e,"f")}get orig_badge(){return r(this,eo,"f")}}eo=new WeakMap;P_.type="AuthorCommentBadge";class wu extends u{constructor(e){super(),this.id=e.id,this.categories=g(e.categories),this.category_buttons=g(e.categoryButtons),this.search_placeholder=new c(e.searchPlaceholderText),this.search_no_results=new c(e.searchNoResultsText),this.pick_skin_tone=new c(e.pickSkinToneText),this.clear_search_label=e.clearSearchLabel,this.skin_tone_generic_label=e.skinToneGenericLabel,this.skin_tone_light_label=e.skinToneLightLabel,this.skin_tone_medium_light_label=e.skinToneMediumLightLabel,this.skin_tone_medium_label=e.skinToneMediumLabel,this.skin_tone_medium_dark_label=e.skinToneMediumDarkLabel,this.skin_tone_dark_label=e.skinToneDarkLabel}}wu.type="EmojiPicker";class R_ extends u{constructor(e){super(),this.editable_text=new c(e.editableText),this.author_thumbnail=w.fromResponse(e.authorThumbnail),this.submit_button=h(e.submitButton,S),this.cancel_button=h(e.cancelButton,S),this.placeholder=new c(e.placeholderText),this.emoji_button=h(e.emojiButton,S),this.emoji_picker=h(e.emojiPicker,wu)}}R_.type="CommentDialog";class xu extends u{constructor(e){super(),this.contents=g(e.contents),this.view_replies=h(e.viewReplies,S),this.hide_replies=h(e.hideReplies,S),this.view_replies_creator_thumbnail=w.fromResponse(e.viewRepliesCreatorThumbnail),this.has_channel_owner_replied=!!e.viewRepliesCreatorThumbnail}}xu.type="CommentReplies";class vu extends u{constructor(e){super(),this.reply_button=h(e.replyButton,S),this.cancel_button=h(e.cancelButton,S),this.author_thumbnail=w.fromResponse(e.authorThumbnail),this.placeholder=new c(e.placeholderText),this.error_message=new c(e.errorMessage)}}vu.type="CommentReplyDialog";class ku extends u{constructor(e){super(),this.simplebox_avatar=w.fromResponse(e.simpleboxAvatar),this.simplebox_placeholder=new c(e.simpleboxPlaceholder)}}ku.type="CommentsSimplebox";class Su extends u{constructor(e){super(),Reflect.has(e,"teaserAvatar")&&(this.teaser_avatar=w.fromResponse(e.teaserAvatar)),Reflect.has(e,"teaserContent")&&(this.teaser_content=new c(e.teaserContent))}}Su.type="CommentsEntryPointTeaser";class Tu extends u{constructor(e){super(),Reflect.has(e,"headerText")&&(this.header=new c(e.headerText)),Reflect.has(e,"commentCount")&&(this.comment_count=new c(e.commentCount)),(Reflect.has(e,"teaserAvatar")||Reflect.has(e,"simpleboxAvatar"))&&(this.teaser_avatar=w.fromResponse(e.teaserAvatar||e.simpleboxAvatar)),Reflect.has(e,"teaserContent")&&(this.teaser_content=new c(e.teaserContent)),Reflect.has(e,"contentRenderer")&&(this.content_renderer=h(e.contentRenderer,[Su,ku])),Reflect.has(e,"simpleboxPlaceholder")&&(this.simplebox_placeholder=new c(e.simpleboxPlaceholder))}}Tu.type="CommentsEntryPointHeader";class Ds extends u{constructor(e){super(),this.title=new c(e.titleText),this.count=new c(e.countText),this.comments_count=new c(e.commentsCount),this.create_renderer=h(e.createRenderer),this.sort_menu=h(e.sortMenu,ui),Reflect.has(e,"customEmojis")&&(this.custom_emojis=e.customEmojis.map(i=>({emoji_id:i.emojiId,shortcuts:i.shortcuts,search_terms:i.searchTerms,image:w.fromResponse(i.image),is_custom_emoji:i.isCustomEmoji})))}}Ds.type="CommentsHeader";class Cu extends u{constructor(e){super(),this.submit_button=h(e.submitButton,S),this.cancel_button=h(e.cancelButton,S),this.author_thumbnail=w.fromResponse(e.authorThumbnail),this.placeholder=new c(e.placeholderText),this.avatar_size=e.avatarSize}}Cu.type="CommentSimplebox";var Ie;class Ns extends u{constructor(e){super(),Ie.set(this,void 0),this.comment_id=e.commentId,this.is_pinned=!!e.pinnedText,this.keys={comment:e.commentKey,comment_surface:e.commentSurfaceKey,toolbar_state:e.toolbarStateKey,toolbar_surface:e.toolbarSurfaceKey,shared:e.sharedKey}}applyMutations(e,i,n){e&&(this.content=c.fromAttributed(e.properties.content),this.published_time=e.properties.publishedTime,this.author_is_channel_owner=!!e.author.isCreator,this.creator_thumbnail_url=e.toolbar.creatorThumbnailUrl,this.like_count=e.toolbar.likeCountNotliked?e.toolbar.likeCountNotliked:"0",this.like_count_liked=e.toolbar.likeCountLiked?e.toolbar.likeCountLiked:"0",this.like_count_a11y=e.toolbar.likeCountA11y,this.like_active_tooltip=e.toolbar.likeActiveTooltip,this.like_inactive_tooltip=e.toolbar.likeInactiveTooltip,this.dislike_active_tooltip=e.toolbar.dislikeActiveTooltip,this.dislike_inactive_tooltip=e.toolbar.dislikeInactiveTooltip,this.like_button_a11y=e.toolbar.likeButtonA11y,this.heart_active_tooltip=e.toolbar.heartActiveTooltip,this.reply_count_a11y=e.toolbar.replyCountA11y,this.reply_count=e.toolbar.replyCount?e.toolbar.replyCount:"0",this.is_member=!!e.author.sponsorBadgeUrl,Reflect.has(e.author,"sponsorBadgeUrl")&&(this.member_badge={url:e.author.sponsorBadgeUrl,a11y:e.author.A11y}),this.author=new G({simpleText:e.author.displayName,navigationEndpoint:e.avatar.endpoint},e.author,e.avatar.image,e.author.channelId)),i&&(this.is_hearted=i.heartState==="TOOLBAR_HEART_STATE_HEARTED",this.is_liked=i.likeState==="TOOLBAR_LIKE_STATE_LIKED",this.is_disliked=i.likeState==="TOOLBAR_LIKE_STATE_DISLIKED"),n&&("prepareAccountCommand"in n?this.prepare_account_command=new f(n.prepareAccountCommand):(this.like_command=new f(n.likeCommand),this.dislike_command=new f(n.dislikeCommand),this.unlike_command=new f(n.unlikeCommand),this.undislike_command=new f(n.undislikeCommand),this.reply_command=new f(n.replyCommand)))}async like(){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.like_command)throw new m("Like command not found.");if(this.is_liked)throw new m("This comment is already liked.",{comment_id:this.comment_id});return this.like_command.call(r(this,Ie,"f"))}async dislike(){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.dislike_command)throw new m("Dislike command not found.");if(this.is_disliked)throw new m("This comment is already disliked.",{comment_id:this.comment_id});return this.dislike_command.call(r(this,Ie,"f"))}async unlike(){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.unlike_command)throw new m("Unlike command not found.");if(!this.is_liked)throw new m("This comment is not liked.",{comment_id:this.comment_id});return this.unlike_command.call(r(this,Ie,"f"))}async undislike(){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.undislike_command)throw new m("Undislike command not found.");if(!this.is_disliked)throw new m("This comment is not disliked.",{comment_id:this.comment_id});return this.undislike_command.call(r(this,Ie,"f"))}async reply(e){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.reply_command)throw new m("Reply command not found.");const i=this.reply_command.dialog?.as(vu);if(!i)throw new m("Reply dialog not found.");const n=i.reply_button;if(!n)throw new m("Reply button not found in the dialog.");if(!n.endpoint)throw new m("Reply button endpoint not found.");return n.endpoint.call(r(this,Ie,"f"),{commentText:e})}async translate(e){if(!r(this,Ie,"f"))throw new m("Actions instance not set for this comment.");if(!this.content)throw new m("Comment content not found.",{comment_id:this.comment_id});const n={text:this.content.toString().replace(/[^\p{L}\p{N}\p{P}\p{Z}]/gu,""),target_language:e},s=qm(22,n),o=await r(this,Ie,"f").execute("comment/perform_comment_action",{action:s}),l=o.data.frameworkUpdates?.entityBatchUpdate?.mutations?.[0]?.payload?.commentEntityPayload?.translatedContent?.content;return{...o,content:l}}setActions(e){v(this,Ie,e,"f")}}Ie=new WeakMap;Ns.type="CommentView";var to,ei,gi,wa;class Iu extends u{constructor(e){super(),to.add(this),ei.set(this,void 0),gi.set(this,void 0),this.comment=h(e.commentViewModel,Ns),this.comment_replies_data=h(e.replies,xu),this.is_moderated_elq_comment=e.isModeratedElqComment,this.has_replies=!!this.comment_replies_data}get has_continuation(){if(!this.replies)throw new m("Cannot determine if there is a continuation because this thread's replies have not been loaded.");return!!r(this,gi,"f")}async getReplies(){if(!r(this,ei,"f"))throw new m("Actions instance not set for this thread.");if(!this.comment_replies_data)throw new m("This comment has no replies.",this);const e=this.comment_replies_data.contents?.firstOfType(z);if(!e)throw new m("Replies continuation not found.");const i=await e.endpoint.call(r(this,ei,"f"),{parse:!0});if(!i.on_response_received_endpoints_memo)throw new m("Unexpected response.",i);return this.replies=r(this,to,"m",wa).call(this,i.on_response_received_endpoints_memo),v(this,gi,i.on_response_received_endpoints_memo.getType(z)[0],"f"),this}async getContinuation(){if(!this.replies)throw new m("Cannot retrieve continuation because this thread's replies have not been loaded.");if(!r(this,gi,"f"))throw new m("Continuation not found.");if(!r(this,ei,"f"))throw new m("Actions instance not set for this thread.");const e=r(this,gi,"f").button?.as(S);if(!e)throw new m('"Load more" button not found.');const i=await e.endpoint.call(r(this,ei,"f"),{parse:!0});if(!i.on_response_received_endpoints_memo)throw new m("Unexpected response.",i);return this.replies=r(this,to,"m",wa).call(this,i.on_response_received_endpoints_memo),v(this,gi,i.on_response_received_endpoints_memo.getType(z)[0],"f"),this}setActions(e){v(this,ei,e,"f")}}ei=new WeakMap,gi=new WeakMap,to=new WeakSet,wa=function(e){return $(e.getType(Ns).map(i=>(i.setActions(r(this,ei,"f")),i)))};Iu.type="CommentThread";class A_ extends u{constructor(e){super(),this.text=new c(e.chipText),this.color_pallette={background_color:e.chipColorPalette?.backgroundColor,foreground_title_color:e.chipColorPalette?.foregroundTitleColor},Reflect.has(e,"chipIcon")&&Reflect.has(e.chipIcon,"iconType")&&(this.icon_type=e.chipIcon.iconType)}}A_.type="PdgCommentChip";class M_ extends u{constructor(e){super(),this.custom_badge=w.fromResponse(e.customBadge),this.tooltip=e.tooltip}}M_.type="SponsorCommentBadge";class D_ extends u{constructor(e){super(),this.title=new c(e.title),this.channel_id=e.channelId,this.thumbnail=w.fromResponse(e.thumbnail),this.display_name=new c(e.displayName),this.video_count=new c(e.videoCountText),this.subscriber_count=new c(e.subscriberCountText),this.endpoint=new f(e.navigationEndpoint),this.tv_banner=w.fromResponse(e.tvBanner),this.menu=h(e.menu,K)}}D_.type="CompactChannel";class ur extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail)}}ur.type="PlaylistCustomThumbnail";class lr extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail)}}lr.type="PlaylistVideoThumbnail";let Pn=class extends u{constructor(e){super(),this.id=e.playlistId,this.title=new c(e.title),this.author=e.shortBylineText?.simpleText?new c(e.shortBylineText):new G(e.longBylineText,e.ownerBadges,null),this.thumbnails=w.fromResponse(e.thumbnail||{thumbnails:e.thumbnails.map(i=>i.thumbnails).flat(1)}),this.video_count=new c(e.thumbnailText),this.video_count_short=new c(e.videoCountShortText),this.first_videos=g(e.videos),this.share_url=e.shareUrl||null,this.menu=h(e.menu),this.badges=g(e.ownerBadges),this.endpoint=new f(e.navigationEndpoint),this.thumbnail_overlays=g(e.thumbnailOverlays),Reflect.has(e,"thumbnailRenderer")&&(this.thumbnail_renderer=h(e.thumbnailRenderer,[lr,ur])||void 0),Reflect.has(e,"viewPlaylistText")&&(this.view_playlist=new c(e.viewPlaylistText))}};Pn.type="Playlist";class N_ extends Pn{constructor(e){super(e)}}N_.type="CompactMix";class L_ extends u{constructor(e){super();const i=e.thumbnailOverlays.find(s=>s.thumbnailOverlayTimeStatusRenderer)?.thumbnailOverlayTimeStatusRenderer.text||"N/A";this.id=e.videoId,this.title=new c(e.title),this.top_metadata_items=new c(e.topMetadataItems),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),this.author=new G(e.shortBylineText);const n=e.lengthText?new c(e.lengthText).toString():new c(i).toString();this.duration={text:n,seconds:Ht(n)},this.endpoint=new f(e.navigationEndpoint),this.badges=g(e.badges),this.use_vertical_poster=e.useVerticalPoster,this.menu=h(e.menu,K)}}L_.type="CompactMovie";class O_ extends Pn{constructor(e){super(e)}}O_.type="CompactPlaylist";class B_ extends u{constructor(e){super(),this.title=new c(e.title),this.description=new c(e.description),this.video_count=new c(e.videoCountText),this.endpoint=new f(e.navigationEndpoint),this.thumbnail=w.fromResponse(e.thumbnail)}}B_.type="CompactStation";class V_ extends u{constructor(e){super(),this.title=new c(e.title),this.confirm_button=h(e.confirmButton,S),this.cancel_button=h(e.cancelButton,S),this.dialog_messages=e.dialogMessages.map(i=>new c(i))}}V_.type="ConfirmDialog";class hr extends u{constructor(e){super(),this.metadata_rows=e.metadataRows.map(i=>({metadata_parts:i.metadataParts?.map(n=>({text:n.text?c.fromAttributed(n.text):null,avatar_stack:h(n.avatarStack,bc),enable_truncation:e.enableTruncation}))})),this.delimiter=e.delimiter}}hr.type="ContentMetadataView";class at extends u{constructor(e){super(),this.text=new c(e.text)}}at.type="Message";class U_ extends u{constructor(e){super(),this.availability_message=h(e.availabilityMessage,at)}}U_.type="ConversationBar";class pr extends u{constructor(e){super(),this.copy_button=h(e.copyButton,S),this.short_url=e.shortUrl,this.style=e.style}}pr.type="CopyLink";class Eu extends u{constructor(e){super(),this.label=new c(e.label),this.placeholder_text=new c(e.placeholderText),this.disabled=!!e.disabled,this.dropdown_type=e.type,this.id=e.id,Reflect.has(e,"options")&&(this.options=e.options.map(i=>({title:new c(i.title),subtitle:new c(i.subtitle),leading_image:w.fromResponse(i.leadingImage),value:{privacy_status_value:i.value?.privacyStatusValue},on_tap:new f(i.onTap),is_selected:!!i.isSelected})))}}Eu.type="DropdownView";class Pu extends u{constructor(e){super(),Reflect.has(e,"displayProperties")&&(this.display_properties={isMultiline:!!e.displayProperties.isMultiline,disableNewLines:!!e.displayProperties.disableNewLines}),Reflect.has(e,"contentProperties")&&(this.content_properties={labelText:e.contentProperties.labelText,placeholderText:e.contentProperties.placeholderText,maxCharacterCount:e.contentProperties.maxCharacterCount}),Reflect.has(e,"initialState")&&(this.initial_state={isFocused:!!e.initialState.isFocused}),Reflect.has(e,"formFieldMetadata")&&(this.form_field_metadata={formId:e.formFieldMetadata.formId,fieldId:e.formFieldMetadata.fieldId})}}Pu.type="TextFieldView";class Ru extends u{constructor(e){super(),this.playlist_title=h(e.playlistTitle,Pu),this.playlist_visibility=h(e.playlistVisibility,Eu),this.disable_playlist_collaborate=!!e.disablePlaylistCollaborate,this.create_playlist_params_collaboration_enabled=e.createPlaylistParamsCollaborationEnabled,this.create_playlist_params_collaboration_disabled=e.createPlaylistParamsCollaborationDisabled,this.video_ids=e.videoIds}}Ru.type="CreatePlaylistDialogFormView";class dr extends u{constructor(e){super(),this.avatar=h(e.avatar,Qo),this.a11y_label=e.a11yLabel,this.renderer_context=new Is(e.rendererContext)}}dr.type="DecoratedAvatarView";class Au extends u{constructor(e){super(),this.time_range_start_millis=e.timeRangeStartMillis,this.marker_duration_millis=e.markerDurationMillis,this.heat_marker_intensity_score_normalized=e.heatMarkerIntensityScoreNormalized}}Au.type="HeatMarker";class Mu extends u{constructor(e){super(),this.max_height_dp=e.maxHeightDp,this.min_height_dp=e.minHeightDp,this.show_hide_animation_duration_millis=e.showHideAnimationDurationMillis,this.heat_markers=g(e.heatMarkers,Au),this.heat_markers_decorations=g(e.heatMarkersDecorations)}}Mu.type="Heatmap";class F_ extends u{constructor(e){super(),this.marker_key=e.key,this.value={},Reflect.has(e,"value")&&(Reflect.has(e.value,"heatmap")&&(this.value.heatmap=h(e.value.heatmap,Mu)),Reflect.has(e.value,"chapters")&&(this.value.chapters=g(e.value.chapters,hu)))}}F_.type="Marker";class Du extends u{constructor(e){super(),this.markers_map=$(e.markersMap?.map(i=>new F_(i))||[])}}Du.type="MultiMarkersPlayerBar";class Nu extends u{constructor(e){super(),this.player_bar=h(e.playerBar,Du),this.player_bar_action_button=h(e.playerBarActionButton,S)}}Nu.type="DecoratedPlayerBar";class H_ extends u{constructor(e){super(),this.title=new c(e.title),this.description=new c(e.description),this.endpoint=new f(e.navigationEndpoint),this.large_form_factor_background_thumbnail=h(e.largeFormFactorBackgroundThumbnail),this.small_form_factor_background_thumbnail=h(e.smallFormFactorBackgroundThumbnail),this.scrim_color_values=e.scrimColorValues,this.min_panel_display_duration_ms=e.minPanelDisplayDurationMs,this.min_video_play_duration_ms=e.minVideoPlayDurationMs,this.scrim_duration=e.scrimDuration,this.metadata_order=e.metadataOrder,this.panel_layout=e.panelLayout}}H_.type="DefaultPromoPanel";class Lu extends u{constructor(e){if(super(),Reflect.has(e,"description")&&(this.description=c.fromAttributed(e.description)),Reflect.has(e,"maxLines")&&(this.max_lines=parseInt(e.maxLines)),Reflect.has(e,"truncationText")&&(this.truncation_text=c.fromAttributed(e.truncationText)),this.always_show_truncation_text=!!e.alwaysShowTruncationText,e.rendererContext.commandContext?.onTap?.innertubeCommand?.showEngagementPanelEndpoint){const i=e.rendererContext.commandContext?.onTap?.innertubeCommand?.showEngagementPanelEndpoint;this.more_endpoint={show_engagement_panel_endpoint:{engagement_panel:h(i.engagementPanel,Ms),engagement_panel_popup_type:i.engagementPanelPresentationConfigs.engagementPanelPopupPresentationConfig.popupType,identifier:{surface:i.identifier.surface,tag:i.identifier.tag}}}}this.renderer_context=new Is(e.rendererContext)}}Lu.type="DescriptionPreviewView";class Ou extends u{constructor(e){super(),this.headline=c.fromAttributed(e.headline)}}Ou.type="DialogHeaderView";class fr extends u{constructor(e){super(),this.primary_button=h(e.primaryButton,fe),this.secondary_button=h(e.secondaryButton,fe),this.should_hide_divider=!!e.shouldHideDivider}}fr.type="PanelFooterView";class Bu extends u{constructor(e){super(),this.panel_footer=h(e.panelFooter,fr),this.form_id=e.formId,this.container_type=e.containerType}}Bu.type="FormFooterView";class W_ extends u{constructor(e){super(),this.header=h(e.header,Ou),this.footer=h(e.footer,[Bu,fr]),this.custom_content=h(e.customContent,Ru)}}W_.type="DialogView";class Vu extends u{constructor(e){super(),this.text=new c(e.didYouMean).toString(),this.corrected_query=new c(e.correctedQuery),this.endpoint=new f(e.navigationEndpoint||e.correctedQueryEndpoint)}}Vu.type="DidYouMean";class Uu extends u{constructor(e){super(),this.text=c.fromAttributed(e.text),this.max_lines=parseInt(e.maxLines)}}Uu.type="DynamicTextView";class mr extends u{constructor(e){super(),Reflect.has(e,"type")&&Reflect.has(e.type,"textType")&&(this.text=e.type.textType.text?.content),this.properties=e.properties,Reflect.has(e,"childElements")&&(this.child_elements=e.childElements.map(i=>new mr(i)))}}mr.type="ChildElement";class Ls extends u{constructor(e){if(super(),Reflect.has(e,"elementRenderer"))return h(e,Ls);const i=e.newElement.type.componentType;this.model=h(i?.model),Reflect.has(e,"newElement")&&Reflect.has(e.newElement,"childElements")&&(this.child_elements=$(e.newElement.childElements?.map(n=>new mr(n))||[]))}}Ls.type="Element";class j_ extends u{constructor(e){super(),this.title=new c(e.title),this.first_option=h(e.firstOption),this.menu=h(e.menu,K)}}j_.type="EmergencyOnebox";class G_ extends u{constructor(e){super(),this.category_id=e.categoryId,this.title=new c(e.title),this.emoji_ids=e.emojiIds,this.image_loading_lazy=!!e.imageLoadingLazy,this.category_type=e.categoryType}}G_.type="EmojiPickerCategory";class q_ extends u{constructor(e){super(),this.category_id=e.categoryId,Reflect.has(e,"icon")&&(this.icon_type=e.icon?.iconType),this.tooltip=e.tooltip}}q_.type="EmojiPickerCategoryButton";class $_ extends u{constructor(e){super(),this.category_id=e.categoryId,this.title=new c(e.title),this.upsell=new c(e.upsell),this.emoji_tooltip=e.emojiTooltip,this.endpoint=new f(e.command),this.emoji_ids=e.emojiIds}}$_.type="EmojiPickerUpsellCategory";var Ze;const Bk="playlist/get_add_to_playlist";class Fu extends u{constructor(e){super(),Ze.set(this,void 0),v(this,Ze,e,"f")}getApiPath(){return Bk}buildRequest(){const e={};return e.videoIds=r(this,Ze,"f").videoIds?r(this,Ze,"f").videoIds:[r(this,Ze,"f").videoId],r(this,Ze,"f").playlistId&&(e.playlistId=r(this,Ze,"f").playlistId),r(this,Ze,"f").params&&(e.params=r(this,Ze,"f").params),e.excludeWatchLater=!!r(this,Ze,"f").excludeWatchLater,e}}Ze=new WeakMap;Fu.type="AddToPlaylistServiceEndpoint";class K_ extends Fu{constructor(e){super(e)}}K_.type="AddToPlaylistEndpoint";var le;const Vk="browse";class Y_ extends u{constructor(e){super(),le.set(this,void 0),v(this,le,e,"f")}getApiPath(){return Vk}buildRequest(){const e={};return r(this,le,"f").browseId&&(e.browseId=r(this,le,"f").browseId),r(this,le,"f").params&&(e.params=r(this,le,"f").params),r(this,le,"f").query&&(e.query=r(this,le,"f").query),r(this,le,"f").browseId==="FEsubscriptions"&&(e.subscriptionSettingsState=r(this,le,"f").subscriptionSettingsState||"MY_SUBS_SETTINGS_STATE_LAYOUT_FORMAT_LIST"),r(this,le,"f").browseId==="SPaccount_playback"&&(e.formData=r(this,le,"f").formData||{accountSettingsFormData:{flagCaptionsDefaultOff:!1,flagAutoCaptionsDefaultOn:!1,flagDisableInlinePreview:!1,flagAudioDescriptionDefaultOn:!1}}),r(this,le,"f").browseId==="FEwhat_to_watch"&&(r(this,le,"f").browseRequestSupportedMetadata&&(e.browseRequestSupportedMetadata=r(this,le,"f").browseRequestSupportedMetadata),r(this,le,"f").inlineSettingStatus&&(e.inlineSettingStatus=r(this,le,"f").inlineSettingStatus)),e}}le=new WeakMap;Y_.type="BrowseEndpoint";var ae;const Uk="comment/create_comment";class z_ extends u{constructor(e){super(),ae.set(this,void 0),v(this,ae,e,"f")}getApiPath(){return Uk}buildRequest(){const e={};if(r(this,ae,"f").createCommentParams&&(e.createCommentParams=r(this,ae,"f").createCommentParams),r(this,ae,"f").commentText&&(e.commentText=r(this,ae,"f").commentText),r(this,ae,"f").attachedVideoId?e.videoAttachment={videoId:r(this,ae,"f").attachedVideoId}:r(this,ae,"f").pollOptions?e.pollAttachment={choices:r(this,ae,"f").pollOptions}:r(this,ae,"f").imageBlobId?e.imageAttachment={encryptedBlobId:r(this,ae,"f").imageBlobId}:r(this,ae,"f").sharedPostId&&(e.sharedPostAttachment={postId:r(this,ae,"f").sharedPostId}),r(this,ae,"f").accessRestrictions&&typeof r(this,ae,"f").accessRestrictions=="number"){const i=r(this,ae,"f").accessRestrictions===1?"RESTRICTION_TYPE_EVERYONE":"RESTRICTION_TYPE_SPONSORS_ONLY";e.accessRestrictions={restriction:i}}return r(this,ae,"f").botguardResponse&&(e.botguardResponse=r(this,ae,"f").botguardResponse),e}}ae=new WeakMap;z_.type="CreateCommentEndpoint";var Ee;const Fk="playlist/create";class X_ extends u{constructor(e){super(),Ee.set(this,void 0),v(this,Ee,e,"f")}getApiPath(){return Fk}buildRequest(){const e={};return r(this,Ee,"f").title&&(e.title=r(this,Ee,"f").title),r(this,Ee,"f").privacyStatus&&(e.privacyStatus=r(this,Ee,"f").privacyStatus),r(this,Ee,"f").description&&(e.description=r(this,Ee,"f").description),r(this,Ee,"f").videoIds&&(e.videoIds=r(this,Ee,"f").videoIds),r(this,Ee,"f").params&&(e.params=r(this,Ee,"f").params),r(this,Ee,"f").sourcePlaylistId&&(e.sourcePlaylistId=r(this,Ee,"f").sourcePlaylistId),e}}Ee=new WeakMap;X_.type="CreatePlaylistServiceEndpoint";var Un;const Hk="playlist/delete";class Q_ extends u{constructor(e){super(),Un.set(this,void 0),v(this,Un,e,"f")}getApiPath(){return Hk}buildRequest(){const e={};return r(this,Un,"f").playlistId&&(e.playlistId=r(this,Un,"f").sourcePlaylistId),e}}Un=new WeakMap;Q_.type="DeletePlaylistEndpoint";var Pt;const Wk="feedback";class J_ extends u{constructor(e){super(),Pt.set(this,void 0),v(this,Pt,e,"f")}getApiPath(){return Wk}buildRequest(){const e={};return r(this,Pt,"f").feedbackToken&&(e.feedbackTokens=[r(this,Pt,"f").feedbackToken]),r(this,Pt,"f").cpn&&(e.feedbackContext={cpn:r(this,Pt,"f").cpn}),e.isFeedbackTokenUnencrypted=!!r(this,Pt,"f").isFeedbackTokenUnencrypted,e.shouldMerge=!!r(this,Pt,"f").shouldMerge,e}}Pt=new WeakMap;J_.type="FeedbackEndpoint";var ne;const jk="account/accounts_list";class Z_ extends u{constructor(e){super(),ne.set(this,void 0),v(this,ne,e,"f")}getApiPath(){return jk}buildRequest(){const e={};return r(this,ne,"f").requestType&&(e.requestType=r(this,ne,"f").requestType,(r(this,ne,"f").requestType==="ACCOUNTS_LIST_REQUEST_TYPE_CHANNEL_SWITCHER"||r(this,ne,"f").requestType==="ACCOUNTS_LIST_REQUEST_TYPE_IDENTITY_PROMPT")&&r(this,ne,"f").nextUrl&&(e.nextNavendpoint={urlEndpoint:{url:r(this,ne,"f").nextUrl}})),r(this,ne,"f").channelSwitcherQuery&&(e.channelSwitcherQuery=r(this,ne,"f").channelSwitcherQuery),r(this,ne,"f").triggerChannelCreation&&(e.triggerChannelCreation=r(this,ne,"f").triggerChannelCreation),r(this,ne,"f").contentOwnerConfig&&r(this,ne,"f").contentOwnerConfig.externalContentOwnerId&&(e.contentOwnerConfig=r(this,ne,"f").contentOwnerConfig),r(this,ne,"f").obfuscatedSelectedGaiaId&&(e.obfuscatedSelectedGaiaId=r(this,ne,"f").obfuscatedSelectedGaiaId),r(this,ne,"f").selectedSerializedDelegationContext&&(e.selectedSerializedDelegationContext=r(this,ne,"f").selectedSerializedDelegationContext),r(this,ne,"f").callCircumstance&&(e.callCircumstance=r(this,ne,"f").callCircumstance),e}}ne=new WeakMap;Z_.type="GetAccountsListInnertubeEndpoint";class eb extends u{constructor(e){super(),this.panel_identifier=e.panelIdentifier}}eb.type="HideEngagementPanelEndpoint";var et;const Gk="like/like",qk="like/dislike",$k="like/removelike";class tb extends u{constructor(e){super(),et.set(this,void 0),v(this,et,e,"f")}getApiPath(){return r(this,et,"f").status==="DISLIKE"?qk:r(this,et,"f").status==="INDIFFERENT"?$k:Gk}buildRequest(){const e={};r(this,et,"f").target&&(e.target=r(this,et,"f").target);const i=this.getParams();return i&&(e.params=i),e}getParams(){switch(r(this,et,"f").status){case"LIKE":return r(this,et,"f").likeParams;case"DISLIKE":return r(this,et,"f").dislikeParams;case"INDIFFERENT":return r(this,et,"f").removeLikeParams;default:return}}}et=new WeakMap;tb.type="LikeEndpoint";var Fn;const Kk="live_chat/get_item_context_menu";class ib extends u{constructor(e){super(),Fn.set(this,void 0),v(this,Fn,e,"f")}getApiPath(){return Kk}buildRequest(){const e={};return r(this,Fn,"f").params&&(e.params=r(this,Fn,"f").params),e}}Fn=new WeakMap;ib.type="LiveChatItemContextMenuEndpoint";var wi;const Yk="notification/modify_channel_preference";class nb extends u{constructor(e){super(),wi.set(this,void 0),v(this,wi,e,"f")}getApiPath(){return Yk}buildRequest(){const e={};return r(this,wi,"f").params&&(e.params=r(this,wi,"f").params),r(this,wi,"f").secondaryParams&&(e.secondaryParams=r(this,wi,"f").secondaryParams),e}}wi=new WeakMap;nb.type="ModifyChannelNotificationPreferenceEndpoint";var xi;const zk="comment/perform_comment_action";class sb extends u{constructor(e){super(),xi.set(this,void 0),v(this,xi,e,"f")}getApiPath(){return zk}buildRequest(){const e={};return r(this,xi,"f").actions&&(e.actions=r(this,xi,"f").actions),r(this,xi,"f").action&&(e.actions=[r(this,xi,"f").action]),e}}xi=new WeakMap;sb.type="PerformCommentActionEndpoint";var Rt;const Xk="browse/edit_playlist";class ob extends u{constructor(e){super(),Rt.set(this,void 0),v(this,Rt,e,"f")}getApiPath(){return Xk}buildRequest(){const e={};return r(this,Rt,"f").actions&&(e.actions=r(this,Rt,"f").actions),r(this,Rt,"f").playlistId&&(e.playlistId=r(this,Rt,"f").playlistId),r(this,Rt,"f").params&&(e.params=r(this,Rt,"f").params),e}}Rt=new WeakMap;ob.type="PlaylistEditEndpoint";var oe;const Qk="player";class Hu extends u{constructor(e){super(),oe.set(this,void 0),v(this,oe,e,"f")}getApiPath(){return Qk}buildRequest(){const e={};return r(this,oe,"f").videoId&&(e.videoId=r(this,oe,"f").videoId),r(this,oe,"f").playlistId&&(e.playlistId=r(this,oe,"f").playlistId),(r(this,oe,"f").index!==void 0||r(this,oe,"f").playlistIndex!==void 0)&&(e.playlistIndex=r(this,oe,"f").index||r(this,oe,"f").playlistIndex),(r(this,oe,"f").playerParams||r(this,oe,"f").params)&&(e.params=r(this,oe,"f").playerParams||r(this,oe,"f").params),r(this,oe,"f").startTimeSeconds&&(e.startTimeSecs=r(this,oe,"f").startTimeSeconds),r(this,oe,"f").overrideMutedAtStart&&(e.overrideMutedAtStart=r(this,oe,"f").overrideMutedAtStart),e.racyCheckOk=!!r(this,oe,"f").racyCheckOk,e.contentCheckOk=!!r(this,oe,"f").contentCheckOk,e}}oe=new WeakMap;Hu.type="WatchEndpoint";class rb extends Hu{constructor(e){super(e)}}rb.type="PrefetchWatchCommand";var ge;const Jk="reel/reel_item_watch";class ab extends u{constructor(e){super(),ge.set(this,void 0),v(this,ge,e,"f")}getApiPath(){return Jk}buildRequest(){const e={};return r(this,ge,"f").videoId&&(e.playerRequest={videoId:r(this,ge,"f").videoId}),e.playerRequest&&(r(this,ge,"f").playerParams&&(e.playerRequest.params=r(this,ge,"f").playerParams),r(this,ge,"f").racyCheckOk&&(e.playerRequest.racyCheckOk=!!r(this,ge,"f").racyCheckOk),r(this,ge,"f").contentCheckOk&&(e.playerRequest.contentCheckOk=!!r(this,ge,"f").contentCheckOk)),r(this,ge,"f").params&&(e.params=r(this,ge,"f").params),r(this,ge,"f").inputType&&(e.inputType=r(this,ge,"f").inputType),e.disablePlayerResponse=!!r(this,ge,"f").disablePlayerResponse,e}}ge=new WeakMap;ab.type="ReelWatchEndpoint";var tt;const Zk="search";class cb extends u{constructor(e){super(),tt.set(this,void 0),v(this,tt,e,"f")}getApiPath(){return Zk}buildRequest(){const e={};return r(this,tt,"f").query&&(e.query=r(this,tt,"f").query),r(this,tt,"f").params&&(e.params=r(this,tt,"f").params),r(this,tt,"f").webSearchboxStatsUrl&&(e.webSearchboxStatsUrl=r(this,tt,"f").webSearchboxStatsUrl),r(this,tt,"f").suggestStats&&(e.suggestStats=r(this,tt,"f").suggestStats),e}}tt=new WeakMap;cb.type="SearchEndpoint";var vi;const eS="share/get_share_panel";class _r extends u{constructor(e){super(),vi.set(this,void 0),v(this,vi,e,"f")}getApiPath(){return eS}buildRequest(){const e={};return r(this,vi,"f").serializedShareEntity&&(e.serializedSharedEntity=r(this,vi,"f").serializedShareEntity),r(this,vi,"f").clientParams&&(e.clientParams=r(this,vi,"f").clientParams),e}}vi=new WeakMap;_r.type="ShareEntityServiceEndpoint";class ub extends _r{constructor(e){super(e)}}ub.type="ShareEndpoint";class lb extends _r{constructor(e){super(e)}}lb.type="ShareEntityEndpoint";class hb extends u{constructor(e){super(),this.panel_identifier=e.panelIdentifier,this.source_panel_identifier=e.sourcePanelIdentifier}}hb.type="ShowEngagementPanelEndpoint";class pb extends u{constructor(e){super(),Array.isArray(e.actions)&&(this.actions=g(e.actions.map(i=>(delete i.clickTrackingParams,i)))),this.signal=e.signal}}pb.type="SignalServiceEndpoint";var Ue;const tS="subscription/subscribe";class db extends u{constructor(e){super(),Ue.set(this,void 0),v(this,Ue,e,"f")}getApiPath(){return tS}buildRequest(){const e={};return r(this,Ue,"f").channelIds&&(e.channelIds=r(this,Ue,"f").channelIds),r(this,Ue,"f").siloName&&(e.siloName=r(this,Ue,"f").siloName),r(this,Ue,"f").params&&(e.params=r(this,Ue,"f").params),r(this,Ue,"f").botguardResponse&&(e.botguardResponse=r(this,Ue,"f").botguardResponse),r(this,Ue,"f").feature&&(e.clientFeature=r(this,Ue,"f").feature),e}}Ue=new WeakMap;db.type="SubscribeEndpoint";var At;const iS="subscription/unsubscribe";class fb extends u{constructor(e){super(),At.set(this,void 0),v(this,At,e,"f")}getApiPath(){return iS}buildRequest(){const e={};return r(this,At,"f").channelIds&&(e.channelIds=r(this,At,"f").channelIds),r(this,At,"f").siloName&&(e.siloName=r(this,At,"f").siloName),r(this,At,"f").params&&(e.params=r(this,At,"f").params),e}}At=new WeakMap;fb.type="UnsubscribeEndpoint";var _e;const nS="next";class mb extends u{constructor(e){super(),_e.set(this,void 0),v(this,_e,e,"f")}getApiPath(){return nS}buildRequest(){const e={};return r(this,_e,"f").videoId&&(e.videoId=r(this,_e,"f").videoId),r(this,_e,"f").playlistId&&(e.playlistId=r(this,_e,"f").playlistId),(r(this,_e,"f").index!==void 0||r(this,_e,"f").playlistIndex!==void 0)&&(e.playlistIndex=r(this,_e,"f").index||r(this,_e,"f").playlistIndex),(r(this,_e,"f").playerParams||r(this,_e,"f").params)&&(e.params=r(this,_e,"f").playerParams||r(this,_e,"f").params),e.racyCheckOk=!!r(this,_e,"f").racyCheckOk,e.contentCheckOk=!!r(this,_e,"f").contentCheckOk,e}}_e=new WeakMap;mb.type="WatchNextEndpoint";class Wu extends u{constructor(e){super(),this.elements=g(e.elements),this.start_ms=e.startMs}}Wu.type="Endscreen";class _b extends u{constructor(e){super(),this.style=e.style,this.title=new c(e.title),this.endpoint=new f(e.endpoint),Reflect.has(e,"image")&&(this.image=w.fromResponse(e.image)),Reflect.has(e,"icon")&&(this.icon=w.fromResponse(e.icon)),Reflect.has(e,"metadata")&&(this.metadata=new c(e.metadata)),Reflect.has(e,"callToAction")&&(this.call_to_action=new c(e.callToAction)),Reflect.has(e,"hovercardButton")&&(this.hovercard_button=h(e.hovercardButton)),Reflect.has(e,"isSubscribe")&&(this.is_subscribe=!!e.isSubscribe),Reflect.has(e,"playlistLength")&&(this.playlist_length=new c(e.playlistLength)),Reflect.has(e,"thumbnailOverlays")&&(this.thumbnail_overlays=g(e.thumbnailOverlays)),this.left=parseFloat(e.left),this.width=parseFloat(e.width),this.top=parseFloat(e.top),this.aspect_ratio=parseFloat(e.aspectRatio),this.start_ms=parseFloat(e.startMs),this.end_ms=parseFloat(e.endMs),this.id=e.id}}_b.type="EndscreenElement";class ju extends u{constructor(e){super(),this.id=e.playlistId,this.title=new c(e.title),this.author=new c(e.longBylineText),this.endpoint=new f(e.navigationEndpoint),this.thumbnails=w.fromResponse(e.thumbnail),this.video_count=new c(e.videoCountText)}}ju.type="EndScreenPlaylist";class Gu extends u{constructor(e){super(),this.id=e.videoId,this.title=new c(e.title),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),this.author=new G(e.shortBylineText,e.ownerBadges),this.endpoint=new f(e.navigationEndpoint),this.short_view_count=new c(e.shortViewCountText),this.badges=g(e.badges),this.duration={text:new c(e.lengthText).toString(),seconds:e.lengthInSeconds}}}Gu.type="EndScreenVideo";class _s extends u{constructor(e){super(),this.title=e.title,this.endpoint=new f(e.endpoint),this.selected=e.selected,this.content=h(e.content)}}_s.type="ExpandableTab";class bb extends u{constructor(e){super(),this.items=g(e.items)}get contents(){return this.items}}bb.type="ExpandedShelfContents";class yb extends u{constructor(e){super(),this.dialog_message=new c(e.dialogMessage),this.confirm_label=new c(e.confirmLabel)}}yb.type="FancyDismissibleDialog";class pi extends u{constructor(e){super(),this.contents=g(e.contents,Re)}}pi.type="FeedFilterChipBar";class gb extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.endpoint=new f(e.impressionEndpoint),this.apply_modernized_style=e.applyModernizedStyle,this.trim_style=e.trimStyle,this.background_style=e.backgroundStyle}}gb.type="FeedNudge";class qu extends u{constructor(e){super(),this.title=new c(e.title)}}qu.type="FeedTabbedHeader";class wb extends u{constructor(e){super(),this.title=new c(e.title),this.box_art=w.fromResponse(e.boxArt),this.box_art_overlay_text=new c(e.boxArtOverlayText),this.endpoint=new f(e.endpoint),this.is_official_box_art=!!e.isOfficialBoxArt}}wb.type="GameDetails";class bs extends u{constructor(e){super(),this.items=g(e.items),Reflect.has(e,"header")&&(this.header=h(e.header)),Reflect.has(e,"isCollapsible")&&(this.is_collapsible=e.isCollapsible),Reflect.has(e,"visibleRowCount")&&(this.visible_row_count=e.visibleRowCount),Reflect.has(e,"targetId")&&(this.target_id=e.targetId),this.continuation=e.continuations?.[0]?.nextContinuationData?.continuation||null}get contents(){return this.items}}bs.type="Grid";class $u extends u{constructor(e){super(),this.id=e.channelId,this.author=new G({...e.title,navigationEndpoint:e.navigationEndpoint},e.ownerBadges,e.thumbnail),this.subscribers=new c(e.subscriberCountText),this.video_count=new c(e.videoCountText),this.endpoint=new f(e.navigationEndpoint),this.subscribe_button=h(e.subscribeButton)}}$u.type="GridChannel";class xb extends u{constructor(e){super(),this.title=new c(e.title)}}xb.type="GridHeader";class vb extends u{constructor(e){super(),this.id=e.playlistId,this.title=new c(e.title),this.author=e.shortBylineText?.simpleText?new c(e.shortBylineText):e.longBylineText?.simpleText?new c(e.longBylineText):null,this.thumbnails=w.fromResponse(e.thumbnail),this.video_count=new c(e.videoCountText),this.video_count_short=new c(e.videoCountShortText),this.endpoint=new f(e.navigationEndpoint),this.secondary_endpoint=new f(e.secondaryNavigationEndpoint),this.thumbnail_overlays=g(e.thumbnailOverlays)}}vb.type="GridMix";class kb extends u{constructor(e){super();const i=e.thumbnailOverlays.find(n=>n.hasOwnProperty("thumbnailOverlayTimeStatusRenderer"))?.thumbnailOverlayTimeStatusRenderer;this.id=e.videoId,this.title=new c(e.title),this.thumbnails=w.fromResponse(e.thumbnail),this.duration=e.lengthText?new c(e.lengthText):i?.text?new c(i.text):null,this.endpoint=new f(e.navigationEndpoint),this.badges=g(e.badges,_i),this.metadata=new c(e.metadata),this.thumbnail_overlays=g(e.thumbnailOverlays)}}kb.type="GridMovie";class Ku extends u{constructor(e){super(),this.id=e.playlistId,this.title=new c(e.title),Reflect.has(e,"shortBylineText")&&(this.author=new G(e.shortBylineText,e.ownerBadges)),this.badges=g(e.ownerBadges),this.endpoint=new f(e.navigationEndpoint),this.view_playlist=new c(e.viewPlaylistText),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_renderer=h(e.thumbnailRenderer),this.sidebar_thumbnails=[].concat(...e.sidebarThumbnails?.map(i=>w.fromResponse(i))||[])||null,this.video_count=new c(e.thumbnailText),this.video_count_short=new c(e.videoCountShortText)}}Ku.type="GridPlaylist";class Yu extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail)}}Yu.type="ShowCustomThumbnail";class zu extends u{constructor(e){super(),Reflect.has(e,"text")&&(this.text=new c(e.text)),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}}zu.type="ThumbnailOverlayBottomPanel";class Sb extends u{constructor(e){super(),this.title=new c(e.title),this.thumbnail_renderer=h(e.thumbnailRenderer,Yu),this.endpoint=new f(e.navigationEndpoint),this.long_byline_text=new c(e.longBylineText),this.thumbnail_overlays=g(e.thumbnailOverlays,zu),this.author=new G(e.shortBylineText,void 0)}}Sb.type="GridShow";class Xu extends u{constructor(e){super();const i=e.thumbnailOverlays.find(n=>n.hasOwnProperty("thumbnailOverlayTimeStatusRenderer"))?.thumbnailOverlayTimeStatusRenderer;this.video_id=e.videoId,this.title=new c(e.title),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),this.rich_thumbnail=h(e.richThumbnail),this.published=new c(e.publishedTimeText),this.duration=e.lengthText?new c(e.lengthText):i?.text?new c(i.text):null,this.author=e.shortBylineText&&new G(e.shortBylineText,e.ownerBadges),this.views=new c(e.viewCountText),this.short_view_count=new c(e.shortViewCountText),this.endpoint=new f(e.navigationEndpoint),this.menu=h(e.menu,K),Reflect.has(e,"buttons")&&(this.buttons=g(e.buttons)),Reflect.has(e,"upcomingEventData")&&(this.upcoming=new Date(+`${e.upcomingEventData.startTime}000`),this.upcoming_text=new c(e.upcomingEventData.upcomingEventText),this.is_reminder_set=!!e.upcomingEventData?.isReminderSet)}get id(){return this.video_id}get is_upcoming(){return!!(this.upcoming&&this.upcoming>new Date)}}Xu.type="GridVideo";class ys extends u{constructor(e){super(),this.title=new c(e.formattedTitle),this.endpoint=new f(e.navigationEndpoint||e.serviceEndpoint),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"thumbnail")&&(this.thumbnails=w.fromResponse(e.thumbnail)),Reflect.has(e,"badges")&&(this.badges=e.badges),this.is_primary=!!e.isPrimary}}ys.type="GuideEntry";class Tb extends u{constructor(e){super(),this.expander_item=h(e.expanderItem,ys),this.collapser_item=h(e.collapserItem,ys),this.expandable_items=g(e.expandableItems)}}Tb.type="GuideCollapsibleEntry";class Cb extends u{constructor(e){super(),this.header_entry=h(e.headerEntry),this.expander_icon=e.expanderIcon.iconType,this.collapser_icon=e.collapserIcon.iconType,this.section_items=g(e.sectionItems)}}Cb.type="GuideCollapsibleSectionEntry";class Ib extends ys{constructor(e){super(e.entryRenderer.guideEntryRenderer),this.always_show=!!e.alwaysShow}}Ib.type="GuideDownloadsEntry";class br extends u{constructor(e){super(),Reflect.has(e,"formattedTitle")&&(this.title=new c(e.formattedTitle)),this.items=g(e.items)}}br.type="GuideSection";class Qu extends br{}Qu.type="GuideSubscriptionsSection";class Ju extends u{constructor(e){super(),this.hashtag=new c(e.hashtag),this.hashtag_info=new c(e.hashtagInfoText)}}Ju.type="HashtagHeader";class Eb extends u{constructor(e){super(),this.hashtag=new c(e.hashtag),this.hashtag_info_text=new c(e.hashtagInfoText),this.hashtag_thumbnail=w.fromResponse(e.hashtagThumbnail),this.endpoint=new f(e.onTapCommand),this.hashtag_background_color=e.hashtagBackgroundColor,this.hashtag_video_count=new c(e.hashtagVideoCount),this.hashtag_channel_count=new c(e.hashtagChannelCount)}}Eb.type="HashtagTile";class Pb extends u{constructor(e){super(),this.thumbnails=w.fromResponse(e.thumbnail),this.on_tap_endpoint=new f(e.onTap)}}Pb.type="HeroPlaylistThumbnail";let Rb=class extends u{constructor(e){super(),e.thumbnail&&(this.thumbnail={image:w.fromResponse(e.thumbnail.image),endpoint:new f(e.thumbnail.onTap),on_long_press_endpoint:new f(e.thumbnail.onLongPress),content_mode:e.thumbnail.contentMode,crop_options:e.thumbnail.cropOptions}),this.background_image={image:w.fromResponse(e.backgroundImage.image),gradient_image:w.fromResponse(e.backgroundImage.gradientImage)},this.strapline=e.strapline,this.title=e.title,this.description=e.description,this.cta={icon_name:e.cta.iconName,title:e.cta.title,endpoint:new f(e.cta.onTap),accessibility_text:e.cta.accessibilityText,state:e.cta.state},this.text_on_tap_endpoint=new f(e.textOnTap)}};Rb.type="Panel";class To extends u{constructor(e){super(),this.panels=$(e.highlightsCarousel.panels.map(i=>new Rb(i)))}}To.type="HighlightsCarousel";class Zu extends u{constructor(e){super(),this.suggestion=new c(e.suggestion),this.endpoint=new f(e.navigationEndpoint),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"serviceEndpoint")&&(this.service_endpoint=new f(e.serviceEndpoint))}}Zu.type="SearchSuggestion";class Ab extends Zu{constructor(e){super(e)}}Ab.type="HistorySuggestion";class Mb extends u{constructor(e){super(),this.items=g(e.items),this.previous_button=h(e.previousButton,S),this.next_button=h(e.nextButton,S)}get contents(){return this.items}}Mb.type="HorizontalMovieList";class el extends u{constructor(e){super(),this.icon_type=e.icon?.iconType,Reflect.has(e,"tooltip")&&(this.tooltip=new c(e.tooltip).toString()),this.endpoint=new f(e.navigationEndpoint)}}el.type="IconLink";class tl extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.style=e.style}}tl.type="ImageBannerView";class Db extends u{constructor(e){super(),this.including_results_for=new c(e.includingResultsFor),this.corrected_query=new c(e.correctedQuery),this.corrected_query_endpoint=new f(e.correctedQueryEndpoint),this.search_only_for=Reflect.has(e,"searchOnlyFor")?new c(e.searchOnlyFor):void 0,this.original_query=Reflect.has(e,"originalQuery")?new c(e.originalQuery):void 0,this.original_query_endpoint=Reflect.has(e,"originalQueryEndpoint")?new f(e.originalQueryEndpoint):void 0}}Db.type="IncludingResultsFor";class il extends u{constructor(e){super(),this.title=new c(e.title),this.source=new c(e.source),Reflect.has(e,"paragraphs")&&(this.paragraphs=e.paragraphs.map(i=>new c(i))),Reflect.has(e,"attributedParagraphs")&&(this.attributed_paragraphs=e.attributedParagraphs.map(i=>c.fromAttributed(i))),this.thumbnail=w.fromResponse(e.thumbnail),this.source_endpoint=new f(e.sourceEndpoint),this.truncate_paragraphs=!!e.truncateParagraphs,this.background=e.background,Reflect.has(e,"inlineLinkIcon")&&Reflect.has(e.inlineLinkIcon,"iconType")&&(this.inline_link_icon_type=e.inlineLinkIcon.iconType)}}il.type="InfoPanelContent";class nl extends u{constructor(e){super(),this.title=new c(e.title),this.menu=h(e.menu,K),this.content=h(e.content,il),e.headerEndpoint&&(this.header_endpoint=new f(e.headerEndpoint)),this.background=e.background,this.title_style=e.titleStyle,Reflect.has(e,"icon")&&(this.icon_type=e.icon?.iconType)}}nl.type="InfoPanelContainer";class sl extends u{constructor(e){super(),this.header_type=e.type,this.title=new c(e.title),this.description=new c(e.description),this.metadata=new c(e.metadata),this.badges=g(e.badges,_i),this.box_art=w.fromResponse(e.boxArt),this.banner=w.fromResponse(e.banner),this.buttons=g(e.buttons,[ct,S]),this.auto_generated=new c(e.autoGenerated)}}sl.type="InteractiveTabbedHeader";class yr extends u{constructor(e){super(),this.title=new c(e.title)}}yr.type="ItemSectionHeader";class ol extends u{constructor(e){super(),this.title=new c(e.title),this.selected=!!e.selected,this.endpoint=new f(e.endpoint)}}ol.type="Tab";class gr extends u{constructor(e){super(),this.title=new c(e.title),this.tabs=g(e.tabs,ol),Reflect.has(e,"endItems")&&(this.end_items=g(e.endItems))}}gr.type="ItemSectionTabbedHeader";class rl extends u{constructor(e){super(),this.filter_menu=h(e.filterMenu,ui)}}rl.type="SortFilterHeader";class je extends u{constructor(e){super(),this.header=h(e.header,[Ds,yr,gr,rl,pi]),this.contents=g(e.contents),(e.targetId||e.sectionIdentifier)&&(this.target_id=e.targetId||e.sectionIdentifier),e.continuations&&(this.continuation=e.continuations?.at(0)?.nextContinuationData?.continuation)}}je.type="ItemSection";let al=class extends u{constructor(e){super(),this.header=h(e.header),this.initial_display_state=e.initialDisplayState,this.continuation=e.continuations[0]?.reloadContinuationData?.continuation,this.client_messages={reconnect_message:new c(e.clientMessages.reconnectMessage),unable_to_reconnect_message:new c(e.clientMessages.unableToReconnectMessage),fatal_error:new c(e.clientMessages.fatalError),reconnected_message:new c(e.clientMessages.reconnectedMessage),generic_error:new c(e.clientMessages.genericError)},this.is_replay=!!e.isReplay}};al.type="LiveChat";class cl extends u{constructor(e){super(),this.text=new c(e.text),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.context_menu_button=h(e.contextMenuButton,S)}}cl.type="LiveChatBannerHeader";class ul extends u{constructor(e){super(),this.header=h(e.header,cl),this.contents=h(e.contents),this.action_id=e.actionId,Reflect.has(e,"viewerIsCreator")&&(this.viewer_is_creator=e.viewerIsCreator),this.target_id=e.targetId,this.is_stackable=e.isStackable,Reflect.has(e,"backgroundType")&&(this.background_type=e.backgroundType),this.banner_type=e.bannerType,Reflect.has(e,"bannerProperties")&&Reflect.has(e.bannerProperties,"isEphemeral")&&(this.banner_properties_is_ephemeral=!!e.bannerProperties.isEphemeral),Reflect.has(e,"bannerProperties")&&Reflect.has(e.bannerProperties,"autoCollapseDelay")&&Reflect.has(e.bannerProperties.autoCollapseDelay,"seconds")&&(this.banner_properties_auto_collapse_delay_seconds=e.bannerProperties.autoCollapseDelay.seconds)}}ul.type="LiveChatBanner";class Nb extends u{constructor(e){super(),this.banner=h(e.bannerRenderer,ul)}}Nb.type="AddBannerToLiveChatCommand";class ll extends u{constructor(e){super(),this.item=h(e.item),Reflect.has(e,"clientId")&&(this.client_id=e.clientId)}}ll.type="AddChatItemAction";class Lb extends u{constructor(e){super(),this.item=h(e.item),this.duration_sec=e.durationSec}}Lb.type="AddLiveChatTickerItemAction";class Ob extends u{constructor(e){super(),this.client_assigned_id=e.clientAssignedId}}Ob.type="DimChatItemAction";class hl extends u{constructor(e){super(),this.text=c.fromAttributed(e.text),this.image_name=e.image.sources[0].clientResource.imageName,this.image_color=e.image.sources[0].clientResource.imageColor}}hl.type="BumperUserEduContentView";class pl extends u{constructor(e){super(),this.creator_thumbnail=w.fromResponse(e.creatorThumbnail),this.hearted_icon_name=e.heartedIcon.sources[0].clientResource.imageName,this.unhearted_icon_name=e.unheartedIcon.sources[0].clientResource.imageName,this.unhearted_icon_processor={border_image_processor:{image_tint:{color:e.unheartedIcon.processor.borderImageProcessor.imageTint.color}}},this.hearted_hover_text=e.heartedHoverText,this.hearted_accessibility_label=e.heartedAccessibilityLabel,this.unhearted_accessibility_label=e.unheartedAccessibilityLabel,this.engagement_state_key=e.engagementStateKey}}pl.type="CreatorHeartView";class Bb extends u{constructor(e){super(),this.menu_endpoint=new f(e.contextMenuEndpoint),this.moderation_buttons=g(e.moderationButtons,S),this.auto_moderated_item=h(e.autoModeratedItem),this.header_text=new c(e.headerText),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.id=e.id}}Bb.type="LiveChatAutoModMessage";class Vb extends u{constructor(e){super(),this.id=e.liveChatSummaryId,this.chat_summary=new c(e.chatSummary),this.icon_type=e.icon.iconType,this.like_feedback_button=h(e.likeFeedbackButton,li),this.dislike_feedback_button=h(e.dislikeFeedbackButton,li)}}Vb.type="LiveChatBannerChatSummary";class Ub extends u{constructor(e){super(),this.poll_question=new c(e.pollQuestion),this.author_photo=w.fromResponse(e.authorPhoto),this.choices=e.pollChoices.map(i=>({option_id:i.pollOptionId,text:new c(i.text).toString()})),this.collapsed_state_entity_key=e.collapsedStateEntityKey,this.live_chat_poll_state_entity_key=e.liveChatPollStateEntityKey,this.context_menu_button=h(e.contextMenuButton,S)}}Ub.type="LiveChatBannerPoll";class Fb extends u{constructor(e){super(),this.banner_message=new c(e.bannerMessage),this.author_photo=w.fromResponse(e.authorPhoto),this.inline_action_button=h(e.inlineActionButton,S),this.context_menu_button=h(e.contextMenuButton,S)}}Fb.type="LiveChatBannerRedirect";class dl extends u{constructor(e){super(),this.content=h(e.content,hl)}}dl.type="LiveChatItemBumperView";class Hb extends u{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec,Reflect.has(e,"timestampText")&&(this.timestamp_text=new c(e.timestampText)),Reflect.has(e,"headerPrimaryText")&&(this.header_primary_text=new c(e.headerPrimaryText)),this.header_subtext=new c(e.headerSubtext),Reflect.has(e,"message")&&(this.message=new c(e.message)),this.author=new G(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.menu_endpoint=new f(e.contextMenuEndpoint),this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label}}Hb.type="LiveChatMembershipItem";class Wb extends u{constructor(e){super(),this.id=e.id,this.icon_type=e.icon.iconType,this.text=new c(e.text),this.subtext=new c(e.subtext),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec,this.timestamp_text=new c(e.timestampText)}}Wb.type="LiveChatModeChangeMessage";class fl extends u{constructor(e){super(),this.reply_button=h(e.replyButton,fe),this.reply_count_entity_key=e.replyCountEntityKey,this.reply_count_placeholder=c.fromAttributed(e.replyCountPlaceholder)}}fl.type="PdgReplyButtonView";class jb extends u{constructor(e){super(),this.id=e.id,this.message=new c(e.message),this.author=new G(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.author_name_text_color=e.authorNameTextColor,this.header_background_color=e.headerBackgroundColor,this.header_text_color=e.headerTextColor,this.body_background_color=e.bodyBackgroundColor,this.body_text_color=e.bodyTextColor,this.purchase_amount=new c(e.purchaseAmountText).toString(),this.menu_endpoint=new f(e.contextMenuEndpoint),this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec,Reflect.has(e,"timestampText")&&(this.timestamp_text=new c(e.timestampText).toString()),this.timestamp_color=e.timestampColor,Reflect.has(e,"headerOverlayImage")&&(this.header_overlay_image=w.fromResponse(e.headerOverlayImage)),this.text_input_background_color=e.textInputBackgroundColor,this.lower_bumper=h(e.lowerBumper,dl),this.creator_heart_button=h(e.creatorHeartButton,pl),this.is_v2_style=e.isV2Style,this.reply_button=h(e.replyButton,fl)}}jb.type="LiveChatPaidMessage";class Gb extends u{constructor(e){super(),this.id=e.id,this.author=new G(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.money_chip_background_color=e.moneyChipBackgroundColor,this.money_chip_text_color=e.moneyChipTextColor,this.background_color=e.backgroundColor,this.author_name_text_color=e.authorNameTextColor,this.sticker=w.fromResponse(e.sticker),this.sticker_accessibility_label=e.sticker.accessibility.accessibilityData.label,this.sticker_display_width=e.stickerDisplayWidth,this.sticker_display_height=e.stickerDisplayHeight,this.purchase_amount=new c(e.purchaseAmountText).toString(),this.menu_endpoint=new f(e.contextMenuEndpoint),this.context_menu=this.menu_endpoint,this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec,this.is_v2_style=e.isV2Style}}Gb.type="LiveChatPaidSticker";class qb extends u{constructor(e){super(),this.id=e.id,this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3)}}qb.type="LiveChatPlaceholderItem";class $b extends u{constructor(e){super(),this.title=e.title,this.accessibility_title=e.accessibilityTitle,this.thumbnail=w.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.from_vendor_text=e.fromVendorText,this.information_button=h(e.informationButton),this.endpoint=new f(e.onClickCommand),this.creator_message=e.creatorMessage,this.creator_name=e.creatorName,this.author_photo=w.fromResponse(e.authorPhoto),this.information_dialog=h(e.informationDialog),this.is_verified=e.isVerified,this.creator_custom_message=new c(e.creatorCustomMessage)}}$b.type="LiveChatProductItem";class Kb extends u{constructor(e){super(),this.message=new c(e.message),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}}Kb.type="LiveChatRestrictedParticipation";class ml extends _i{constructor(e){super(e),this.custom_thumbnail=w.fromResponse(e.customThumbnail)}}ml.type="LiveChatAuthorBadge";class _l extends u{constructor(e){super(),this.author_name=new c(e.authorName),this.author_photo=w.fromResponse(e.authorPhoto),this.author_badges=g(e.authorBadges,ml),this.primary_text=new c(e.primaryText),this.menu_endpoint=new f(e.contextMenuEndpoint),this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label,this.image=w.fromResponse(e.image)}}_l.type="LiveChatSponsorshipsHeader";class Yb extends u{constructor(e){super(),this.id=e.id,this.timestamp_usec=e.timestampUsec,this.author_external_channel_id=e.authorExternalChannelId,this.header=h(e.header,_l)}}Yb.type="LiveChatSponsorshipsGiftPurchaseAnnouncement";class zb extends u{constructor(e){super(),this.id=e.id,this.timestamp_usec=e.timestampUsec,this.timestamp_text=new c(e.timestampText),this.author=new G(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),this.message=new c(e.message),this.menu_endpoint=new f(e.contextMenuEndpoint),this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label}}zb.type="LiveChatSponsorshipsGiftRedemptionAnnouncement";class Xb extends u{constructor(e){super(),this.id=e.id,this.message=new c(e.message),this.inline_action_buttons=g(e.inlineActionButtons,S),this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec,Reflect.has(e,"timestampText")&&(this.timestamp_text=new c(e.timestampText).toString()),this.author=new G(e.authorName,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),Reflect.has(e,"contextMenuEndpoint")&&(this.menu_endpoint=new f(e.contextMenuEndpoint)),Reflect.has(e,"contextMenuAccessibility")&&Reflect.has(e.contextMenuAccessibility,"accessibilityData")&&Reflect.has(e.contextMenuAccessibility.accessibilityData,"label")&&(this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label),this.before_content_buttons=g(e.beforeContentButtons,fe)}}Xb.type="LiveChatTextMessage";class Qb extends u{constructor(e){super(),this.id=e.id,this.author=new G(e.authorName||e.authorUsername,e.authorBadges,e.authorPhoto,e.authorExternalChannelId),Reflect.has(e,"amount")&&(this.amount=new c(e.amount)),this.amount_text_color=e.amountTextColor,this.start_background_color=e.startBackgroundColor,this.end_background_color=e.endBackgroundColor,this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=h(e.showItemEndpoint?.showLiveChatItemEndpoint?.renderer),this.show_item_endpoint=new f(e.showItemEndpoint),this.animation_origin=e.animationOrigin,this.open_engagement_panel_command=new f(e.openEngagementPanelCommand)}}Qb.type="LiveChatTickerPaidMessageItem";class Jb extends u{constructor(e){super(),this.id=e.id,this.author_external_channel_id=e.authorExternalChannelId,this.author_photo=w.fromResponse(e.authorPhoto),this.start_background_color=e.startBackgroundColor,this.end_background_color=e.endBackgroundColor,this.duration_sec=e.durationSec,this.full_duration_sec=e.fullDurationSec,this.show_item=h(e.showItemEndpoint?.showLiveChatItemEndpoint?.renderer),this.show_item_endpoint=new f(e.showItemEndpoint),this.ticker_thumbnails=e.tickerThumbnails.map(i=>({thumbnails:w.fromResponse(i),label:i?.accessibility?.accessibilityData?.label}))}}Jb.type="LiveChatTickerPaidStickerItem";class Zb extends u{constructor(e){super(),this.id=e.id,this.detail=new c(e.detailText),this.author=new G(e.authorName,e.authorBadges,e.sponsorPhoto,e.authorExternalChannelId),this.duration_sec=e.durationSec}}Zb.type="LiveChatTickerSponsorItem";class ey extends u{constructor(e){super(),this.id=e.id,Reflect.has(e,"timestampUsec")&&(this.timestamp=Math.floor(parseInt(e.timestampUsec)/1e3),this.timestamp_usec=e.timestampUsec),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.message=new c(e.message),this.action_button=h(e.actionButton),Reflect.has(e,"contextMenuEndpoint")&&(this.menu_endpoint=new f(e.contextMenuEndpoint)),Reflect.has(e,"contextMenuAccessibility")&&Reflect.has(e.contextMenuAccessibility,"accessibilityData")&&Reflect.has(e.contextMenuAccessibility.accessibilityData,"label")&&(this.context_menu_accessibility_label=e.contextMenuAccessibility.accessibilityData.label)}}ey.type="LiveChatViewerEngagementMessage";class ty extends u{constructor(e){super(),this.poll_question=new c(e.pollQuestion),this.thumbnails=w.fromResponse(e.thumbnail),this.metadata=new c(e.metadataText),this.live_chat_poll_type=e.liveChatPollType,this.context_menu_button=h(e.contextMenuButton,S)}}ty.type="PollHeader";class bl extends u{constructor(e){super(),this.id=e.id,this.contents=se(e.contents),this.target_id=e.targetId}}bl.type="LiveChatActionPanel";class iy extends u{constructor(e){super(),this.deleted_state_message=new c(e.deletedStateMessage),this.target_item_id=e.targetItemId}}iy.type="MarkChatItemAsDeletedAction";class ny extends u{constructor(e){super(),this.deleted_state_message=new c(e.deletedStateMessage),this.external_channel_id=e.externalChannelId}}ny.type="MarkChatItemsByAuthorAsDeletedAction";class sy extends u{constructor(e){super(),this.target_action_id=e.targetActionId}}sy.type="RemoveBannerForLiveChatCommand";class oy extends u{constructor(e){super(),this.target_item_id=e.targetItemId}}oy.type="RemoveChatItemAction";class ry extends u{constructor(e){super(),this.external_channel_id=e.externalChannelId}}ry.type="RemoveChatItemByAuthorAction";class ay extends u{constructor(e){super(),this.target_item_id=e.targetItemId,this.replacement_item=h(e.replacementItem)}}ay.type="ReplaceChatItemAction";class cy extends u{constructor(e){super(),this.to_replace=e.toReplace,this.replacement=h(e.replacement)}}cy.type="ReplaceLiveChatAction";class uy extends u{constructor(e){super(),this.actions=g(e.actions?.map(i=>(delete i.clickTrackingParams,i))),this.video_offset_time_msec=e.videoOffsetTimeMsec}}uy.type="ReplayChatItemAction";class ly extends u{constructor(e){super(),this.panel_to_show=h(e.panelToShow,bl)}}ly.type="ShowLiveChatActionPanelAction";class hy extends u{constructor(e){super(),this.dialog=h(e.dialog)}}hy.type="ShowLiveChatDialogAction";class py extends u{constructor(e){super(),this.tooltip=h(e.tooltip)}}py.type="ShowLiveChatTooltipCommand";class yl extends u{constructor(e){super(),this.date_text=new c(e.dateText).toString()}}yl.type="UpdateDateTextAction";class gl extends u{constructor(e){super(),this.description=new c(e.description)}}gl.type="UpdateDescriptionAction";class dy extends u{constructor(e){super(),this.poll_to_update=h(e.pollToUpdate)}}dy.type="UpdateLiveChatPollAction";class wl extends u{constructor(e){super(),this.title=new c(e.title)}}wl.type="UpdateTitleAction";class xl extends u{constructor(e){super(),this.default_text=new c(e.defaultText).toString(),this.toggled_text=new c(e.toggledText).toString(),this.button_id=e.buttonId}}xl.type="UpdateToggleButtonTextAction";class vl extends u{constructor(e){super();const i=e.viewCount.videoViewCountRenderer;this.view_count=new c(i.viewCount),this.extra_short_view_count=new c(i.extraShortViewCount),this.original_view_count=parseInt(i.originalViewCount),this.unlabeled_view_count_value=new c(i.unlabeledViewCountValue),this.is_live=i.isLive}}vl.type="UpdateViewershipAction";class fy extends u{constructor(e){super(),this.confirm_button=h(e.confirmButton,S),this.dialog_messages=e.dialogMessages.map(i=>new c(i))}}fy.type="LiveChatDialog";class kl extends u{constructor(e){super(),this.overflow_menu=h(e.overflowMenu,K),this.collapse_button=h(e.collapseButton,S),this.view_selector=h(e.viewSelector,ui)}}kl.type="LiveChatHeader";class Sl extends u{constructor(e){super(),this.max_items_to_display=e.maxItemsToDisplay,this.more_comments_below_button=h(e.moreCommentsBelowButton,S)}}Sl.type="LiveChatItemList";class my extends u{constructor(e){super(),this.author_name=new c(e.authorName),this.author_photo=w.fromResponse(e.authorPhoto),this.send_button=h(e.sendButton,S),this.target_id=e.targetId}}my.type="LiveChatMessageInput";class Tl extends u{constructor(e){super(),this.name=new c(e.authorName),this.photo=w.fromResponse(e.authorPhoto),this.badges=g(e.authorBadges)}}Tl.type="LiveChatParticipant";class Cl extends u{constructor(e){super(),this.title=new c(e.title),this.participants=g(e.participants,Tl)}}Cl.type="LiveChatParticipantsList";class Il extends u{constructor(e){super(),this.title=c.fromAttributed(e.title),this.metadata=h(e.metadata,hr),this.image=h(e.image,dr),this.menu_button=h(e.menuButton,fe)}}Il.type="LockupMetadataView";class El extends u{constructor(e){super(),this.content_image=h(e.contentImage,[yu,cr]),this.metadata=h(e.metadata,Il),this.content_id=e.contentId,this.content_type=e.contentType.replace("LOCKUP_CONTENT_TYPE_",""),this.renderer_context=new Is(e.rendererContext)}}El.type="LockupView";class Pl extends S{constructor(e){super(e)}}Pl.type="MenuNavigationItem";class _y extends u{constructor(e){super(),this.items=g(e.items,[Pl,Vi])}}_y.type="MenuPopup";class wr extends u{constructor(e){super(),this.thumbnails=w.fromResponse(e.thumbnail),this.video_thumbnails=w.fromResponse(e.videoThumbnail),this.short_message=new c(e.shortMessage),this.sent_time=new c(e.sentTimeText),this.notification_id=e.notificationId,this.endpoint=new f(e.navigationEndpoint),this.record_click_endpoint=new f(e.recordClickEndpoint),this.menu=h(e.contextualMenu),this.read=e.read}}wr.type="Notification";class by extends u{constructor(e){super(),"notificationSectionTitle"in e&&(this.notification_section_title=new c(e.notificationSectionTitle)),this.items=g(e.items,[wr,at,z])}get contents(){return this.items}}by.type="MultiPageMenuNotificationSection";class Rl extends u{constructor(e){super()}}Rl.type="MusicMenuItemDivider";class Ui extends u{constructor(e){super(),this.title=new c(e.title).toString(),this.form_item_entity_key=e.formItemEntityKey,Reflect.has(e,"selectedIcon")&&(this.selected_icon_type=e.selectedIcon.iconType),Reflect.has(e,"selectedCommand")&&(this.endpoint=new f(e.selectedCommand)),this.selected=!!this.endpoint}}Ui.type="MusicMultiSelectMenuItem";class Al extends u{constructor(e){super(),Reflect.has(e,"title")&&Reflect.has(e.title,"musicMenuTitleRenderer")&&(this.title=new c(e.title.musicMenuTitleRenderer?.primaryText)),this.options=g(e.options,[Ui,Rl])}}Al.type="MusicMultiSelectMenu";class Ml extends u{constructor(e){super(),this.title=new c(e.title),this.buttons=g(e.buttons,S)}}Ml.type="SimpleMenuHeader";class yy extends u{constructor(e){super(),this.title=e.title,this.description=e.description,this.thumbnails=w.fromResponse(e.thumbnail),this.price=e.price,this.vendor_name=e.vendorName,this.button_text=e.buttonText,this.button_accessibility_text=e.buttonAccessibilityText,this.from_vendor_text=e.fromVendorText,this.additional_fees_text=e.additionalFeesText,this.region_format=e.regionFormat,this.endpoint=new f(e.buttonCommand)}}yy.type="MerchandiseItem";class Dl extends u{constructor(e){super(),this.title=e.title,this.menu=h(e.actionButton),this.items=g(e.items)}get contents(){return this.items}}Dl.type="MerchandiseShelf";class gy extends u{constructor(e){super(),this.title=new c(e.title),this.contents=e.contents.map(i=>new c(i))}}gy.type="MetadataRow";class Nl extends u{constructor(e){super(),this.rows=g(e.rows),this.collapsed_item_count=e.collapsedItemCount}}Nl.type="MetadataRowContainer";class wy extends u{constructor(e){super(),this.content=new c(e.content),this.has_divider_line=e.hasDividerLine}}wy.type="MetadataRowHeader";class xy extends u{constructor(e){super(),this.section_list=h(e)}}xy.type="MetadataScreen";class Fi extends u{constructor(e){super(),this.url_canonical=e.urlCanonical,this.title=e.title,this.description=e.description,this.thumbnail=w.fromResponse(e.thumbnail),this.site_name=e.siteName,this.app_name=e.appName,this.android_package=e.androidPackage,this.ios_app_store_id=e.iosAppStoreId,this.ios_app_arguments=e.iosAppArguments,this.og_type=e.ogType,this.url_applinks_web=e.urlApplinksWeb,this.url_applinks_ios=e.urlApplinksIos,this.url_applinks_android=e.urlApplinksAndroid,this.url_twitter_ios=e.urlTwitterIos,this.url_twitter_android=e.urlTwitterAndroid,this.twitter_card_type=e.twitterCardType,this.twitter_site_handle=e.twitterSiteHandle,this.schema_dot_org_type=e.schemaDotOrgType,this.noindex=e.noindex,this.is_unlisted=e.unlisted,this.is_family_safe=e.familySafe,this.tags=e.tags,this.available_countries=e.availableCountries}}Fi.type="MicroformatData";class vy extends Pn{constructor(e){super(e)}}vy.type="Mix";class ky extends u{constructor(e){super(),this.title=new c(e.title),this.content=new c(e.content),this.button=h(e.button,S)}}ky.type="ModalWithTitleAndButton";class Sy extends u{constructor(e){super();const i=e.thumbnailOverlays.find(n=>n.thumbnailOverlayTimeStatusRenderer)?.thumbnailOverlayTimeStatusRenderer.text||"N/A";this.id=e.videoId,this.title=new c(e.title),Reflect.has(e,"descriptionSnippet")&&(this.description_snippet=new c(e.descriptionSnippet)),this.top_metadata_items=new c(e.topMetadataItems),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),this.author=new G(e.longBylineText,e.ownerBadges,e.channelThumbnailSupportedRenderers?.channelThumbnailWithLinkRenderer?.thumbnail),this.duration={text:e.lengthText?new c(e.lengthText).toString():new c(i).toString(),seconds:Ht(e.lengthText?new c(e.lengthText).toString():new c(i).toString())},this.endpoint=new f(e.navigationEndpoint),this.badges=g(e.badges),this.use_vertical_poster=e.useVerticalPoster,this.show_action_menu=e.showActionMenu,this.menu=h(e.menu,K)}}Sy.type="Movie";class Ty extends u{constructor(e){return super(),e.movingThumbnailDetails?.thumbnails.map(i=>new w(i)).sort((i,n)=>n.width-i.width)}}Ty.type="MovingThumbnail";class Ll extends u{constructor(e){super(),this.title=new c(e.title)}}Ll.type="MusicCardShelfHeaderBasic";class xr extends u{constructor(e){super(),this.icon_type=e.icon.iconType,"accessibilityData"in e&&"accessibilityData"in e.accessibilityData&&(this.accessibility={accessibility_data:new vt(e.accessibilityData.accessibilityData)})}get label(){return this.accessibility?.accessibility_data?.label}}xr.type="MusicInlineBadge";class vr extends u{constructor(e){super(),this.endpoint=new f(e.playNavigationEndpoint),this.play_icon_type=e.playIcon.iconType,this.pause_icon_type=e.pauseIcon.iconType,"accessibilityPlayData"in e&&"accessibilityData"in e.accessibilityPlayData&&(this.accessibility_play_data={accessibility_data:new vt(e.accessibilityPlayData.accessibilityData)}),"accessibilityPauseData"in e&&"accessibilityData"in e.accessibilityPauseData&&(this.accessibility_pause_data={accessibility_data:new vt(e.accessibilityPauseData.accessibilityData)}),this.icon_color=e.iconColor}get play_label(){return this.accessibility_play_data?.accessibility_data?.label}get pause_label(){return this.accessibility_pause_data?.accessibility_data?.label}}vr.type="MusicPlayButton";class Rn extends u{constructor(e){super(),this.content=h(e.content,vr),this.content_position=e.contentPosition,this.display_style=e.displayStyle}}Rn.type="MusicItemThumbnailOverlay";class St extends u{constructor(e){super(),this.contents=w.fromResponse(e.thumbnail)}}St.type="MusicThumbnail";class Ol extends u{constructor(e){super(),this.thumbnail=h(e.thumbnail,St),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.buttons=g(e.buttons,S),this.menu=h(e.menu,K),this.on_tap=new f(e.onTap),this.header=h(e.header,Ll),Reflect.has(e,"endIcon")&&Reflect.has(e.endIcon,"iconType")&&(this.end_icon_type=e.endIcon.iconType),this.subtitle_badges=g(e.subtitleBadges,xr),this.thumbnail_overlay=h(e.thumbnailOverlay,Rn),Reflect.has(e,"contents")&&(this.contents=g(e.contents))}}Ol.type="MusicCardShelf";class Bl extends u{constructor(e){super(),this.title=new c(e.title),Reflect.has(e,"strapline")&&(this.strapline=new c(e.strapline)),Reflect.has(e,"thumbnail")&&(this.thumbnail=h(e.thumbnail,St)),Reflect.has(e,"moreContentButton")&&(this.more_content=h(e.moreContentButton,S)),Reflect.has(e,"endIcons")&&(this.end_icons=g(e.endIcons,el))}}Bl.type="MusicCarouselShelfBasicHeader";class Vl extends u{constructor(e){super(),this.thumbnail=h(e.thumbnail,St),this.overlay=h(e.overlay,Rn),this.on_tap=new f(e.onTap),this.menu=h(e.menu,K),this.subtitle=new c(e.subtitle),this.title=new c(e.title),Reflect.has(e,"secondTitle")&&(this.second_title=new c(e.secondTitle)),Reflect.has(e,"description")&&(this.description=new c(e.description)),Reflect.has(e,"displayStyle")&&(this.display_style=e.displayStyle)}}Vl.type="MusicMultiRowListItem";class kr extends u{constructor(e){super(),this.button_text=new c(e.buttonText).toString(),this.endpoint=new f(e.clickCommand)}}kr.type="MusicNavigationButton";class Ul extends u{constructor(e){super(),this.title=new c(e.text),this.display_priority=e.displayPriority}}Ul.type="musicResponsiveListItemFlexColumnRenderer";class Fl extends u{constructor(e){super(),this.title=new c(e.text),this.display_priority=e.displayPriority}}Fl.type="MusicResponsiveListItemFlexColumn";var He,xa,Cy,dd,fd,Iy,Ey,Py,Ry,Ay,My;class Vt extends u{constructor(e){super(),He.add(this),this.flex_columns=g(e.flexColumns,Fl),this.fixed_columns=g(e.fixedColumns,Ul);const i={video_id:e?.playlistItemData?.videoId||null,playlist_set_video_id:e?.playlistItemData?.playlistSetVideoId||null};Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new f(e.navigationEndpoint));let n=this.endpoint?.payload?.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType;switch(n||this.flex_columns.find(o=>o.title.endpoint?.payload?.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType==="MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE")&&(n="MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE"),n){case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album",r(this,He,"m",Ay).call(this);break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist",r(this,He,"m",My).call(this);break;case"MUSIC_PAGE_TYPE_ARTIST":case"MUSIC_PAGE_TYPE_USER_CHANNEL":this.item_type="artist",r(this,He,"m",Iy).call(this);break;case"MUSIC_PAGE_TYPE_LIBRARY_ARTIST":this.item_type="library_artist",r(this,He,"m",Ey).call(this);break;case"MUSIC_PAGE_TYPE_NON_MUSIC_AUDIO_TRACK_PAGE":this.item_type="non_music_track",r(this,He,"m",Py).call(this,i);break;case"MUSIC_PAGE_TYPE_PODCAST_SHOW_DETAIL_PAGE":this.item_type="podcast_show",r(this,He,"m",Ry).call(this);break;default:this.flex_columns[1]?r(this,He,"m",Cy).call(this,i):r(this,He,"m",xa).call(this)}Reflect.has(e,"index")&&(this.index=new c(e.index)),Reflect.has(e,"thumbnail")&&(this.thumbnail=h(e.thumbnail,St)),Reflect.has(e,"badges")&&(this.badges=g(e.badges)),Reflect.has(e,"menu")&&(this.menu=h(e.menu,K)),Reflect.has(e,"overlay")&&(this.overlay=h(e.overlay,Rn))}get thumbnails(){return this.thumbnail?.contents||[]}}He=new WeakSet,xa=function(){this.title=this.flex_columns[0].title.toString(),this.endpoint?this.item_type="endpoint":this.item_type="unknown"},Cy=function(e){switch(this.flex_columns.at(0)?.title.runs?.at(0)?.endpoint?.payload?.watchEndpointMusicSupportedConfigs?.watchEndpointMusicConfig?.musicVideoType){case"MUSIC_VIDEO_TYPE_UGC":case"MUSIC_VIDEO_TYPE_OMV":this.item_type="video",r(this,He,"m",fd).call(this,e);break;case"MUSIC_VIDEO_TYPE_ATV":this.item_type="song",r(this,He,"m",dd).call(this,e);break;default:r(this,He,"m",xa).call(this)}},dd=function(e){this.id=e.video_id||this.endpoint?.payload?.videoId,this.title=this.flex_columns[0].title.toString();const i=this.flex_columns.at(1)?.title.runs?.find(o=>/^\d+$/.test(o.text.replace(/:/g,"")))?.text||this.fixed_columns[0]?.title?.toString();i&&(this.duration={text:i,seconds:Ht(i)});const n=this.flex_columns.at(1)?.title.runs?.find(o=>Ve(o)&&o.endpoint&&o.endpoint.payload.browseId.startsWith("MPR"))||this.flex_columns.at(2)?.title.runs?.find(o=>Ve(o)&&o.endpoint&&o.endpoint.payload.browseId.startsWith("MPR"));n&&Ve(n)&&(this.album={id:n.endpoint?.payload?.browseId,name:n.text,endpoint:n.endpoint});const s=this.flex_columns.at(1)?.title.runs?.filter(o=>Ve(o)&&o.endpoint&&o.endpoint.payload.browseId.startsWith("UC"));s&&(this.artists=s.map(o=>({name:o.text,channel_id:Ve(o)?o.endpoint?.payload?.browseId:void 0,endpoint:Ve(o)?o.endpoint:void 0})))},fd=function(e){this.id=e.video_id,this.title=this.flex_columns[0].title.toString(),this.views=this.flex_columns.at(1)?.title.runs?.find(s=>s.text.match(/(.*?) views/))?.toString();const i=this.flex_columns.at(1)?.title.runs?.filter(s=>Ve(s)&&s.endpoint&&s.endpoint.payload.browseId.startsWith("UC"));i&&(this.authors=i.map(s=>({name:s.text,channel_id:Ve(s)?s.endpoint?.payload?.browseId:void 0,endpoint:Ve(s)?s.endpoint:void 0})));const n=this.flex_columns[1].title.runs?.find(s=>/^\d+$/.test(s.text.replace(/:/g,"")))?.text||this.fixed_columns[0]?.title.runs?.find(s=>/^\d+$/.test(s.text.replace(/:/g,"")))?.text;n&&(this.duration={text:n,seconds:Ht(n)})},Iy=function(){this.id=this.endpoint?.payload?.browseId,this.name=this.flex_columns[0].title.toString(),this.subtitle=this.flex_columns.at(1)?.title,this.subscribers=this.subtitle?.runs?.find(e=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(e.text))?.text||""},Ey=function(){this.name=this.flex_columns[0].title.toString(),this.subtitle=this.flex_columns.at(1)?.title,this.song_count=this.subtitle?.runs?.find(e=>/^\d+(,\d+)? songs?$/i.test(e.text))?.text||""},Py=function(e){this.id=e.video_id||this.endpoint?.payload?.videoId,this.title=this.flex_columns[0].title.toString()},Ry=function(){this.id=this.endpoint?.payload?.browseId,this.title=this.flex_columns[0].title.toString()},Ay=function(){this.id=this.endpoint?.payload?.browseId,this.title=this.flex_columns[0].title.toString();const e=this.flex_columns.at(1)?.title.runs?.find(i=>Ve(i)&&i.endpoint&&i.endpoint.payload.browseId.startsWith("UC"));e&&Ve(e)&&(this.author={name:e.text,channel_id:e.endpoint?.payload?.browseId,endpoint:e.endpoint}),this.year=this.flex_columns.at(1)?.title.runs?.find(i=>/^[12][0-9]{3}$/.test(i.text))?.text},My=function(){this.id=this.endpoint?.payload?.browseId,this.title=this.flex_columns[0].title.toString();const e=this.flex_columns.at(1)?.title.runs?.find(n=>n.text.match(/\d+ (song|songs)/));this.item_count=e?e.text:void 0;const i=this.flex_columns.at(1)?.title.runs?.find(n=>Ve(n)&&n.endpoint&&n.endpoint.payload.browseId.startsWith("UC"));i&&Ve(i)&&(this.author={name:i.text,channel_id:i.endpoint?.payload?.browseId,endpoint:i.endpoint})};Vt.type="MusicResponsiveListItem";class Sr extends u{constructor(e){switch(super(),this.title=new c(e.title),this.endpoint=new f(e.navigationEndpoint),this.id=this.endpoint?.payload?.browseId||this.endpoint?.payload?.videoId,this.subtitle=new c(e.subtitle),this.badges=se(e.subtitleBadges),this.endpoint?.payload?.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType){case"MUSIC_PAGE_TYPE_ARTIST":this.item_type="artist";break;case"MUSIC_PAGE_TYPE_PLAYLIST":this.item_type="playlist";break;case"MUSIC_PAGE_TYPE_ALBUM":this.item_type="album";break;default:this.endpoint?.metadata?.api_url==="/next"?this.item_type="endpoint":this.subtitle.runs?.[0]?this.subtitle.runs[0].text!=="Song"?this.item_type="video":this.item_type="song":this.endpoint?this.item_type="endpoint":this.item_type="unknown";break}if(this.item_type=="artist")this.subscribers=this.subtitle.runs?.find(n=>/^(\d*\.)?\d+[M|K]? subscribers?$/i.test(n.text))?.text||"";else if(this.item_type=="playlist"){const n=this.subtitle.runs?.find(s=>s.text.match(/\d+ songs|song/));this.item_count=n?n.text:null}else if(this.item_type=="album"){const n=this.subtitle.runs?.filter(s=>s.endpoint?.payload?.browseId.startsWith("UC"));n&&(this.artists=n.map(s=>({name:s.text,channel_id:s.endpoint?.payload?.browseId,endpoint:s.endpoint}))),this.year=this.subtitle.runs?.slice(-1)[0].text,isNaN(Number(this.year))&&delete this.year}else if(this.item_type=="video"){this.views=this?.subtitle.runs?.find(s=>s?.text.match(/(.*?) views/))?.text||"N/A";const n=this.subtitle.runs?.find(s=>s.endpoint?.payload?.browseId?.startsWith("UC"));n&&(this.author={name:n?.text,channel_id:n?.endpoint?.payload?.browseId,endpoint:n?.endpoint})}else if(this.item_type=="song"){const n=this.subtitle.runs?.filter(s=>s.endpoint?.payload?.browseId.startsWith("UC"));n&&(this.artists=n.map(s=>({name:s?.text,channel_id:s?.endpoint?.payload?.browseId,endpoint:s?.endpoint})))}this.thumbnail=w.fromResponse(e.thumbnailRenderer.musicThumbnailRenderer.thumbnail),this.thumbnail_overlay=h(e.thumbnailOverlay,Rn),this.menu=h(e.menu,K)}}Sr.type="MusicTwoRowItem";class Ye extends u{constructor(e){super(),this.header=h(e.header,Bl),this.contents=g(e.contents,[Sr,Vt,Vl,kr]),Reflect.has(e,"numItemsPerColumn")&&(this.num_items_per_column=parseInt(e.numItemsPerColumn))}}Ye.type="MusicCarouselShelf";class Os extends u{constructor(e){super(),this.description=new c(e.description),Reflect.has(e,"maxCollapsedLines")&&(this.max_collapsed_lines=e.maxCollapsedLines),Reflect.has(e,"maxExpandedLines")&&(this.max_expanded_lines=e.maxExpandedLines),this.footer=new c(e.footer)}}Os.type="MusicDescriptionShelf";class Tr extends u{constructor(e){super(),this.title=new c(e.title),this.description=new c(e.description),this.subtitle=new c(e.subtitle),this.second_subtitle=new c(e.secondSubtitle),this.year=this.subtitle.runs?.find(n=>/^[12][0-9]{3}$/.test(n.text))?.text||"",this.song_count=this.second_subtitle.runs?.[0]?.text||"",this.total_duration=this.second_subtitle.runs?.[2]?.text||"",this.thumbnails=w.fromResponse(e.thumbnail.croppedSquareThumbnailRenderer.thumbnail),this.badges=g(e.subtitleBadges);const i=this.subtitle.runs?.find(n=>n?.endpoint?.payload?.browseId.startsWith("UC"));i&&(this.author={name:i.text,channel_id:i.endpoint?.payload?.browseId,endpoint:i.endpoint}),this.menu=h(e.menu)}}Tr.type="MusicDetailHeader";class Dy extends u{constructor(e){super(),this.playlist_id=e.playlistId,this.supported_download_states=e.supportedDownloadStates}}Dy.type="MusicDownloadStateBadge";class Hl extends u{constructor(e){super(),this.header=h(e.header),this.edit_header=h(e.editHeader),this.playlist_id=e.playlistId}}Hl.type="MusicEditablePlaylistDetailHeader";class Co extends u{constructor(e){super(),this.element=Reflect.has(e,"elementRenderer")?h(e,Ls):null}}Co.type="MusicElementHeader";class Bs extends u{constructor(e){super(),Reflect.has(e,"header")&&(this.header=h(e.header)),Reflect.has(e,"title")&&(this.title=new c(e.title))}}Bs.type="MusicHeader";class Wl extends u{constructor(e){super(),this.title=new c(e.title),this.menu=h(e.menu,K),this.more_button=h(e.moreButton,de),this.play_button=h(e.playButton,S),"shareEndpoint"in e&&(this.share_endpoint=new f(e.shareEndpoint)),this.start_radio_button=h(e.startRadioButton,S),this.subscription_button=h(e.subscriptionButton,ct),this.description=new c(e.description),this.thumbnail=h(e.thumbnail,St)}}Wl.type="MusicImmersiveHeader";class Ny{constructor(e){this.icon_name=e.iconName,this.endpoint=new f(e.onTap),this.a11y_text=e.a11yText,this.style=e.style}}Ny.type="ActionButton";class Ly{constructor(e){this.image=w.fromResponse(e.image.image),this.content_mode=e.image.contentMode,this.crop_options=e.image.cropOptions,this.image_aspect_ratio=e.imageAspectRatio,this.caption=e.caption,this.action_buttons=e.actionButtons.map(i=>new Ny(i))}}Ly.type="Panel";class Oy extends u{constructor(e){super(),this.header=e.shelf.header,this.panels=e.shelf.panels.map(i=>new Ly(i))}}Oy.type="MusicLargeCardItemCarousel";class By extends u{constructor(e){super(),this.title=new c(e.title),this.edit_title=new c(e.editTitle),this.edit_description=new c(e.editDescription),this.privacy=e.privacy,this.playlist_id=e.playlistId,this.endpoint=new f(e.collaborationSettingsCommand),this.privacy_dropdown=h(e.privacyDropdown,Ts)}}By.type="MusicPlaylistEditHeader";class gs extends u{constructor(e){super(),this.playlist_id=e.playlistId,this.contents=g(e.contents,[Vt,z]),this.collapsed_item_count=e.collapsedItemCount,this.continuation=e.continuations?.[0]?.nextContinuationData?.continuation||null}}gs.type="MusicPlaylistShelf";class xn extends u{constructor(e){super(),this.title=new c(e.title),this.thumbnail=w.fromResponse(e.thumbnail),this.endpoint=new f(e.navigationEndpoint),this.selected=e.selected,this.video_id=e.videoId,this.duration={text:new c(e.lengthText).toString(),seconds:Ht(new c(e.lengthText).toString())};const i=new c(e.longBylineText).runs?.find(s=>s.endpoint?.payload?.browseId?.startsWith("MPR")),n=new c(e.longBylineText).runs?.filter(s=>s.endpoint?.payload?.browseId?.startsWith("UC"));this.author=new c(e.shortBylineText).toString(),i&&(this.album={id:i.endpoint?.payload?.browseId,name:i.text,year:new c(e.longBylineText).runs?.slice(-1)[0].text,endpoint:i.endpoint}),n&&(this.artists=n.map(s=>({name:s.text,channel_id:s.endpoint?.payload?.browseId,endpoint:s.endpoint}))),this.badges=g(e.badges),this.menu=h(e.menu),this.set_video_id=e.playlistSetVideoId}}xn.type="PlaylistPanelVideo";class jl extends u{constructor(e){super(),this.primary=h(e.primaryRenderer,xn),Reflect.has(e,"counterpart")&&(this.counterpart=$(e.counterpart.map(i=>h(i.counterpartRenderer,xn))||[]))}}jl.type="PlaylistPanelVideoWrapper";class ri extends u{constructor(e){super(),this.title=e.title,this.title_text=new c(e.titleText),this.contents=g(e.contents,[jl,xn,Cs]),this.playlist_id=e.playlistId,this.is_infinite=e.isInfinite,this.continuation=e.continuations?.[0]?.nextRadioContinuationData?.continuation||e.continuations?.[0]?.nextContinuationData?.continuation,this.is_editable=e.isEditable,this.preview_description=e.previewDescription,this.num_items_to_show=e.numItemsToShow}}ri.type="PlaylistPanel";class Cr extends u{constructor(e){super(),this.content=h(e.content,ri)}}Cr.type="MusicQueue";class Ir extends u{constructor(e){super(),this.thumbnail=h(e.thumbnail,St),this.buttons=g(e.buttons,[Jo,de,vr,S,K]),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.strapline_text_one=new c(e.straplineTextOne),this.strapline_thumbnail=h(e.straplineThumbnail,St),this.second_subtitle=new c(e.secondSubtitle),Reflect.has(e,"subtitleBadge")&&(this.subtitle_badge=g(e.subtitleBadge,xr)),Reflect.has(e,"description")&&(this.description=h(e.description,Os))}}Ir.type="MusicResponsiveHeader";class be extends u{constructor(e){super(),this.title=new c(e.title),this.contents=g(e.contents,Vt),Reflect.has(e,"bottomEndpoint")&&(this.endpoint=new f(e.bottomEndpoint)),Reflect.has(e,"continuations")&&(this.continuation=e.continuations?.[0].nextContinuationData?.continuation||e.continuations?.[0].reloadContinuationData?.continuation),Reflect.has(e,"bottomText")&&(this.bottom_text=new c(e.bottomText)),Reflect.has(e,"bottomButton")&&(this.bottom_button=h(e.bottomButton,S)),Reflect.has(e,"subheaders")&&(this.subheaders=g(e.subheaders))}}be.type="MusicShelf";class Gl extends u{constructor(e){super(),Reflect.has(e,"startItems")&&(this.start_items=g(e.startItems)),Reflect.has(e,"endItems")&&(this.end_items=g(e.endItems))}}Gl.type="MusicSideAlignedItem";class Io extends u{constructor(e){super(),this.title=new c(e.title).toString(),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),this.menu=h(e.menu,Al)}}Io.type="MusicSortFilterButton";class ql extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail)}}ql.type="MusicTastebuilderShelfThumbnail";class $l extends u{constructor(e){super(),this.thumbnail=h(e.thumbnail,ql),this.primary_text=new c(e.primaryText),this.secondary_text=new c(e.secondaryText),this.action_button=h(e.actionButton,S),this.is_visible=e.isVisible}}$l.type="MusicTasteBuilderShelf";class Kl extends u{constructor(e){super(),this.title=new c(e.title),this.thumbnail=e.thumbnail?w.fromResponse(e.thumbnail.musicThumbnailRenderer?.thumbnail):[],this.menu=h(e.menu,K),this.foreground_thumbnail=e.foregroundThumbnail?w.fromResponse(e.foregroundThumbnail.musicThumbnailRenderer?.thumbnail):[]}}Kl.type="MusicVisualHeader";class Vy extends u{constructor(e){super(),this.placeholder_text=new c(e.placeholderText),this.buttons=g(e.buttons),Reflect.has(e,"logo")&&Reflect.has(e.logo,"iconType")&&(this.logo_type=e.logo.iconType)}}Vy.type="MobileTopbar";class Uy extends u{constructor(e){super(),this.items=g(e.items)}}Uy.type="MultiPageMenuSection";class Fy extends u{constructor(e){super(),this.items=g(e.items)}}Fy.type="PivotBar";class Hy extends u{constructor(e){super(),this.pivot_identifier=e.pivotIdentifier,this.endpoint=new f(e.navigationEndpoint),this.title=new Text(e.title),"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)}),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType)}get label(){return this.accessibility?.accessibility_data?.label}}Hy.type="PivotBarItem";class Wy extends u{constructor(e){super(),Reflect.has(e,"icon")&&Reflect.has(e.icon,"iconType")&&(this.icon_type=e.icon.iconType),this.menu_renderer=h(e.menuRenderer),this.target_id=e.targetId}}Wy.type="TopbarMenuButton";class jy extends u{constructor(e){super(),this.response_text=new c(e.responseText)}}jy.type="NotificationAction";class Gy extends u{constructor(e){super(),this.list_id=e.listId,this.modal_title=e.modalTitle,this.select_button_label=e.selectButtonLabel}}Gy.type="OpenOnePickAddVideoModalCommand";class Yl extends u{constructor(e){super(),this.title=h(e.title,Uu),this.image=h(e.image,[bn,dr]),this.animated_image=h(e.animatedImage,bn),this.hero_image=h(e.heroImage,bn),this.metadata=h(e.metadata,hr),this.actions=h(e.actions,er),this.description=h(e.description,Lu),this.attributation=h(e.attributation,mc),this.banner=h(e.banner,tl)}}Yl.type="PageHeaderView";class Hi extends u{constructor(e){super(),this.page_title=e.pageTitle,this.content=h(e.content,Yl)}}Hi.type="PageHeader";class zl extends u{constructor(e){super(),this.header_text=new c(e.headerText).toString(),this.body_text=new c(e.bodyText).toString(),this.page_title=new c(e.pageTitle).toString(),this.header_icon_type=e.headerIcon.iconType}}zl.type="PageIntroduction";class Xl extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail),this.endpoint=new f(e.onClickCommand),this.content_description=new c(e.contentDescription),this.target_id=e.targetId,this.sound_attribution_title=new c(e.soundAttributionTitle),this.waveform_animation_style=e.waveformAnimationStyle,this.background_animation_style=e.backgroundAnimationStyle}}Xl.type="PivotButton";class Ql extends u{constructor(e){super(),Reflect.has(e,"featuredChannel")&&(this.featured_channel={start_time_ms:e.featuredChannel.startTimeMs,end_time_ms:e.featuredChannel.endTimeMs,watermark:w.fromResponse(e.featuredChannel.watermark),channel_name:e.featuredChannel.channelName,endpoint:new f(e.featuredChannel.navigationEndpoint),subscribe_button:h(e.featuredChannel.subscribeButton)}),this.allow_swipe_dismiss=e.allowSwipeDismiss,this.annotation_id=e.annotationId}}Ql.type="PlayerAnnotationsExpanded";class Jl extends u{constructor(e){super(),Reflect.has(e,"captionTracks")&&(this.caption_tracks=e.captionTracks.map(i=>({base_url:i.baseUrl,name:new c(i.name),vss_id:i.vssId,language_code:i.languageCode,kind:i.kind,is_translatable:i.isTranslatable}))),Reflect.has(e,"audioTracks")&&(this.audio_tracks=e.audioTracks.map(i=>({audio_track_id:i.audioTrackId,captions_initial_state:i.captionsInitialState,default_caption_track_index:i.defaultCaptionTrackIndex,has_default_track:i.hasDefaultTrack,visibility:i.visibility,caption_track_indices:i.captionTrackIndices}))),Reflect.has(e,"defaultAudioTrackIndex")&&(this.default_audio_track_index=e.defaultAudioTrackIndex),Reflect.has(e,"translationLanguages")&&(this.translation_languages=e.translationLanguages.map(i=>({language_code:i.languageCode,language_name:new c(i.languageName)})))}}Jl.type="PlayerCaptionsTracklist";class Zl extends u{constructor(e){super(),this.endpoint=new f(e.endpoint),this.enable_listen_first=e.enableListenFirst}}Zl.type="PlayerOverflow";class qy extends u{constructor(e){super(),this.overflow=h(e.overflow,Zl)}}qy.type="PlayerControlsOverlay";class $y extends u{constructor(e){super(),this.subreason=new c(e.subreason),this.reason=new c(e.reason),this.proceed_button=h(e.proceedButton,S),this.thumbnails=w.fromResponse(e.thumbnail),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType)}}$y.type="PlayerErrorMessage";class Ky extends u{constructor(e){super(),this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_description=e.offerDescription,this.offer_id=e.offerId}}Ky.type="PlayerLegacyDesktopYpcOffer";class ws extends u{constructor(e){super(),this.video_message=e.fullVideoMessage,this.player_response=e.unserializedPlayerResponse}}ws.type="YpcTrailer";class Eo extends u{constructor(e){super(),this.video_id=e.trailerVideoId,this.title=e.itemTitle,this.thumbnail=e.itemThumbnail,this.offer_headline=e.offerHeadline,this.offer_description=e.offerDescription,this.offer_id=e.offerId,this.offer_button_text=e.offerButtonText,this.video_message=e.fullVideoMessage,this.trailer=h(e.ypcTrailer,ws)}}Eo.type="PlayerLegacyDesktopYpcTrailer";class eh extends u{constructor(e){super();const[i,n,s,o,a]=e.spec.split("#");this.board={type:"live",template_url:i,thumbnail_width:parseInt(n,10),thumbnail_height:parseInt(s,10),columns:parseInt(o,10),rows:parseInt(a,10)}}}eh.type="PlayerLiveStoryboardSpec";class ot extends u{constructor(e){super(),this.title=new c(e.title),this.description=new c(e.description),this.thumbnails=w.fromResponse(e.thumbnail),Reflect.has(e,"embed")&&(this.embed={iframe_url:e.embed.iframeUrl,flash_url:e.embed.flashUrl,flash_secure_url:e.embed.flashSecureUrl,width:e.embed.width,height:e.embed.height}),this.length_seconds=parseInt(e.lengthSeconds),this.channel={id:e.externalChannelId,name:e.ownerChannelName,url:e.ownerProfileUrl},this.is_family_safe=!!e.isFamilySafe,this.is_unlisted=!!e.isUnlisted,this.has_ypc_metadata=!!e.hasYpcMetadata,this.view_count=parseInt(e.viewCount),this.category=e.category,this.publish_date=e.publishDate,this.upload_date=e.uploadDate,this.available_countries=e.availableCountries,this.start_timestamp=e.liveBroadcastDetails?.startTimestamp?new Date(e.liveBroadcastDetails.startTimestamp):null,this.end_timestamp=e.liveBroadcastDetails?.endTimestamp?new Date(e.liveBroadcastDetails.endTimestamp):null}}ot.type="PlayerMicroformat";class th extends u{constructor(e){super(),this.title=new c(e.title),this.video_id=e.videoId,this.video_title=new c(e.videoTitle),this.short_view_count=new c(e.shortViewCountText),this.prefer_immediate_redirect=e.preferImmediateRedirect,this.count_down_secs_for_fullscreen=e.countDownSecsForFullscreen,this.published=new c(e.publishedTimeText),this.background=w.fromResponse(e.background),this.thumbnail_overlays=g(e.thumbnailOverlays),this.author=new G(e.byline),this.cancel_button=h(e.cancelButton,S),this.next_button=h(e.nextButton,S),this.close_button=h(e.closeButton,S)}}th.type="PlayerOverlayAutoplay";class ih extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle)}}ih.type="PlayerOverlayVideoDetails";class nh extends u{constructor(e){super(),this.results=g(e.results,[Gu,ju]),this.title=new c(e.title).toString()}}nh.type="WatchNextEndScreen";class Vs extends u{constructor(e){super(),this.end_screen=h(e.endScreen,nh),this.autoplay=h(e.autoplay,th),this.share_button=h(e.shareButton,S),this.add_to_menu=h(e.addToMenu,K),this.fullscreen_engagement=h(e.fullscreenEngagement),this.actions=g(e.actions),this.browser_media_session=h(e.browserMediaSession),this.decorated_player_bar=h(e.decoratedPlayerBarRenderer,Nu),this.video_details=h(e.videoDetails,ih)}}Vs.type="PlayerOverlay";class sh extends u{constructor(e){super(),this.id=e.playlistId,this.title=new c(e.title),this.subtitle=e.subtitle?new c(e.subtitle):null,this.stats=e.stats.map(i=>new c(i)),this.brief_stats=e.briefStats.map(i=>new c(i)),this.author=e.ownerText||e.ownerEndpoint?new G({...e.ownerText,navigationEndpoint:e.ownerEndpoint},e.ownerBadges,null):null,this.description=new c(e.descriptionText),this.num_videos=new c(e.numVideosText),this.view_count=new c(e.viewCountText),this.can_share=e.shareData.canShare,this.can_delete=e.editableDetails.canDelete,this.is_editable=e.isEditable,this.privacy=e.privacy,this.save_button=h(e.saveButton),this.shuffle_play_button=h(e.shufflePlayButton),this.menu=h(e.moreActionsMenu),this.banner=h(e.playlistHeaderBanner)}}sh.type="PlaylistHeader";class Yy extends u{constructor(e){super(),this.title=new c(e.playlistTitle),this.thumbnails=w.fromResponse(e.thumbnail),this.video_count=new c(e.playlistVideoCount),this.channel_name=new c(e.channelName),this.endpoint=new f(e.action)}}Yy.type="PlaylistInfoCardContent";class oh extends u{constructor(e){super(),this.title=e.title,this.description=e.description||null}}oh.type="PlaylistMetadata";class zy extends u{constructor(e){super(),this.items=g(e.items)}get contents(){return this.items}}zy.type="PlaylistSidebar";class rh extends u{constructor(e){super(),this.stats=e.stats.map(i=>new c(i)),this.thumbnail_renderer=h(e.thumbnailRenderer),this.title=new c(e.title),this.menu=h(e.menu),this.endpoint=new f(e.navigationEndpoint),this.description=new c(e.description)}}rh.type="PlaylistSidebarPrimaryInfo";class ah extends u{constructor(e){super(),this.owner=h(e.videoOwner),this.button=h(e.button)}}ah.type="PlaylistSidebarSecondaryInfo";class Xy extends u{constructor(e){super(),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),this.text=new c(e.text)}}Xy.type="PlaylistThumbnailOverlay";class Er extends u{constructor(e){super(),this.id=e.videoId,this.index=new c(e.index),this.title=new c(e.title),this.author=new G(e.shortBylineText),this.thumbnails=w.fromResponse(e.thumbnail),this.thumbnail_overlays=g(e.thumbnailOverlays),this.set_video_id=e?.setVideoId,this.endpoint=new f(e.navigationEndpoint),this.is_playable=e.isPlayable,this.menu=h(e.menu,K),this.video_info=new c(e.videoInfo),this.accessibility_label=e.title.accessibility.accessibilityData.label,Reflect.has(e,"style")&&(this.style=e.style);const i=e.upcomingEventData&&+`${e.upcomingEventData.startTime}000`;i&&(this.upcoming=new Date(i)),this.duration={text:new c(e.lengthText).toString(),seconds:parseInt(e.lengthSeconds)}}get is_live(){return this.thumbnail_overlays.firstOfType(ji)?.style==="LIVE"}get is_upcoming(){return this.thumbnail_overlays.firstOfType(ji)?.style==="UPCOMING"}}Er.type="PlaylistVideo";class ch extends u{constructor(e){super(),this.id=e.playlistId,this.is_editable=e.isEditable,this.can_reorder=e.canReorder,this.videos=g(e.contents)}}ch.type="PlaylistVideoList";class Qy extends u{constructor(e){super(),this.choices=e.choices.map(i=>({text:new c(i.text),select_endpoint:i.selectServiceEndpoint?new f(i.selectServiceEndpoint):null,deselect_endpoint:i.deselectServiceEndpoint?new f(i.deselectServiceEndpoint):null,vote_ratio_if_selected:i?.voteRatioIfSelected||null,vote_percentage_if_selected:new c(i.votePercentageIfSelected),vote_ratio_if_not_selected:i?.voteRatioIfSelected||null,vote_percentage_if_not_selected:new c(i.votePercentageIfSelected),image:i.image?w.fromResponse(i.image):null})),Reflect.has(e,"type")&&(this.poll_type=e.type),Reflect.has(e,"totalVotes")&&(this.total_votes=new c(e.totalVotes)),Reflect.has(e,"liveChatPollId")&&(this.live_chat_poll_id=e.liveChatPollId)}}Qy.type="Poll";class Pr extends Es{constructor(e){super(e)}}Pr.type="Post";class Jy extends u{constructor(e){super(),this.images=g(e.images,yc)}}Jy.type="PostMultiImage";class Zy extends u{constructor(e){super(),this.label=new c(e.label)}}Zy.type="PremiereTrailerBadge";class eg extends u{constructor(e){super(),this.title=new c(e.title),this.suppress_padding_disclaimer=!!e.suppressPaddingDisclaimer}}eg.type="ProductListHeader";class tg extends u{constructor(e){super(),this.title=new c(e.title),this.accessibility_title=e.accessibilityTitle,this.thumbnail=w.fromResponse(e.thumbnail),this.price=e.price,this.endpoint=new f(e.onClickCommand),this.merchant_name=e.merchantName,this.stay_in_app=!!e.stayInApp,this.view_button=h(e.viewButton,S)}}tg.type="ProductListItem";class uh extends u{constructor(e){super(),this.items=g(e.items)}get contents(){return this.items}}uh.type="ProfileColumn";class ig extends u{constructor(e){super(),this.items=g(e.items)}get contents(){return this.items}}ig.type="ProfileColumnStats";class ng extends u{constructor(e){super(),this.label=new c(e.label),this.value=new c(e.value)}}ng.type="ProfileColumnStatsEntry";class sg extends u{constructor(e){super(),this.title=new c(e.title),this.thumbnails=w.fromResponse(e.thumbnail)}}sg.type="ProfileColumnUserInfo";class og extends u{constructor(e){super(),this.choices=e.choices.map(i=>({text:new c(i.text),is_correct:i.isCorrect})),this.total_votes=new c(e.totalVotes)}}og.type="Quiz";class rg extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.avatars=e.avatars.map(i=>new w(i)),this.button=h(e.button,S),this.surface=e.surface}}rg.type="RecognitionShelf";class Rr extends u{constructor(e){super(),this.id=e.videoId,this.title=new c(e.headline),this.thumbnails=w.fromResponse(e.thumbnail),this.views=new c(e.viewCountText),this.endpoint=new f(e.navigationEndpoint),"accessibility"in e&&"accessibilityData"in e.accessibility&&(this.accessibility={accessibility_data:new vt(e.accessibility.accessibilityData)})}get label(){return this.accessibility?.accessibility_data?.label}}Rr.type="ReelItem";class lh extends u{constructor(e){super(),this.reel_title_text=new c(e.reelTitleText),this.timestamp_text=new c(e.timestampText),this.channel_title_text=new c(e.channelTitleText),this.channel_thumbnail=w.fromResponse(e.channelThumbnail),this.author=new G(e.channelNavigationEndpoint,void 0)}}lh.type="ReelPlayerHeader";class ag extends u{constructor(e){super(),this.like_button=h(e.likeButton,Zo),this.reel_player_header_supported_renderers=h(e.reelPlayerHeaderSupportedRenderers,lh),this.menu=h(e.menu,K),this.next_item_button=h(e.nextItemButton,S),this.prev_item_button=h(e.prevItemButton,S),this.subscribe_button_renderer=h(e.subscribeButtonRenderer,[S,ct]),this.style=e.style,this.view_comments_button=h(e.viewCommentsButton,S),this.share_button=h(e.shareButton,S),this.pivot_button=h(e.pivotButton,Xl),this.info_panel=h(e.infoPanel,nl)}}ag.type="ReelPlayerOverlay";class hh extends u{constructor(e){super(),this.content=h(e.content)}}hh.type="RelatedChipCloud";class An extends u{constructor(e){super(),this.header=h(e.header),this.contents=g(e.contents),Reflect.has(e,"targetId")&&(this.target_id=e.targetId)}}An.type="RichGrid";class cg extends u{constructor(e){super(),this.content=h(e.content)}}cg.type="RichItem";class ug extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle),Reflect.has(e,"titleStyle")&&(this.title_style=e.titleStyle.style),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType)}}ug.type="RichListHeader";class Po extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.call_to_action=new c(e.callToAction),Reflect.has(e,"callToActionIcon")&&(this.icon_type=e.callToActionIcon.iconType),this.endpoint=new f(e.endpoint)}}Po.type="RichMetadata";class Ro extends u{constructor(e){super(),this.contents=g(e.contents)}}Ro.type="RichMetadataRow";class lg extends u{constructor(e){super(),this.content=h(e.content),this.full_bleed=!!e.fullBleed,"targetId"in e&&(this.target_id=e.targetId)}}lg.type="RichSection";class ph extends u{constructor(e){super(),this.title=new c(e.title),this.contents=g(e.contents),this.is_expanded=!!e.is_expanded,this.is_bottom_divider_hidden=!!e.isBottomDividerHidden,this.is_top_divider_hidden=!!e.isTopDividerHidden,"endpoint"in e&&(this.endpoint=new f(e.endpoint)),"subtitle"in e&&(this.subtitle=new c(e.subtitle)),"layoutSizing"in e&&(this.layout_sizing=e.layoutSizing),"icon"in e&&(this.icon_type=e.icon.iconType),this.menu=h(e.menu),this.next_button=h(e.nextButton),this.previous_button=h(e.previousButton)}}ph.type="RichShelf";class dh extends u{constructor(e){super(),this.label=new c(e.label),this.endpoint=new f(e.endpoint||e.navigationEndpoint),this.tooltip=e.tooltip,Reflect.has(e,"status")&&(this.status=e.status)}get disabled(){return this.status==="FILTER_STATUS_DISABLED"}get selected(){return this.status==="FILTER_STATUS_SELECTED"}}dh.type="SearchFilter";class Ar extends u{constructor(e){super(),this.title=new c(e.title),this.filters=g(e.filters,dh)}}Ar.type="SearchFilterGroup";class hg extends u{constructor(e){super(),this.title=new c(e.title),this.groups=g(e.groups,Ar)}}hg.type="SearchFilterOptionsDialog";class fh extends u{constructor(e){super(),this.chip_bar=h(e.chipBar,hi),this.search_filter_button=h(e.searchFilterButton,S)}}fh.type="SearchHeader";class mh extends u{constructor(e){super(),Reflect.has(e,"title")&&(this.title=new c(e.title)),Reflect.has(e,"groups")&&(this.groups=g(e.groups,Ar)),Reflect.has(e,"button")&&(this.button=h(e.button,de))}}mh.type="SearchSubMenu";class _h extends u{constructor(e){super(),this.contents=g(e.contents)}}_h.type="SearchSuggestionsSection";class Mr extends u{constructor(e){super(),this.header=h(e.header),this.call_to_action=h(e.callToAction),this.sections=g(e.sections),Reflect.has(e,"collapsedLabel")&&(this.collapsed_label=new c(e.collapsedLabel))}}Mr.type="UniversalWatchCard";class bh extends u{constructor(e){super(),this.contents=g(e.contents,[Mr])}}bh.type="SecondarySearchContainer";class fn extends u{constructor(e){super(),this.like_button=h(e.likeButton,[de,S]),this.dislike_button=h(e.dislikeButton,[de,S])}}fn.type="SegmentedLikeDislikeButton";class pg extends u{constructor(e){super(),Reflect.has(e,"title")&&(this.title=new c(e.title)),Reflect.has(e,"summary")&&(this.summary=new c(e.summary)),Reflect.has(e,"enableServiceEndpoint")&&(this.enable_endpoint=new f(e.enableServiceEndpoint)),Reflect.has(e,"disableServiceEndpoint")&&(this.disable_endpoint=new f(e.disableServiceEndpoint)),this.item_id=e.itemId}}pg.type="SettingBoolean";class yh extends u{constructor(e){super(),this.title=new c(e.title),this.help_text=new c(e.helpText),this.enabled=e.enabled,this.disabled=e.disabled,this.id=e.id}}yh.type="SettingsCheckbox";class Dr extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.enabled=e.enabled,this.enable_endpoint=new f(e.enableServiceEndpoint),this.disable_endpoint=new f(e.disableServiceEndpoint)}}Dr.type="SettingsSwitch";class rs extends u{constructor(e){super(),this.title=new c(e.title),Reflect.has(e,"text")&&(this.text=new c(e.text).toString()),Reflect.has(e,"options")&&(this.options=g(e.options,[Dr,Ts,pr,yh,lu]))}}rs.type="SettingsOptions";class gh extends u{constructor(e){super(),this.title=new c(e.title),this.items=g(e.items,En)}get contents(){return this.items}}gh.type="SettingsSidebar";class wh extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail),this.content=new c(e.content),this.published=new c(e.publishedTimeText),this.menu=h(e.actionMenu,K),this.original_post=h(e.originalPost,[Es,Pr]),this.id=e.postId,this.endpoint=new f(e.navigationEndpoint),this.expand_button=h(e.expandButton,S),this.author=new G(e.displayName,void 0)}}wh.type="SharedPost";class xh extends u{constructor(e){super(),this.title=h(e.title)}}xh.type="SharePanelHeader";class dg extends u{constructor(e){super(),this.title=new c(e.title)}}dg.type="SharePanelTitleV15";class vh extends u{constructor(e){super(),Reflect.has(e,"serviceEndpoint")?this.endpoint=new f(e.serviceEndpoint):Reflect.has(e,"navigationEndpoint")&&(this.endpoint=new f(e.navigationEndpoint)),this.service_name=e.serviceName,this.target_id=e.targetId,this.title=new c(e.title)}}vh.type="ShareTarget";class Nr extends u{constructor(e){super(),this.title=new c(e.title),Reflect.has(e,"endpoint")&&(this.endpoint=new f(e.endpoint)),this.content=h(e.content),Reflect.has(e,"icon")&&(this.icon_type=e.icon.iconType),Reflect.has(e,"menu")&&(this.menu=h(e.menu)),Reflect.has(e,"playAllButton")&&(this.play_all_button=h(e.playAllButton,S)),Reflect.has(e,"subtitle")&&(this.subtitle=new c(e.subtitle))}}Nr.type="Shelf";class Lr extends u{constructor(e){super(),this.entity_id=e.entityId,this.accessibility_text=e.accessibilityText,this.thumbnail=w.fromResponse(e.thumbnail),this.on_tap_endpoint=new f(e.onTap),this.menu_on_tap=new f(e.menuOnTap),this.index_in_collection=e.indexInCollection,this.menu_on_tap_a11y_label=e.menuOnTapA11yLabel,this.overlay_metadata={primary_text:e.overlayMetadata.primaryText?c.fromAttributed(e.overlayMetadata.primaryText):void 0,secondary_text:e.overlayMetadata.secondaryText?c.fromAttributed(e.overlayMetadata.secondaryText):void 0},e.inlinePlayerData?.onVisible&&(this.inline_player_data=new f(e.inlinePlayerData.onVisible)),e.badge&&(this.badge=h(e.badge,o_))}}Lr.type="ShortsLockupView";class kh extends u{constructor(e){super(),this.corrected_query=new c(e.correctedQuery),this.original_query=new c(e.originalQuery),this.corrected_query_endpoint=new f(e.correctedQueryEndpoint),this.original_query_endpoint=new f(e.originalQueryEndpoint),this.search_instead_for=new c(e.searchInsteadFor),this.showing_results_for=new c(e.showingResultsFor)}}kh.type="ShowingResultsFor";class fg extends u{constructor(e){super(),this.image=w.fromResponse(e.image),this.title=new c(e.title),this.display_domain=new c(e.displayDomain),this.show_link_icon=e.showLinkIcon,this.call_to_action=new c(e.callToAction),this.endpoint=new f(e.command)}}fg.type="SimpleCardContent";class mg extends u{constructor(e){super(),this.message=new c(e.message),this.prominent=e.prominent}}mg.type="SimpleCardTeaser";class _g extends u{constructor(e){super(),this.lines=e.lines.map(i=>new c(i)),this.style=e.layoutStyle}}_g.type="SimpleTextSection";class bg extends u{constructor(e){super(),this.action_text=new c(e.actionText),this.nav_text=new c(e.navigationText),this.details=new c(e.detailsText),this.icon_type=e.icon.iconType,this.endpoint=new f(e.navigationEndpoint)}}bg.type="SingleActionEmergencySupport";class Oe extends u{constructor(e){super(),this.title=e.title||"N/A",this.selected=!!e.selected,this.endpoint=new f(e.endpoint),this.content=h(e.content,[Q,Cr,An])}}Oe.type="Tab";class Us extends u{constructor(e){super(),this.tabs=g(e.tabs,Oe)}}Us.type="SingleColumnBrowseResults";class yg extends u{constructor(e){super(),this.contents=se(e)}}yg.type="SingleColumnMusicWatchNextResults";class gg extends u{constructor(e){super(),this.thumbnails=w.fromResponse(e.thumbnail),this.style=e.style}}gg.type="SingleHeroImage";class wg extends u{constructor(e){super(),this.thumbnail=w.fromResponse(e.thumbnail),this.title=new c(e.title),this.endpoint=new f(e.navigationEndpoint),this.subscribe_button=h(e.subscribeButton,ct)}}wg.type="SlimOwner";class Sh extends u{constructor(e){super(),this.title=new c(e.title),this.collapsed_subtitle=new c(e.collapsedSubtitle),this.expanded_subtitle=new c(e.expandedSubtitle),this.owner=h(e.owner),this.description=new c(e.description),this.video_id=e.videoId,this.date=new c(e.dateText)}}Sh.type="SlimVideoMetadata";class Th extends u{constructor(e){super(),this.start_at_option_label=new c(e.startAtOptionLabel)}}Th.type="StartAt";class xg extends u{constructor(e){super(),this.contents=se(e)}}xg.type="Tabbed";class Ch extends u{constructor(e){super(),this.tabs=g(e.tabs,Oe)}}Ch.type="TabbedSearchResults";class vg extends u{constructor(e){super(),this.title=new c(e.title),this.style=e.style}}vg.type="TextHeader";class Ih extends u{constructor(e){super(),this.share_targets=g(e.shareTargets,vh)}}Ih.type="ThirdPartyShareTargetSection";class kg extends u{constructor(e){super(),this.landscape=w.fromResponse(e.landscape),this.portrait=w.fromResponse(e.portrait)}}kg.type="ThumbnailLandscapePortrait";class Sg extends u{constructor(e){super(),this.text=new c(e.text).toString()}}Sg.type="ThumbnailOverlayEndorsement";class Tg extends u{constructor(e){super(),this.text=new c(e.text),this.icon_type=e.icon.iconType}}Tg.type="ThumbnailOverlayHoverText";class Cg extends u{constructor(e){super(),this.text=new c(e.text).toString(),this.icon_type=e.icon.iconType}}Cg.type="ThumbnailOverlayInlineUnplayable";class Ig extends u{constructor(e){super(),this.text=new c(e.text)}}Ig.type="ThumbnailOverlayLoadingPreview";class Eg extends u{constructor(e){super(),this.text=new c(e.text).toString()}}Eg.type="ThumbnailOverlayNowPlaying";class Pg extends u{constructor(e){super(),this.hack=e.hack}}Pg.type="ThumbnailOverlayPinking";class Rg extends u{constructor(e){super(),this.texts=e.texts.map(i=>new c(i))}}Rg.type="ThumbnailOverlayPlaybackStatus";class Ag extends u{constructor(e){super(),this.percent_duration_watched=e.percentDurationWatched}}Ag.type="ThumbnailOverlayResumePlayback";class Mg extends u{constructor(e){super(),this.text=new c(e.text),this.icon_type=e.icon.iconType}}Mg.type="ThumbnailOverlaySidePanel";class Dg extends u{constructor(e){super(),Reflect.has(e,"isToggled")&&(this.is_toggled=e.isToggled),this.icon_type={toggled:e.toggledIcon.iconType,untoggled:e.untoggledIcon.iconType},this.tooltip={toggled:e.toggledTooltip,untoggled:e.untoggledTooltip},e.toggledServiceEndpoint&&(this.toggled_endpoint=new f(e.toggledServiceEndpoint)),e.untoggledServiceEndpoint&&(this.untoggled_endpoint=new f(e.untoggledServiceEndpoint))}}Dg.type="ThumbnailOverlayToggleButton";class Ng extends u{constructor(e){super(),this.visible_time_range_start_millis=e.visibleTimeRangeStartMillis,this.visible_time_range_end_millis=e.visibleTimeRangeEndMillis,this.decoration_time_millis=e.decorationTimeMillis,this.label=new c(e.label),this.icon=e.icon}}Ng.type="TimedMarkerDecoration";class Lg extends u{constructor(e){super(),this.title=new c(e.title)}}Lg.type="TitleAndButtonListHeader";class Og extends u{constructor(e){super(),this.text=new c(e.defaultText),this.toggled_text=new c(e.toggledText),this.icon_type=e.defaultIcon.iconType,this.toggled_icon_type=e.toggledIcon.iconType,this.default_endpoint=new f(e.defaultServiceEndpoint),this.toggled_endpoint=new f(e.toggledServiceEndpoint)}}Og.type="ToggleMenuServiceItem";class Bg extends u{constructor(e){super(),this.promo_config={promo_id:e.promoConfig.promoId,impression_endpoints:e.promoConfig.impressionEndpoints.map(i=>new f(i)),accept:new f(e.promoConfig.acceptCommand),dismiss:new f(e.promoConfig.dismissCommand)},this.target_id=e.targetId,this.details=new c(e.detailsText),this.suggested_position=e.suggestedPosition.type,this.dismiss_stratedy=e.dismissStrategy.type,this.dwell_time_ms=parseInt(e.dwellTimeMs)}}Bg.type="Tooltip";class Vg extends u{constructor(e){super(),this.title=new c(e.title),this.avatar=w.fromResponse(e.thumbnail??e.avatar),this.subtitle=new c(e.subtitle),this.subscribe_button=h(e.subscribeButton,ct),this.endpoint=new f(e.navigationEndpoint)}}Vg.type="TopicChannelDetails";class Mn extends u{constructor(e){super(),this.tabs=g(e.tabs,[Oe,_s]),this.secondary_contents=h(e.secondaryContents,[Q,tr,uh])}}Mn.type="TwoColumnBrowseResults";class Eh extends u{constructor(e){super(),this.header=h(e.header),this.primary_contents=h(e.primaryContents,[An,Q]),this.secondary_contents=h(e.secondaryContents,[bh]),"targetId"in e&&(this.target_id=e.targetId)}}Eh.type="TwoColumnSearchResults";var io,va;class Or extends u{constructor(e){super(),io.add(this),this.results=g(e.results?.results.contents),this.secondary_results=g(e.secondaryResults?.secondaryResults.results),this.conversation_bar=h(e?.conversationBar);const i=e.playlist?.playlist;i&&(this.playlist={id:i.playlistId,title:i.title,author:i.shortBylineText?.simpleText?new c(i.shortBylineText):new G(i.longBylineText),contents:g(i.contents),current_index:i.currentIndex,is_infinite:!!i.isInfinite,menu:h(i.menu,K)});const n=e.autoplay?.autoplay;n&&(this.autoplay={sets:n.sets.map(s=>r(this,io,"m",va).call(this,s))},n.modifiedSets&&(this.autoplay.modified_sets=n.modifiedSets.map(s=>r(this,io,"m",va).call(this,s))),n.countDownSecs&&(this.autoplay.count_down_secs=n.countDownSecs))}}io=new WeakSet,va=function(e){const i={autoplay_video:new f(e.autoplayVideo)};return e.nextButtonVideo&&(i.next_button_video=new f(e.nextButtonVideo)),i};Or.type="TwoColumnWatchNextResults";class Ug extends u{constructor(e){if(super(),e.contents){const i=e.contents.find(n=>n.thirdPartyNetworkSection);i&&(this.third_party_network_section={share_target_container:h(i.thirdPartyNetworkSection.shareTargetContainer,Ih),copy_link_container:h(i.thirdPartyNetworkSection.copyLinkContainer,pr),start_at_container:h(i.thirdPartyNetworkSection.startAtContainer,Th)})}this.header=h(e.header,xh),this.share_panel_version=e.sharePanelVersion,Reflect.has(e,"showLoadingSpinner")&&(this.show_loading_spinner=e.showLoadingSpinner)}}Ug.type="UnifiedSharePanel";class Fg extends u{constructor(e){super(),this.message_title=new c(e.dialogMessageTitle),this.message_text=new c(e.dialogMessageText),this.action_button=h(e.actionButton,S),this.dismiss_button=h(e.dismissButton,S),this.is_visible=e.isVisible}}Fg.type="UpsellDialog";class Hg extends u{constructor(e){super(),this.items=g(e.items),this.collapsed_item_count=e.collapsedItemCount,this.collapsed_state_button_text=new c(e.collapsedStateButtonText)}get contents(){return this.items}}Hg.type="VerticalList";class Wg extends u{constructor(e){super(),this.items=g(e.items),this.view_all_text=new c(e.viewAllText),this.view_all_endpoint=new f(e.viewAllEndpoint)}get contents(){return this.items}}Wg.type="VerticalWatchCardList";class jg extends u{constructor(e){super(),this.title=new c(e.videoTitle),this.channel_name=new c(e.channelName),this.view_count=new c(e.viewCountText),this.video_thumbnails=w.fromResponse(e.videoThumbnail),this.duration=new c(e.lengthString),this.endpoint=new f(e.action)}}jg.type="VideoInfoCardContent";class Gg extends u{constructor(e){super(),this.carousel_titles=se(e.carouselTitles,!0,au),this.carousel_items=se(e.carouselItems,!0,ru)}}Gg.type="VideoMetadataCarouselView";class qg{constructor(e){this.text=new c(e.text),this.subscribed=e.isSubscribed,"subscriptionType"in e&&(this.subscription_type=e.subscriptionType)}}qg.type="SubscriptionButton";class Br extends u{constructor(e){super(),"subscriptionButton"in e&&(this.subscription_button=new qg(e.subscriptionButton)),this.subscriber_count=new c(e.subscriberCountText),this.author=new G({...e.title,navigationEndpoint:e.navigationEndpoint},e.badges,e.thumbnail)}}Br.type="VideoOwner";class Ph extends u{constructor(e){super(),this.original_view_count=e.originalViewCount,this.short_view_count=new c(e.shortViewCount),this.extra_short_view_count=new c(e.extraShortViewCount),this.view_count=new c(e.viewCount)}}Ph.type="VideoViewCount";class Rh extends u{constructor(e){super(),this.title=new c(e.title),"superTitleLink"in e&&(this.super_title_link=new c(e.superTitleLink)),"stationName"in e&&(this.station_name=new c(e.stationName)),this.view_count=h(e.viewCount,Ph),this.badges=g(e.badges,_i),this.published=new c(e.dateText),this.relative_date=new c(e.relativeDateText),this.menu=h(e.videoActions,K)}}Rh.type="VideoPrimaryInfo";class Ao extends u{constructor(e){super(),this.owner=h(e.owner,Br),this.description=new c(e.description),"attributedDescription"in e&&(this.description=c.fromAttributed(e.attributedDescription)),"descriptionPlaceholder"in e&&(this.description_placeholder=new c(e.descriptionPlaceholder)),this.subscribe_button=h(e.subscribeButton,[ct,S]),this.metadata=h(e.metadataRowContainer,Nl),this.show_more_text=new c(e.showMoreText),this.show_less_text=new c(e.showLessText),this.default_expanded=e.defaultExpanded,this.description_collapsed_lines=e.descriptionCollapsedLines}}Ao.type="VideoSecondaryInfo";class Ah extends u{constructor(e){super(),this.title=new c(e.title),this.subtitle=new c(e.subtitle),this.duration={text:new c(e.lengthText).toString(),seconds:Ht(e.lengthText.simpleText)},this.style=e.style}}Ah.type="WatchCardCompactVideo";class $g extends u{constructor(e){super(),this.endpoint=new f(e.navigationEndpoint),this.call_to_action_button=h(e.callToActionButton),this.hero_image=h(e.heroImage),this.label=e.lengthText?.accessibility.accessibilityData.label||""}}$g.type="WatchCardHeroVideo";class Kg extends u{constructor(e){super(),this.title=new c(e.title),this.title_endpoint=new f(e.titleNavigationEndpoint),this.subtitle=new c(e.subtitle),this.author=new G(e,e.titleBadge?[e.titleBadge]:null,e.avatar),this.author.name=this.title.toString(),this.style=e.style}}Kg.type="WatchCardRichHeader";class Yg extends u{constructor(e){super(),this.lists=g(e.lists)}}Yg.type="WatchCardSectionSequence";class Mh extends Mn{constructor(e){super(e)}}Mh.type="WatchNextTabbedResults";class Dh extends u{constructor(e){super(),this.title=e.title,this.content=h(e.content,Q),this.endpoint=new f(e.navigationEndpoint),this.category_assets={asset_key:e.categoryAssets?.assetKey,background_color:e.categoryAssets?.backgroundColor},this.category_type=e.categoryType}}Dh.type="AnchoredSection";var Hn;class Vr extends u{constructor(e){super(),Hn.set(this,void 0),this.child_display_name=new c(e.childDisplayName),this.child_account_description=new c(e.childAccountDescription),this.avatar=w.fromResponse(e.avatar),this.block_button=h(e.blockButton,[de]),this.blocked_entity_key=e.blockedEntityKey}async blockChannel(){if(!r(this,Hn,"f"))throw new m("An active caller must be provide to perform this operation.");const e=this.block_button;if(!e)throw new m("Block button was not found.",{child_display_name:this.child_display_name});if(e.is_toggled)throw new m("This channel is already blocked.",{child_display_name:this.child_display_name});return await e.endpoint.call(r(this,Hn,"f"),{parse:!1})}setActions(e){v(this,Hn,e,"f")}}Hn=new WeakMap;Vr.type="KidsBlocklistPickerItem";class zg extends u{constructor(e){super(),this.title=new c(e.title),this.child_rows=se(e.childRows,!0,[Vr]),this.done_button=h(e.doneButton,[S]),this.successful_toast_action_message=new c(e.successfulToastActionMessage)}}zg.type="KidsBlocklistPicker";class Ur extends u{constructor(e){super(),this.title=new c(e.title),this.category_assets={asset_key:e.categoryAssets?.assetKey,background_color:e.categoryAssets?.backgroundColor},this.category_type=e.categoryType,this.endpoint=new f(e.endpoint)}}Ur.type="KidsCategoryTab";class Nh extends u{constructor(e){super(),this.category_tabs=g(e.categoryTabs,Ur),this.privacy_button=h(e.privacyButtonRenderer,S)}}Nh.type="kidsCategoriesHeader";class Lh extends u{constructor(e){super(),this.anchors=g(e.anchors,Dh)}}Lh.type="kidsHomeScreen";const sS=Object.freeze(Object.defineProperty({__proto__:null,AboutChannel:Ja,AboutChannelView:Qa,AccountChannel:Za,AccountItem:Yo,AccountItemSection:tc,AccountItemSectionHeader:ec,AccountSectionList:ic,ActiveAccountHeader:t_,AddBannerToLiveChatCommand:Nb,AddChatItemAction:ll,AddLiveChatTickerItemAction:Lb,AddToPlaylist:i_,AddToPlaylistCommand:k_,AddToPlaylistEndpoint:K_,AddToPlaylistServiceEndpoint:Fu,Alert:Xo,AlertWithButton:dc,AnchoredSection:Dh,AnimatedThumbnailOverlayView:fc,AppendContinuationItemsAction:kt,AttributionView:mc,AudioOnlyPlayability:_c,AuthorCommentBadge:P_,AutomixPreviewVideo:Cs,AvatarStackView:bc,AvatarView:Qo,BackgroundPromo:n_,BackstageImage:yc,BackstagePost:Es,BackstagePostThread:s_,BadgeView:o_,BrowseEndpoint:Y_,BrowseFeedActions:tr,BrowserMediaSession:r_,BumperUserEduContentView:hl,Button:S,ButtonCardView:a_,ButtonView:fe,C4TabbedHeader:yn,CallToActionButton:c_,Card:u_,CardCollection:nu,CarouselHeader:su,CarouselItem:l_,CarouselItemView:ru,CarouselLockup:Xc,CarouselTitleView:au,ChangeEngagementPanelVisibilityAction:Ym,Channel:cu,ChannelAboutFullMetadata:ko,ChannelAgeGate:h_,ChannelExternalLinkView:Xa,ChannelFeaturedContent:p_,ChannelHeaderLinks:Pc,ChannelHeaderLinksView:Rc,ChannelMetadata:uu,ChannelMobileHeader:d_,ChannelOptions:lu,ChannelOwnerEmptyState:f_,ChannelSubMenu:So,ChannelSwitcherHeader:m_,ChannelSwitcherPage:sc,ChannelTagline:tu,ChannelThumbnailWithLink:__,ChannelVideoPlayer:b_,Chapter:hu,ChildVideo:y_,ChipBarView:g_,ChipCloud:hi,ChipCloudChip:Re,ChipView:pu,ClientSideToggleMenuItem:w_,ClipAdState:Dc,ClipCreation:Nc,ClipCreationScrubber:Mc,ClipCreationTextInput:Ac,ClipSection:Lc,CollaboratorInfoCardContent:x_,CollageHeroImage:v_,CollectionThumbnailView:yu,CommandExecutorCommand:S_,CommentActionButtons:wc,CommentDialog:R_,CommentReplies:xu,CommentReplyDialog:vu,CommentSimplebox:Cu,CommentThread:Iu,CommentView:Ns,CommentsEntryPointHeader:Tu,CommentsEntryPointTeaser:Su,CommentsHeader:Ds,CommentsSimplebox:ku,CompactChannel:D_,CompactLink:En,CompactMix:N_,CompactMovie:L_,CompactPlaylist:O_,CompactStation:B_,CompactVideo:sr,ConfirmDialog:V_,ContentMetadataView:hr,ContentPreviewImageView:bn,ContinuationCommand:T_,ContinuationItem:z,ConversationBar:U_,CopyLink:pr,CreateCommentEndpoint:z_,CreatePlaylistDialog:za,CreatePlaylistDialogFormView:Ru,CreatePlaylistServiceEndpoint:X_,CreatorHeart:gc,CreatorHeartView:pl,DecoratedAvatarView:dr,DecoratedPlayerBar:Nu,DefaultPromoPanel:H_,DeletePlaylistEndpoint:Q_,DescriptionPreviewView:Lu,DialogHeaderView:Ou,DialogView:W_,DidYouMean:Vu,DimChatItemAction:Ob,DislikeButtonView:vc,DownloadButton:Jo,Dropdown:Ts,DropdownItem:Ya,DropdownView:Eu,DynamicTextView:Uu,Element:Ls,EmergencyOnebox:j_,EmojiPicker:wu,EmojiPickerCategory:G_,EmojiPickerCategoryButton:q_,EmojiPickerUpsellCategory:$_,EndScreenPlaylist:ju,EndScreenVideo:Gu,Endscreen:Wu,EndscreenElement:_b,EngagementPanelSectionList:Ms,EngagementPanelTitleHeader:Oc,EomSettingsDisclaimer:Ic,ExpandableMetadata:jc,ExpandableTab:_s,ExpandableVideoDescriptionBody:Fc,ExpandedShelfContents:bb,Factoid:As,FancyDismissibleDialog:yb,FeedFilterChipBar:pi,FeedNudge:gb,FeedTabbedHeader:qu,FeedbackEndpoint:J_,FlexibleActionsView:er,FormFooterView:Bu,GameCard:Hc,GameDetails:wb,GetAccountsListInnertubeEndpoint:Z_,GetKidsBlocklistPickerCommand:C_,GetMultiPageMenuAction:zm,Grid:bs,GridChannel:$u,GridHeader:xb,GridMix:vb,GridMovie:kb,GridPlaylist:Ku,GridShow:Sb,GridVideo:Xu,GuideCollapsibleEntry:Tb,GuideCollapsibleSectionEntry:Cb,GuideDownloadsEntry:Ib,GuideEntry:ys,GuideSection:br,GuideSubscriptionsSection:Qu,HashtagHeader:Ju,HashtagTile:Eb,HeatMarker:Au,Heatmap:Mu,HeroPlaylistThumbnail:Pb,HideEngagementPanelEndpoint:eb,HighlightsCarousel:To,HistorySuggestion:Ab,HorizontalCardList:Rs,HorizontalList:Wc,HorizontalMovieList:Mb,HowThisWasMadeSectionView:eu,IconLink:el,ImageBannerView:tl,IncludingResultsFor:Db,InfoPanelContainer:nl,InfoPanelContent:il,InfoRow:zc,InteractiveTabbedHeader:sl,ItemSection:je,ItemSectionHeader:yr,ItemSectionTab:ol,ItemSectionTabbedHeader:gr,KidsBlocklistPicker:zg,KidsBlocklistPickerItem:Vr,KidsCategoriesHeader:Nh,KidsCategoryTab:Ur,KidsHomeScreen:Lh,LikeButton:Zo,LikeButtonView:xc,LikeEndpoint:tb,LiveChat:al,LiveChatActionPanel:bl,LiveChatAuthorBadge:ml,LiveChatAutoModMessage:Bb,LiveChatBanner:ul,LiveChatBannerChatSummary:Vb,LiveChatBannerHeader:cl,LiveChatBannerPoll:Ub,LiveChatBannerRedirect:Fb,LiveChatDialog:fy,LiveChatHeader:kl,LiveChatItemBumperView:dl,LiveChatItemContextMenuEndpoint:ib,LiveChatItemList:Sl,LiveChatMembershipItem:Hb,LiveChatMessageInput:my,LiveChatModeChangeMessage:Wb,LiveChatPaidMessage:jb,LiveChatPaidSticker:Gb,LiveChatParticipant:Tl,LiveChatParticipantsList:Cl,LiveChatPlaceholderItem:qb,LiveChatProductItem:$b,LiveChatRestrictedParticipation:Kb,LiveChatSponsorshipsGiftPurchaseAnnouncement:Yb,LiveChatSponsorshipsGiftRedemptionAnnouncement:zb,LiveChatSponsorshipsHeader:_l,LiveChatTextMessage:Xb,LiveChatTickerPaidMessageItem:Qb,LiveChatTickerPaidStickerItem:Jb,LiveChatTickerSponsorItem:Zb,LiveChatViewerEngagementMessage:ey,LockupMetadataView:Il,LockupView:El,MacroMarkersInfoItem:Bc,MacroMarkersList:Vc,MacroMarkersListItem:ir,MarkChatItemAsDeletedAction:iy,MarkChatItemsByAuthorAsDeletedAction:ny,Menu:K,MenuFlexibleItem:Sc,MenuNavigationItem:Pl,MenuPopup:_y,MenuServiceItem:Vi,MenuServiceItemDownload:kc,MenuTitle:hc,MerchandiseItem:yy,MerchandiseShelf:Dl,Message:at,MetadataBadge:_i,MetadataRow:gy,MetadataRowContainer:Nl,MetadataRowHeader:wy,MetadataScreen:xy,MicroformatData:Fi,Mix:vy,MobileTopbar:Vy,ModalWithTitleAndButton:ky,ModifyChannelNotificationPreferenceEndpoint:nb,Movie:Sy,MovingThumbnail:Ty,MultiMarkersPlayerBar:Du,MultiPageMenu:nc,MultiPageMenuNotificationSection:by,MultiPageMenuSection:Uy,MusicCardShelf:Ol,MusicCardShelfHeaderBasic:Ll,MusicCarouselShelf:Ye,MusicCarouselShelfBasicHeader:Bl,MusicDescriptionShelf:Os,MusicDetailHeader:Tr,MusicDownloadStateBadge:Dy,MusicEditablePlaylistDetailHeader:Hl,MusicElementHeader:Co,MusicHeader:Bs,MusicImmersiveHeader:Wl,MusicInlineBadge:xr,MusicItemThumbnailOverlay:Rn,MusicLargeCardItemCarousel:Oy,MusicMenuItemDivider:Rl,MusicMultiRowListItem:Vl,MusicMultiSelectMenu:Al,MusicMultiSelectMenuItem:Ui,MusicNavigationButton:kr,MusicPlayButton:vr,MusicPlaylistEditHeader:By,MusicPlaylistShelf:gs,MusicQueue:Cr,MusicResponsiveHeader:Ir,MusicResponsiveListItem:Vt,MusicResponsiveListItemFixedColumn:Ul,MusicResponsiveListItemFlexColumn:Fl,MusicShelf:be,MusicSideAlignedItem:Gl,MusicSortFilterButton:Io,MusicTastebuilderShelf:$l,MusicTastebuilderShelfThumbnail:ql,MusicThumbnail:St,MusicTwoRowItem:Sr,MusicVisualHeader:Kl,NavigationEndpoint:f,Notification:wr,NotificationAction:jy,OpenOnePickAddVideoModalCommand:Gy,OpenPopupAction:Ko,PageHeader:Hi,PageHeaderView:Yl,PageIntroduction:zl,PanelFooterView:fr,PdgCommentChip:A_,PdgReplyButtonView:fl,PerformCommentActionEndpoint:sb,PivotBar:Fy,PivotBarItem:Hy,PivotButton:Xl,PlayerAnnotationsExpanded:Ql,PlayerCaptionsTracklist:Jl,PlayerControlsOverlay:qy,PlayerErrorMessage:$y,PlayerLegacyDesktopYpcOffer:Ky,PlayerLegacyDesktopYpcTrailer:Eo,PlayerLiveStoryboardSpec:eh,PlayerMicroformat:ot,PlayerOverflow:Zl,PlayerOverlay:Vs,PlayerOverlayAutoplay:th,PlayerOverlayVideoDetails:ih,PlayerStoryboardSpec:Ss,Playlist:Pn,PlaylistAddToOption:pc,PlaylistCustomThumbnail:ur,PlaylistEditEndpoint:ob,PlaylistHeader:sh,PlaylistInfoCardContent:Yy,PlaylistMetadata:oh,PlaylistPanel:ri,PlaylistPanelVideo:xn,PlaylistPanelVideoWrapper:jl,PlaylistSidebar:zy,PlaylistSidebarPrimaryInfo:rh,PlaylistSidebarSecondaryInfo:ah,PlaylistThumbnailOverlay:Xy,PlaylistVideo:Er,PlaylistVideoList:ch,PlaylistVideoThumbnail:lr,Poll:Qy,PollHeader:ty,Post:Pr,PostMultiImage:Jy,PrefetchWatchCommand:rb,PremiereTrailerBadge:Zy,ProductList:Uc,ProductListHeader:eg,ProductListItem:tg,ProfileColumn:uh,ProfileColumnStats:ig,ProfileColumnStatsEntry:ng,ProfileColumnUserInfo:sg,Quiz:og,RecognitionShelf:rg,ReelItem:Rr,ReelPlayerHeader:lh,ReelPlayerOverlay:ag,ReelShelf:rr,ReelWatchEndpoint:ab,RelatedChipCloud:hh,RemoveBannerForLiveChatCommand:sy,RemoveChatItemAction:oy,RemoveChatItemByAuthorAction:ry,ReplaceChatItemAction:ay,ReplaceLiveChatAction:cy,ReplayChatItemAction:uy,RichGrid:An,RichItem:cg,RichListHeader:ug,RichMetadata:Po,RichMetadataRow:Ro,RichSection:lg,RichShelf:ph,RunAttestationCommand:gu,SearchBox:Ec,SearchEndpoint:cb,SearchFilter:dh,SearchFilterGroup:Ar,SearchFilterOptionsDialog:hg,SearchHeader:fh,SearchRefinementCard:fs,SearchSubMenu:mh,SearchSuggestion:Zu,SearchSuggestionsSection:_h,SecondarySearchContainer:bh,SectionList:Q,SegmentedLikeDislikeButton:fn,SegmentedLikeDislikeButtonView:Li,SendFeedbackAction:Xm,SettingBoolean:pg,SettingsCheckbox:yh,SettingsOptions:rs,SettingsSidebar:gh,SettingsSwitch:Dr,ShareEndpoint:ub,ShareEntityEndpoint:lb,ShareEntityServiceEndpoint:_r,SharePanelHeader:xh,SharePanelTitleV15:dg,ShareTarget:vh,SharedPost:wh,Shelf:Nr,ShortsLockupView:Lr,ShowCustomThumbnail:Yu,ShowDialogCommand:I_,ShowEngagementPanelEndpoint:hb,ShowLiveChatActionPanelAction:ly,ShowLiveChatDialogAction:hy,ShowLiveChatTooltipCommand:py,ShowingResultsFor:kh,SignalAction:Qm,SignalServiceEndpoint:pb,SimpleCardContent:fg,SimpleCardTeaser:mg,SimpleMenuHeader:Ml,SimpleTextSection:_g,SingleActionEmergencySupport:bg,SingleColumnBrowseResults:Us,SingleColumnMusicWatchNextResults:yg,SingleHeroImage:gg,SlimOwner:wg,SlimVideoMetadata:Sh,SortFilterHeader:rl,SortFilterSubMenu:ui,SponsorCommentBadge:M_,StartAt:Th,StructuredDescriptionContent:ms,StructuredDescriptionPlaylistLockup:Qc,SubFeedOption:Tc,SubFeedSelector:Cc,SubscribeButton:ct,SubscribeEndpoint:db,SubscriptionNotificationToggleButton:iu,Tab:Oe,Tabbed:xg,TabbedSearchResults:Ch,TextCarouselItemView:ou,TextFieldView:Pu,TextHeader:vg,ThirdPartyShareTargetSection:Ih,ThumbnailBadgeView:ar,ThumbnailBottomOverlayView:bu,ThumbnailHoverOverlayToggleActionsView:mu,ThumbnailHoverOverlayView:du,ThumbnailLandscapePortrait:kg,ThumbnailOverlayBadgeView:fu,ThumbnailOverlayBottomPanel:zu,ThumbnailOverlayEndorsement:Sg,ThumbnailOverlayHoverText:Tg,ThumbnailOverlayInlineUnplayable:Cg,ThumbnailOverlayLoadingPreview:Ig,ThumbnailOverlayNowPlaying:Eg,ThumbnailOverlayPinking:Pg,ThumbnailOverlayPlaybackStatus:Rg,ThumbnailOverlayProgressBarView:_u,ThumbnailOverlayResumePlayback:Ag,ThumbnailOverlaySidePanel:Mg,ThumbnailOverlayTimeStatus:ji,ThumbnailOverlayToggleButton:Dg,ThumbnailView:cr,TimedMarkerDecoration:Ng,TitleAndButtonListHeader:Lg,ToggleButton:de,ToggleButtonView:li,ToggleMenuServiceItem:Og,Tooltip:Bg,TopbarMenuButton:Wy,TopicChannelDetails:Vg,Transcript:zo,TranscriptFooter:oc,TranscriptSearchBox:rc,TranscriptSearchPanel:lc,TranscriptSectionHeader:ac,TranscriptSegment:cc,TranscriptSegmentList:uc,TwoColumnBrowseResults:Mn,TwoColumnSearchResults:Eh,TwoColumnWatchNextResults:Or,UnifiedSharePanel:Ug,UniversalWatchCard:Mr,UnsubscribeEndpoint:fb,UpdateChannelSwitcherPageAction:Jm,UpdateDateTextAction:yl,UpdateDescriptionAction:gl,UpdateEngagementPanelAction:Zm,UpdateEngagementPanelContentCommand:E_,UpdateLiveChatPollAction:dy,UpdateSubscribeButtonAction:e_,UpdateTitleAction:wl,UpdateToggleButtonTextAction:xl,UpdateViewershipAction:vl,UploadTimeFactoid:qc,UpsellDialog:Fg,VerticalList:Hg,VerticalWatchCardList:Wg,Video:nr,VideoAttributeView:Ps,VideoAttributesSectionView:Zc,VideoCard:Gc,VideoDescriptionCourseSection:Jc,VideoDescriptionHeader:Kc,VideoDescriptionInfocardsSection:Yc,VideoDescriptionMusicSection:or,VideoDescriptionTranscriptSection:vo,VideoInfoCardContent:jg,VideoMetadataCarouselView:Gg,VideoOwner:Br,VideoPrimaryInfo:Rh,VideoSecondaryInfo:Ao,VideoViewCount:Ph,ViewCountFactoid:$c,WatchCardCompactVideo:Ah,WatchCardHeroVideo:$g,WatchCardRichHeader:Kg,WatchCardSectionSequence:Yg,WatchEndpoint:Hu,WatchNextEndScreen:nh,WatchNextEndpoint:mb,WatchNextTabbedResults:Mh,YpcTrailer:ws},Symbol.toStringTag,{value:"Module"})),oS=new Set(["trackingParams","accessibility","accessibilityData"]),ka={};function Fs(t){return t.replace(/[A-Z]/g,e=>`_${e.toLowerCase()}`)}function Oh(t,e){let i=!1;if(typeof e=="object"&&e!=null){if(i=Xg(e))return ka[i]=Reflect.get(e,Reflect.ownKeys(e)[0]),{type:"renderer",renderers:[i],optional:!1};if(i=rS(e)){for(const[s,o]of Object.entries(i))ka[s]=o;return{type:"array",array_type:"renderer",renderers:Object.keys(i),optional:!1}}if((i=aS(t,e))||(i=cS(e)))return i}const n=typeof e;return n==="object"?{type:"object",keys:Object.entries(e).map(([s,o])=>[s,Oh(s,o)]),optional:!1}:{type:"primitive",typeof:[n],optional:!1}}function rS(t){const e=Array.isArray(t);return e&&t.length===0?!1:e&&t.every(n=>Xg(n))?Object.fromEntries(t.map(n=>{const s=Reflect.ownKeys(n)[0].toString();return[Hr(s),n[s]]})):!1}function aS(t,e){if(typeof e=="object"&&e!==null){if(t.endsWith("Endpoint")||t.endsWith("Command")||t==="endpoint")return{type:"misc",endpoint:new f(e),optional:!1,misc_type:"NavigationEndpoint"};if(Reflect.has(e,"simpleText")||Reflect.has(e,"runs")){const i=new c(e);return{type:"misc",misc_type:"Text",optional:!1,endpoint:i.endpoint,text:i.toString()}}if(Reflect.has(e,"thumbnails")&&Array.isArray(Reflect.get(e,"thumbnails")))return{type:"misc",misc_type:"Thumbnail",optional:!1}}return!1}function Xg(t){if(!(typeof t=="object"))return!1;const i=Reflect.ownKeys(t);if(i.length===1){const n=i[0].toString();if(n.endsWith("Renderer")||n.endsWith("Model"))return Hr(n)}return!1}function cS(t){if(!Array.isArray(t))return!1;if(t.length===0)return{type:"array",array_type:"primitive",items:{type:"primitive",typeof:["never"],optional:!1},optional:!1};const e=t.map(o=>typeof o);if(!e.every(o=>o===e[0]))return{type:"array",array_type:"primitive",items:{type:"primitive",typeof:["unknown"],optional:!1},optional:!1};const n=e[0];if(n!=="object")return{type:"array",array_type:"primitive",items:{type:"primitive",typeof:[n],optional:!1},optional:!1};let s=[];for(let o=0;o<t.length;o++){const a=Object.entries(t[o]).map(([l,d])=>[l,Oh(l,d)]);if(o===0){s=a;continue}s=Mo(s,a).resolved_key_info}return{type:"array",array_type:"object",items:{type:"object",keys:s,optional:!1},optional:!1}}function uS(t){if(typeof t!="object"||t===null)throw new m("Generator: Cannot introspect non-object",{classdata:t});return Reflect.ownKeys(t).filter(i=>!pS(i)).filter(i=>typeof i=="string").map(i=>{const n=Reflect.get(t,i),s=Oh(i,n);return[i,s]})}function lS(t){const i=t.filter(([,a])=>a.type!=="misc"||!(a.misc_type==="NavigationEndpoint"||a.misc_type==="Text")?!1:a.endpoint?.metadata.page_type==="WEB_PAGE_TYPE_CHANNEL").sort(([,a],[,l])=>a.type!=="misc"||l.type!=="misc"||a.misc_type!=="Text"||l.misc_type!=="Text"?0:l.text.length-a.text.length),n=new Set,s=i[0];let o;if(s){n.add(s[0]);const l=t.map(([x])=>x).filter(x=>x.endsWith("Badges")||x==="badges"),_=l.filter(x=>x.startsWith("owner")||x.startsWith("author"))[0]??l[0],b=t.find(([x])=>x===_),k=b?b[1].type==="array"&&b[1].array_type==="renderer"&&Reflect.has(b[1].renderers,"MetadataBadge"):!1;k&&_&&n.add(_),o={type:"misc",misc_type:"Author",optional:!1,params:[s[0],k?_:void 0]}}return o&&t.push(["author",o]),t.filter(([a])=>!n.has(a))}function hS(t){const e=uS(t);return lS(e)}function Qg(t){const e=hS(t),i=new Map;for(const[,s]of e)if(s.type==="renderer"||s.type==="array"&&s.array_type==="renderer")for(const o of s.renderers){const a=ka[o];a&&i.set(o,a)}const n=Array.from(i).filter(([s])=>!$h(s));return{key_info:e,unimplemented_dependencies:n}}function pS(t){return typeof t=="string"&&oS.has(t)}function dS(t,e,i){var n,s;i({error_type:"class_not_found",classname:t,key_info:e});const o=(n=class extends u{static set key_info(a){v(this,n,new Map(a),"f",s)}static get key_info(){return[...r(this,n,"f",s).entries()]}constructor(a){super();const{key_info:l,unimplemented_dependencies:d}=Qg(a),{resolved_key_info:_,changed_keys:b}=Mo(o.key_info,l);b.length>0&&(o.key_info=_,i({error_type:"class_changed",classname:t,key_info:o.key_info,changed_keys:b}));for(const[x,I]of d)Bh(x,I,i);for(const[x,I]of l){let C=Fs(x);I.type==="misc"&&I.misc_type==="NavigationEndpoint"&&(C="endpoint"),Reflect.set(this,C,ew(x,I,a))}}},Sx(n,"node"),n.type=t,s={value:new Map},n);return o.key_info=e,Object.defineProperty(o,"name",{value:t,writable:!1}),o}function Bh(t,e,i){const{key_info:n,unimplemented_dependencies:s}=Qg(e),o=dS(t,n,i);vS(t,o);for(const[a,l]of s)Bh(a,l,i);return o}function md(t,e){const i=[],n=["super();"];for(const[s,o]of e){let a=Fs(s);o.type==="misc"&&o.misc_type==="NavigationEndpoint"&&(a="endpoint"),i.push(`${a}${o.optional?"?":""}: ${Jg(o)};`),n.push(`this.${a} = ${Zg(s,o)};`)}return`class ${t} extends YTNode {
  static type = '${t}';

  ${i.join(`
  `)}

  constructor(data: RawNode) {
    ${n.join(`
    `)}
  }
}
`}function _d(t,e){return`{
${e.map(([i,n])=>`${" ".repeat((t+2)*2)}${Fs(i)}${n.optional?"?":""}: ${Jg(n,t+1)}`).join(`,
`)}
${" ".repeat((t+1)*2)}}`}function Jg(t,e=0){switch(t.type){case"renderer":return`${t.renderers.map(i=>`YTNodes.${i}`).join(" | ")} | null`;case"array":switch(t.array_type){case"renderer":return`ObservedArray<${t.renderers.map(i=>`YTNodes.${i}`).join(" | ")}> | null`;case"primitive":{const i=t.items.typeof;return t.items.optional&&!i.includes("undefined")&&i.push("undefined"),`${i.length===1?`${i[0]}`:`(${i.join(" | ")})`}[]`}case"object":return`${_d(e,t.items.keys)}[]`;default:throw new Error("Unreachable code reached! Switch missing case!")}case"object":return _d(e,t.keys);case"misc":switch(t.misc_type){case"Thumbnail":return"Thumbnail[]";default:return t.misc_type}case"primitive":return t.typeof.join(" | ")}}function bd(t,e,i,n){const s=[...i,n];return`{
${e.map(([o,a])=>`${" ".repeat((t+2)*2)}${Fs(o)}: ${Zg(o,a,s,t+1)}`).join(`,
`)}
${" ".repeat((t+1)*2)}}`}function Zg(t,e,i=["data"],n=1){let s="undefined";switch(e.type){case"renderer":s=`Parser.parseItem(${i.join(".")}.${t}, ${yd(e.renderers)})`;break;case"array":switch(e.array_type){case"renderer":s=`Parser.parse(${i.join(".")}.${t}, true, ${yd(e.renderers)})`;break;case"object":s=`${i.join(".")}.${t}.map((item: any) => (${bd(n,e.items.keys,[],"item")}))`;break;case"primitive":s=`${i.join(".")}.${t}`;break;default:throw new Error("Unreachable code reached! Switch missing case!")}break;case"object":s=bd(n,e.keys,i,t);break;case"misc":switch(e.misc_type){case"Thumbnail":s=`Thumbnail.fromResponse(${i.join(".")}.${t})`;break;case"Author":{const o=`new Author(${i.join(".")}.${e.params[0]}, ${e.params[1]?`${i.join(".")}.${e.params[1]}`:"undefined"})`;return e.optional?`Reflect.has(${i.join(".")}, '${e.params[0]}') ? ${o} : undefined`:o}default:s=`new ${e.misc_type}(${i.join(".")}.${t})`;break}if(s==="undefined")throw new Error("Unreachable code reached! Switch missing case!");break;case"primitive":s=`${i.join(".")}.${t}`;break}return e.optional?`Reflect.has(${i.join(".")}, '${t}') ? ${s} : undefined`:s}function yd(t){return t.length===1?`YTNodes.${t[0]}`:`[ ${t.map(e=>`YTNodes.${e}`).join(", ")} ]`}function ut(t,e){let i=t;for(const n of e)i=i[n];return i}function gd(t,e){let i=t;for(const n of e)if(Reflect.has(i,n))i=i[n];else return!1;return!0}function wd(t,e,i,n,s){const o={},a=[...i,t];for(const[l,d]of n)o[l]=s?ew(l,d,e,a):void 0;return o}function ew(t,e,i,n=["data"]){const s=!e.optional||gd({data:i},[...n,t]);switch(e.type){case"renderer":return s?h(ut({data:i},[...n,t]),e.renderers.map(o=>No(o))):void 0;case"array":switch(e.array_type){case"renderer":return s?se(ut({data:i},[...n,t]),!0,e.renderers.map(o=>No(o))):void 0;case"object":return s?ut({data:i},[...n,t]).map((o,a)=>wd(`${a}`,i,[...n,t],e.items.keys,s)):void 0;case"primitive":return s?ut({data:i},[...n,t]):void 0;default:throw new Error("Unreachable code reached! Switch missing case!")}case"object":return wd(t,i,n,e.keys,s);case"misc":switch(e.misc_type){case"NavigationEndpoint":return s?new f(ut({data:i},[...n,t])):void 0;case"Text":return s?new c(ut({data:i},[...n,t])):void 0;case"Thumbnail":return s?w.fromResponse(ut({data:i},[...n,t])):void 0;case"Author":return!e.optional||gd({data:i},[...n,e.params[0]])?new G(ut({data:i},[...n,e.params[0]]),e.params[1]?ut({data:i},[...n,e.params[1]]):void 0):void 0;default:throw new Error("Unreachable code reached! Switch missing case!")}case"primitive":return ut({data:i},[...n,t])}}function Mo(t,e){const i=new Map,n=new Set(t.map(([x])=>x)),s=new Set(e.map(([x])=>x)),o=e.filter(([x])=>!n.has(x)),a=t.filter(([x])=>!s.has(x)),l=t.filter(([x])=>s.has(x)),d=new Map(e);for(const[x,I]of l){const C=d.get(x);if(C){if(I.type!==C.type){i.set(x,{type:"primitive",typeof:["unknown"],optional:!0});continue}switch(I.type){case"object":{if(C.type!=="object")continue;const{resolved_key_info:E}=Mo(I.keys,C.keys),M={type:"object",keys:E,optional:I.optional||C.optional};JSON.stringify(M)!==JSON.stringify(I)&&i.set(x,M)}break;case"renderer":{if(C.type!=="renderer")continue;const E={...I.renderers,...C.renderers},M=I.optional||C.optional,P={type:"renderer",renderers:E,optional:M};JSON.stringify({...P,renderers:Object.keys(P.renderers)})!==JSON.stringify({...I,renderers:Object.keys(I.renderers)})&&i.set(x,P)}break;case"array":{if(C.type!=="array")continue;switch(I.array_type){case"renderer":{if(C.array_type!=="renderer"){i.set(x,{type:"array",array_type:"primitive",items:{type:"primitive",typeof:["unknown"],optional:!0},optional:!0});continue}const E={...I.renderers,...C.renderers},M=I.optional||C.optional,P={type:"array",array_type:"renderer",renderers:E,optional:M};JSON.stringify({...P,renderers:Object.keys(P.renderers)})!==JSON.stringify({...I,renderers:Object.keys(I.renderers)})&&i.set(x,P)}break;case"object":{if(C.array_type==="primitive"&&C.items.typeof.length==1&&C.items.typeof[0]==="never")continue;if(C.array_type!=="object"){i.set(x,{type:"array",array_type:"primitive",items:{type:"primitive",typeof:["unknown"],optional:!0},optional:!0});continue}const{resolved_key_info:E}=Mo(I.items.keys,C.items.keys),M={type:"array",array_type:"object",items:{type:"object",keys:E,optional:I.items.optional||C.items.optional},optional:I.optional||C.optional};JSON.stringify(M)!==JSON.stringify(I)&&i.set(x,M)}break;case"primitive":{if(I.items.typeof.includes("never")&&C.array_type==="object"){i.set(x,C);continue}if(C.array_type!=="primitive"){i.set(x,{type:"array",array_type:"primitive",items:{type:"primitive",typeof:["unknown"],optional:!0},optional:!0});continue}const E=new Set([...C.items.typeof,...I.items.typeof]);E.size>1&&E.has("never")&&E.delete("never");const M={type:"array",array_type:"primitive",items:{type:"primitive",typeof:Array.from(E),optional:I.items.optional||C.items.optional},optional:I.optional||C.optional};JSON.stringify(M)!==JSON.stringify(I)&&i.set(x,M)}break;default:throw new Error("Unreachable code reached! Switch missing case!")}break}case"misc":{if(C.type!=="misc")continue;switch(I.misc_type!==C.misc_type&&i.set(x,{type:"primitive",typeof:["unknown"],optional:!0}),I.misc_type){case"Author":{if(C.misc_type!=="Author")break;const E=I.params[1]||C.params[1],P={type:"misc",misc_type:"Author",optional:I.optional||C.optional,params:[C.params[0],E]};JSON.stringify(P)!==JSON.stringify(I)&&i.set(x,P)}break}}break;case"primitive":{if(C.type!=="primitive")continue;const E={type:"primitive",typeof:Array.from(new Set([...C.typeof,...I.typeof])),optional:I.optional||C.optional};JSON.stringify(E)!==JSON.stringify(I)&&i.set(x,E)}break}}}for(const[x,I]of o)i.set(x,{...I,optional:!0});for(const[x,I]of a)i.set(x,{...I,optional:!0});const _=t.filter(([x])=>!i.has(x));return{resolved_key_info:[...new Map([..._,...i]).entries()],changed_keys:[...i.entries()]}}class Vh extends u{constructor(e){super(),this.contents=g(e.contents),Array.isArray(e.continuations)&&(this.continuation=e.continuations?.at(0)?.nextContinuationData?.continuation)}}Vh.type="itemSectionContinuation";class Uh extends u{constructor(e){super(),this.endpoint=new f(e.endpoint)}}Uh.type="navigateAction";class tw extends u{constructor(e){super(),this.miniplayer_command=new f(e.miniplayerCommand),this.show_premium_branding=e.showPremiumBranding}}tw.type="showMiniplayerCommand";class di extends u{constructor(e){super(),this.target_id=e.targetId,this.contents=se(e.continuationItems,!0),this.slot=e?.slot}}di.type="reloadContinuationItemsCommand";class Gi extends u{constructor(e){super(),this.contents=se(e.contents,!0),this.continuation=e.continuations?.[0]?.nextContinuationData?.continuation||e.continuations?.[0]?.reloadContinuationData?.continuation||null}}Gi.type="sectionListContinuation";class Fh extends u{constructor(e){super(),this.contents=se(e.contents,!0),this.continuation=e.continuations?.[0].nextContinuationData.continuation||null}}Fh.type="musicPlaylistShelfContinuation";class Fr extends u{constructor(e){super(),this.contents=g(e.contents),this.continuation=e.continuations?.[0].nextContinuationData?.continuation||e.continuations?.[0].reloadContinuationData?.continuation||null}}Fr.type="musicShelfContinuation";class Hh extends u{constructor(e){super(),this.items=se(e.items,!0),this.continuation=e.continuations?.[0].nextContinuationData.continuation||null}get contents(){return this.items}}Hh.type="gridContinuation";class Wh extends u{constructor(e){super(),this.contents=g(e.contents),this.continuation=e.continuations?.[0]?.nextContinuationData?.continuation||e.continuations?.[0]?.nextRadioContinuationData?.continuation||null}}Wh.type="playlistPanelContinuation";class jh extends u{constructor(e){super(),this.continuation_type=e.type,this.timeout_ms=e.continuation?.timeoutMs,this.time_until_last_message_ms=e.continuation?.timeUntilLastMessageMsec,this.token=e.continuation?.continuation}}jh.type="continuation";class Gh extends u{constructor(e){super(),this.actions=se(e.actions?.map(s=>(delete s.clickTrackingParams,s)),!0)||$([]),this.action_panel=h(e.actionPanel),this.item_list=h(e.itemList,Sl),this.header=h(e.header,kl),this.participants_list=h(e.participantsList,Cl),this.popout_message=h(e.popoutMessage,at),this.emojis=e.emojis?.map(s=>({emoji_id:s.emojiId,shortcuts:s.shortcuts,search_terms:s.searchTerms,image:w.fromResponse(s.image),is_custom_emoji:s.isCustomEmoji}))||[];let i,n;e.continuations?.[0].timedContinuationData?(n="timed",i=e.continuations?.[0].timedContinuationData):e.continuations?.[0].invalidationContinuationData?(n="invalidation",i=e.continuations?.[0].invalidationContinuationData):e.continuations?.[0].liveChatReplayContinuationData&&(n="replay",i=e.continuations?.[0].liveChatReplayContinuationData),this.continuation=new jh({continuation:i,type:n}),this.viewer_name=e.viewerName}}Gh.type="liveChatContinuation";class Do extends u{constructor(e){super(),this.request=e.request,this.token=e.token}}Do.type="ContinuationCommand";function fS(){return{key:void 0,value:void 0}}const fi={encode(t,e=new T){return t.key!==void 0&&e.uint32(10).string(t.key),t.value!==void 0&&e.uint32(18).string(t.value),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=fS();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.key=i.string();continue;case 2:if(o!==18)break;s.value=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function mS(){return{xtags:[]}}const _S={encode(t,e=new T){for(const i of t.xtags)fi.encode(i,e.uint32(10).fork()).join();return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=mS();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.xtags.push(fi.decode(i,i.uint32()));continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};var no;class bS{constructor(e,i){if(no.set(this,void 0),i&&v(this,no,i,"f"),this.itag=e.itag,this.mime_type=e.mimeType,this.is_type_otf=e.type==="FORMAT_STREAM_TYPE_OTF",this.bitrate=e.bitrate,this.average_bitrate=e.averageBitrate,Reflect.has(e,"width")&&Reflect.has(e,"height")&&(this.width=parseInt(e.width),this.height=parseInt(e.height)),Reflect.has(e,"projectionType")&&(this.projection_type=e.projectionType),Reflect.has(e,"stereoLayout")&&(this.stereo_layout=e.stereoLayout?.replace("STEREO_LAYOUT_","")),Reflect.has(e,"initRange")&&(this.init_range={start:parseInt(e.initRange.start),end:parseInt(e.initRange.end)}),Reflect.has(e,"indexRange")&&(this.index_range={start:parseInt(e.indexRange.start),end:parseInt(e.indexRange.end)}),this.last_modified=new Date(Math.floor(parseInt(e.lastModified)/1e3)),this.last_modified_ms=e.lastModified,Reflect.has(e,"contentLength")&&(this.content_length=parseInt(e.contentLength)),Reflect.has(e,"quality")&&(this.quality=e.quality),Reflect.has(e,"qualityLabel")&&(this.quality_label=e.qualityLabel),Reflect.has(e,"fps")&&(this.fps=e.fps),Reflect.has(e,"url")&&(this.url=e.url),Reflect.has(e,"cipher")&&(this.cipher=e.cipher),Reflect.has(e,"signatureCipher")&&(this.signature_cipher=e.signatureCipher),Reflect.has(e,"audioQuality")&&(this.audio_quality=e.audioQuality),this.approx_duration_ms=parseInt(e.approxDurationMs),Reflect.has(e,"audioSampleRate")&&(this.audio_sample_rate=parseInt(e.audioSampleRate)),Reflect.has(e,"audioChannels")&&(this.audio_channels=e.audioChannels),Reflect.has(e,"loudnessDb")&&(this.loudness_db=e.loudnessDb),Reflect.has(e,"spatialAudioType")&&(this.spatial_audio_type=e.spatialAudioType?.replace("SPATIAL_AUDIO_TYPE_","")),Reflect.has(e,"maxDvrDurationSec")&&(this.max_dvr_duration_sec=e.maxDvrDurationSec),Reflect.has(e,"targetDurationSec")&&(this.target_duration_dec=e.targetDurationSec),this.has_audio=!!e.audioBitrate||!!e.audioQuality,this.has_video=!!e.qualityLabel,this.has_text=!!e.captionTrack,Reflect.has(e,"xtags")&&(this.xtags=e.xtags),Reflect.has(e,"fairPlayKeyUri")&&(this.fair_play_key_uri=e.fairPlayKeyUri),Reflect.has(e,"drmFamilies")&&(this.drm_families=e.drmFamilies),Reflect.has(e,"drmTrackType")&&(this.drm_track_type=e.drmTrackType),Reflect.has(e,"distinctParams")&&(this.distinct_params=e.distinctParams),Reflect.has(e,"trackAbsoluteLoudnessLkfs")&&(this.track_absolute_loudness_lkfs=e.trackAbsoluteLoudnessLkfs),Reflect.has(e,"highReplication")&&(this.high_replication=e.highReplication),Reflect.has(e,"colorInfo")&&(this.color_info={primaries:e.colorInfo.primaries?.replace("COLOR_PRIMARIES_",""),transfer_characteristics:e.colorInfo.transferCharacteristics?.replace("COLOR_TRANSFER_CHARACTERISTICS_",""),matrix_coefficients:e.colorInfo.matrixCoefficients?.replace("COLOR_MATRIX_COEFFICIENTS_","")}),Reflect.has(e,"audioTrack")&&(this.audio_track={audio_is_default:e.audioTrack.audioIsDefault,display_name:e.audioTrack.displayName,id:e.audioTrack.id}),Reflect.has(e,"captionTrack")&&(this.caption_track={display_name:e.captionTrack.displayName,vss_id:e.captionTrack.vssId,language_code:e.captionTrack.languageCode,kind:e.captionTrack.kind,id:e.captionTrack.id}),this.has_audio||this.has_text){const n=this.xtags?_S.decode(hw(decodeURIComponent(this.xtags).replace(/-/g,"+").replace(/_/g,"/"))).xtags:[];if(this.language=n.find(s=>s.key==="lang")?.value||null,this.has_audio){this.is_drc=!!e.isDrc||n.some(o=>o.key==="drc"&&o.value==="1");const s=n.find(o=>o.key==="acont")?.value;this.is_dubbed=s==="dubbed",this.is_descriptive=s==="descriptive",this.is_secondary=s==="secondary",this.is_auto_dubbed=s==="dubbed-auto",this.is_original=s==="original"||!this.is_dubbed&&!this.is_descriptive&&!this.is_secondary&&!this.is_auto_dubbed&&!this.is_drc}this.has_text&&!this.language&&this.caption_track&&(this.language=this.caption_track.language_code)}}decipher(e){return e?e.decipher(this.url,this.signature_cipher,this.cipher,r(this,no,"f")):this.url||""}}no=new WeakMap;class yS{constructor(e){this.id=e.videoId,this.channel_id=e.channelId,this.title=e.title,this.duration=parseInt(e.lengthSeconds),this.keywords=e.keywords,this.is_owner_viewing=!!e.isOwnerViewing,this.short_description=e.shortDescription,this.thumbnail=w.fromResponse(e.thumbnail),this.allow_ratings=!!e.allowRatings,this.view_count=parseInt(e.viewCount),this.author=e.author,this.is_private=!!e.isPrivate,this.is_live=!!e.isLive,this.is_live_content=!!e.isLiveContent,this.is_live_dvr_enabled=!!e.isLiveDvrEnabled,this.is_low_latency_live_stream=!!e.isLowLatencyLiveStream,this.is_upcoming=!!e.isUpcoming,this.is_post_live_dvr=!!e.isPostLiveDvr,this.is_crawlable=!!e.isCrawlable,this.live_chunk_readahead=e.liveChunkReadahead}}const bi="Parser",gS=new Set(["AdSlot","DisplayAd","SearchPyv","MealbarPromo","PrimetimePromo","PromotedSparklesWeb","CompactPromotedVideo","BrandVideoShelf","BrandVideoSingleton","StatementBanner","GuideSigninPromo","AdsEngagementPanelContent","MiniGameCardView"]),qh=new Map(Object.entries(sS)),wS=new Map;let Wi=null,si=({classname:t,...e})=>{switch(e.error_type){case"parse":e.error instanceof Error&&ve(bi,new m(`Something went wrong at ${t}!
This is a bug, please report it at ${V.shim.info.bugs_url}`,{stack:e.error.stack,classdata:JSON.stringify(e.classdata,null,2)}));break;case"typecheck":ve(bi,new qi(`Type mismatch, got ${t} expected ${Array.isArray(e.expected)?e.expected.join(" | "):e.expected}.`,e.classdata));break;case"mutation_data_missing":ve(bi,new m(`Mutation data required for processing ${t}, but none found.
This is a bug, please report it at ${V.shim.info.bugs_url}`));break;case"mutation_data_invalid":ve(bi,new m(`Mutation data missing or invalid for ${e.failed} out of ${e.total} MusicMultiSelectMenuItems. The titles of the failed items are: ${e.titles.join(", ")}.
This is a bug, please report it at ${V.shim.info.bugs_url}`));break;case"class_not_found":ve(bi,new m(`${t} not found!
This is a bug, want to help us fix it? Follow the instructions at ${V.shim.info.repo_url}/blob/main/docs/updating-the-parser.md or report it at ${V.shim.info.bugs_url}!
Introspected and JIT generated this class in the meantime:
${md(t,e.key_info)}`));break;case"class_changed":ve(bi,`${t} changed!
The following keys where altered: ${e.changed_keys.map(([i])=>Fs(i)).join(", ")}
The class has changed to:
${md(t,e.key_info)}`);break;default:ve(bi,"Unreachable code reached at ParserErrorHandler");break}};function lt(){Wi=null}function ht(){Wi=new Rm}function xS(t,e){if(!Wi)return;const i=Wi.get(t);if(!i)return Wi.set(t,[e]);i.push(e)}function pt(){if(!Wi)throw new Error("Parser#getMemo() called before Parser#createMemo()");return Wi}function iw(t){return gS.has(t)}function Hr(t){return(t.charAt(0).toUpperCase()+t.slice(1)).replace(/Renderer|Model/g,"").replace(/Radio/g,"Mix").trim()}function No(t){const e=qh.get(t);if(!e){const i=new Error(`Module not found: ${t}`);throw i.code="MODULE_NOT_FOUND",i}return e}function $h(t){return qh.has(t)}function vS(t,e){qh.set(t,e),wS.set(t,e)}function J(t){const e={};ht();const i=se(t.contents),n=pt();i&&(e.contents=i,e.contents_memo=n),lt(),ht();const s=t.onResponseReceivedActions?na(t.onResponseReceivedActions):null,o=pt();s&&(e.on_response_received_actions=s,e.on_response_received_actions_memo=o),lt(),ht();const a=t.onResponseReceivedEndpoints?na(t.onResponseReceivedEndpoints):null,l=pt();a&&(e.on_response_received_endpoints=a,e.on_response_received_endpoints_memo=l),lt(),ht();const d=t.onResponseReceivedCommands?na(t.onResponseReceivedCommands):null,_=pt();d&&(e.on_response_received_commands=d,e.on_response_received_commands_memo=_),lt(),ht();const b=t.continuationContents?xd(t.continuationContents):null,k=pt();b&&(e.continuation_contents=b,e.continuation_contents_memo=k),lt(),ht();const x=t.actions?ES(t.actions):null,I=pt();x&&(e.actions=x,e.actions_memo=I),lt(),ht();const C=t.liveChatItemContextMenuSupportedRenderers?h(t.liveChatItemContextMenuSupportedRenderers):null,E=pt();C&&(e.live_chat_item_context_menu_supported_renderers=C,e.live_chat_item_context_menu_supported_renderers_memo=E),lt(),ht();const M=t.header?se(t.header):null,P=pt();M&&(e.header=M,e.header_memo=P),lt(),ht();const L=t.sidebar?h(t.sidebar):null,me=pt();L&&(e.sidebar=L,e.sidebar_memo=me),lt(),ht();const jt=se(t.items);jt&&(e.items=jt,e.items_memo=pt()),lt(),PS(n,t.frameworkUpdates?.entityBatchUpdate?.mutations),l&&RS(l,t.frameworkUpdates?.entityBatchUpdate?.mutations);const Xe=t.continuation?IS(t.continuation):null;Xe&&(e.continuation=Xe);const Te=t.continuationEndpoint?xd(t.continuationEndpoint):null;Te&&(e.continuation_endpoint=Te);const X=se(t.metadata);X&&(e.metadata=X);const Ce=h(t.microformat);Ce&&(e.microformat=Ce);const Hs=h(t.overlay);Hs&&(e.overlay=Hs);const Ws=g(t.alerts,[Xo,dc]);Ws.length&&(e.alerts=Ws);const js=t.refinements;js&&(e.refinements=js);const ap=t.estimatedResults?parseInt(t.estimatedResults):null;ap&&(e.estimated_results=ap);const cp=se(t.playerOverlays);cp&&(e.player_overlays=cp);const up=h(t.background,St);up&&(e.background=up);const lp=t.playbackTracking?{videostats_watchtime_url:t.playbackTracking.videostatsWatchtimeUrl.baseUrl,videostats_playback_url:t.playbackTracking.videostatsPlaybackUrl.baseUrl}:null;lp&&(e.playback_tracking=lp);const hp=t.playabilityStatus?{status:t.playabilityStatus.status,reason:t.playabilityStatus.reason||"",embeddable:!!t.playabilityStatus.playableInEmbed||!1,audio_only_playability:h(t.playabilityStatus.audioOnlyPlayability,_c),error_screen:h(t.playabilityStatus.errorScreen)}:null;if(hp&&(e.playability_status=hp),t.streamingData){const Ki=new Map;e.streaming_data={expires:new Date(Date.now()+parseInt(t.streamingData.expiresInSeconds)*1e3),formats:vd(t.streamingData.formats,Ki),adaptive_formats:vd(t.streamingData.adaptiveFormats,Ki),dash_manifest_url:t.streamingData.dashManifestUrl,hls_manifest_url:t.streamingData.hlsManifestUrl,server_abr_streaming_url:t.streamingData.serverAbrStreamingUrl}}t.playerConfig&&(e.player_config={audio_config:{loudness_db:t.playerConfig.audioConfig?.loudnessDb,perceptual_loudness_db:t.playerConfig.audioConfig?.perceptualLoudnessDb,enable_per_format_loudness:t.playerConfig.audioConfig?.enablePerFormatLoudness},stream_selection_config:{max_bitrate:t.playerConfig.streamSelectionConfig?.maxBitrate||"0"},media_common_config:{dynamic_readahead_config:{max_read_ahead_media_time_ms:t.playerConfig.mediaCommonConfig?.dynamicReadaheadConfig?.maxReadAheadMediaTimeMs||0,min_read_ahead_media_time_ms:t.playerConfig.mediaCommonConfig?.dynamicReadaheadConfig?.minReadAheadMediaTimeMs||0,read_ahead_growth_rate_ms:t.playerConfig.mediaCommonConfig?.dynamicReadaheadConfig?.readAheadGrowthRateMs||0},media_ustreamer_request_config:{video_playback_ustreamer_config:t.playerConfig.mediaCommonConfig?.mediaUstreamerRequestConfig?.videoPlaybackUstreamerConfig}}});const pp=t.currentVideoEndpoint?new f(t.currentVideoEndpoint):null;pp&&(e.current_video_endpoint=pp);const dp=t.endpoint?new f(t.endpoint):null;dp&&(e.endpoint=dp);const fp=h(t.captions,Jl);fp&&(e.captions=fp);const mp=t.videoDetails?new yS(t.videoDetails):null;mp&&(e.video_details=mp);const _p=g(t.annotations,Ql);_p.length&&(e.annotations=_p);const bp=h(t.storyboards,[Ss,eh]);bp&&(e.storyboards=bp);const yp=h(t.endscreen,Wu);yp&&(e.endscreen=yp);const gp=h(t.cards,nu);gp&&(e.cards=gp);const wp=g(t.engagementPanels,Ms);if(wp.length&&(e.engagement_panels=wp),t.bgChallenge){const Ki={private_do_not_access_or_else_trusted_resource_url_wrapped_value:t.bgChallenge.interpreterUrl.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue,private_do_not_access_or_else_safe_script_wrapped_value:t.bgChallenge.interpreterUrl.privateDoNotAccessOrElseSafeScriptWrappedValue};e.bg_challenge={interpreter_url:Ki,interpreter_hash:t.bgChallenge.interpreterHash,program:t.bgChallenge.program,global_name:t.bgChallenge.globalName,client_experiments_state_blob:t.bgChallenge.clientExperimentsStateBlob}}return t.challenge&&(e.challenge=t.challenge),t.playerResponse&&(e.player_response=J(t.playerResponse)),t.watchNextResponse&&(e.watch_next_response=J(t.watchNextResponse)),t.cpnInfo&&(e.cpn_info={cpn:t.cpnInfo.cpn,cpn_source:t.cpnInfo.cpnSource}),t.entries&&(e.entries=t.entries.map(Ki=>new f(Ki))),t.targetId&&(e.target_id=t.targetId),e}function h(t,e){if(!t)return null;const i=Object.keys(t);if(!i.length)return null;const n=Hr(i[0]);if(!iw(n))try{const o=$h(n)?No(n):Bh(n,t[i[0]],si);if(e){if(Array.isArray(e)){if(!e.some(l=>l.type===o.type))return si({classdata:t[i[0]],classname:n,error_type:"typecheck",expected:e.map(l=>l.type)}),null}else if(o.type!==e.type)return si({classdata:t[i[0]],classname:n,error_type:"typecheck",expected:e.type}),null}const a=new o(t[i[0]]);return xS(n,a),a}catch(s){return si({classname:n,classdata:t[i[0]],error:s,error_type:"parse"}),null}return null}function g(t,e){if(Array.isArray(t)){const i=[];for(const n of t){const s=h(n,e);s&&i.push(s)}return $(i)}else if(!t)return $([]);throw new qi("Expected array but got a single item")}function se(t,e,i){if(!t)return null;if(Array.isArray(t)){const n=[];for(const o of t){const a=h(o,i);a&&n.push(a)}const s=$(n);return e?s:new ds(s)}else if(e)throw new qi("Expected array but got a single item");return new ds(h(t,i))}const kS=/Command$/,SS=/Endpoint$/,TS=/Action$/;function nw(t){let e=[];try{e=Object.keys(t)}catch{}for(const i of e){const n=t[i];if(kS.test(i)||SS.test(i)||TS.test(i)){const s=Hr(i);if(iw(s))return;try{if($h(s))return new(No(s))(n)}catch(o){si({error:o,classname:s,classdata:n,error_type:"parse"})}}}}function CS(t){if(Array.isArray(t)){const e=[];for(const i of t){const n=nw(i);n&&e.push(n)}return $(e)}else if(!t)return $([]);throw new qi("Expected array but got a single item")}function IS(t){return t.timedContinuationData?new jh({continuation:t.timedContinuationData,type:"timed"}):null}function xd(t){return t.itemSectionContinuation?new Vh(t.itemSectionContinuation):t.sectionListContinuation?new Gi(t.sectionListContinuation):t.liveChatContinuation?new Gh(t.liveChatContinuation):t.musicPlaylistShelfContinuation?new Fh(t.musicPlaylistShelfContinuation):t.musicShelfContinuation?new Fr(t.musicShelfContinuation):t.gridContinuation?new Hh(t.gridContinuation):t.playlistPanelContinuation?new Wh(t.playlistPanelContinuation):t.continuationCommand?new Do(t.continuationCommand):null}function na(t){return $(t.map(e=>{if(e.navigateAction)return new Uh(e.navigateAction);if(e.showMiniplayerCommand)return new tw(e.showMiniplayerCommand);if(e.reloadContinuationItemsCommand)return new di(e.reloadContinuationItemsCommand);if(e.appendContinuationItemsAction)return new kt(e.appendContinuationItemsAction);if(e.openPopupAction)return new Ko(e.openPopupAction)}).filter(e=>e))}function ES(t){return Array.isArray(t)?se(t.map(e=>(delete e.clickTrackingParams,e))):new ds(h(t))}function vd(t,e){return t?.map(i=>new bS(i,e))||[]}function PS(t,e){const i=t.getType(Ui);if(i.length>0&&!e)si({error_type:"mutation_data_missing",classname:"MusicMultiSelectMenuItem"});else{const n=[];for(const s of i){const a=e.find(l=>l.payload?.musicFormBooleanChoice?.id===s.form_item_entity_key)?.payload.musicFormBooleanChoice;a?.selected!==void 0&&a?.opaqueToken?s.selected=a.selected:n.push(`'${s.title}'`)}n.length>0&&si({error_type:"mutation_data_invalid",classname:"MusicMultiSelectMenuItem",total:i.length,failed:n.length,titles:n})}}function RS(t,e){const i=t.getType(Ns);if(i.length>0){e||si({error_type:"mutation_data_missing",classname:"CommentView"});for(const n of i){const s=e.find(l=>l.payload?.commentEntityPayload?.key===n.keys.comment)?.payload?.commentEntityPayload,o=e.find(l=>l.payload?.engagementToolbarStateEntityPayload?.key===n.keys.toolbar_state)?.payload?.engagementToolbarStateEntityPayload,a=e.find(l=>l.entityKey===n.keys.toolbar_surface)?.payload?.engagementToolbarSurfaceEntityPayload;n.applyMutations(s,o,a)}}}var Qi;class AS{constructor(e){if(Qi.set(this,void 0),v(this,Qi,J(e.data),"f"),!r(this,Qi,"f").contents)throw new m("Page contents not found");const i=r(this,Qi,"f").contents.array().as(ic)[0];if(!i)throw new m("Account section list not found");this.contents=i.contents[0]}get page(){return r(this,Qi,"f")}}Qi=new WeakMap;var Wn,we,jn,Le,ki,sw,Sa;class re{constructor(e,i,n=!1){Wn.add(this),we.set(this,void 0),jn.set(this,void 0),Le.set(this,void 0),ki.set(this,void 0),r(this,Wn,"m",sw).call(this,i)||n?v(this,we,i,"f"):v(this,we,J(i.data),"f");const s=tT(r(this,we,"f").contents_memo,r(this,we,"f").continuation_contents_memo,r(this,we,"f").on_response_received_commands_memo,r(this,we,"f").on_response_received_endpoints_memo,r(this,we,"f").on_response_received_actions_memo,r(this,we,"f").sidebar_memo,r(this,we,"f").header_memo);if(!s)throw new m("No memo found in feed");v(this,Le,s,"f"),v(this,jn,e,"f")}static getVideosFromMemo(e){return e.getType(nr,Xu,Rr,Lr,sr,Er,xn,Ah)}static getPlaylistsFromMemo(e){const i=e.getType(Pn,Ku),n=e.getType(El).filter(s=>["PLAYLIST","ALBUM","PODCAST"].includes(s.content_type));return n.length>0&&i.push(...n),i}get videos(){return re.getVideosFromMemo(r(this,Le,"f"))}get posts(){return r(this,Le,"f").getType(Es,Pr,wh)}get channels(){return r(this,Le,"f").getType(cu,$u)}get playlists(){return re.getPlaylistsFromMemo(r(this,Le,"f"))}get memo(){return r(this,Le,"f")}get page_contents(){const e=r(this,Le,"f").getType(Oe)?.[0].content,i=r(this,Le,"f").getType(di)[0],n=r(this,Le,"f").getType(kt)[0];return e||i||n}get shelves(){return r(this,Le,"f").getType(Nr,ph,rr)}getShelf(e){return this.shelves.get({title:e})}get secondary_contents(){if(!r(this,we,"f").contents?.is_node)return null;const e=r(this,we,"f").contents?.item();return e.is(Mn,Eh)?e.secondary_contents:null}get actions(){return r(this,jn,"f")}get page(){return r(this,we,"f")}get has_continuation(){return r(this,Wn,"m",Sa).call(this).length>0}async getContinuationData(){if(r(this,ki,"f")){if(r(this,ki,"f").length===0)throw new m("There are no continuations.");return await r(this,ki,"f")[0].endpoint.call(r(this,jn,"f"),{parse:!0})}if(v(this,ki,r(this,Wn,"m",Sa).call(this),"f"),r(this,ki,"f"))return this.getContinuationData()}async getContinuation(){const e=await this.getContinuationData();if(!e)throw new m("Could not get continuation data");return new re(this.actions,e,!0)}}we=new WeakMap,jn=new WeakMap,Le=new WeakMap,ki=new WeakMap,Wn=new WeakSet,sw=function(e){return!("data"in e)},Sa=function(){if(r(this,we,"f").header_memo){const e=r(this,we,"f").header_memo.getType(z);return r(this,Le,"f").getType(z).filter(i=>!e.includes(i))}return r(this,Le,"f").getType(z)};var Ji;class Kh extends re{constructor(e,i,n=!1){super(e,i,n),Ji.set(this,void 0)}get filter_chips(){if(r(this,Ji,"f"))return r(this,Ji,"f")||[];if(this.memo.getType(pi)?.length>1)throw new m("There are too many feed filter chipbars, you'll need to find the correct one yourself in this.page");if(this.memo.getType(pi)?.length===0)throw new m("There are no feed filter chipbars");return v(this,Ji,this.memo.getType(Re),"f"),r(this,Ji,"f")||[]}get filters(){return this.filter_chips.map(e=>e.text.toString())||[]}async getFilteredFeed(e){let i;if(typeof e=="string"){if(!this.filters.includes(e))throw new m("Filter not found",{available_filters:this.filters});i=this.filter_chips.find(s=>s.text.toString()===e)}else if(e.type==="ChipCloudChip")i=e;else throw new m("Invalid filter");if(!i)throw new m("Filter not found");if(i.is_selected)return this;const n=await i.endpoint?.call(this.actions,{parse:!0});if(!n)throw new m("Failed to get filtered feed");return new re(this.actions,n,!0)}}Ji=new WeakMap;var Gt,it,Zi,Gn;class Wr{constructor(e,i,n){Gt.set(this,void 0),it.set(this,void 0),Zi.set(this,void 0),Gn.set(this,void 0),v(this,it,i,"f");const s=J(e[0].data.playerResponse?e[0].data.playerResponse:e[0].data),o=e[1]?.data?J(e[1].data):void 0;if(v(this,Gt,[s,o],"f"),v(this,Zi,n,"f"),s.playability_status?.status==="ERROR")throw new m("This video is unavailable",s.playability_status);if(s.microformat&&!s.microformat?.is(ot,Fi))throw new m("Unsupported microformat",s.microformat);this.basic_info={...s.video_details,embed:s.microformat?.is(ot)?s.microformat?.embed:null,channel:s.microformat?.is(ot)?s.microformat?.channel:null,is_unlisted:s.microformat?.is_unlisted,is_family_safe:s.microformat?.is_family_safe,category:s.microformat?.is(ot)?s.microformat?.category:null,has_ypc_metadata:s.microformat?.is(ot)?s.microformat?.has_ypc_metadata:null,start_timestamp:s.microformat?.is(ot)?s.microformat.start_timestamp:null,end_timestamp:s.microformat?.is(ot)?s.microformat.end_timestamp:null,view_count:s.microformat?.is(ot)&&isNaN(s.video_details?.view_count)?s.microformat.view_count:s.video_details?.view_count,url_canonical:s.microformat?.is(Fi)?s.microformat?.url_canonical:null,tags:s.microformat?.is(Fi)?s.microformat?.tags:null,like_count:void 0,is_liked:void 0,is_disliked:void 0},this.annotations=s.annotations,this.storyboards=s.storyboards,this.endscreen=s.endscreen,this.captions=s.captions,this.cards=s.cards,this.streaming_data=s.streaming_data,this.playability_status=s.playability_status,this.player_config=s.player_config,v(this,Gn,s.playback_tracking,"f")}async toDash(e,i,n={include_thumbnails:!1}){const s=r(this,Gt,"f")[0];if(s.video_details&&s.video_details.is_live)throw new m("Generating DASH manifests for live videos is not supported. Please use the DASH and HLS manifests provided by YouTube in `streaming_data.dash_manifest_url` and `streaming_data.hls_manifest_url` instead.");let o,a;return n.include_thumbnails&&s.storyboards&&(o=s.storyboards),typeof n.captions_format=="string"&&s.captions?.caption_tracks&&(a=s.captions.caption_tracks),v0(this.streaming_data,this.page[0].video_details?.is_post_live_dvr,e,i,r(this,Zi,"f"),r(this,it,"f").session.player,r(this,it,"f"),o,a,n)}getStreamingInfo(e,i){return Bm(this.streaming_data,this.page[0].video_details?.is_post_live_dvr,e,i,this.cpn,r(this,it,"f").session.player,r(this,it,"f"),r(this,Gt,"f")[0].storyboards?r(this,Gt,"f")[0].storyboards:void 0)}chooseFormat(e){return Vm(e,this.streaming_data)}async download(e={}){const i=r(this,Gt,"f")[0];if(i.video_details&&(i.video_details.is_live||i.video_details.is_post_live_dvr))throw new m("Downloading is not supported for live and Post-Live-DVR videos, as they are split up into 5 second segments that are individual files, which require using a tool such as ffmpeg to stitch them together, so they cannot be returned in a single stream.");return k0(e,r(this,it,"f"),this.playability_status,this.streaming_data,r(this,it,"f").session.player,this.cpn)}async getTranscript(){const e=this.page[1];if(!e)throw new m("Cannot get transcript from basic video info.");if(!e.engagement_panels)throw new m("Engagement panels not found. Video likely has no transcript.");const i=e.engagement_panels.get({panel_identifier:"engagement-panel-searchable-transcript"});if(!i)throw new m("Transcript panel not found. Video likely has no transcript.");const n=i.content?.as(z);if(!n)throw new m("Transcript continuation not found.");const s=await n.endpoint.call(this.actions);return new Zh(this.actions,s)}async addToWatchHistory(e=D.WEB.NAME,i=D.WEB.VERSION,n="https://www."){if(!r(this,Gn,"f"))throw new m("Playback tracking not available");const s={cpn:r(this,Zi,"f"),fmt:251,rtn:0,rt:0},o=r(this,Gn,"f").videostats_playback_url.replace("https://s.",n);return await r(this,it,"f").stats(o,{client_name:e,client_version:i},s)}get actions(){return r(this,it,"f")}get cpn(){return r(this,Zi,"f")}get page(){return r(this,Gt,"f")}}Gt=new WeakMap,it=new WeakMap,Zi=new WeakMap,Gn=new WeakMap;var Si,Ti;class vn extends re{constructor(e,i,n=!1){super(e,i,n),Si.set(this,void 0),Ti.set(this,void 0),v(this,Si,e,"f"),v(this,Ti,this.page.contents_memo?.getType(Oe),"f")}get tabs(){return r(this,Ti,"f")?.map(e=>e.title.toString())??[]}async getTabByName(e){const i=r(this,Ti,"f")?.find(s=>s.title.toLowerCase()===e.toLowerCase());if(!i)throw new m(`Tab "${e}" not found`);if(i.selected)return this;const n=await i.endpoint.call(r(this,Si,"f"));return new vn(r(this,Si,"f"),n,!1)}async getTabByURL(e){const i=r(this,Ti,"f")?.find(s=>s.endpoint.metadata.url?.split("/").pop()===e);if(!i)throw new m(`Tab "${e}" not found`);if(i.selected)return this;const n=await i.endpoint.call(r(this,Si,"f"));return new vn(r(this,Si,"f"),n,!1)}hasTabWithURL(e){return r(this,Ti,"f")?.some(i=>i.endpoint.metadata.url?.split("/").pop()===e)??!1}get title(){return this.page.contents_memo?.getType(Oe)?.find(e=>e.selected)?.title.toString()}}Si=new WeakMap,Ti=new WeakMap;let MS=class Fe extends vn{constructor(e,i,n=!1){super(e,i,n),this.header=this.page.header?.item()?.as(yn,su,sl,Hi);const s=this.page.metadata?.item().as(uu),o=this.page.microformat?.as(Fi);if(this.page.alerts){const a=this.page.alerts[0];if(a?.alert_type==="ERROR")throw new ZS(a.text.toString())}if(!s&&!this.page.contents)throw new m("Invalid channel",this);this.metadata={...s,...o||{}},this.subscribe_button=this.page.header_memo?.getType(ct)[0],this.page.contents&&(this.current_tab=this.page.contents.item().as(Mn).tabs.get({selected:!0}))}async applyFilter(e){let i;const n=this.memo.getType(pi)[0];if(typeof e=="string"){if(i=n?.contents.get({text:e}),!i)throw new m(`Filter ${e} not found`,{available_filters:this.filters})}else i=e;if(!i.endpoint)throw new m("Invalid filter",e);const s=await i.endpoint.call(this.actions,{parse:!0});if(!s)throw new m("No page returned",{filter:i});return new Lo(this.actions,s,!0)}async applySort(e){const i=this.memo.getType(ui)[0];if(!i||!i.sub_menu_items)throw new m("No sort filter sub menu found");const n=i.sub_menu_items.find(o=>o.title===e);if(!n)throw new m(`Sort filter ${e} not found`,{available_sort_filters:this.sort_filters});if(n.selected)return this;const s=await n.endpoint.call(this.actions,{parse:!0});return new Fe(this.actions,s,!0)}async applyContentTypeFilter(e){const i=this.current_tab?.content?.as(Q).sub_menu?.as(So);if(!i)throw new m("Sub menu not found");const n=i.content_type_sub_menu_items.find(o=>o.title===e);if(!n)throw new m(`Sub menu item ${e} not found`,{available_filters:this.content_type_filters});if(n.selected)return this;const s=await n.endpoint.call(this.actions,{parse:!0});return new Fe(this.actions,s,!0)}get filters(){return this.memo.getType(pi)?.[0]?.contents.filterType(Re).map(e=>e.text)||[]}get sort_filters(){return this.memo.getType(ui)[0]?.sub_menu_items?.map(i=>i.title)||[]}get content_type_filters(){return this.current_tab?.content?.as(Q).sub_menu?.as(So)?.content_type_sub_menu_items.map(i=>i.title)||[]}async getHome(){const e=await this.getTabByURL("featured");return new Fe(this.actions,e.page,!0)}async getVideos(){const e=await this.getTabByURL("videos");return new Fe(this.actions,e.page,!0)}async getShorts(){const e=await this.getTabByURL("shorts");return new Fe(this.actions,e.page,!0)}async getLiveStreams(){const e=await this.getTabByURL("streams");return new Fe(this.actions,e.page,!0)}async getReleases(){const e=await this.getTabByURL("releases");return new Fe(this.actions,e.page,!0)}async getPodcasts(){const e=await this.getTabByURL("podcasts");return new Fe(this.actions,e.page,!0)}async getCourses(){const e=await this.getTabByURL("courses");return new Fe(this.actions,e.page,!0)}async getPlaylists(){const e=await this.getTabByURL("playlists");return new Fe(this.actions,e.page,!0)}async getCommunity(){const e=await this.getTabByURL("community");return new Fe(this.actions,e.page,!0)}async getAbout(){if(this.hasTabWithURL("about"))return(await this.getTabByURL("about")).memo.getType(ko)[0];const e=this.header?.is(yn)&&this.header.tagline;if(e||this.header?.is(Hi)&&this.header.content?.description){if(e&&e.more_endpoint instanceof f){const s=await e.more_endpoint.call(this.actions);return new vn(this.actions,s,!1).memo.getType(ko)[0]}const i=this.page.header_memo?.getType(z)[0]?.endpoint;if(!i)throw new m("Failed to extract continuation to get channel about");const n=await i.call(this.actions,{parse:!0});if(!n.on_response_received_endpoints_memo)throw new m("Unexpected response while fetching channel about",{response:n});return n.on_response_received_endpoints_memo.getType(Ja)[0]}throw new m("About not found")}async search(e){const i=this.memo.getType(_s)?.[0];if(!i)throw new m("Search tab not found",this);const n=await i.endpoint.call(this.actions,{query:e,parse:!0});return new Fe(this.actions,n,!0)}get has_home(){return this.hasTabWithURL("featured")}get has_videos(){return this.hasTabWithURL("videos")}get has_shorts(){return this.hasTabWithURL("shorts")}get has_live_streams(){return this.hasTabWithURL("streams")}get has_releases(){return this.hasTabWithURL("releases")}get has_podcasts(){return this.hasTabWithURL("podcasts")}get has_courses(){return this.hasTabWithURL("courses")}get has_playlists(){return this.hasTabWithURL("playlists")}get has_community(){return this.hasTabWithURL("community")}get has_about(){return this.hasTabWithURL("about")||!!(this.header?.is(yn)&&this.header.tagline?.more_endpoint)||!!(this.header?.is(Hi)&&this.header.content?.description?.more_endpoint)}get has_search(){return this.memo.getType(_s)?.length>0}async getContinuation(){const e=await super.getContinuationData();if(!e)throw new m("Could not get continuation data");return new Yh(this.actions,e,!0)}};class Yh extends re{constructor(e,i,n=!1){super(e,i,n),this.contents=this.page.on_response_received_actions?.[0]||this.page.on_response_received_endpoints?.[0]}async getContinuation(){const e=await super.getContinuationData();if(!e)throw new m("Could not get continuation data");return new Yh(this.actions,e,!0)}}class Lo extends Kh{constructor(e,i,n=!1){super(e,i,n),this.applied_filter=this.memo.getType(Re).get({is_selected:!0}),this.page.on_response_received_actions&&this.page.on_response_received_actions.length>1&&this.page.on_response_received_actions.shift(),this.contents=this.page.on_response_received_actions?.[0]}async applyFilter(e){const i=await super.getFilteredFeed(e);return new Lo(this.actions,i.page,!0)}async getContinuation(){const e=await super.getContinuationData();if(!e?.on_response_received_actions_memo)throw new m("Unexpected continuation data",e);return e.on_response_received_actions_memo.set("FeedFilterChipBar",this.memo.getType(pi)),e.on_response_received_actions_memo.set("ChipCloudChip",this.memo.getType(Re)),new Lo(this.actions,e,!0)}}var en,ft,tn;class xs{constructor(e,i,n=!1){en.set(this,void 0),ft.set(this,void 0),tn.set(this,void 0),v(this,en,n?i:J(i),"f"),v(this,ft,e,"f");const s=r(this,en,"f").on_response_received_endpoints;if(!s)throw new m("Comments page did not have any content.");const o=s.at(0)?.as(kt,di),a=s.at(1)?.as(kt,di);this.header=o?.contents?.firstOfType(Ds);const l=a?.contents?.filterType(Iu)||[];this.contents=$(l.map(d=>(d.comment&&d.comment.setActions(r(this,ft,"f")),d.setActions(r(this,ft,"f")),d))),v(this,tn,a?.contents?.firstOfType(z),"f")}async applySort(e){if(!this.header)throw new m("Page header is missing. Cannot apply sort option.");let i;if(e==="TOP_COMMENTS"?i=this.header.sort_menu?.sub_menu_items?.at(0):e==="NEWEST_FIRST"&&(i=this.header.sort_menu?.sub_menu_items?.at(1)),!i)throw new m("Could not find target button.");if(i.selected)return this;const n=await i.endpoint.call(r(this,ft,"f"),{parse:!0});return new xs(r(this,ft,"f"),n,!0)}async createComment(e){if(!this.header)throw new m("Page header is missing. Cannot create comment.");const i=this.header.create_renderer?.as(Cu).submit_button;if(!i)throw new m("Could not find target button. You are probably not logged in.");if(!i.endpoint)throw new m("Button does not have an endpoint.");return await i.endpoint.call(r(this,ft,"f"),{commentText:e})}async getContinuation(){if(!r(this,tn,"f"))throw new m("Continuation not found");const e=await r(this,tn,"f").endpoint.call(r(this,ft,"f"),{parse:!0}),i=Object.assign({},r(this,en,"f"));if(!i.on_response_received_endpoints||!e.on_response_received_endpoints)throw new m("Invalid reponse format, missing on_response_received_endpoints.");return i.on_response_received_endpoints.pop(),i.on_response_received_endpoints.push(e.on_response_received_endpoints[0]),new xs(r(this,ft,"f"),i,!0)}get has_continuation(){return!!r(this,tn,"f")}get page(){return r(this,en,"f")}}en=new WeakMap,ft=new WeakMap,tn=new WeakMap;var nn;class DS{constructor(e){nn.set(this,void 0),v(this,nn,J(e),"f"),r(this,nn,"f").items&&(this.contents=r(this,nn,"f").items.array().as(br,Qu))}get page(){return r(this,nn,"f")}}nn=new WeakMap;class jr extends re{constructor(e,i,n=!1){super(e,i,n),this.sections=this.memo.getType(je),this.feed_actions=this.memo.getType(tr)[0]}async getContinuation(){const e=await this.getContinuationData();if(!e)throw new Error("No continuation data found");return new jr(this.actions,e,!0)}async removeVideo(e){let i;for(const a of this.sections)for(const l of a.contents){const d=l;if(d.video_id===e&&d.menu){i=d.menu.top_level_buttons[0].as(S).endpoint.payload.feedbackToken;break}}if(!i)throw new Error("Failed to get feedback token");const n={feedbackTokens:[i]};if(!(await this.actions.execute("/feedback",n)).data.feedbackResponses[0].isProcessed)throw new Error("Failed to remove video from watch history");return!0}}let NS=class Ta extends Kh{constructor(e,i,n=!1){super(e,i,n),this.header=this.memo.getType(qu)[0],this.contents=this.memo.getType(An)[0]||this.page.on_response_received_actions?.[0]}async applyFilter(e){const i=await super.getFilteredFeed(e);return new Ta(this.actions,i.page,!0)}async getContinuation(){const e=await super.getContinuation();return e.page.header=this.page.header,this.header&&e.page.header_memo?.set(this.header.type,[this.header]),new Ta(this.actions,e.page,!0)}};class zh extends Kh{constructor(e,i){if(super(e,i),!this.page.contents_memo)throw new m("Unexpected response",this.page);const n=this.page.contents_memo.getType(Oe)[0];if(!n.content)throw new m("Content tab has no content",n);this.page.header&&(this.header=this.page.header.item().as(Ju,Hi)),this.contents=n.content.as(An)}async applyFilter(e){const i=await super.getFilteredFeed(e);return new zh(this.actions,i.page)}}var so,oo,qn;class LS{constructor(e,i){so.set(this,void 0),oo.set(this,void 0),qn.set(this,void 0),v(this,so,e,"f"),v(this,oo,i,"f");const n=e?.live_chat_item_context_menu_supported_renderers;if(!n||!n.is(K))throw new m('Response did not have a "live_chat_item_context_menu_supported_renderers" property. The call may have failed.');v(this,qn,n.as(K).items,"f")}async selectItem(e){let i;if(e instanceof S){if(!e.endpoint)throw new m("Item does not have an endpoint.");i=e.endpoint}else{const n=r(this,qn,"f").find(s=>s.is(Vi)?s.as(Vi).icon_type===e:!1);if(!n||!n.is(Vi))throw new m(`Button "${e}" not found.`);i=n.endpoint}if(!i)throw new m("Target button does not have an endpoint.");return await i.call(r(this,oo,"f"),{parse:!0})}items(){return r(this,qn,"f")}page(){return r(this,so,"f")}}so=new WeakMap,oo=new WeakMap,qn=new WeakMap;var $n,ro;let Xh=class ow extends re{constructor(e,i,n=!1){super(e,i,n),$n.add(this);const s=this.memo.getType(sh)[0],o=this.memo.getType(rh)[0],a=this.memo.getType(ah)[0],l=this.memo.getType(ch)[0],d=this.page.alerts?.firstOfType(Xo);if(d&&d.alert_type==="ERROR")throw new m(d.text.toString(),d);if(!o&&!a&&Object.keys(this.page).length===0)throw new m("Got empty continuation response. This is likely the end of the playlist.");this.info={...this.page.metadata?.item().as(oh),subtitle:s?s.subtitle:null,author:a?.owner?.as(Br).author??s?.author,thumbnails:o?.thumbnail_renderer?.as(lr,ur).thumbnail,total_items:r(this,$n,"m",ro).call(this,0,o),views:r(this,$n,"m",ro).call(this,1,o),last_updated:r(this,$n,"m",ro).call(this,2,o),can_share:s?.can_share,can_delete:s?.can_delete,can_reorder:l?.can_reorder,is_editable:l?.is_editable,privacy:s?.privacy},this.menu=o?.menu,this.endpoint=o?.endpoint,this.messages=this.memo.getType(at)}get items(){return $(this.videos.as(Er,Rr,Lr).filter(e=>e.style!=="PLAYLIST_VIDEO_RENDERER_STYLE_RECOMMENDED_VIDEO"))}get has_continuation(){const e=this.memo.getType(Q)[0];return e?!!this.memo.getType(z).find(i=>!e.contents.includes(i)):super.has_continuation}async getContinuationData(){const e=this.memo.getType(Q)[0];if(!e)return await super.getContinuationData();const i=this.memo.getType(z).find(n=>!e.contents.includes(n));if(!i)throw new m("There are no continuations.");return await i.endpoint.call(this.actions,{parse:!0})}async getContinuation(){const e=await this.getContinuationData();if(!e)throw new m("Could not get continuation data");return new ow(this.actions,e,!0)}};$n=new WeakSet,ro=function(e,i){return!i||!i.stats?"N/A":i.stats[e]?.toString()||"N/A"};var Ca,rw;let OS=class extends re{constructor(e,i){if(super(e,i),Ca.add(this),!this.page.contents_memo)throw new m("Page contents not found");this.header=this.memo.getType(Hi)[0];const n=this.page.contents_memo.getType(Nr);this.sections=n.map(s=>({type:s.icon_type,title:s.title,contents:s.content?.key("items").array()||[],getAll:()=>r(this,Ca,"m",rw).call(this,s)}))}get history(){return this.sections.find(e=>e.type==="WATCH_HISTORY")}get watch_later(){return this.sections.find(e=>e.type==="WATCH_LATER")}get liked_videos(){return this.sections.find(e=>e.type==="LIKE")}get playlists_section(){return this.sections.find(e=>e.type==="PLAYLISTS")}get clips(){return this.sections.find(e=>e.type==="CONTENT_CUT")}};Ca=new WeakSet,rw=async function(e){if(!e.menu?.as(K).top_level_buttons)throw new m(`The ${e.title.text} shelf doesn't have more items`);const i=e.menu.as(K).top_level_buttons.firstOfType(S);if(!i)throw new m("Did not find target button.");const n=await i.as(S).endpoint.call(this.actions,{parse:!0});switch(e.icon_type){case"LIKE":case"WATCH_LATER":return new Xh(this.actions,n,!0);case"WATCH_HISTORY":return new jr(this.actions,n,!0);case"CONTENT_CUT":return new re(this.actions,n,!0);default:throw new m("Target shelf not implemented.")}};var Mt,qt,Ci,$e,nt,Ne;function BS(t){const e=[];for(const i of t)if(Array.isArray(i))for(const n of i)e.push(n);else e.push(i);return e}class VS{constructor(){this.front=[],this.back=[]}isEmpty(){return!this.front.length&&!this.back.length}clear(){this.front=[],this.back=[]}getValues(){return this.front.concat(this.back.reverse())}}class US{constructor(){Mt.set(this,void 0),qt.set(this,void 0),Ci.set(this,void 0),$e.set(this,void 0),nt.set(this,void 0),Ne.set(this,void 0),v(this,Mt,null,"f"),v(this,qt,null,"f"),v(this,Ci,null,"f"),v(this,$e,[],"f"),v(this,nt,null,"f"),v(this,Ne,new VS,"f")}enqueueActionGroup(e){if(r(this,Mt,"f")!==null){const i=Date.now()-r(this,Mt,"f");r(this,Ne,"f").back.push(i),5<r(this,Ne,"f").front.length+r(this,Ne,"f").back.length&&(r(this,Ne,"f").front.length||(r(this,Ne,"f").front=r(this,Ne,"f").back,r(this,Ne,"f").front.reverse(),r(this,Ne,"f").back=[]),r(this,Ne,"f").front.pop()),v(this,qt,Math.max(...r(this,Ne,"f").getValues()),"f")}v(this,Mt,Date.now(),"f"),r(this,$e,"f").push(e),r(this,nt,"f")===null&&v(this,nt,setTimeout(this.emitSmoothedActions.bind(this)),"f")}emitSmoothedActions(){if(v(this,nt,null,"f"),r(this,$e,"f").length){let e=1e4;r(this,qt,"f")!==null&&r(this,Mt,"f")!==null&&(e=r(this,qt,"f")-Date.now()+r(this,Mt,"f")),e=r(this,$e,"f").length<e/80?1:Math.ceil(r(this,$e,"f").length/(e/80));const i=BS(r(this,$e,"f").splice(0,e));r(this,Ci,"f")&&r(this,Ci,"f").call(this,i),r(this,$e,"f")!==null&&(e==1?(e=r(this,qt,"f")/r(this,$e,"f").length,e*=Math.random()+.5,e=Math.min(1e3,e),e=Math.max(80,e)):e=80,v(this,nt,setTimeout(this.emitSmoothedActions.bind(this),e),"f"))}}clear(){r(this,nt,"f")!==null&&(clearTimeout(r(this,nt,"f")),v(this,nt,null,"f")),v(this,$e,[],"f")}set callback(e){v(this,Ci,e,"f")}get callback(){return r(this,Ci,"f")}get action_queue(){return r(this,$e,"f")}get estimated_update_interval(){return r(this,qt,"f")}get last_update_time(){return r(this,Mt,"f")}get next_update_id(){return r(this,nt,"f")}get poll_response_delay_queue(){return r(this,Ne,"f")}}Mt=new WeakMap,qt=new WeakMap,Ci=new WeakMap,$e=new WeakMap,nt=new WeakMap,Ne=new WeakMap;var pe,Ot,as,ao,Oi,Kn,Yn,Ia,co,aw,Mi;class FS extends Am{constructor(e){super(),pe.add(this),Ot.set(this,void 0),as.set(this,void 0),ao.set(this,void 0),Oi.set(this,void 0),Kn.set(this,void 0),Yn.set(this,0),this.running=!1,this.is_replay=!1,v(this,as,e.basic_info.id,"f"),v(this,ao,e.basic_info.channel_id,"f"),v(this,Ot,e.actions,"f"),v(this,Oi,e.livechat?.continuation,"f"),this.is_replay=e.livechat?.is_replay||!1,this.smoothed_queue=new US,this.smoothed_queue.callback=async i=>{i.length?i.length<10?await r(this,pe,"m",co).call(this,i):this.is_replay?(r(this,pe,"m",co).call(this,i),await r(this,pe,"m",Mi).call(this,2e3)):r(this,pe,"m",co).call(this,i):await r(this,pe,"m",Mi).call(this,2e3),this.running&&r(this,pe,"m",Ia).call(this)}}on(e,i){super.on(e,i)}once(e,i){super.once(e,i)}start(){this.running||(this.running=!0,r(this,pe,"m",Ia).call(this),r(this,pe,"m",aw).call(this))}stop(){this.smoothed_queue.clear(),this.running=!1}async sendMessage(e){const i=Y0.encode({params:{ids:{videoId:r(this,as,"f"),channelId:r(this,ao,"f")}},number0:1,number1:4}),n=btoa(encodeURIComponent(We(i.finish()))),s=await r(this,Ot,"f").execute("/live_chat/send_message",{richMessage:{textSegments:[{text:e}]},clientMessageId:V.shim.uuidv4(),client:"WEB",parse:!0,params:n});if(!s.actions)throw new m("Unexpected response from send_message",s);return s.actions.array().as(ll,gu)}applyFilter(e){if(!this.initial_info)throw new m("Cannot apply filter before initial info is retrieved.");const i=this.initial_info?.header?.view_selector?.sub_menu_items;if(e==="TOP_CHAT"){if(i?.at(0)?.selected)return;v(this,Oi,i?.at(0)?.continuation,"f")}else{if(i?.at(1)?.selected)return;v(this,Oi,i?.at(1)?.continuation,"f")}}async getItemMenu(e){if(!e.hasKey("menu_endpoint")||!e.key("menu_endpoint").isInstanceof(f))throw new m("This item does not have a menu.",e);const i=await e.key("menu_endpoint").instanceof(f).call(r(this,Ot,"f"),{parse:!0});if(!i)throw new m("Could not retrieve item menu.",e);return new LS(i,r(this,Ot,"f"))}async selectButton(e){return await e.endpoint.call(r(this,Ot,"f"),{parse:!0})}}Ot=new WeakMap,as=new WeakMap,ao=new WeakMap,Oi=new WeakMap,Kn=new WeakMap,Yn=new WeakMap,pe=new WeakSet,Ia=function t(){(async()=>{var e,i;try{const n=await r(this,Ot,"f").execute(this.is_replay?"live_chat/get_live_chat_replay":"live_chat/get_live_chat",{continuation:r(this,Oi,"f"),parse:!0}),s=n.continuation_contents;if(s||(this.emit("error",new m("Unexpected live chat incremental continuation response",n)),this.emit("end"),this.stop()),!(s instanceof Gh)){this.stop(),this.emit("end");return}v(this,Oi,s.continuation.token,"f"),s.header?(this.initial_info=s,this.emit("start",s),this.running&&r(this,pe,"m",t).call(this)):this.smoothed_queue.enqueueActionGroup(s.actions),v(this,Yn,0,"f")}catch(n){this.emit("error",n),v(this,Yn,(i=r(this,Yn,"f"),e=i++,i),"f"),e<10?(await r(this,pe,"m",Mi).call(this,2e3),r(this,pe,"m",t).call(this)):(this.emit("error",new m("Reached retry limit for incremental continuation requests",n)),this.emit("end"),this.stop())}})()},co=async function(e){let n=e.length<125?1:Math.ceil(e.length/125);const s=n==1?(n=1e4/e.length,n*=Math.random()+.5,n=Math.min(1e3,n),n=Math.max(80,n)):n=80;for(const o of e)await r(this,pe,"m",Mi).call(this,s),this.emit("chat-update",o)},aw=function t(){(async()=>{try{const e={videoId:r(this,as,"f")};r(this,Kn,"f")&&(e.continuation=r(this,Kn,"f"));const i=await r(this,Ot,"f").execute("/updated_metadata",e),n=J(i.data);v(this,Kn,n.continuation?.token,"f"),this.metadata={title:n.actions?.array().firstOfType(wl)||this.metadata?.title,description:n.actions?.array().firstOfType(gl)||this.metadata?.description,views:n.actions?.array().firstOfType(vl)||this.metadata?.views,likes:n.actions?.array().firstOfType(xl)||this.metadata?.likes,date:n.actions?.array().firstOfType(yl)||this.metadata?.date},this.emit("metadata-update",this.metadata),await r(this,pe,"m",Mi).call(this,5e3),this.running&&r(this,pe,"m",t).call(this)}catch{await r(this,pe,"m",Mi).call(this,2e3),this.running&&r(this,pe,"m",t).call(this)}})()},Mi=async function(e){return new Promise(i=>setTimeout(()=>i(),e))};var $t,zn;class Qh{constructor(e,i){if($t.set(this,void 0),zn.set(this,void 0),v(this,zn,e,"f"),v(this,$t,J(i.data),"f"),!r(this,$t,"f").actions_memo)throw new m("Page actions not found");this.header=r(this,$t,"f").actions_memo.getType(Ml)[0],this.contents=r(this,$t,"f").actions_memo.getType(wr)}async getContinuation(){const e=r(this,$t,"f").actions_memo?.getType(z)[0];if(!e)throw new m("Continuation not found");const i=await e.endpoint.call(r(this,zn,"f"),{parse:!1});return new Qh(r(this,zn,"f"),i)}get page(){return r(this,$t,"f")}}$t=new WeakMap,zn=new WeakMap;let HS=class Ea extends re{constructor(e,i,n=!1){super(e,i,n);const s=this.page.contents_memo?.getType(Q)[0].contents||this.page.on_response_received_commands?.[0].as(kt,di).contents;if(!s)throw new m("No contents found in search response");this.page.header&&(this.header=this.page.header.item().as(fh)),this.results=$(s.filterType(je).flatMap(o=>o.contents)),this.refinements=this.page.refinements||[],this.estimated_results=this.page.estimated_results||0,this.page.contents_memo&&(this.sub_menu=this.page.contents_memo.getType(mh)[0],this.watch_card=this.page.contents_memo.getType(Mr)[0]),this.refinement_cards=this.results?.firstOfType(Rs)}async selectRefinementCard(e){let i;if(typeof e=="string"){if(!this.refinement_cards)throw new m("No refinement cards found.");if(i=this.refinement_cards?.cards.get({query:e})?.as(fs),!i)throw new m(`Refinement card "${e}" not found`,{available_cards:this.refinement_card_queries})}else if(e.type==="SearchRefinementCard")i=e;else throw new m("Invalid refinement card!");const n=await i.endpoint.call(this.actions,{parse:!0});return new Ea(this.actions,n,!0)}get refinement_card_queries(){return this.refinement_cards?.cards.as(fs).map(e=>e.query)||[]}async getContinuation(){const e=await this.getContinuationData();if(!e)throw new m("Could not get continuation data");return new Ea(this.actions,e,!0)}};var Ii,Xn;class Jh{constructor(e,i){if(Ii.set(this,void 0),Xn.set(this,void 0),v(this,Xn,e,"f"),v(this,Ii,J(i.data),"f"),this.sidebar=r(this,Ii,"f").sidebar?.as(gh),!r(this,Ii,"f").contents)throw new m("Page contents not found");const n=r(this,Ii,"f").contents.item().as(Mn).tabs.get({selected:!0});if(!n)throw new m("Target tab not found");const s=n.content?.as(Q).contents.as(je);this.introduction=s?.shift()?.contents?.firstOfType(zl),this.sections=s?.map(o=>({title:o.header?.is(Ds,yr,gr)?o.header.title.toString():null,contents:o.contents}))}async selectSidebarItem(e){if(!this.sidebar)throw new m("Sidebar not available");let i;if(typeof e=="string"){if(i=this.sidebar.items.get({title:e}),!i)throw new m(`Item "${e}" not found`,{available_items:this.sidebar_items})}else if(e?.is(En))i=e;else throw new m("Invalid item",{target_item:e});const n=await i.endpoint.call(r(this,Xn,"f"),{parse:!1});return new Jh(r(this,Xn,"f"),n)}getSettingOption(e){if(!this.sections)throw new m("Sections not available");for(const i of this.sections)if(i.contents)for(const n of i.contents){const s=n.as(rs).options;if(s){for(const o of s)if(o.is(Dr)&&o.title?.toString()===e)return o}}throw new m(`Option "${e}" not found`,{available_options:this.setting_options})}get setting_options(){if(!this.sections)throw new m("Sections not available");let e=[];for(const i of this.sections)if(i.contents)for(const n of i.contents)n.as(rs).options&&(e=e.concat(n.as(rs).options));return e.map(i=>i.title?.toString()).filter(i=>i)}get sidebar_items(){if(!this.sidebar)throw new m("Sidebar not available");return this.sidebar.items.map(e=>e.title.toString())}get page(){return r(this,Ii,"f")}}Ii=new WeakMap,Xn=new WeakMap;var Kt;let kd=class cw extends Wr{constructor(e,i,n){super(e,i,n),Kt.set(this,void 0);const[s,o]=this.page;if(this.streaming_data){const _=this.streaming_data.adaptive_formats.find(b=>b.audio_track?.audio_is_default);if(_)this.streaming_data.formats.forEach(b=>b.language=_.language);else if(this.captions?.caption_tracks&&this.captions?.caption_tracks.length>0){const k=this.captions.caption_tracks.find(x=>x.kind==="asr")?.language_code;this.streaming_data.adaptive_formats.forEach(x=>{x.has_audio&&(x.language=k)}),this.streaming_data.formats.forEach(x=>x.language=k)}}const a=o?.contents?.item().as(Or),l=a?.results,d=a?.secondary_results;if(l&&d){if(s.microformat?.is(ot)&&s.microformat?.category==="Gaming"){const x=l.firstOfType(Ao)?.metadata?.rows?.firstOfType(Ro);x?.is(Ro)&&(this.game_info={title:x?.contents?.firstOfType(Po)?.title,release_year:x?.contents?.firstOfType(Po)?.subtitle})}this.primary_info=l.firstOfType(Rh),this.secondary_info=l.firstOfType(Ao),this.merchandise=l.firstOfType(Dl),this.related_chip_cloud=d.firstOfType(hh)?.content.as(hi),a?.playlist&&(this.playlist=a.playlist),this.watch_next_feed=d.firstOfType(je)?.contents||d,this.watch_next_feed&&Array.isArray(this.watch_next_feed)&&this.watch_next_feed.at(-1)?.is(z)&&v(this,Kt,this.watch_next_feed.pop()?.as(z),"f"),this.player_overlays=o?.player_overlays?.item().as(Vs),a?.autoplay&&(this.autoplay=a.autoplay);const _=this.primary_info?.menu?.top_level_buttons.firstOfType(fn);_?.like_button?.is(de)&&_?.dislike_button?.is(de)&&(this.basic_info.like_count=_?.like_button?.like_count,this.basic_info.is_liked=_?.like_button?.is_toggled,this.basic_info.is_disliked=_?.dislike_button?.is_toggled);const b=this.primary_info?.menu?.top_level_buttons.firstOfType(Li);if(b&&(this.basic_info.like_count=b.like_count,b.like_button)){const x=b.like_button.like_status_entity.like_status;this.basic_info.is_liked=x==="LIKE",this.basic_info.is_disliked=x==="DISLIKE"}const k=l.get({target_id:"comments-entry-point"})?.as(je);this.comments_entry_point_header=k?.contents?.firstOfType(Tu),this.livechat=o?.contents_memo?.getType(al)[0]}}async selectFilter(e){if(!this.related_chip_cloud)throw new m("Chip cloud not found, cannot apply filter");let i;if(typeof e=="string"){const o=this.related_chip_cloud?.chips?.get({text:e});if(!o)throw new m("Invalid filter",{available_filters:this.filters});i=o}else if(e?.is(Re))i=e;else throw new m("Invalid cloud chip",e);if(i.is_selected)return this;const s=(await i.endpoint?.call(this.actions,{parse:!0}))?.on_response_received_endpoints?.get({target_id:"watch-next-feed"});return this.watch_next_feed=s?.as(kt,di).contents,this}async addToWatchHistory(){return super.addToWatchHistory()}async getWatchNextContinuation(){if(!r(this,Kt,"f"))throw new m("Watch next feed continuation not found");const i=(await r(this,Kt,"f")?.endpoint.call(this.actions,{parse:!0}))?.on_response_received_endpoints?.get({type:"AppendContinuationItemsAction"});if(!i)throw new m("AppendContinuationItemsAction not found");return this.watch_next_feed=i?.as(kt,di).contents,this.watch_next_feed?.at(-1)?.is(z)?v(this,Kt,this.watch_next_feed.pop()?.as(z),"f"):v(this,Kt,void 0,"f"),this}async like(){const e=this.primary_info?.menu?.top_level_buttons.firstOfType(Li);if(e){const s=e?.like_button?.toggle_button;if(!s||!s.default_button||!e.like_button)throw new m("Like button not found",{video_id:this.basic_info.id});if(e.like_button.like_status_entity.like_status==="LIKE")throw new m("This video is already liked",{video_id:this.basic_info.id});if(!s.default_button.on_tap)throw new m("onTap command not found",{video_id:this.basic_info.id});return await new f(s.default_button.on_tap.payload.commands.find(l=>l.innertubeCommand)).call(this.actions)}const n=this.primary_info?.menu?.top_level_buttons.firstOfType(fn)?.like_button;if(!n)throw new m("Like button not found",{video_id:this.basic_info.id});if(!n.is(de))throw new m("Like button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(n.is_toggled)throw new m("This video is already liked",{video_id:this.basic_info.id});return await n.endpoint.call(this.actions)}async dislike(){const e=this.primary_info?.menu?.top_level_buttons.firstOfType(Li);if(e){const s=e?.dislike_button?.toggle_button;if(!s||!s.default_button||!e.dislike_button||!e.like_button)throw new m("Dislike button not found",{video_id:this.basic_info.id});if(e.like_button.like_status_entity.like_status==="DISLIKE")throw new m("This video is already disliked",{video_id:this.basic_info.id});if(!s.default_button.on_tap)throw new m("onTap command not found",{video_id:this.basic_info.id});return await new f(s.default_button.on_tap.payload.commands.find(l=>l.innertubeCommand)).call(this.actions)}const n=this.primary_info?.menu?.top_level_buttons.firstOfType(fn)?.dislike_button;if(!n)throw new m("Dislike button not found",{video_id:this.basic_info.id});if(!n.is(de))throw new m("Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(n.is_toggled)throw new m("This video is already disliked",{video_id:this.basic_info.id});return await n.endpoint.call(this.actions)}async removeRating(){let e;const i=this.primary_info?.menu?.top_level_buttons.firstOfType(Li);if(i){const a=i?.like_button?.toggle_button;if(!a||!a.default_button||!i.like_button)throw new m("Like button not found",{video_id:this.basic_info.id});const l=i.like_button.like_status_entity.like_status;if(l==="LIKE")e=i?.like_button?.toggle_button;else if(l==="DISLIKE")e=i?.dislike_button?.toggle_button;else throw new m("This video is not liked/disliked",{video_id:this.basic_info.id});if(!e||!e.toggled_button)throw new m("Like/Dislike button not found",{video_id:this.basic_info.id});if(!e.toggled_button.on_tap)throw new m("onTap command not found",{video_id:this.basic_info.id});return await new f(e.toggled_button.on_tap.payload.commands.find(_=>_.innertubeCommand)).call(this.actions)}const n=this.primary_info?.menu?.top_level_buttons.firstOfType(fn),s=n?.like_button,o=n?.dislike_button;if(!s?.is(de)||!o?.is(de))throw new m("Like/Dislike button is not a toggle button. This action is likely disabled for this video.",{video_id:this.basic_info.id});if(s?.is_toggled?e=s:o?.is_toggled&&(e=o),!e)throw new m("This video is not liked/disliked",{video_id:this.basic_info.id});return await e.toggled_endpoint.call(this.actions)}getLiveChat(){if(!this.livechat)throw new m("Live Chat is not available",{video_id:this.basic_info.id});return new FS(this)}getTrailerInfo(){if(this.has_trailer&&this.playability_status?.error_screen){let e;if(this.playability_status.error_screen.is(Eo)?e=this.playability_status.error_screen.trailer?.player_response:this.playability_status.error_screen.is(ws)&&(e=this.playability_status.error_screen.player_response),e)return new cw([{data:e}],this.actions,this.cpn)}return null}get filters(){return this.related_chip_cloud?.chips?.map(e=>e.text?.toString())||[]}get wn_has_continuation(){return!!r(this,Kt,"f")}get autoplay_video_endpoint(){return this.autoplay?.sets?.[0]?.autoplay_video||null}get has_trailer(){return!!this.playability_status?.error_screen?.is(Eo,ws)}get music_tracks(){const e=this.page[1]?.engagement_panels?.filter(i=>i.content?.is(ms));if(e!==void 0&&e.length>0){const i=e[0].content?.as(ms)?.items?.filterType(or);if(i!==void 0&&i.length>0)return i[0].carousel_lockups?.map(n=>{let s,o,a,l,d,_;s=n.video_lockup?.title?.toString(),d=n.video_lockup?.endpoint?.payload.videoId;for(let b=0;b<n.info_rows.length;b++){const k=n.info_rows[b];k.info_row_expand_status_key===void 0?s===void 0?(s=k.default_metadata?.toString()||k.expanded_metadata?.toString(),d===void 0&&(d=(k.default_metadata?.endpoint||k.expanded_metadata?.endpoint)?.payload?.videoId)):a=k.default_metadata?.toString()||k.expanded_metadata?.toString():(k.info_row_expand_status_key?.indexOf("structured-description-music-section-artists-row-state-id")!==-1&&(o=k.default_metadata?.toString()||k.expanded_metadata?.toString(),_===void 0&&(_=(k.default_metadata?.endpoint||k.expanded_metadata?.endpoint)?.payload?.browseId)),k.info_row_expand_status_key?.indexOf("structured-description-music-section-licenses-row-state-id")!==-1&&(l=k.default_metadata?.toString()||k.expanded_metadata?.toString()))}return{song:s,artist:o,album:a,license:l,videoId:d,channelId:_}})}return[]}};Kt=new WeakMap;var sn,Qn;class Zh{constructor(e,i){if(sn.set(this,void 0),Qn.set(this,void 0),v(this,sn,J(i.data),"f"),v(this,Qn,e,"f"),!r(this,sn,"f").actions_memo)throw new Error("Page actions not found");this.transcript=r(this,sn,"f").actions_memo.getType(zo)[0]}async selectLanguage(e){const i=this.transcript.content?.footer?.language_menu?.sub_menu_items?.find(s=>s.title.toString()===e);if(!i)throw new Error(`Language not found: ${e}`);if(i.selected)return this;const n=await r(this,Qn,"f").execute("/get_transcript",{params:i.continuation});return new Zh(r(this,Qn,"f"),n)}get languages(){return this.transcript.content?.footer?.language_menu?.sub_menu_items?.map(e=>e.title.toString())||[]}get selectedLanguage(){return this.transcript.content?.footer?.language_menu?.sub_menu_items?.find(e=>e.selected)?.title.toString()||""}get page(){return r(this,sn,"f")}}sn=new WeakMap,Qn=new WeakMap;var mt;class WS{constructor(e){if(mt.set(this,void 0),v(this,mt,J(e.data),"f"),!r(this,mt,"f").contents_memo)throw new Error("No contents found in the response");this.header=r(this,mt,"f").contents_memo.getType(Tr,Ir)?.[0],this.contents=r(this,mt,"f").contents_memo.getType(be)?.[0].contents||$([]),this.sections=r(this,mt,"f").contents_memo.getType(Ye)||$([]),this.background=r(this,mt,"f").background,this.url=r(this,mt,"f").microformat?.as(Fi).url_canonical}get page(){return r(this,mt,"f")}}mt=new WeakMap;var on,uo;class jS{constructor(e,i){on.set(this,void 0),uo.set(this,void 0),v(this,on,J(e.data),"f"),v(this,uo,i,"f"),this.header=this.page.header?.item().as(Wl,Kl,Bs);const n=r(this,on,"f").contents_memo?.getType(be)||[],s=r(this,on,"f").contents_memo?.getType(Ye)||[];this.sections=$([...n,...s])}async getAllSongs(){const e=this.sections.filter(s=>s.type==="MusicShelf");if(!e.length)throw new m("Could not find any node of type MusicShelf.");const i=e.find(s=>s.title.toString()==="Songs");if(!i)throw new m("Could not find target shelf (Songs).");if(!i.endpoint)throw new m("Target shelf (Songs) did not have an endpoint.");return(await i.endpoint.call(r(this,uo,"f"),{client:"YTMUSIC",parse:!0})).contents_memo?.getType(gs)?.[0]}get page(){return r(this,on,"f")}}on=new WeakMap,uo=new WeakMap;var Jn;class GS{constructor(e){Jn.set(this,void 0),v(this,Jn,J(e.data),"f");const i=r(this,Jn,"f").contents?.item().as(Us).tabs.get({selected:!0});if(!i)throw new m("Could not find target tab.");const n=i.content?.as(Q);if(!n)throw new m("Target tab did not have any content.");this.top_buttons=n.contents.firstOfType(bs)?.items.as(kr)||[],this.sections=n.contents.filterType(Ye)}get page(){return r(this,Jn,"f")}}Jn=new WeakMap;var Yt,Ei,Pi;let qS=class Pa{constructor(e,i){Yt.set(this,void 0),Ei.set(this,void 0),Pi.set(this,void 0),v(this,Ei,i,"f"),v(this,Yt,J(e.data),"f");const n=r(this,Yt,"f").contents?.item().as(Us).tabs.get({selected:!0});if(!n)throw new m("Could not find Home tab.");if(n.content===null){if(!r(this,Yt,"f").continuation_contents)throw new m("Continuation did not have any content.");v(this,Pi,r(this,Yt,"f").continuation_contents.as(Gi).continuation,"f"),this.sections=r(this,Yt,"f").continuation_contents.as(Gi).contents?.as(Ye);return}this.header=n.content?.as(Q).header?.as(hi),v(this,Pi,n.content?.as(Q).continuation,"f"),this.sections=n.content?.as(Q).contents.as(Ye,$l)}async getContinuation(){if(!r(this,Pi,"f"))throw new m("Continuation not found.");const e=await r(this,Ei,"f").execute("/browse",{client:"YTMUSIC",continuation:r(this,Pi,"f")});return new Pa(e,r(this,Ei,"f"))}async applyFilter(e){let i;if(typeof e=="string"){if(i=this.header?.chips?.as(Re).get({text:e}),!i)throw new m("Could not find filter with given name.",{available_filters:this.filters})}else e?.is(Re)&&(i=e);if(!i)throw new m("Invalid filter",{available_filters:this.filters});if(i?.is_selected)return this;if(!i.endpoint)throw new m("Selected filter does not have an endpoint.");const n=await i.endpoint.call(r(this,Ei,"f"),{client:"YTMUSIC"});return new Pa(n,r(this,Ei,"f"))}get filters(){return this.header?.chips?.as(Re).map(e=>e.text)||[]}get has_continuation(){return!!r(this,Pi,"f")}get page(){return r(this,Yt,"f")}};Yt=new WeakMap,Ei=new WeakMap,Pi=new WeakMap;var _t,zt,rn,an,Zn,cn;class ep{constructor(e,i){_t.set(this,void 0),zt.set(this,void 0),rn.set(this,void 0),v(this,_t,J(e.data),"f"),v(this,zt,i,"f");const n=r(this,_t,"f").contents_memo?.getType(Q)[0];this.header=n?.header?.as(Gl),this.contents=n?.contents?.as(bs,be),v(this,rn,this.contents?.find(s=>s.continuation)?.continuation,"f")}async applySort(e){let i;if(typeof e=="string"){const l=r(this,_t,"f").contents_memo?.getType(Io)[0]?.menu?.options.filter(d=>d instanceof Ui);if(i=l?.find(d=>d.title===e),!i)throw new m(`Sort option "${e}" not found`,{available_filters:l.map(d=>d.title)})}else i=e;if(!i.endpoint)throw new m("Invalid sort option");if(i.selected)return this;const n=i.endpoint.payload?.commands?.find(a=>a.browseSectionListReloadEndpoint)?.browseSectionListReloadEndpoint;if(!n)throw new m("Failed to find sort option command");const s=await r(this,zt,"f").execute("/browse",{client:"YTMUSIC",continuation:n.continuation.reloadContinuationData.continuation,parse:!0}),o=r(this,_t,"f").contents_memo?.getType(Ui)?.find(a=>a.selected);return o&&(o.selected=!1),i.selected=!0,this.contents=s.continuation_contents?.as(Gi).contents?.as(bs,be),this}async applyFilter(e){let i;const n=r(this,_t,"f").contents_memo?.getType(hi)[0];if(typeof e=="string"){if(i=n?.chips.get({text:e}),!i)throw new m(`Filter "${e}" not found`,{available_filters:this.filters})}else i=e;if(!i.endpoint)throw new m("Invalid filter",e);const o=await new f(i.endpoint.payload?.commands?.[0]).call(r(this,zt,"f"),{client:"YTMUSIC"});return new ep(o,r(this,zt,"f"))}async getContinuation(){if(!r(this,rn,"f"))throw new m("No continuation available");const e=await r(this,zt,"f").execute("/browse",{client:"YTMUSIC",continuation:r(this,rn,"f")});return new tp(e,r(this,zt,"f"))}get has_continuation(){return!!r(this,rn,"f")}get sort_options(){return(r(this,_t,"f").contents_memo?.getType(Io)[0]?.menu?.options.filter(n=>n instanceof Ui)).map(n=>n.title)}get filters(){return r(this,_t,"f").contents_memo?.getType(hi)?.[0].chips.map(e=>e.text)||[]}get page(){return r(this,_t,"f")}}_t=new WeakMap,zt=new WeakMap,rn=new WeakMap;class tp{constructor(e,i){if(an.set(this,void 0),Zn.set(this,void 0),cn.set(this,void 0),v(this,an,J(e.data),"f"),v(this,Zn,i,"f"),!r(this,an,"f").continuation_contents)throw new m("No continuation contents found");this.contents=r(this,an,"f").continuation_contents.as(Fr,Hh),v(this,cn,this.contents.continuation||null,"f")}async getContinuation(){if(!r(this,cn,"f"))throw new m("No continuation available");const e=await r(this,Zn,"f").execute("/browse",{client:"YTMUSIC",continuation:r(this,cn,"f")});return new tp(e,r(this,Zn,"f"))}get has_continuation(){return!!r(this,cn,"f")}get page(){return r(this,an,"f")}}an=new WeakMap,Zn=new WeakMap,cn=new WeakMap;var Ra,Pe,ti,bt,un,cs,uw;class Gr{constructor(e,i){if(Ra.add(this),Pe.set(this,void 0),ti.set(this,void 0),bt.set(this,void 0),un.set(this,void 0),cs.set(this,void 0),v(this,ti,i,"f"),v(this,Pe,J(e.data),"f"),v(this,un,null,"f"),v(this,cs,null,"f"),r(this,Pe,"f").continuation_contents){const n=r(this,Pe,"f").continuation_contents?.as(Fh);if(!n.contents)throw new m("No contents found in the response");this.contents=n.contents.as(Vt,z);const s=this.contents.firstOfType(z);v(this,bt,n.continuation||s,"f")}else if(r(this,Pe,"f").contents_memo){this.header=r(this,Pe,"f").contents_memo.getType(Ir,Hl,Tr)?.[0],this.contents=r(this,Pe,"f").contents_memo.getType(gs)?.[0]?.contents.as(Vt,z)||$([]),this.background=r(this,Pe,"f").background;const n=this.contents.firstOfType(z);v(this,bt,r(this,Pe,"f").contents_memo.getType(gs)?.[0]?.continuation||n,"f")}else if(r(this,Pe,"f").on_response_received_actions){const n=r(this,Pe,"f").on_response_received_actions.firstOfType(kt);this.contents=n?.contents?.as(Vt,z),v(this,bt,this.contents?.firstOfType(z),"f")}}async getContinuation(){if(!r(this,bt,"f"))throw new m("Continuation not found.");let e;return typeof r(this,bt,"f")=="string"?e=await r(this,ti,"f").execute("/browse",{client:"YTMUSIC",continuation:r(this,bt,"f")}):e=await r(this,bt,"f").endpoint.call(r(this,ti,"f"),{client:"YTMUSIC"}),new Gr(e,r(this,ti,"f"))}async getRelated(){const e=r(this,Pe,"f").contents_memo?.getType(Q).find(n=>n.continuation);if(!e)throw new m('Could not find "Related" section.');let i=e.continuation;for(;i;){const s=(await r(this,ti,"f").execute("/browse",{client:"YTMUSIC",continuation:i,parse:!0})).continuation_contents?.as(Gi),a=s?.contents?.as(Ye,be)?.find(l=>l.is(Ye))?.as(Ye);if(a)return a;i=s?.continuation}throw new m("Could not fetch related playlists.")}async getSuggestions(e=!0){const s=await(e||!r(this,un,"f")?r(this,Ra,"m",uw).call(this):Promise.resolve(null));return s&&(v(this,un,s.items,"f"),v(this,cs,s.continuation,"f")),s?.items||r(this,un,"f")||$([])}get page(){return r(this,Pe,"f")}get items(){return this.contents||$([])}get has_continuation(){return!!r(this,bt,"f")}}Pe=new WeakMap,ti=new WeakMap,bt=new WeakMap,un=new WeakMap,cs=new WeakMap,Ra=new WeakSet,uw=async function(){const e=r(this,Pe,"f").contents_memo?.getType(Q).find(n=>n.continuation),i=r(this,cs,"f")||e?.continuation;if(i){const a=(await r(this,ti,"f").execute("/browse",{client:"YTMUSIC",continuation:i,parse:!0})).continuation_contents?.as(Gi)?.contents?.as(Ye,be)?.find(l=>l.is(be))?.as(be);return{items:a?.contents||$([]),continuation:a?.continuation||null}}return{items:$([]),continuation:null}};var Xt,es;class $S{constructor(e,i){Xt.set(this,void 0),es.set(this,void 0),v(this,Xt,J(e.data),"f"),v(this,es,i,"f");const n=r(this,Xt,"f").header?.item();this.header=n?.is(Co)?r(this,Xt,"f").header?.item().as(Co).element?.model?.as(To):r(this,Xt,"f").header?.item().as(Bs);const s=r(this,Xt,"f").contents?.item().as(Us).tabs.firstOfType(Oe);if(!s)throw new m("Target tab not found");this.sections=s.content?.as(Q).contents.as(je,Ye,at)}async getPlaylist(){if(!this.header)throw new m("Header not found");if(!this.header.is(To))throw new m("Recap playlist not available, check back later.");const i=await this.header.panels[0].text_on_tap_endpoint.call(r(this,es,"f"),{client:"YTMUSIC"});return new Gr(i,r(this,es,"f"))}get page(){return r(this,Xt,"f")}}Xt=new WeakMap,es=new WeakMap;var yt,Dt,ln,ts,hn;let KS=class Aa{constructor(e,i,n){if(yt.set(this,void 0),Dt.set(this,void 0),ln.set(this,void 0),v(this,Dt,i,"f"),v(this,yt,J(e.data),"f"),!r(this,yt,"f").contents||!r(this,yt,"f").contents_memo)throw new m("Response did not contain any contents.");const s=r(this,yt,"f").contents.item().as(Ch).tabs.get({selected:!0});if(!s)throw new m("Could not find target tab.");const o=s.content?.as(Q);if(!o)throw new m("Target tab did not have any content.");this.header=o.header?.as(hi),this.contents=o.contents.as(be,Ol,je),n&&v(this,ln,this.contents.firstOfType(be)?.continuation,"f")}async getMore(e){if(!e||!e.endpoint)throw new m("Cannot retrieve more items for this shelf because it does not have an endpoint.");const i=await e.endpoint.call(r(this,Dt,"f"),{client:"YTMUSIC"});if(!i)throw new m("Endpoint did not return any data");return new Aa(i,r(this,Dt,"f"),!0)}async getContinuation(){if(!r(this,ln,"f"))throw new m("Continuation not found.");const e=await r(this,Dt,"f").execute("/search",{continuation:r(this,ln,"f"),client:"YTMUSIC"});return new ip(r(this,Dt,"f"),e)}async applyFilter(e){let i;if(typeof e=="string"){if(i=this.header?.chips?.as(Re).get({text:e}),!i)throw new m("Could not find filter with given name.",{available_filters:this.filters})}else e?.is(Re)&&(i=e);if(!i)throw new m("Invalid filter",{available_filters:this.filters});if(i?.is_selected)return this;if(!i.endpoint)throw new m("Selected filter does not have an endpoint.");const n=await i.endpoint.call(r(this,Dt,"f"),{client:"YTMUSIC"});return new Aa(n,r(this,Dt,"f"),!0)}get filters(){return this.header?.chips?.as(Re).map(e=>e.text)||[]}get has_continuation(){return!!r(this,ln,"f")}get did_you_mean(){return r(this,yt,"f").contents_memo?.getType(Vu)[0]}get showing_results_for(){return r(this,yt,"f").contents_memo?.getType(kh)[0]}get message(){return r(this,yt,"f").contents_memo?.getType(at)[0]}get songs(){return this.contents?.filterType(be).find(e=>e.title.toString()==="Songs")}get videos(){return this.contents?.filterType(be).find(e=>e.title.toString()==="Videos")}get albums(){return this.contents?.filterType(be).find(e=>e.title.toString()==="Albums")}get artists(){return this.contents?.filterType(be).find(e=>e.title.toString()==="Artists")}get playlists(){return this.contents?.filterType(be).find(e=>e.title.toString()==="Community playlists")}get page(){return r(this,yt,"f")}};yt=new WeakMap,Dt=new WeakMap,ln=new WeakMap;class ip{constructor(e,i){ts.set(this,void 0),hn.set(this,void 0),v(this,ts,e,"f"),v(this,hn,J(i.data),"f"),this.header=r(this,hn,"f").header?.item().as(Bs),this.contents=r(this,hn,"f").continuation_contents?.as(Fr)}async getContinuation(){if(!this.contents?.continuation)throw new m("Continuation not found.");const e=await r(this,ts,"f").execute("/search",{continuation:this.contents.continuation,client:"YTMUSIC"});return new ip(r(this,ts,"f"),e)}get has_continuation(){return!!this.contents?.continuation}get page(){return r(this,hn,"f")}}ts=new WeakMap,hn=new WeakMap;class Sd extends Wr{constructor(e,i,n){super(e,i,n);const s=this.page[1];if(s){const o=s.contents_memo?.getType(Mh)?.[0];this.tabs=o?.tabs.as(Oe),this.current_video_endpoint=s.current_video_endpoint,this.player_overlays=s.player_overlays?.item().as(Vs)}}async getTab(e){if(!this.tabs)throw new m("Could not find any tab");const i=this.tabs.get({title:e})||this.tabs.find(s=>s.endpoint.payload.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType===e)||this.tabs?.[0];if(!i)throw new m(`Tab "${e}" not found`,{available_tabs:this.available_tabs});if(i.content)return i.content;const n=await i.endpoint.call(this.actions,{client:"YTMUSIC",parse:!0});if(n.contents?.item().type==="Message")return n.contents.item().as(at);if(!n.contents)throw new m("Page contents was empty",n);return n.contents.item().as(Q).contents}async getUpNext(e=!0){const i=await this.getTab("Up next");if(!i||!i.content)throw new m("Music queue was empty, the video id is probably invalid.",i);const n=i.content.as(ri);if(!n.playlist_id&&e){const s=n.contents.firstOfType(Cs);if(!s)throw new m("Automix item not found");const o=await s.playlist_video?.endpoint.call(this.actions,{videoId:this.basic_info.id,client:"YTMUSIC",parse:!0});if(!o||!o.contents_memo)throw new m("Could not fetch automix");return o.contents_memo.getType(ri)?.[0]}return n}async getUpNextContinuation(e){if(!this.current_video_endpoint)throw new m("Current Video Endpoint was not defined.",this.current_video_endpoint);if(e instanceof ri&&e.playlist_id!==this.current_video_endpoint.payload.playlistId)throw new m("PlaylistId from TrackInfo does not match with PlaylistPanel");const n=await new f({watchNextEndpoint:{...this.current_video_endpoint.payload,continuation:e.continuation}}).call(this.actions,{...this.current_video_endpoint.payload,continuation:e.continuation,client:"YTMUSIC",parse:!0}),s=n.continuation_contents?.as(Wh);if(!s)throw new m("No PlaylistPanel Continuation available.",n);return s}async getRelated(){return await this.getTab("MUSIC_PAGE_TYPE_TRACK_RELATED")}async getLyrics(){return(await this.getTab("MUSIC_PAGE_TYPE_TRACK_LYRICS")).firstOfType(Os)}async addToWatchHistory(){return super.addToWatchHistory(D.YTMUSIC.NAME,D.YTMUSIC.VERSION,"https://music.")}get available_tabs(){return this.tabs?this.tabs.map(e=>e.title):[]}}class np extends re{constructor(e,i,n=!1){super(e,i,n),this.header=this.page.header?.item().as(yn),this.contents=this.memo.getType(je)[0]||this.page.continuation_contents?.as(Vh)}async getContinuation(){if(!this.contents)throw new Error("No continuation available.");const i=await new f({continuationCommand:{token:this.contents.continuation,request:"CONTINUATION_REQUEST_TYPE_BROWSE"}}).call(this.actions,{client:"YTKIDS"});return new np(this.actions,i)}get has_continuation(){return!!this.contents?.continuation}}class sp extends re{constructor(e,i,n=!1){super(e,i,n),this.header=this.page.header?.item().as(Nh),this.contents=this.page.contents?.item().as(Lh)}async selectCategoryTab(e){let i;if(typeof e=="string"?i=this.header?.category_tabs.find(s=>s.title.toString()===e):e?.is(Ur)&&(i=e),!i)throw new m(`Tab "${e}" not found`);const n=await i.endpoint.call(this.actions,{client:"YTKIDS",parse:!0});return n.header=this.page.header,n.header_memo=this.page.header_memo,new sp(this.actions,n,!0)}get categories(){return this.header?.category_tabs.map(e=>e.title.toString())||[]}}class YS extends re{constructor(e,i){super(e,i),this.estimated_results=this.page.estimated_results;const n=this.memo.getType(je)[0];if(!n)throw new m("No item section found in search response.");this.contents=n.contents}}class zS extends Wr{constructor(e,i,n){super(e,i,n);const s=this.page[1],o=s?.contents?.item().as(Or),a=o?.results,l=o?.secondary_results;a&&l&&(this.slim_video_metadata=a.firstOfType(je)?.contents?.firstOfType(Sh),this.watch_next_feed=l.firstOfType(je)?.contents||l,this.current_video_endpoint=s?.current_video_endpoint,this.player_overlays=s?.player_overlays?.item().as(Vs))}}var Ri;class XS extends Wr{constructor(e,i,n,s){if(super(e,i,n),Ri.set(this,void 0),s){const o=J(s.data);o.entries&&(this.watch_next_feed=o.entries),o.continuation_endpoint&&v(this,Ri,o.continuation_endpoint?.as(Do),"f")}}async getWatchNextContinuation(){if(!r(this,Ri,"f"))throw new m("Continuation not found");const e=await this.actions.execute("/reel/reel_watch_sequence",{sequenceParams:r(this,Ri,"f").token,parse:!0});return e.entries&&(this.watch_next_feed=e.entries),v(this,Ri,e.continuation_endpoint?.as(Do),"f"),this}get wn_has_continuation(){return!!r(this,Ri,"f")}}Ri=new WeakMap;class G{constructor(e,i,n,s){const o=new c(e);this.id=s||o?.runs?.[0]?.endpoint?.payload?.browseId||o?.endpoint?.payload?.browseId||"N/A",this.name=o?.text||"N/A",this.thumbnails=n?w.fromResponse(n):[],this.endpoint=o?.runs?.[0]?.endpoint||o?.endpoint,i?Array.isArray(i)?(this.badges=g(i),this.is_moderator=this.badges?.some(a=>a.icon_type=="MODERATOR"),this.is_verified=this.badges?.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED"),this.is_verified_artist=this.badges?.some(a=>a.style=="BADGE_STYLE_TYPE_VERIFIED_ARTIST")):(this.badges=$([]),this.is_verified=!!i.isVerified,this.is_verified_artist=!!i.isArtist):this.badges=$([]),this.url=o?.runs?.[0]?.endpoint?.metadata?.api_url==="/browse"&&`${te.YT_BASE}${o?.runs?.[0]?.endpoint?.payload?.canonicalBaseUrl||`/u/${o?.runs?.[0]?.endpoint?.payload?.browseId}`}`||`${te.YT_BASE}${o?.endpoint?.payload?.canonicalBaseUrl||`/u/${o?.endpoint?.payload?.browseId}`}`}get best_thumbnail(){return this.thumbnails[0]}}const QS={desktop:["Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.3 Safari/605.1.15","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36 Edg/109.0.1518.61","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Safari/605.1.15","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/105.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36","Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36"],mobile:["Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; SM-G990U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-G998B) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) FxiOS/108.1  Mobile/15E148 Safari/605.1.15","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 11_4_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15G77 ChannelId(73) NebulaSDK/1.8.100112 Nebula PSDType(1) AlipayDefined(nt:4G,ws:320|504|2.0) AliApp(AP/10.1.30.300) AlipayClient/10.1.30.300 Alipay Language/zh-Hans","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 13; SM-N981U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (Linux; Android 13; SM-A515F) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.0 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 12; M2010J19SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 15_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.5 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 15_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.1 Mobile/15E148 Safari/604.1","Mozilla/5.0 (iPhone; CPU iPhone OS 16_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/109.0.5414.83 Mobile/15E148 Safari/604.1","Mozilla/5.0 (Linux; Android 11; M2102J20SG) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Mobile Safari/537.36","Mozilla/5.0 (iPhone; CPU iPhone OS 16_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.2 Mobile/15E148 Safari/604.1"]};let sa;class V{static load(e){sa=e}static get shim(){if(!sa)throw new Error("Platform is not loaded");return sa}}class m extends Error{constructor(e,i){super(e),i&&(this.info=i),this.date=new Date,this.version=V.shim.info.version}}class qi extends m{}class JS extends m{}class ye extends m{}class Yi extends Error{}class Td extends Error{}class ZS extends Error{}function Cd(t,e){return Reflect.ownKeys(t).some(n=>{const s=e[n]instanceof c;return!s&&typeof e[n]=="object"?JSON.stringify(t[n])===JSON.stringify(e[n]):t[n]===(s?e[n].toString():e[n])})}function rt(t,e,i){const n=new RegExp(`${Id(e)}(.*?)${Id(i)}`,"s"),s=t.match(n);return s?s[1]:void 0}function Id(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function lw(t){const e=QS[t],i=Math.floor(Math.random()*e.length);return e[i]}async function eT(t){const e="https://www.youtube.com",i=Math.floor(new Date().getTime()/1e3),n=[i,t,e].join(" "),s=await V.shim.sha1Hash(n);return["SAPISIDHASH",[i,s].join("_")].join(" ")}function ai(t){const e=[],i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";for(let n=0;n<t;n++)e.push(i.charAt(Math.floor(Math.random()*i.length)));return e.join("")}function Ht(t){const e=t.split(":").map(i=>parseInt(i.replace(/\D/g,"")));switch(e.length){case 1:return e[0];case 2:return e[0]*60+e[1];case 3:return e[0]*3600+e[1]*60+e[2];default:throw new Error("Invalid time string")}}function tT(...t){const e=new Rm;for(const i of t)if(i)for(const n of i){const s=e.get(n[0]);if(s){e.set(n[0],[...s,...n[1]]);continue}e.set(...n)}return e}function j(t){for(const[e,i]of Object.entries(t))if(!i)throw new JS(`${e} is missing`)}async function*iT(t){const e=t.getReader();try{for(;;){const{done:i,value:n}=await e.read();if(i)return;yield n}}finally{e.releaseLock()}}function We(t){return btoa(String.fromCharCode.apply(null,Array.from(t)))}function hw(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),i=e.padEnd(e.length+(4-e.length%4)%4,"=");return new Uint8Array(atob(i).split("").map(n=>n.charCodeAt(0)))}function Ve(t){return!("emoji"in t)}function nT(t,e,i=!1){const n=i?`(^|\\s?)\\b${e}\\b=([^;]+)`:`(^|s?)${e}=([^;]+)`,s=t.match(new RegExp(n));return s?s[2]:void 0}function zi(t,e){const{name:i,includes:n,regexp:s,ast:o}=e,l=[o||In.parseScript(t)];for(let d=0;d<l.length;d++){const _=l[d];if(_.type==="ExpressionStatement"&&_.expression.type==="AssignmentExpression"&&_.expression.left.type==="Identifier"&&_.expression.right.type==="FunctionExpression"){const b=t.substring(_.start,_.end);if(i&&_.expression.left.name===i||n&&b.includes(n)||s&&s.test(b))return{start:_.start,end:_.end,name:_.expression.left.name,node:_,result:b}}for(const b in _){const k=_[b];Array.isArray(k)?l.push(...k):typeof k=="object"&&k!==null&&l.push(k)}}}function Nn(t,e){const i=e.ast?e.ast:In.parseScript(t,{ecmaVersion:"latest",ranges:!0});let n;function s(o){if(!n){if(o.type==="VariableDeclaration"){const[a,l]=o.range,d=t.slice(a,l);for(const _ of o.declarations)if(_.id.type==="Identifier"){const b=_.id.name;if(e.name&&b===e.name){n={start:a,end:l,name:b,node:o,result:d};return}}if(e.includes&&d.includes(e.includes)||e.regexp&&e.regexp.test(d)){n={start:a,end:l,name:o.declarations?.[0]?.id?.name,node:o,result:d};return}}for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)){const l=o[a];if(Array.isArray(l)){for(const d of l)if(d&&typeof d.type=="string"&&(s(d),n))return}else if(l&&typeof l.type=="string"&&(s(l),n))return}}}return s(i),n}async function sT(t){const e=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function i(n){const s=new Uint8Array(n),o=[];for(let a=0;a<s.length;++a)o.push(e[s[a]]);return o.join("")}return i(await crypto.subtle.digest("SHA-1",new TextEncoder().encode(t)))}const oT="13.4.0",rT={url:"https://github.com/LuanRT/YouTube.js/issues"},aT="https://github.com/LuanRT/YouTube.js#readme",oa={version:oT,bugs:rT,homepage:aT};var Qt,xe,pw,pn;const Ln="OAuth2";class cT{constructor(e){Qt.add(this),xe.set(this,void 0),v(this,xe,e,"f"),this.YTTV_URL=new URL("/tv",te.YT_BASE),this.AUTH_SERVER_CODE_URL=new URL("/o/oauth2/device/code",te.YT_BASE),this.AUTH_SERVER_TOKEN_URL=new URL("/o/oauth2/token",te.YT_BASE),this.AUTH_SERVER_REVOKE_TOKEN_URL=new URL("/o/oauth2/revoke",te.YT_BASE)}async init(e){if(e){this.setTokens(e),this.shouldRefreshToken()&&await this.refreshAccessToken(),r(this,xe,"f").emit("auth",{credentials:this.oauth2_tokens});return}if(await r(this,Qt,"m",pw).call(this)){ke(Ln,"Loaded OAuth2 tokens from cache.",this.oauth2_tokens);return}this.client_id||(this.client_id=await this.getClientID());const n=await this.getDeviceAndUserCode();r(this,xe,"f").emit("auth-pending",n),this.pollForAccessToken(n)}setTokens(e){const i=e;if(i.expires_in&&(i.expiry_date=new Date(Date.now()+i.expires_in*1e3).toISOString(),delete i.expires_in),!this.validateTokens(i))throw new ye("Invalid tokens provided.");this.oauth2_tokens=i,i.client&&(ke(Ln,"Using provided client id and secret."),this.client_id=i.client)}async cacheCredentials(){const i=new TextEncoder().encode(JSON.stringify(this.oauth2_tokens));await r(this,xe,"f").cache?.set("youtubei_oauth_credentials",i.buffer)}async removeCache(){await r(this,xe,"f").cache?.remove("youtubei_oauth_credentials")}pollForAccessToken(e){if(!this.client_id)throw new ye("Client ID is missing.");const{device_code:i,interval:n}=e,{client_id:s,client_secret:o}=this.client_id,a={client_id:s,client_secret:o,code:i,grant_type:"http://oauth.net/grant_type/device/1.0"},l=setInterval(async()=>{const _=await(await r(this,Qt,"a",pn).fetch_function(this.AUTH_SERVER_TOKEN_URL,{body:JSON.stringify(a),method:"POST",headers:{"Content-Type":"application/json"}})).json();if(_.error){switch(_.error){case"access_denied":r(this,xe,"f").emit("auth-error",new ye("Access was denied.",_)),clearInterval(l);break;case"expired_token":r(this,xe,"f").emit("auth-error",new ye("The device code has expired.",_)),clearInterval(l);break;case"authorization_pending":case"slow_down":ke(Ln,"Polling for access token...");break;default:r(this,xe,"f").emit("auth-error",new ye("Server returned an unexpected error.",_)),clearInterval(l);break}return}this.setTokens(_),r(this,xe,"f").emit("auth",{credentials:this.oauth2_tokens}),clearInterval(l)},n*1e3)}async revokeCredentials(){if(!this.oauth2_tokens)throw new ye("Access token not found");await this.removeCache();const e=this.AUTH_SERVER_REVOKE_TOKEN_URL;return e.searchParams.set("token",this.oauth2_tokens.access_token),r(this,xe,"f").http.fetch_function(e,{method:"POST"})}async refreshAccessToken(){if(this.client_id||(this.client_id=await this.getClientID()),!this.oauth2_tokens)throw new ye("No tokens available to refresh.");const{client_id:e,client_secret:i}=this.client_id,{refresh_token:n}=this.oauth2_tokens,s={client_id:e,client_secret:i,refresh_token:n,grant_type:"refresh_token"},o=await r(this,Qt,"a",pn).fetch_function(this.AUTH_SERVER_TOKEN_URL,{body:JSON.stringify(s),method:"POST",headers:{"Content-Type":"application/json"}});if(!o.ok)throw new ye(`Failed to refresh access token: ${o.status}`);const a=await o.json();if(a.error_code)throw new ye("Authorization server returned an error",a);this.oauth2_tokens.access_token=a.access_token,this.oauth2_tokens.expiry_date=new Date(Date.now()+a.expires_in*1e3).toISOString(),r(this,xe,"f").emit("update-credentials",{credentials:this.oauth2_tokens})}async getDeviceAndUserCode(){if(!this.client_id)throw new ye("Client ID is missing.");const{client_id:e}=this.client_id,i={client_id:e,scope:"http://gdata.youtube.com https://www.googleapis.com/auth/youtube-paid-content",device_id:V.shim.uuidv4(),device_model:"ytlr::"},n=await r(this,Qt,"a",pn).fetch_function(this.AUTH_SERVER_CODE_URL,{body:JSON.stringify(i),method:"POST",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new ye(`Failed to get device/user code: ${n.status}`);const s=await n.json();if(s.error_code)throw new ye("Authorization server returned an error",s);return s}async getClientID(){const e=await r(this,Qt,"a",pn).fetch_function(this.YTTV_URL,{headers:{"User-Agent":"Mozilla/5.0 (ChromiumStylePlatform) Cobalt/Version",Referer:"https://www.youtube.com/tv","Accept-Language":"en-US"}});if(!e.ok)throw new ye(`Failed to get client ID: ${e.status}`);const i=await e.text();let n;if((n=Mp.REGEX.TV_SCRIPT.exec(i))!==null){ke(Ln,`Got YouTubeTV script URL (${n[1]})`);const s=await r(this,Qt,"a",pn).fetch(n[1],{baseURL:te.YT_BASE});if(!s.ok)throw new ye(`TV script request failed with status code ${s.status}`);const a=(await s.text()).match(Mp.REGEX.CLIENT_IDENTITY);if(!a||!a.groups)throw new ye("Could not obtain client ID.");const{client_id:l,client_secret:d}=a.groups;return ke(Ln,`Client identity retrieved (clientId=${l}, clientSecret=${d}).`),{client_id:l,client_secret:d}}throw new ye("Could not obtain script URL.")}shouldRefreshToken(){return this.oauth2_tokens?Date.now()>new Date(this.oauth2_tokens.expiry_date).getTime():!1}validateTokens(e){return!(!e.access_token||!e.refresh_token||!e.expiry_date)}}xe=new WeakMap,Qt=new WeakSet,pw=async function(){const e=await r(this,xe,"f").cache?.get("youtubei_oauth_credentials");if(!e)return!1;const i=new TextDecoder,n=JSON.parse(i.decode(e));return this.setTokens(n),r(this,xe,"f").emit("auth",{credentials:n}),!0},pn=function(){return r(this,xe,"f").http};var lo,dw,fw;class uT{constructor(e){lo.add(this),this.session=e}async stats(e,i,n){const s=new URL(e);s.searchParams.set("ver","2"),s.searchParams.set("c",i.client_name.toLowerCase()),s.searchParams.set("cbrver",i.client_version),s.searchParams.set("cver",i.client_version);for(const o of Object.keys(n))s.searchParams.set(o,n[o]);return await this.session.http.fetch(s)}async execute(e,i){let n;if(i&&!i.protobuf){if(n={...i},Reflect.has(n,"browseId")&&!i.skip_auth_check&&r(this,lo,"m",fw).call(this,n.browseId)&&!this.session.logged_in)throw new m("You must be signed in to perform this operation.");Reflect.has(n,"skip_auth_check")&&delete n.skip_auth_check,Reflect.has(n,"override_endpoint")&&delete n.override_endpoint,Reflect.has(n,"parse")&&delete n.parse,Reflect.has(n,"request")&&delete n.request,Reflect.has(n,"clientActions")&&delete n.clientActions,Reflect.has(n,"settingItemIdForClient")&&delete n.settingItemIdForClient,Reflect.has(n,"action")&&(n.actions=[n.action],delete n.action),Reflect.has(n,"boolValue")&&(n.newValue={boolValue:n.boolValue},delete n.boolValue),Reflect.has(n,"token")&&(n.continuation=n.token,delete n.token),n?.client==="YTMUSIC"&&(n.isAudioOnly=!0)}else i&&(n=i.serialized_data);const s=Reflect.has(i||{},"override_endpoint")?i?.override_endpoint:e,o=await this.session.http.fetch(s,{method:"POST",body:i?.protobuf?n:JSON.stringify(n||{}),headers:{"Content-Type":i?.protobuf?"application/x-protobuf":"application/json"}});if(i?.parse){let a=J(await o.json());if(r(this,lo,"m",dw).call(this,a)&&a.on_response_received_actions?.[0]?.type==="navigateAction"){const l=a.on_response_received_actions.firstOfType(Uh);l&&(a=await l.endpoint.call(this,{parse:!0}))}return a}return{success:o.ok,status_code:o.status,data:JSON.parse(await o.text())}}}lo=new WeakSet,dw=function(e){return"on_response_received_actions"in e},fw=function(e){return["FElibrary","FEhistory","FEsubscriptions","FEchannels","FEplaylist_aggregation","FEmusic_listening_review","FEmusic_library_landing","SPaccount_overview","SPaccount_notifications","SPaccount_privacy","SPtime_watched"].includes(e)};const dt="Player";class ii{constructor(e,i,n,s){this.player_id=e,this.sts=i,this.nsig_sc=s,this.sig_sc=n}static async create(e,i=V.shim.fetch,n,s){if(!s){const C=new URL("/iframe_api",te.YT_BASE),E=await i(C);if(!E.ok)throw new Yi(`Failed to get player id: ${E.status} (${E.statusText})`);const M=await E.text();s=rt(M,"player\\/","\\/")}if(ke(dt,`Using player id (${s}). Checking for cached players..`),!s)throw new Yi("Failed to get player id");if(e){const C=await ii.fromCache(e,s);if(C)return ke(dt,"Found up-to-date player data in cache."),C.po_token=n,C}const o=new URL(`/s/player/${s}/player_ias.vflset/en_US/base.js`,te.YT_BASE);ke(dt,`Could not find any cached player. Will download a new player from ${o}.`);const a=await i(o,{headers:{"user-agent":lw("desktop")}});if(!a.ok)throw new Yi(`Failed to get player data: ${a.status}`);const l=await a.text(),d=In.parseScript(l,{ecmaVersion:"latest",ranges:!0}),_=this.extractSigTimestamp(l),b=this.extractGlobalVariable(l,d),k=this.extractSigSourceCode(l,b),x=this.extractNSigSourceCode(l,d,b);ke(dt,`Got signature timestamp (${_}) and algorithms needed to decipher signatures.`);const I=await ii.fromSource(s,_,e,k,x);return I.po_token=n,I}decipher(e,i,n,s){if(e=e||i||n,!e)throw new Yi("No valid URL to decipher");const o=new URLSearchParams(e),a=new URL(o.get("url")||e);if(this.sig_sc&&(i||n)){const b=V.shim.eval(this.sig_sc,{sig:o.get("s")});if(ke(dt,`Transformed signature from ${o.get("s")} to ${b}.`),typeof b!="string")throw new Yi("Failed to decipher signature");const k=o.get("sp");k?a.searchParams.set(k,b):a.searchParams.set("signature",b)}const l=a.searchParams.get("n");if(this.nsig_sc&&l){let b;if(s&&s.has(l))b=s.get(l);else{if(b=V.shim.eval(this.nsig_sc,{nsig:l}),ke(dt,`Transformed n signature from ${l} to ${b}.`),typeof b!="string")throw new Yi("Failed to decipher nsig");b.startsWith("enhanced_except_")?ve(dt,"Something went wrong while deciphering nsig."):s&&s.set(l,b)}a.searchParams.set("n",b)}switch(a.searchParams.get("sabr")!=="1"&&this.po_token&&a.searchParams.set("pot",this.po_token),a.searchParams.get("c")){case"WEB":a.searchParams.set("cver",D.WEB.VERSION);break;case"MWEB":a.searchParams.set("cver",D.MWEB.VERSION);break;case"WEB_REMIX":a.searchParams.set("cver",D.YTMUSIC.VERSION);break;case"WEB_KIDS":a.searchParams.set("cver",D.WEB_KIDS.VERSION);break;case"TVHTML5":a.searchParams.set("cver",D.TV.VERSION);break;case"TVHTML5_SIMPLY_EMBEDDED_PLAYER":a.searchParams.set("cver",D.TV_EMBEDDED.VERSION);break;case"WEB_EMBEDDED_PLAYER":a.searchParams.set("cver",D.WEB_EMBEDDED.VERSION);break}const _=a.toString();return ke(dt,`Deciphered URL: ${_}`),a.toString()}static async fromCache(e,i){const n=await e.get(i);if(!n)return null;const s=new DataView(n);if(s.getUint32(0,!0)!==ii.LIBRARY_VERSION)return null;const a=s.getUint32(4,!0),l=s.getUint32(8,!0),d=n.slice(12,12+l),_=n.slice(12+l),b=ya(new TextDecoder().decode(d)),k=ya(new TextDecoder().decode(_));return new ii(i,a,b,k)}static async fromSource(e,i,n,s,o){const a=new ii(e,i,s,o);return await a.cache(n),a}async cache(e){if(!e||!this.sig_sc||!this.nsig_sc)return;const i=new TextEncoder,n=i.encode(ba(this.sig_sc)),s=i.encode(ba(this.nsig_sc)),o=new ArrayBuffer(12+n.byteLength+s.byteLength),a=new DataView(o);a.setUint32(0,ii.LIBRARY_VERSION,!0),a.setUint32(4,this.sts,!0),a.setUint32(8,n.byteLength,!0),new Uint8Array(o).set(n,12),new Uint8Array(o).set(s,12+n.byteLength),await e.set(this.player_id,new Uint8Array(o))}static extractSigTimestamp(e){return parseInt(rt(e,"signatureTimestamp:",",")||"0")}static extractGlobalVariable(e,i){let n=Nn(e,{includes:"-_w8_",ast:i});return n||(n=Nn(e,{includes:"Untrusted URL{",ast:i})),n||(n=Nn(e,{includes:"1969",ast:i})),n||(n=Nn(e,{includes:"1970",ast:i})),n||(n=Nn(e,{includes:"playerfallback",ast:i})),n}static extractSigSourceCode(e,i){const n=/function\(([A-Za-z_0-9]+)\)\{([A-Za-z_0-9]+=[A-Za-z_0-9]+\.split\((?:[^)]+)\)(.+?)\.join\((?:[^)]+)\))\}/,s=i?.name?.replace(/[$^\\.*+?()[\]{}|]/g,"\\$&"),o=s?new RegExp(`function\\(([A-Za-z_0-9]+)\\)\\{([A-Za-z_0-9]+=[A-Za-z_0-9]+\\[${s}\\[\\d+\\]\\]\\([^)]*\\)([\\s\\S]+?)\\[${s}\\[\\d+\\]\\]\\([^)]*\\))\\}`):null,a=e.match(n)||(o?e.match(o):null);if(!a){ve(dt,"Failed to extract signature decipher algorithm.");return}const l=a[1],d=a[3].split(/\.|\[/)[0]?.replace(";","").trim(),_=rt(e,`var ${d}={`,"};");return(!_||!l)&&ve(dt,"Failed to extract signature decipher algorithm."),`${i?.result||""} function descramble_sig(${l}) { let ${d}={${_}}; ${a[2]} } descramble_sig(sig);`}static extractNSigSourceCode(e,i,n){let s;if(n&&(s=zi(e,{includes:`new Date(${n.name}`,ast:i}),s||(s=zi(e,{includes:".push(String.fromCharCode(",ast:i})),s||(s=zi(e,{includes:".reverse().forEach(function",ast:i})),s))return`${n.result} var ${s.result} ${s.name}(nsig);`;if(s=zi(e,{includes:"-_w8_",ast:i}),s||(s=zi(e,{includes:"1969",ast:i})),s||(s=zi(e,{includes:"enhanced_except",ast:i})),s)return`let ${s.result} ${s.name}(nsig);`}get url(){return new URL(`/s/player/${this.player_id}/player_ias.vflset/en_US/base.js`,te.YT_BASE).toString()}static get LIBRARY_VERSION(){return 14}}var Di,mw,_w,bw,Ed;const lT={WEB:"WEB"},Jt="Session";class yw extends Am{constructor(e,i,n,s,o,a,l,d,_,b){super(),this.context=e,this.api_key=i,this.api_version=n,this.account_index=s,this.config_data=o,this.player=a,this.cookie=l,this.cache=_,this.po_token=b,this.http=new S0(this,l,d),this.actions=new uT(this),this.oauth=new cT(this),this.logged_in=!!l,this.user_agent=e.client.userAgent}on(e,i){super.on(e,i)}once(e,i){super.once(e,i)}static async create(e={}){const{context:i,api_key:n,api_version:s,account_index:o,config_data:a}=await Di.getSessionData(e.lang,e.location,e.account_index,e.visitor_data,e.user_agent,e.enable_safety_mode,e.generate_session_locally,e.device_category,e.client_type,e.timezone,e.fetch,e.on_behalf_of_user,e.cache,e.enable_session_cache,e.po_token,e.retrieve_innertube_config);return new Di(i,n,s,o,a,e.retrieve_player===!1?void 0:await ii.create(e.cache,e.fetch,e.po_token,e.player_id),e.cookie,e.fetch,e.cache,e.po_token)}static async fromCache(e,i){const n=await e.get("innertube_session_data");if(!n)return null;const s=new TextDecoder().decode(n.slice(4));try{const o=JSON.parse(ya(s));return i.visitor_data&&(o.context.client.visitorData=i.visitor_data),i.lang&&(o.context.client.hl=i.lang),i.location&&(o.context.client.gl=i.location),i.on_behalf_of_user&&(o.context.user.onBehalfOfUser=i.on_behalf_of_user),i.user_agent&&(o.context.client.userAgent=i.user_agent),o.context.client.timeZone=i.time_zone,o.context.client.platform=i.device_category.toUpperCase(),o.context.client.clientName=i.client_name,o.context.user.enableSafetyMode=i.enable_safety_mode,o}catch(o){return Jr(Jt,"Failed to parse session data from cache.",o),null}}static async getSessionData(e="",i="",n=0,s="",o=lw("desktop"),a=!1,l=!1,d="desktop",_=lT.WEB,b=Intl.DateTimeFormat().resolvedOptions().timeZone,k=V.shim.fetch,x,I,C=!0,E,M=!0){const P={lang:e,location:i,time_zone:b,user_agent:o,device_category:d,client_name:_,enable_safety_mode:a,visitor_data:s,on_behalf_of_user:x,po_token:E};let L;if(I&&C){const me=await this.fromCache(I,P);me&&(ke(Jt,"Found session data in cache."),L=me)}if(!L){ke(Jt,"Generating session data.");let me=D.WEB.API_KEY,jt=D.WEB.API_VERSION,Xe={hl:e||"en",gl:i||"US",remote_host:"",user_agent:o,visitor_data:s||Ak(ai(11),Math.floor(Date.now()/1e3)),client_name:_,client_version:D.WEB.VERSION,device_category:d.toUpperCase(),os_name:"Windows",os_version:"10.0",time_zone:b,browser_name:"Chrome",browser_version:"125.0.0.0",device_make:"",device_model:"",enable_safety_mode:a};if(!l)try{const Te=await r(this,Di,"m",_w).call(this,P,k);me=Te.api_key,jt=Te.api_version,Xe=Te.context_data}catch(Te){Jr(Jt,"Failed to retrieve session data from server. Session data generated locally will be used instead.",Te)}if(x&&(Xe.on_behalf_of_user=x),L={api_key:me,api_version:jt,context:r(this,Di,"m",bw).call(this,Xe)},M)try{ke(Jt,"Retrieving InnerTube config data.");const Te={"Accept-Language":e,Accept:"*/*",Referer:te.YT_BASE,"X-Goog-Visitor-Id":Xe.visitor_data,"X-Origin":te.YT_BASE,"X-Youtube-Client-Version":Xe.client_version};V.shim.server&&(Te["User-Agent"]=o,Te.Origin=te.YT_BASE);const Ce=await(await k(`${te.API.PRODUCTION_1}v1/config?prettyPrint=false`,{headers:Te,method:"POST",body:JSON.stringify({context:L.context})})).json(),Hs=Ce.responseContext?.globalConfigGroup?.rawColdConfigGroup?.configData,Ws=Ce.responseContext?.globalConfigGroup?.coldHashData,js=Ce.responseContext?.globalConfigGroup?.hotHashData;L.config_data=Ce.configData,L.context.client.configInfo={...L.context.client.configInfo,coldConfigData:Hs,coldHashData:Ws,hotHashData:js}}catch(Te){Jr(Jt,"Failed to retrieve config data.",Te)}C&&await r(this,Di,"m",mw).call(this,L,I)}return ps(Jt,"Session data:",L),{...L,account_index:n}}async signIn(e){return new Promise(async(i,n)=>{const s=o=>n(o);this.once("auth-error",s),this.once("auth",()=>{this.off("auth-error",s),this.logged_in=!0,i()});try{await this.oauth.init(e)}catch(o){n(o)}})}async signOut(){if(!this.logged_in)throw new m("You must be signed in to perform this operation.");const e=await this.oauth.revokeCredentials();return this.logged_in=!1,e}get client_version(){return this.context.client.clientVersion}get client_name(){return this.context.client.clientName}get lang(){return this.context.client.hl}}Di=yw,mw=async function(e,i){if(!i)return;ke(Jt,"Compressing and caching session data.");const n=new TextEncoder().encode(ba(JSON.stringify(e))),s=new ArrayBuffer(4+n.byteLength);new DataView(s).setUint32(0,n.byteLength,!0),new Uint8Array(s).set(n,4),await i.set("innertube_session_data",new Uint8Array(s))},_w=async function(e,i=V.shim.fetch){let n=ai(11);e.visitor_data&&(n=r(this,Di,"m",Ed).call(this,e.visitor_data));const s=new URL("/sw.js_data",te.YT_BASE),o=await i(s,{headers:{"Accept-Language":e.lang||"en-US","User-Agent":e.user_agent,Accept:"*/*",Referer:`${te.YT_BASE}/sw.js`,Cookie:`PREF=tz=${e.time_zone.replace("/",".")};VISITOR_INFO1_LIVE=${n};`}});if(!o.ok)throw new Td(`Failed to retrieve session data: ${o.status}`);const a=await o.text();if(!a.startsWith(")]}'"))throw new Td("Invalid JSPB response");const d=JSON.parse(a.replace(/^\)\]\}'/,""))[0][2],_=D.WEB.API_VERSION,[[b],k]=d,x=b[61],I=x[x.length-1];return{context_data:{hl:e.lang||b[0],gl:e.location||b[1],remote_host:b[3],visitor_data:e.visitor_data||b[13],user_agent:e.user_agent,client_name:e.client_name,client_version:b[16],os_name:b[17],os_version:b[18],time_zone:b[79]||e.time_zone,device_category:e.device_category,browser_name:b[86],browser_version:b[87],device_make:b[11],device_model:b[12],app_install_data:I,device_experiment_id:b[103],rollout_token:b[107],enable_safety_mode:e.enable_safety_mode},api_key:k,api_version:_}},bw=function(e){const i={client:{hl:e.hl||"en",gl:e.gl||"US",remoteHost:e.remote_host,screenDensityFloat:1,screenHeightPoints:1440,screenPixelDensity:1,screenWidthPoints:2560,visitorData:e.visitor_data,clientName:e.client_name,clientVersion:e.client_version,osName:e.os_name,osVersion:e.os_version,userAgent:e.user_agent,platform:e.device_category.toUpperCase(),clientFormFactor:"UNKNOWN_FORM_FACTOR",userInterfaceTheme:"USER_INTERFACE_THEME_LIGHT",timeZone:e.time_zone,originalUrl:te.YT_BASE,deviceMake:e.device_make,deviceModel:e.device_model,browserName:e.browser_name,browserVersion:e.browser_version,utcOffsetMinutes:-Math.floor(new Date().getTimezoneOffset()),memoryTotalKbytes:"8000000",rolloutToken:e.rollout_token,deviceExperimentId:e.device_experiment_id,mainAppWebInfo:{graftUrl:te.YT_BASE,pwaInstallabilityStatus:"PWA_INSTALLABILITY_STATUS_UNKNOWN",webDisplayMode:"WEB_DISPLAY_MODE_BROWSER",isWebNativeShareAvailable:!0}},user:{enableSafetyMode:e.enable_safety_mode,lockedSafetyMode:!1},request:{useSsl:!0,internalExperimentFlags:[]}};return e.app_install_data&&(i.client.configInfo={appInstallData:e.app_install_data}),e.on_behalf_of_user&&(i.user.onBehalfOfUser=e.on_behalf_of_user),i},Ed=function(e){return Mk(e).id};var st;class hT{constructor(e){st.set(this,void 0),v(this,st,e,"f")}async search(e){const n=await new f({searchEndpoint:{query:e}}).call(r(this,st,"f").actions,{client:"YTKIDS"});return new YS(r(this,st,"f").actions,n)}async getInfo(e){const i={videoId:e},n=new f({watchEndpoint:i}),s=new f({watchNextEndpoint:i}),o=r(this,st,"f"),a={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,lactMilliseconds:"-1",signatureTimestamp:o.player?.sts}},client:"YTKIDS"};o.po_token&&(a.serviceIntegrityDimensions={poToken:o.po_token});const l=n.call(o.actions,a),d=s.call(o.actions,{client:"YTKIDS"}),_=await Promise.all([l,d]),b=ai(16);return new zS(_,o.actions,b)}async getChannel(e){const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,st,"f").actions,{client:"YTKIDS"});return new np(r(this,st,"f").actions,n)}async getHomeFeed(){const i=await new f({browseEndpoint:{browseId:"FEkids_home"}}).call(r(this,st,"f").actions,{client:"YTKIDS"});return new sp(r(this,st,"f").actions,i)}async blockChannel(e){const i=r(this,st,"f");if(!i.logged_in)throw new m("You must be signed in to perform this operation.");const a={contents:(await new f({getKidsBlocklistPickerCommand:{blockedForKidsContent:{external_channel_id:e}}}).call(i.actions,{client:"YTKIDS"})).data.command.confirmDialogEndpoint.content,engagementPanels:[]},d=J(a).contents_memo?.getType(Vr);if(!d)throw new m("Could not find any kids profiles or supervised accounts.");const _=[];for(const b of d)b.block_button?.is_toggled||(b.setActions(i.actions),_.push(await b.blockChannel()));return _}}st=new WeakMap;var dn,Lt,q,gw,ho;class pT{constructor(e){dn.add(this),Lt.set(this,void 0),q.set(this,void 0),v(this,Lt,e,"f"),v(this,q,e.actions,"f")}getInfo(e){return e instanceof Sr?r(this,dn,"m",ho).call(this,e.endpoint):e instanceof Vt?r(this,dn,"m",ho).call(this,e.overlay?.content?.endpoint??e.endpoint):e instanceof f?r(this,dn,"m",ho).call(this,e):r(this,dn,"m",gw).call(this,e)}async search(e,i={}){j({query:e});let n;if(i.type&&i.type!=="all"){const a=Gm.encode({filters:{musicSearchType:{[i.type]:!0}}});n=encodeURIComponent(We(a.finish()))}const o=await new f({searchEndpoint:{query:e,params:n}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new KS(o,r(this,q,"f"),Reflect.has(i,"type")&&i.type!=="all")}async getHomeFeed(){const i=await new f({browseEndpoint:{browseId:"FEmusic_home"}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new qS(i,r(this,q,"f"))}async getExplore(){const i=await new f({browseEndpoint:{browseId:"FEmusic_explore"}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new GS(i)}async getLibrary(){const i=await new f({browseEndpoint:{browseId:"FEmusic_library_landing"}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new ep(i,r(this,q,"f"))}async getArtist(e){if(!e||!e.startsWith("UC")&&!e.startsWith("FEmusic_library_privately_owned_artist"))throw new m("Invalid artist id",e);const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new jS(n,r(this,q,"f"))}async getAlbum(e){if(!e||!e.startsWith("MPR")&&!e.startsWith("FEmusic_library_privately_owned_release"))throw new m("Invalid album id",e);const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new WS(n)}async getPlaylist(e){e.startsWith("VL")||(e=`VL${e}`);const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new Gr(n,r(this,q,"f"))}async getUpNext(e,i=!0){j({video_id:e});const a=(await new f({watchNextEndpoint:{videoId:e}}).call(r(this,q,"f"),{client:"YTMUSIC",parse:!0})).contents_memo?.getType(Oe)?.[0];if(!a)throw new m("Could not find target tab.");const l=a.content?.as(Cr);if(!l||!l.content)throw new m("Music queue was empty, the given id is probably invalid.",l);const d=l.content.as(ri);if(!d.playlist_id&&i){const _=d.contents.firstOfType(Cs);if(!_)throw new m("Automix item not found");const b=await _.playlist_video?.endpoint.call(r(this,q,"f"),{videoId:e,client:"YTMUSIC",parse:!0});if(!b||!b.contents_memo)throw new m("Could not fetch automix");return b.contents_memo.getType(ri)[0]}return d}async getRelated(e){j({video_id:e});const o=(await new f({watchNextEndpoint:{videoId:e}}).call(r(this,q,"f"),{client:"YTMUSIC",parse:!0})).contents_memo?.getType(Oe)?.find(l=>l.endpoint.payload.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType==="MUSIC_PAGE_TYPE_TRACK_RELATED");if(!o)throw new m("Could not find target tab.");const a=await o.endpoint.call(r(this,q,"f"),{client:"YTMUSIC",parse:!0});if(!a.contents)throw new m("Unexpected response",a);return a.contents.item().as(Q,at)}async getLyrics(e){j({video_id:e});const o=(await new f({watchNextEndpoint:{videoId:e}}).call(r(this,q,"f"),{client:"YTMUSIC",parse:!0})).contents_memo?.getType(Oe)?.find(d=>d.endpoint.payload.browseEndpointContextSupportedConfigs?.browseEndpointContextMusicConfig?.pageType==="MUSIC_PAGE_TYPE_TRACK_LYRICS");if(!o)throw new m("Could not find target tab.");const a=await o.endpoint.call(r(this,q,"f"),{client:"YTMUSIC",parse:!0});if(!a.contents)throw new m("Unexpected response",a);if(a.contents.item().type==="Message")throw new m(a.contents.item().as(at).text.toString(),e);return a.contents.item().as(Q).contents.firstOfType(Os)}async getRecap(){const i=await new f({browseEndpoint:{browseId:"FEmusic_listening_review"}}).call(r(this,q,"f"),{client:"YTMUSIC"});return new $S(i,r(this,q,"f"))}async getSearchSuggestions(e){const i=await r(this,q,"f").execute("/music/get_search_suggestions",{input:e,client:"YTMUSIC",parse:!0});return i.contents_memo?i.contents_memo.getType(_h):[]}}Lt=new WeakMap,q=new WeakMap,dn=new WeakSet,gw=async function(e){const i={videoId:e,racyCheckOk:!0,contentCheckOk:!0},n=new f({watchEndpoint:i}),s=new f({watchNextEndpoint:i}),o={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,lactMilliseconds:"-1",signatureTimestamp:r(this,Lt,"f").player?.sts}},client:"YTMUSIC"};r(this,Lt,"f").po_token&&(o.serviceIntegrityDimensions={poToken:r(this,Lt,"f").po_token});const a=n.call(r(this,q,"f"),o),l=s.call(r(this,q,"f"),{client:"YTMUSIC"}),d=await Promise.all([a,l]),_=ai(16);return new Sd(d,r(this,q,"f"),_)},ho=async function(e){if(!e)throw new Error("This item does not have an endpoint.");const i={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,lactMilliseconds:"-1",signatureTimestamp:r(this,Lt,"f").player?.sts}},client:"YTMUSIC"};r(this,Lt,"f").po_token&&(i.serviceIntegrityDimensions={poToken:r(this,Lt,"f").po_token});const n=e.call(r(this,q,"f"),i),s=e.call(r(this,q,"f"),{client:"YTMUSIC",enablePersistentPlaylistPanel:!0,override_endpoint:"/next"}),o=ai(16),a=await Promise.all([n,s]);return new Sd(a,r(this,q,"f"),o)};function dT(){return{profile:void 0,supportedCapabilities:[],disabledCapabilities:[],snapshot:void 0}}const Pd={encode(t,e=new T){t.profile!==void 0&&e.uint32(10).string(t.profile);for(const i of t.supportedCapabilities)Ks.encode(i,e.uint32(18).fork()).join();for(const i of t.disabledCapabilities)Ks.encode(i,e.uint32(26).fork()).join();return t.snapshot!==void 0&&e.uint32(42).string(t.snapshot),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=dT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.profile=i.string();continue;case 2:if(o!==18)break;s.supportedCapabilities.push(Ks.decode(i,i.uint32()));continue;case 3:if(o!==26)break;s.disabledCapabilities.push(Ks.decode(i,i.uint32()));continue;case 5:if(o!==42)break;s.snapshot=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function fT(){return{capability:void 0,features:void 0,experimentFlags:void 0}}const Ks={encode(t,e=new T){return t.capability!==void 0&&e.uint32(8).uint32(t.capability),t.features!==void 0&&e.uint32(16).uint32(t.features),t.experimentFlags!==void 0&&e.uint32(50).string(t.experimentFlags),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=fT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.capability=i.uint32();continue;case 2:if(o!==16)break;s.features=i.uint32();continue;case 6:if(o!==50)break;s.experimentFlags=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function mT(){return{hl:void 0,gl:void 0,remoteHost:void 0,deviceId:void 0,debugDeviceIdOverride:void 0,carrierGeo:void 0,crackedHl:void 0,deviceMake:void 0,deviceModel:void 0,visitorData:void 0,userAgent:void 0,clientName:void 0,clientVersion:void 0,osName:void 0,osVersion:void 0,projectId:void 0,acceptLanguage:void 0,acceptRegion:void 0,originalUrl:void 0,rawDeviceId:void 0,configData:void 0,spacecastToken:void 0,internalGeo:void 0,screenWidthPoints:void 0,screenHeightPoints:void 0,screenWidthInches:void 0,screenHeightInches:void 0,screenPixelDensity:void 0,platform:void 0,spacecastClientInfo:void 0,clientFormFactor:void 0,forwardedFor:void 0,mobileDataPlanInfo:void 0,gmscoreVersionCode:void 0,webpSupport:void 0,cameraType:void 0,experimentsToken:void 0,windowWidthPoints:void 0,windowHeightPoints:void 0,configInfo:void 0,unpluggedLocationInfo:void 0,androidSdkVersion:void 0,screenDensityFloat:void 0,firstTimeSignInExperimentIds:void 0,utcOffsetMinutes:void 0,animatedWebpSupport:void 0,kidsAppInfo:void 0,musicAppInfo:void 0,tvAppInfo:void 0,internalGeoIp:void 0,unpluggedAppInfo:void 0,locationInfo:void 0,contentSizeCategory:void 0,fontScale:void 0,userInterfaceTheme:void 0,timeZone:void 0,homeGroupInfo:void 0,emlTemplateContext:void 0,coldAppBundleConfigData:void 0,browserName:void 0,browserVersion:void 0,locationPlayabilityToken:void 0,chipset:void 0,firmwareVersion:void 0,memoryTotalKbytes:void 0,mainAppWebInfo:void 0,notificationPermissionInfo:void 0,deviceBrand:void 0,glDeviceInfo:void 0}}const Ys={encode(t,e=new T){return t.hl!==void 0&&e.uint32(10).string(t.hl),t.gl!==void 0&&e.uint32(18).string(t.gl),t.remoteHost!==void 0&&e.uint32(34).string(t.remoteHost),t.deviceId!==void 0&&e.uint32(50).string(t.deviceId),t.debugDeviceIdOverride!==void 0&&e.uint32(66).string(t.debugDeviceIdOverride),t.carrierGeo!==void 0&&e.uint32(82).string(t.carrierGeo),t.crackedHl!==void 0&&e.uint32(88).bool(t.crackedHl),t.deviceMake!==void 0&&e.uint32(98).string(t.deviceMake),t.deviceModel!==void 0&&e.uint32(106).string(t.deviceModel),t.visitorData!==void 0&&e.uint32(114).string(t.visitorData),t.userAgent!==void 0&&e.uint32(122).string(t.userAgent),t.clientName!==void 0&&e.uint32(128).int32(t.clientName),t.clientVersion!==void 0&&e.uint32(138).string(t.clientVersion),t.osName!==void 0&&e.uint32(146).string(t.osName),t.osVersion!==void 0&&e.uint32(154).string(t.osVersion),t.projectId!==void 0&&e.uint32(162).string(t.projectId),t.acceptLanguage!==void 0&&e.uint32(170).string(t.acceptLanguage),t.acceptRegion!==void 0&&e.uint32(178).string(t.acceptRegion),t.originalUrl!==void 0&&e.uint32(186).string(t.originalUrl),t.rawDeviceId!==void 0&&e.uint32(202).string(t.rawDeviceId),t.configData!==void 0&&e.uint32(218).string(t.configData),t.spacecastToken!==void 0&&e.uint32(250).string(t.spacecastToken),t.internalGeo!==void 0&&e.uint32(274).string(t.internalGeo),t.screenWidthPoints!==void 0&&e.uint32(296).int32(t.screenWidthPoints),t.screenHeightPoints!==void 0&&e.uint32(304).int32(t.screenHeightPoints),t.screenWidthInches!==void 0&&e.uint32(317).float(t.screenWidthInches),t.screenHeightInches!==void 0&&e.uint32(325).float(t.screenHeightInches),t.screenPixelDensity!==void 0&&e.uint32(328).int32(t.screenPixelDensity),t.platform!==void 0&&e.uint32(336).int32(t.platform),t.spacecastClientInfo!==void 0&&Dd.encode(t.spacecastClientInfo,e.uint32(362).fork()).join(),t.clientFormFactor!==void 0&&e.uint32(368).int32(t.clientFormFactor),t.forwardedFor!==void 0&&e.uint32(386).string(t.forwardedFor),t.mobileDataPlanInfo!==void 0&&Ld.encode(t.mobileDataPlanInfo,e.uint32(394).fork()).join(),t.gmscoreVersionCode!==void 0&&e.uint32(400).int32(t.gmscoreVersionCode),t.webpSupport!==void 0&&e.uint32(408).bool(t.webpSupport),t.cameraType!==void 0&&e.uint32(416).int32(t.cameraType),t.experimentsToken!==void 0&&e.uint32(434).string(t.experimentsToken),t.windowWidthPoints!==void 0&&e.uint32(440).int32(t.windowWidthPoints),t.windowHeightPoints!==void 0&&e.uint32(448).int32(t.windowHeightPoints),t.configInfo!==void 0&&Od.encode(t.configInfo,e.uint32(498).fork()).join(),t.unpluggedLocationInfo!==void 0&&Bd.encode(t.unpluggedLocationInfo,e.uint32(506).fork()).join(),t.androidSdkVersion!==void 0&&e.uint32(512).int32(t.androidSdkVersion),t.screenDensityFloat!==void 0&&e.uint32(525).float(t.screenDensityFloat),t.firstTimeSignInExperimentIds!==void 0&&e.uint32(528).int32(t.firstTimeSignInExperimentIds),t.utcOffsetMinutes!==void 0&&e.uint32(536).int32(t.utcOffsetMinutes),t.animatedWebpSupport!==void 0&&e.uint32(544).bool(t.animatedWebpSupport),t.kidsAppInfo!==void 0&&Vd.encode(t.kidsAppInfo,e.uint32(554).fork()).join(),t.musicAppInfo!==void 0&&Wd.encode(t.musicAppInfo,e.uint32(562).fork()).join(),t.tvAppInfo!==void 0&&jd.encode(t.tvAppInfo,e.uint32(570).fork()).join(),t.internalGeoIp!==void 0&&e.uint32(578).string(t.internalGeoIp),t.unpluggedAppInfo!==void 0&&qd.encode(t.unpluggedAppInfo,e.uint32(586).fork()).join(),t.locationInfo!==void 0&&$d.encode(t.locationInfo,e.uint32(594).fork()).join(),t.contentSizeCategory!==void 0&&e.uint32(610).string(t.contentSizeCategory),t.fontScale!==void 0&&e.uint32(621).float(t.fontScale),t.userInterfaceTheme!==void 0&&e.uint32(624).int32(t.userInterfaceTheme),t.timeZone!==void 0&&e.uint32(642).string(t.timeZone),t.homeGroupInfo!==void 0&&Yd.encode(t.homeGroupInfo,e.uint32(650).fork()).join(),t.emlTemplateContext!==void 0&&e.uint32(674).bytes(t.emlTemplateContext),t.coldAppBundleConfigData!==void 0&&e.uint32(682).bytes(t.coldAppBundleConfigData),t.browserName!==void 0&&e.uint32(698).string(t.browserName),t.browserVersion!==void 0&&e.uint32(706).string(t.browserVersion),t.locationPlayabilityToken!==void 0&&e.uint32(714).string(t.locationPlayabilityToken),t.chipset!==void 0&&e.uint32(738).string(t.chipset),t.firmwareVersion!==void 0&&e.uint32(746).string(t.firmwareVersion),t.memoryTotalKbytes!==void 0&&e.uint32(760).int64(t.memoryTotalKbytes),t.mainAppWebInfo!==void 0&&Rd.encode(t.mainAppWebInfo,e.uint32(770).fork()).join(),t.notificationPermissionInfo!==void 0&&Ad.encode(t.notificationPermissionInfo,e.uint32(778).fork()).join(),t.deviceBrand!==void 0&&e.uint32(786).string(t.deviceBrand),t.glDeviceInfo!==void 0&&Md.encode(t.glDeviceInfo,e.uint32(818).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=mT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.hl=i.string();continue;case 2:if(o!==18)break;s.gl=i.string();continue;case 4:if(o!==34)break;s.remoteHost=i.string();continue;case 6:if(o!==50)break;s.deviceId=i.string();continue;case 8:if(o!==66)break;s.debugDeviceIdOverride=i.string();continue;case 10:if(o!==82)break;s.carrierGeo=i.string();continue;case 11:if(o!==88)break;s.crackedHl=i.bool();continue;case 12:if(o!==98)break;s.deviceMake=i.string();continue;case 13:if(o!==106)break;s.deviceModel=i.string();continue;case 14:if(o!==114)break;s.visitorData=i.string();continue;case 15:if(o!==122)break;s.userAgent=i.string();continue;case 16:if(o!==128)break;s.clientName=i.int32();continue;case 17:if(o!==138)break;s.clientVersion=i.string();continue;case 18:if(o!==146)break;s.osName=i.string();continue;case 19:if(o!==154)break;s.osVersion=i.string();continue;case 20:if(o!==162)break;s.projectId=i.string();continue;case 21:if(o!==170)break;s.acceptLanguage=i.string();continue;case 22:if(o!==178)break;s.acceptRegion=i.string();continue;case 23:if(o!==186)break;s.originalUrl=i.string();continue;case 25:if(o!==202)break;s.rawDeviceId=i.string();continue;case 27:if(o!==218)break;s.configData=i.string();continue;case 31:if(o!==250)break;s.spacecastToken=i.string();continue;case 34:if(o!==274)break;s.internalGeo=i.string();continue;case 37:if(o!==296)break;s.screenWidthPoints=i.int32();continue;case 38:if(o!==304)break;s.screenHeightPoints=i.int32();continue;case 39:if(o!==317)break;s.screenWidthInches=i.float();continue;case 40:if(o!==325)break;s.screenHeightInches=i.float();continue;case 41:if(o!==328)break;s.screenPixelDensity=i.int32();continue;case 42:if(o!==336)break;s.platform=i.int32();continue;case 45:if(o!==362)break;s.spacecastClientInfo=Dd.decode(i,i.uint32());continue;case 46:if(o!==368)break;s.clientFormFactor=i.int32();continue;case 48:if(o!==386)break;s.forwardedFor=i.string();continue;case 49:if(o!==394)break;s.mobileDataPlanInfo=Ld.decode(i,i.uint32());continue;case 50:if(o!==400)break;s.gmscoreVersionCode=i.int32();continue;case 51:if(o!==408)break;s.webpSupport=i.bool();continue;case 52:if(o!==416)break;s.cameraType=i.int32();continue;case 54:if(o!==434)break;s.experimentsToken=i.string();continue;case 55:if(o!==440)break;s.windowWidthPoints=i.int32();continue;case 56:if(o!==448)break;s.windowHeightPoints=i.int32();continue;case 62:if(o!==498)break;s.configInfo=Od.decode(i,i.uint32());continue;case 63:if(o!==506)break;s.unpluggedLocationInfo=Bd.decode(i,i.uint32());continue;case 64:if(o!==512)break;s.androidSdkVersion=i.int32();continue;case 65:if(o!==525)break;s.screenDensityFloat=i.float();continue;case 66:if(o!==528)break;s.firstTimeSignInExperimentIds=i.int32();continue;case 67:if(o!==536)break;s.utcOffsetMinutes=i.int32();continue;case 68:if(o!==544)break;s.animatedWebpSupport=i.bool();continue;case 69:if(o!==554)break;s.kidsAppInfo=Vd.decode(i,i.uint32());continue;case 70:if(o!==562)break;s.musicAppInfo=Wd.decode(i,i.uint32());continue;case 71:if(o!==570)break;s.tvAppInfo=jd.decode(i,i.uint32());continue;case 72:if(o!==578)break;s.internalGeoIp=i.string();continue;case 73:if(o!==586)break;s.unpluggedAppInfo=qd.decode(i,i.uint32());continue;case 74:if(o!==594)break;s.locationInfo=$d.decode(i,i.uint32());continue;case 76:if(o!==610)break;s.contentSizeCategory=i.string();continue;case 77:if(o!==621)break;s.fontScale=i.float();continue;case 78:if(o!==624)break;s.userInterfaceTheme=i.int32();continue;case 80:if(o!==642)break;s.timeZone=i.string();continue;case 81:if(o!==650)break;s.homeGroupInfo=Yd.decode(i,i.uint32());continue;case 84:if(o!==674)break;s.emlTemplateContext=i.bytes();continue;case 85:if(o!==682)break;s.coldAppBundleConfigData=i.bytes();continue;case 87:if(o!==698)break;s.browserName=i.string();continue;case 88:if(o!==706)break;s.browserVersion=i.string();continue;case 89:if(o!==714)break;s.locationPlayabilityToken=i.string();continue;case 92:if(o!==738)break;s.chipset=i.string();continue;case 93:if(o!==746)break;s.firmwareVersion=i.string();continue;case 95:if(o!==760)break;s.memoryTotalKbytes=qr(i.int64());continue;case 96:if(o!==770)break;s.mainAppWebInfo=Rd.decode(i,i.uint32());continue;case 97:if(o!==778)break;s.notificationPermissionInfo=Ad.decode(i,i.uint32());continue;case 98:if(o!==786)break;s.deviceBrand=i.string();continue;case 102:if(o!==818)break;s.glDeviceInfo=Md.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function _T(){return{graftUrl:void 0,pwaInstallabilityStatus:void 0,webDisplayMode:void 0,isWebNativeShareAvailable:void 0,storeDigitalGoodsApiSupportStatus:void 0}}const Rd={encode(t,e=new T){return t.graftUrl!==void 0&&e.uint32(10).string(t.graftUrl),t.pwaInstallabilityStatus!==void 0&&e.uint32(16).int32(t.pwaInstallabilityStatus),t.webDisplayMode!==void 0&&e.uint32(24).int32(t.webDisplayMode),t.isWebNativeShareAvailable!==void 0&&e.uint32(32).bool(t.isWebNativeShareAvailable),t.storeDigitalGoodsApiSupportStatus!==void 0&&e.uint32(40).int32(t.storeDigitalGoodsApiSupportStatus),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=_T();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.graftUrl=i.string();continue;case 2:if(o!==16)break;s.pwaInstallabilityStatus=i.int32();continue;case 3:if(o!==24)break;s.webDisplayMode=i.int32();continue;case 4:if(o!==32)break;s.isWebNativeShareAvailable=i.bool();continue;case 5:if(o!==40)break;s.storeDigitalGoodsApiSupportStatus=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function bT(){return{notificationsSetting:void 0,lastDeviceOptInChangeTimeAgoSec:void 0}}const Ad={encode(t,e=new T){return t.notificationsSetting!==void 0&&e.uint32(8).int32(t.notificationsSetting),t.lastDeviceOptInChangeTimeAgoSec!==void 0&&e.uint32(16).int64(t.lastDeviceOptInChangeTimeAgoSec),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=bT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.notificationsSetting=i.int32();continue;case 2:if(o!==16)break;s.lastDeviceOptInChangeTimeAgoSec=qr(i.int64());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function yT(){return{glRenderer:void 0,glEsVersionMajor:void 0,glEsVersionMinor:void 0}}const Md={encode(t,e=new T){return t.glRenderer!==void 0&&e.uint32(10).string(t.glRenderer),t.glEsVersionMajor!==void 0&&e.uint32(16).int32(t.glEsVersionMajor),t.glEsVersionMinor!==void 0&&e.uint32(24).int32(t.glEsVersionMinor),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=yT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.glRenderer=i.string();continue;case 2:if(o!==16)break;s.glEsVersionMajor=i.int32();continue;case 3:if(o!==24)break;s.glEsVersionMinor=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function gT(){return{appliances:void 0,interactionLevel:void 0}}const Dd={encode(t,e=new T){return t.appliances!==void 0&&Nd.encode(t.appliances,e.uint32(10).fork()).join(),t.interactionLevel!==void 0&&e.uint32(16).int32(t.interactionLevel),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=gT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.appliances=Nd.decode(i,i.uint32());continue;case 2:if(o!==16)break;s.interactionLevel=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function wT(){return{contentProfileToken:void 0,status:void 0,hostname:void 0,active:void 0,deviceId:void 0}}const Nd={encode(t,e=new T){return t.contentProfileToken!==void 0&&e.uint32(10).bytes(t.contentProfileToken),t.status!==void 0&&e.uint32(16).int32(t.status),t.hostname!==void 0&&e.uint32(26).string(t.hostname),t.active!==void 0&&e.uint32(32).bool(t.active),t.deviceId!==void 0&&e.uint32(42).string(t.deviceId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=wT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.contentProfileToken=i.bytes();continue;case 2:if(o!==16)break;s.status=i.int32();continue;case 3:if(o!==26)break;s.hostname=i.string();continue;case 4:if(o!==32)break;s.active=i.bool();continue;case 5:if(o!==42)break;s.deviceId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function xT(){return{cpid:void 0,serializedDataPlanStatus:void 0,dataSavingQualityPickerEnabled:void 0,mccmnc:void 0}}const Ld={encode(t,e=new T){return t.cpid!==void 0&&e.uint32(394).string(t.cpid),t.serializedDataPlanStatus!==void 0&&e.uint32(402).string(t.serializedDataPlanStatus),t.dataSavingQualityPickerEnabled!==void 0&&e.uint32(416).bool(t.dataSavingQualityPickerEnabled),t.mccmnc!==void 0&&e.uint32(426).string(t.mccmnc),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=xT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 49:if(o!==394)break;s.cpid=i.string();continue;case 50:if(o!==402)break;s.serializedDataPlanStatus=i.string();continue;case 52:if(o!==416)break;s.dataSavingQualityPickerEnabled=i.bool();continue;case 53:if(o!==426)break;s.mccmnc=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function vT(){return{coldConfigData:void 0,coldHashData:void 0,hotHashData:void 0,appInstallData:void 0}}const Od={encode(t,e=new T){return t.coldConfigData!==void 0&&e.uint32(10).string(t.coldConfigData),t.coldHashData!==void 0&&e.uint32(26).string(t.coldHashData),t.hotHashData!==void 0&&e.uint32(42).string(t.hotHashData),t.appInstallData!==void 0&&e.uint32(50).string(t.appInstallData),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=vT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.coldConfigData=i.string();continue;case 3:if(o!==26)break;s.coldHashData=i.string();continue;case 5:if(o!==42)break;s.hotHashData=i.string();continue;case 6:if(o!==50)break;s.appInstallData=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function kT(){return{latitudeE7:void 0,longitudeE7:void 0,localTimestampMs:void 0,ipAddress:void 0,timezone:void 0,prefer24HourTime:void 0,locationRadiusMeters:void 0,isInitialLoad:void 0,browserPermissionGranted:void 0,clientPermissionState:void 0,locationOverrideToken:void 0}}const Bd={encode(t,e=new T){return t.latitudeE7!==void 0&&e.uint32(8).int32(t.latitudeE7),t.longitudeE7!==void 0&&e.uint32(16).int32(t.longitudeE7),t.localTimestampMs!==void 0&&e.uint32(24).int64(t.localTimestampMs),t.ipAddress!==void 0&&e.uint32(34).string(t.ipAddress),t.timezone!==void 0&&e.uint32(42).string(t.timezone),t.prefer24HourTime!==void 0&&e.uint32(48).bool(t.prefer24HourTime),t.locationRadiusMeters!==void 0&&e.uint32(56).int32(t.locationRadiusMeters),t.isInitialLoad!==void 0&&e.uint32(64).bool(t.isInitialLoad),t.browserPermissionGranted!==void 0&&e.uint32(72).bool(t.browserPermissionGranted),t.clientPermissionState!==void 0&&e.uint32(80).int32(t.clientPermissionState),t.locationOverrideToken!==void 0&&e.uint32(90).string(t.locationOverrideToken),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=kT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.latitudeE7=i.int32();continue;case 2:if(o!==16)break;s.longitudeE7=i.int32();continue;case 3:if(o!==24)break;s.localTimestampMs=qr(i.int64());continue;case 4:if(o!==34)break;s.ipAddress=i.string();continue;case 5:if(o!==42)break;s.timezone=i.string();continue;case 6:if(o!==48)break;s.prefer24HourTime=i.bool();continue;case 7:if(o!==56)break;s.locationRadiusMeters=i.int32();continue;case 8:if(o!==64)break;s.isInitialLoad=i.bool();continue;case 9:if(o!==72)break;s.browserPermissionGranted=i.bool();continue;case 10:if(o!==80)break;s.clientPermissionState=i.int32();continue;case 11:if(o!==90)break;s.locationOverrideToken=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ST(){return{contentSettings:void 0,parentCurationMode:void 0,categorySettings:void 0,userEducationSettings:void 0}}const Vd={encode(t,e=new T){return t.contentSettings!==void 0&&Ud.encode(t.contentSettings,e.uint32(10).fork()).join(),t.parentCurationMode!==void 0&&e.uint32(16).int32(t.parentCurationMode),t.categorySettings!==void 0&&Fd.encode(t.categorySettings,e.uint32(26).fork()).join(),t.userEducationSettings!==void 0&&Hd.encode(t.userEducationSettings,e.uint32(34).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ST();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.contentSettings=Ud.decode(i,i.uint32());continue;case 2:if(o!==16)break;s.parentCurationMode=i.int32();continue;case 3:if(o!==26)break;s.categorySettings=Fd.decode(i,i.uint32());continue;case 4:if(o!==34)break;s.userEducationSettings=Hd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function TT(){return{kidsNoSearchMode:void 0,ageUpMode:void 0,contentDensity:void 0}}const Ud={encode(t,e=new T){return t.kidsNoSearchMode!==void 0&&e.uint32(8).int32(t.kidsNoSearchMode),t.ageUpMode!==void 0&&e.uint32(16).int32(t.ageUpMode),t.contentDensity!==void 0&&e.uint32(24).int32(t.contentDensity),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=TT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.kidsNoSearchMode=i.int32();continue;case 2:if(o!==16)break;s.ageUpMode=i.int32();continue;case 3:if(o!==24)break;s.contentDensity=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function CT(){return{enabledCategories:void 0}}const Fd={encode(t,e=new T){return t.enabledCategories!==void 0&&e.uint32(10).string(t.enabledCategories),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=CT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.enabledCategories=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function IT(){return{hasSeenHomeChipBarUserEducation:void 0,hasSeenHomePivotBarUserEducation:void 0,hasSeenParentMuirUserEducation:void 0}}const Hd={encode(t,e=new T){return t.hasSeenHomeChipBarUserEducation!==void 0&&e.uint32(8).bool(t.hasSeenHomeChipBarUserEducation),t.hasSeenHomePivotBarUserEducation!==void 0&&e.uint32(16).bool(t.hasSeenHomePivotBarUserEducation),t.hasSeenParentMuirUserEducation!==void 0&&e.uint32(24).bool(t.hasSeenParentMuirUserEducation),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=IT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.hasSeenHomeChipBarUserEducation=i.bool();continue;case 2:if(o!==16)break;s.hasSeenHomePivotBarUserEducation=i.bool();continue;case 3:if(o!==24)break;s.hasSeenParentMuirUserEducation=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ET(){return{playBackMode:void 0,musicLocationMasterSwitch:void 0,musicActivityMasterSwitch:void 0,offlineMixtapeEnabled:void 0,autoOfflineEnabled:void 0,iosBackgroundRefreshStatus:void 0,smartDownloadsSongLimit:void 0,transitionedFromMixtapeToSmartDownloads:void 0,pwaInstallabilityStatus:void 0,webDisplayMode:void 0,musicTier:void 0,storeDigitalGoodsApiSupportStatus:void 0,smartDownloadsTimeSinceLastOptOutSec:void 0}}const Wd={encode(t,e=new T){return t.playBackMode!==void 0&&e.uint32(8).int32(t.playBackMode),t.musicLocationMasterSwitch!==void 0&&e.uint32(16).int32(t.musicLocationMasterSwitch),t.musicActivityMasterSwitch!==void 0&&e.uint32(24).int32(t.musicActivityMasterSwitch),t.offlineMixtapeEnabled!==void 0&&e.uint32(32).bool(t.offlineMixtapeEnabled),t.autoOfflineEnabled!==void 0&&e.uint32(40).bool(t.autoOfflineEnabled),t.iosBackgroundRefreshStatus!==void 0&&e.uint32(48).int32(t.iosBackgroundRefreshStatus),t.smartDownloadsSongLimit!==void 0&&e.uint32(56).int32(t.smartDownloadsSongLimit),t.transitionedFromMixtapeToSmartDownloads!==void 0&&e.uint32(64).bool(t.transitionedFromMixtapeToSmartDownloads),t.pwaInstallabilityStatus!==void 0&&e.uint32(72).int32(t.pwaInstallabilityStatus),t.webDisplayMode!==void 0&&e.uint32(80).int32(t.webDisplayMode),t.musicTier!==void 0&&e.uint32(88).int32(t.musicTier),t.storeDigitalGoodsApiSupportStatus!==void 0&&e.uint32(96).int32(t.storeDigitalGoodsApiSupportStatus),t.smartDownloadsTimeSinceLastOptOutSec!==void 0&&e.uint32(104).int64(t.smartDownloadsTimeSinceLastOptOutSec),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ET();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.playBackMode=i.int32();continue;case 2:if(o!==16)break;s.musicLocationMasterSwitch=i.int32();continue;case 3:if(o!==24)break;s.musicActivityMasterSwitch=i.int32();continue;case 4:if(o!==32)break;s.offlineMixtapeEnabled=i.bool();continue;case 5:if(o!==40)break;s.autoOfflineEnabled=i.bool();continue;case 6:if(o!==48)break;s.iosBackgroundRefreshStatus=i.int32();continue;case 7:if(o!==56)break;s.smartDownloadsSongLimit=i.int32();continue;case 8:if(o!==64)break;s.transitionedFromMixtapeToSmartDownloads=i.bool();continue;case 9:if(o!==72)break;s.pwaInstallabilityStatus=i.int32();continue;case 10:if(o!==80)break;s.webDisplayMode=i.int32();continue;case 11:if(o!==88)break;s.musicTier=i.int32();continue;case 12:if(o!==96)break;s.storeDigitalGoodsApiSupportStatus=i.int32();continue;case 13:if(o!==104)break;s.smartDownloadsTimeSinceLastOptOutSec=qr(i.int64());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function PT(){return{mdxImpactedSessionsServerEvents:void 0,enablePrivacyFilter:void 0,zylonLeftNav:void 0,certificationScope:void 0,livingRoomPoTokenId:void 0,jsEngineString:void 0,voiceCapability:void 0,systemIntegrator:void 0,androidBuildFingerprint:void 0,cobaltAppVersion:void 0,cobaltStarboardVersion:void 0,useStartPlaybackPreviewCommand:void 0,shouldShowPersistentSigninOnHome:void 0,androidPlayServicesVersion:void 0}}const jd={encode(t,e=new T){return t.mdxImpactedSessionsServerEvents!==void 0&&e.uint32(26).string(t.mdxImpactedSessionsServerEvents),t.enablePrivacyFilter!==void 0&&e.uint32(48).bool(t.enablePrivacyFilter),t.zylonLeftNav!==void 0&&e.uint32(56).bool(t.zylonLeftNav),t.certificationScope!==void 0&&e.uint32(74).string(t.certificationScope),t.livingRoomPoTokenId!==void 0&&e.uint32(82).string(t.livingRoomPoTokenId),t.jsEngineString!==void 0&&e.uint32(98).string(t.jsEngineString),t.voiceCapability!==void 0&&Gd.encode(t.voiceCapability,e.uint32(106).fork()).join(),t.systemIntegrator!==void 0&&e.uint32(114).string(t.systemIntegrator),t.androidBuildFingerprint!==void 0&&e.uint32(146).string(t.androidBuildFingerprint),t.cobaltAppVersion!==void 0&&e.uint32(154).string(t.cobaltAppVersion),t.cobaltStarboardVersion!==void 0&&e.uint32(162).string(t.cobaltStarboardVersion),t.useStartPlaybackPreviewCommand!==void 0&&e.uint32(176).bool(t.useStartPlaybackPreviewCommand),t.shouldShowPersistentSigninOnHome!==void 0&&e.uint32(184).bool(t.shouldShowPersistentSigninOnHome),t.androidPlayServicesVersion!==void 0&&e.uint32(194).string(t.androidPlayServicesVersion),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=PT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 3:if(o!==26)break;s.mdxImpactedSessionsServerEvents=i.string();continue;case 6:if(o!==48)break;s.enablePrivacyFilter=i.bool();continue;case 7:if(o!==56)break;s.zylonLeftNav=i.bool();continue;case 9:if(o!==74)break;s.certificationScope=i.string();continue;case 10:if(o!==82)break;s.livingRoomPoTokenId=i.string();continue;case 12:if(o!==98)break;s.jsEngineString=i.string();continue;case 13:if(o!==106)break;s.voiceCapability=Gd.decode(i,i.uint32());continue;case 14:if(o!==114)break;s.systemIntegrator=i.string();continue;case 18:if(o!==146)break;s.androidBuildFingerprint=i.string();continue;case 19:if(o!==154)break;s.cobaltAppVersion=i.string();continue;case 20:if(o!==162)break;s.cobaltStarboardVersion=i.string();continue;case 22:if(o!==176)break;s.useStartPlaybackPreviewCommand=i.bool();continue;case 23:if(o!==184)break;s.shouldShowPersistentSigninOnHome=i.bool();continue;case 24:if(o!==194)break;s.androidPlayServicesVersion=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function RT(){return{hasSoftMicSupport:void 0,hasHardMicSupport:void 0}}const Gd={encode(t,e=new T){return t.hasSoftMicSupport!==void 0&&e.uint32(8).bool(t.hasSoftMicSupport),t.hasHardMicSupport!==void 0&&e.uint32(16).bool(t.hasHardMicSupport),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=RT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.hasSoftMicSupport=i.bool();continue;case 2:if(o!==16)break;s.hasHardMicSupport=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function AT(){return{enableFilterMode:void 0,iosNotificationPermission:void 0,forceEnableEpg3:void 0}}const qd={encode(t,e=new T){return t.enableFilterMode!==void 0&&e.uint32(16).bool(t.enableFilterMode),t.iosNotificationPermission!==void 0&&e.uint32(24).bool(t.iosNotificationPermission),t.forceEnableEpg3!==void 0&&e.uint32(56).bool(t.forceEnableEpg3),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=AT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==16)break;s.enableFilterMode=i.bool();continue;case 3:if(o!==24)break;s.iosNotificationPermission=i.bool();continue;case 7:if(o!==56)break;s.forceEnableEpg3=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function MT(){return{locationInfoStatus:void 0,ulrStatus:void 0,latitudeE7:void 0,longitudeE7:void 0,horizontalAccuracyMeters:void 0,locationFreshnessMs:void 0,locationPermissionAuthorizationStatus:void 0,locationOverrideToken:void 0,forceLocationPlayabilityTokenRefresh:void 0}}const $d={encode(t,e=new T){return t.locationInfoStatus!==void 0&&e.uint32(8).int32(t.locationInfoStatus),t.ulrStatus!==void 0&&Kd.encode(t.ulrStatus,e.uint32(18).fork()).join(),t.latitudeE7!==void 0&&e.uint32(26).string(t.latitudeE7),t.longitudeE7!==void 0&&e.uint32(34).string(t.longitudeE7),t.horizontalAccuracyMeters!==void 0&&e.uint32(42).string(t.horizontalAccuracyMeters),t.locationFreshnessMs!==void 0&&e.uint32(50).string(t.locationFreshnessMs),t.locationPermissionAuthorizationStatus!==void 0&&e.uint32(56).int32(t.locationPermissionAuthorizationStatus),t.locationOverrideToken!==void 0&&e.uint32(66).string(t.locationOverrideToken),t.forceLocationPlayabilityTokenRefresh!==void 0&&e.uint32(72).bool(t.forceLocationPlayabilityTokenRefresh),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=MT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.locationInfoStatus=i.int32();continue;case 2:if(o!==18)break;s.ulrStatus=Kd.decode(i,i.uint32());continue;case 3:if(o!==26)break;s.latitudeE7=i.string();continue;case 4:if(o!==34)break;s.longitudeE7=i.string();continue;case 5:if(o!==42)break;s.horizontalAccuracyMeters=i.string();continue;case 6:if(o!==50)break;s.locationFreshnessMs=i.string();continue;case 7:if(o!==56)break;s.locationPermissionAuthorizationStatus=i.int32();continue;case 8:if(o!==66)break;s.locationOverrideToken=i.string();continue;case 9:if(o!==72)break;s.forceLocationPlayabilityTokenRefresh=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function DT(){return{reportingEnabledSetting:void 0,historyEnabledSetting:void 0,isAllowed:void 0,isActive:void 0}}const Kd={encode(t,e=new T){return t.reportingEnabledSetting!==void 0&&e.uint32(8).int32(t.reportingEnabledSetting),t.historyEnabledSetting!==void 0&&e.uint32(16).int32(t.historyEnabledSetting),t.isAllowed!==void 0&&e.uint32(24).bool(t.isAllowed),t.isActive!==void 0&&e.uint32(32).bool(t.isActive),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=DT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.reportingEnabledSetting=i.int32();continue;case 2:if(o!==16)break;s.historyEnabledSetting=i.int32();continue;case 3:if(o!==24)break;s.isAllowed=i.bool();continue;case 4:if(o!==32)break;s.isActive=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function NT(){return{isPartOfGroup:void 0,isGroup:void 0}}const Yd={encode(t,e=new T){return t.isPartOfGroup!==void 0&&e.uint32(8).bool(t.isPartOfGroup),t.isGroup!==void 0&&e.uint32(24).bool(t.isGroup),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=NT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.isPartOfGroup=i.bool();continue;case 3:if(o!==24)break;s.isGroup=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function qr(t){const e=globalThis.Number(t.toString());if(e>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(e<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return e}function LT(){return{challenge:void 0,webResponse:void 0,androidResponse:void 0,iosResponse:void 0,error:void 0,adblockReporting:void 0}}const zd={encode(t,e=new T){return t.challenge!==void 0&&e.uint32(10).string(t.challenge),t.webResponse!==void 0&&e.uint32(18).string(t.webResponse),t.androidResponse!==void 0&&e.uint32(26).string(t.androidResponse),t.iosResponse!==void 0&&e.uint32(34).bytes(t.iosResponse),t.error!==void 0&&e.uint32(40).int32(t.error),t.adblockReporting!==void 0&&Xd.encode(t.adblockReporting,e.uint32(50).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=LT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.challenge=i.string();continue;case 2:if(o!==18)break;s.webResponse=i.string();continue;case 3:if(o!==26)break;s.androidResponse=i.string();continue;case 4:if(o!==34)break;s.iosResponse=i.bytes();continue;case 5:if(o!==40)break;s.error=i.int32();continue;case 6:if(o!==50)break;s.adblockReporting=Xd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function OT(){return{reportingStatus:void 0,broadSpectrumDetectionResult:void 0}}const Xd={encode(t,e=new T){return t.reportingStatus!==void 0&&e.uint32(8).uint64(t.reportingStatus),t.broadSpectrumDetectionResult!==void 0&&e.uint32(16).uint64(t.broadSpectrumDetectionResult),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=OT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.reportingStatus=Qd(i.uint64());continue;case 2:if(o!==16)break;s.broadSpectrumDetectionResult=Qd(i.uint64());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function Qd(t){const e=globalThis.Number(t.toString());if(e>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(e<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return e}function BT(){return{thirdPartyDigest:void 0,useSsl:void 0,returnErrorDetail:void 0,ifNoneMatch:void 0,returnLogEntry:void 0,isPrefetch:void 0,internalExperimentFlags:[],returnDebugData:void 0,innertubez:void 0,traceProto:void 0,returnLogEntryJson:void 0,sherlogUsername:void 0,reauthRequestInfo:void 0,sessionInfo:void 0,returnLogEntryProto:void 0,externalPrequestContext:void 0,attestationResponseData:void 0,eats:void 0,requestQos:void 0}}const Jd={encode(t,e=new T){t.thirdPartyDigest!==void 0&&e.uint32(50).string(t.thirdPartyDigest),t.useSsl!==void 0&&e.uint32(56).bool(t.useSsl),t.returnErrorDetail!==void 0&&e.uint32(72).bool(t.returnErrorDetail),t.ifNoneMatch!==void 0&&e.uint32(98).string(t.ifNoneMatch),t.returnLogEntry!==void 0&&e.uint32(104).bool(t.returnLogEntry),t.isPrefetch!==void 0&&e.uint32(112).bool(t.isPrefetch);for(const i of t.internalExperimentFlags)fi.encode(i,e.uint32(122).fork()).join();return t.returnDebugData!==void 0&&e.uint32(128).bool(t.returnDebugData),t.innertubez!==void 0&&e.uint32(146).string(t.innertubez),t.traceProto!==void 0&&e.uint32(184).bool(t.traceProto),t.returnLogEntryJson!==void 0&&e.uint32(192).bool(t.returnLogEntryJson),t.sherlogUsername!==void 0&&e.uint32(202).string(t.sherlogUsername),t.reauthRequestInfo!==void 0&&tf.encode(t.reauthRequestInfo,e.uint32(234).fork()).join(),t.sessionInfo!==void 0&&ef.encode(t.sessionInfo,e.uint32(242).fork()).join(),t.returnLogEntryProto!==void 0&&e.uint32(248).bool(t.returnLogEntryProto),t.externalPrequestContext!==void 0&&e.uint32(258).string(t.externalPrequestContext),t.attestationResponseData!==void 0&&zd.encode(t.attestationResponseData,e.uint32(274).fork()).join(),t.eats!==void 0&&e.uint32(282).bytes(t.eats),t.requestQos!==void 0&&Zd.encode(t.requestQos,e.uint32(290).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=BT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 6:if(o!==50)break;s.thirdPartyDigest=i.string();continue;case 7:if(o!==56)break;s.useSsl=i.bool();continue;case 9:if(o!==72)break;s.returnErrorDetail=i.bool();continue;case 12:if(o!==98)break;s.ifNoneMatch=i.string();continue;case 13:if(o!==104)break;s.returnLogEntry=i.bool();continue;case 14:if(o!==112)break;s.isPrefetch=i.bool();continue;case 15:if(o!==122)break;s.internalExperimentFlags.push(fi.decode(i,i.uint32()));continue;case 16:if(o!==128)break;s.returnDebugData=i.bool();continue;case 18:if(o!==146)break;s.innertubez=i.string();continue;case 23:if(o!==184)break;s.traceProto=i.bool();continue;case 24:if(o!==192)break;s.returnLogEntryJson=i.bool();continue;case 25:if(o!==202)break;s.sherlogUsername=i.string();continue;case 29:if(o!==234)break;s.reauthRequestInfo=tf.decode(i,i.uint32());continue;case 30:if(o!==242)break;s.sessionInfo=ef.decode(i,i.uint32());continue;case 31:if(o!==248)break;s.returnLogEntryProto=i.bool();continue;case 32:if(o!==258)break;s.externalPrequestContext=i.string();continue;case 34:if(o!==274)break;s.attestationResponseData=zd.decode(i,i.uint32());continue;case 35:if(o!==282)break;s.eats=i.bytes();continue;case 36:if(o!==290)break;s.requestQos=Zd.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function VT(){return{criticality:void 0}}const Zd={encode(t,e=new T){return t.criticality!==void 0&&e.uint32(8).int32(t.criticality),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=VT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.criticality=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function UT(){return{token:void 0}}const ef={encode(t,e=new T){return t.token!==void 0&&e.uint32(10).string(t.token),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=UT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.token=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function FT(){return{encodedReauthProofToken:void 0}}const tf={encode(t,e=new T){return t.encodedReauthProofToken!==void 0&&e.uint32(10).string(t.encodedReauthProofToken),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=FT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.encodedReauthProofToken=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function HT(){return{developerKey:void 0,appName:void 0,appPublisher:void 0,embedUrl:void 0,appVersion:void 0,embeddedPlayerContext:void 0}}const nf={encode(t,e=new T){return t.developerKey!==void 0&&e.uint32(10).string(t.developerKey),t.appName!==void 0&&e.uint32(18).string(t.appName),t.appPublisher!==void 0&&e.uint32(26).string(t.appPublisher),t.embedUrl!==void 0&&e.uint32(34).string(t.embedUrl),t.appVersion!==void 0&&e.uint32(50).string(t.appVersion),t.embeddedPlayerContext!==void 0&&sf.encode(t.embeddedPlayerContext,e.uint32(58).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=HT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.developerKey=i.string();continue;case 2:if(o!==18)break;s.appName=i.string();continue;case 3:if(o!==26)break;s.appPublisher=i.string();continue;case 4:if(o!==34)break;s.embedUrl=i.string();continue;case 6:if(o!==50)break;s.appVersion=i.string();continue;case 7:if(o!==58)break;s.embeddedPlayerContext=sf.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function WT(){return{ancestorOrigins:void 0,embeddedPlayerEncryptedContext:void 0,ancestorOriginsSupported:void 0}}const sf={encode(t,e=new T){return t.ancestorOrigins!==void 0&&e.uint32(10).string(t.ancestorOrigins),t.embeddedPlayerEncryptedContext!==void 0&&e.uint32(18).string(t.embeddedPlayerEncryptedContext),t.ancestorOriginsSupported!==void 0&&e.uint32(24).bool(t.ancestorOriginsSupported),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=WT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.ancestorOrigins=i.string();continue;case 2:if(o!==18)break;s.embeddedPlayerEncryptedContext=i.string();continue;case 3:if(o!==24)break;s.ancestorOriginsSupported=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function jT(){return{onBehalfOfUser:void 0,enableSafetyMode:void 0,credentialTransferTokens:[],delegatePurchases:void 0,kidsParent:void 0,isIncognito:void 0,lockedSafetyMode:void 0,delegationContext:void 0,serializedDelegationContext:void 0}}const of={encode(t,e=new T){t.onBehalfOfUser!==void 0&&e.uint32(26).string(t.onBehalfOfUser),t.enableSafetyMode!==void 0&&e.uint32(56).bool(t.enableSafetyMode);for(const i of t.credentialTransferTokens)uf.encode(i,e.uint32(98).fork()).join();return t.delegatePurchases!==void 0&&af.encode(t.delegatePurchases,e.uint32(106).fork()).join(),t.kidsParent!==void 0&&rf.encode(t.kidsParent,e.uint32(114).fork()).join(),t.isIncognito!==void 0&&e.uint32(120).bool(t.isIncognito),t.lockedSafetyMode!==void 0&&e.uint32(128).bool(t.lockedSafetyMode),t.delegationContext!==void 0&&cf.encode(t.delegationContext,e.uint32(138).fork()).join(),t.serializedDelegationContext!==void 0&&e.uint32(146).string(t.serializedDelegationContext),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=jT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 3:if(o!==26)break;s.onBehalfOfUser=i.string();continue;case 7:if(o!==56)break;s.enableSafetyMode=i.bool();continue;case 12:if(o!==98)break;s.credentialTransferTokens.push(uf.decode(i,i.uint32()));continue;case 13:if(o!==106)break;s.delegatePurchases=af.decode(i,i.uint32());continue;case 14:if(o!==114)break;s.kidsParent=rf.decode(i,i.uint32());continue;case 15:if(o!==120)break;s.isIncognito=i.bool();continue;case 16:if(o!==128)break;s.lockedSafetyMode=i.bool();continue;case 17:if(o!==138)break;s.delegationContext=cf.decode(i,i.uint32());continue;case 18:if(o!==146)break;s.serializedDelegationContext=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function GT(){return{}}const rf={encode(t,e=new T){return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=GT();for(;i.pos<n;){const o=i.uint32();if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function qT(){return{}}const af={encode(t,e=new T){return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=qT();for(;i.pos<n;){const o=i.uint32();if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function $T(){return{}}const cf={encode(t,e=new T){return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=$T();for(;i.pos<n;){const o=i.uint32();if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function KT(){return{}}const uf={encode(t,e=new T){return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=KT();for(;i.pos<n;){const o=i.uint32();if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function YT(){return{client:void 0,user:void 0,capabilities:void 0,request:void 0,clickTracking:void 0,thirdParty:void 0,remoteClient:void 0,adSignalsInfo:void 0,experimentalData:void 0,clientScreenNonce:void 0,activePlayers:[]}}const lf={encode(t,e=new T){t.client!==void 0&&Ys.encode(t.client,e.uint32(10).fork()).join(),t.user!==void 0&&of.encode(t.user,e.uint32(26).fork()).join(),t.capabilities!==void 0&&Pd.encode(t.capabilities,e.uint32(34).fork()).join(),t.request!==void 0&&Jd.encode(t.request,e.uint32(42).fork()).join(),t.clickTracking!==void 0&&df.encode(t.clickTracking,e.uint32(50).fork()).join(),t.thirdParty!==void 0&&nf.encode(t.thirdParty,e.uint32(58).fork()).join(),t.remoteClient!==void 0&&Ys.encode(t.remoteClient,e.uint32(66).fork()).join(),t.adSignalsInfo!==void 0&&ff.encode(t.adSignalsInfo,e.uint32(74).fork()).join(),t.experimentalData!==void 0&&hf.encode(t.experimentalData,e.uint32(82).fork()).join(),t.clientScreenNonce!==void 0&&e.uint32(90).string(t.clientScreenNonce);for(const i of t.activePlayers)pf.encode(i,e.uint32(98).fork()).join();return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=YT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.client=Ys.decode(i,i.uint32());continue;case 3:if(o!==26)break;s.user=of.decode(i,i.uint32());continue;case 4:if(o!==34)break;s.capabilities=Pd.decode(i,i.uint32());continue;case 5:if(o!==42)break;s.request=Jd.decode(i,i.uint32());continue;case 6:if(o!==50)break;s.clickTracking=df.decode(i,i.uint32());continue;case 7:if(o!==58)break;s.thirdParty=nf.decode(i,i.uint32());continue;case 8:if(o!==66)break;s.remoteClient=Ys.decode(i,i.uint32());continue;case 9:if(o!==74)break;s.adSignalsInfo=ff.decode(i,i.uint32());continue;case 10:if(o!==82)break;s.experimentalData=hf.decode(i,i.uint32());continue;case 11:if(o!==90)break;s.clientScreenNonce=i.string();continue;case 12:if(o!==98)break;s.activePlayers.push(pf.decode(i,i.uint32()));continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function zT(){return{params:[]}}const hf={encode(t,e=new T){for(const i of t.params)fi.encode(i,e.uint32(10).fork()).join();return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=zT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.params.push(fi.decode(i,i.uint32()));continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function XT(){return{playerContextParams:void 0}}const pf={encode(t,e=new T){return t.playerContextParams!==void 0&&e.uint32(10).bytes(t.playerContextParams),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=XT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.playerContextParams=i.bytes();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function QT(){return{clickTrackingParams:void 0}}const df={encode(t,e=new T){return t.clickTrackingParams!==void 0&&e.uint32(18).bytes(t.clickTrackingParams),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=QT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 2:if(o!==18)break;s.clickTrackingParams=i.bytes();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function JT(){return{params:[],bid:void 0,mutsuId:void 0,consentBumpState:void 0,advertisingId:void 0,limitAdTracking:void 0,attributionOsSupportedVersion:void 0}}const ff={encode(t,e=new T){for(const i of t.params)fi.encode(i,e.uint32(10).fork()).join();return t.bid!==void 0&&e.uint32(18).string(t.bid),t.mutsuId!==void 0&&e.uint32(26).string(t.mutsuId),t.consentBumpState!==void 0&&e.uint32(34).string(t.consentBumpState),t.advertisingId!==void 0&&e.uint32(58).string(t.advertisingId),t.limitAdTracking!==void 0&&e.uint32(72).bool(t.limitAdTracking),t.attributionOsSupportedVersion!==void 0&&e.uint32(82).string(t.attributionOsSupportedVersion),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=JT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.params.push(fi.decode(i,i.uint32()));continue;case 2:if(o!==18)break;s.bid=i.string();continue;case 3:if(o!==26)break;s.mutsuId=i.string();continue;case 4:if(o!==34)break;s.consentBumpState=i.string();continue;case 7:if(o!==58)break;s.advertisingId=i.string();continue;case 9:if(o!==72)break;s.limitAdTracking=i.bool();continue;case 10:if(o!==82)break;s.attributionOsSupportedVersion=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function ZT(){return{context:void 0,encryptedVideoId:void 0,title:void 0,description:void 0,privacy:void 0,tags:void 0,category:void 0,license:void 0,ageRestriction:void 0,videoStill:void 0,madeForKids:void 0,racy:void 0}}const eC={encode(t,e=new T){return t.context!==void 0&&lf.encode(t.context,e.uint32(10).fork()).join(),t.encryptedVideoId!==void 0&&e.uint32(18).string(t.encryptedVideoId),t.title!==void 0&&mf.encode(t.title,e.uint32(26).fork()).join(),t.description!==void 0&&_f.encode(t.description,e.uint32(34).fork()).join(),t.privacy!==void 0&&bf.encode(t.privacy,e.uint32(42).fork()).join(),t.tags!==void 0&&yf.encode(t.tags,e.uint32(50).fork()).join(),t.category!==void 0&&gf.encode(t.category,e.uint32(58).fork()).join(),t.license!==void 0&&wf.encode(t.license,e.uint32(66).fork()).join(),t.ageRestriction!==void 0&&kf.encode(t.ageRestriction,e.uint32(90).fork()).join(),t.videoStill!==void 0&&Sf.encode(t.videoStill,e.uint32(162).fork()).join(),t.madeForKids!==void 0&&xf.encode(t.madeForKids,e.uint32(546).fork()).join(),t.racy!==void 0&&vf.encode(t.racy,e.uint32(554).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=ZT();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.context=lf.decode(i,i.uint32());continue;case 2:if(o!==18)break;s.encryptedVideoId=i.string();continue;case 3:if(o!==26)break;s.title=mf.decode(i,i.uint32());continue;case 4:if(o!==34)break;s.description=_f.decode(i,i.uint32());continue;case 5:if(o!==42)break;s.privacy=bf.decode(i,i.uint32());continue;case 6:if(o!==50)break;s.tags=yf.decode(i,i.uint32());continue;case 7:if(o!==58)break;s.category=gf.decode(i,i.uint32());continue;case 8:if(o!==66)break;s.license=wf.decode(i,i.uint32());continue;case 11:if(o!==90)break;s.ageRestriction=kf.decode(i,i.uint32());continue;case 20:if(o!==162)break;s.videoStill=Sf.decode(i,i.uint32());continue;case 68:if(o!==546)break;s.madeForKids=xf.decode(i,i.uint32());continue;case 69:if(o!==554)break;s.racy=vf.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function tC(){return{newTitle:void 0}}const mf={encode(t,e=new T){return t.newTitle!==void 0&&e.uint32(10).string(t.newTitle),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=tC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.newTitle=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function iC(){return{newDescription:void 0}}const _f={encode(t,e=new T){return t.newDescription!==void 0&&e.uint32(10).string(t.newDescription),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=iC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.newDescription=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function nC(){return{newPrivacy:void 0,clearPrivacyDraft:void 0}}const bf={encode(t,e=new T){return t.newPrivacy!==void 0&&e.uint32(8).int32(t.newPrivacy),t.clearPrivacyDraft!==void 0&&e.uint32(16).bool(t.clearPrivacyDraft),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=nC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.newPrivacy=i.int32();continue;case 2:if(o!==16)break;s.clearPrivacyDraft=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function sC(){return{newTags:[]}}const yf={encode(t,e=new T){for(const i of t.newTags)e.uint32(10).string(i);return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=sC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.newTags.push(i.string());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function oC(){return{newCategoryId:void 0}}const gf={encode(t,e=new T){return t.newCategoryId!==void 0&&e.uint32(8).int32(t.newCategoryId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=oC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.newCategoryId=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function rC(){return{newLicenseId:void 0}}const wf={encode(t,e=new T){return t.newLicenseId!==void 0&&e.uint32(10).string(t.newLicenseId),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=rC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.newLicenseId=i.string();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function aC(){return{operation:void 0,newMfk:void 0}}const xf={encode(t,e=new T){return t.operation!==void 0&&e.uint32(8).int32(t.operation),t.newMfk!==void 0&&e.uint32(16).int32(t.newMfk),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=aC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.operation=i.int32();continue;case 2:if(o!==16)break;s.newMfk=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function cC(){return{operation:void 0,newRacy:void 0}}const vf={encode(t,e=new T){return t.operation!==void 0&&e.uint32(8).int32(t.operation),t.newRacy!==void 0&&e.uint32(16).int32(t.newRacy),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=cC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.operation=i.int32();continue;case 2:if(o!==16)break;s.newRacy=i.int32();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function uC(){return{newIsAgeRestricted:void 0}}const kf={encode(t,e=new T){return t.newIsAgeRestricted!==void 0&&e.uint32(8).bool(t.newIsAgeRestricted),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=uC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.newIsAgeRestricted=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function lC(){return{operation:void 0,newStillId:void 0,image:void 0,testImage:void 0,experimentImage:[]}}const Sf={encode(t,e=new T){t.operation!==void 0&&e.uint32(8).int32(t.operation),t.newStillId!==void 0&&e.uint32(16).int32(t.newStillId),t.image!==void 0&&mn.encode(t.image,e.uint32(26).fork()).join(),t.testImage!==void 0&&mn.encode(t.testImage,e.uint32(34).fork()).join();for(const i of t.experimentImage)Tf.encode(i,e.uint32(50).fork()).join();return e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=lC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==8)break;s.operation=i.int32();continue;case 2:if(o!==16)break;s.newStillId=i.int32();continue;case 3:if(o!==26)break;s.image=mn.decode(i,i.uint32());continue;case 4:if(o!==34)break;s.testImage=mn.decode(i,i.uint32());continue;case 6:if(o!==50)break;s.experimentImage.push(Tf.decode(i,i.uint32()));continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function hC(){return{image:void 0}}const Tf={encode(t,e=new T){return t.image!==void 0&&mn.encode(t.image,e.uint32(10).fork()).join(),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=hC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.image=mn.decode(i,i.uint32());continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function pC(){return{rawBytes:void 0,dataUri:void 0,frameTimestampUs:void 0,isVertical:void 0}}const mn={encode(t,e=new T){return t.rawBytes!==void 0&&e.uint32(10).bytes(t.rawBytes),t.dataUri!==void 0&&e.uint32(18).string(t.dataUri),t.frameTimestampUs!==void 0&&e.uint32(32).int64(t.frameTimestampUs),t.isVertical!==void 0&&e.uint32(40).bool(t.isVertical),e},decode(t,e){const i=t instanceof y?t:new y(t);let n=e===void 0?i.len:i.pos+e;const s=pC();for(;i.pos<n;){const o=i.uint32();switch(o>>>3){case 1:if(o!==10)break;s.rawBytes=i.bytes();continue;case 2:if(o!==18)break;s.dataUri=i.string();continue;case 4:if(o!==32)break;s.frameTimestampUs=dC(i.int64());continue;case 5:if(o!==40)break;s.isVertical=i.bool();continue}if((o&7)===4||o===0)break;i.skip(o&7)}return s}};function dC(t){const e=globalThis.Number(t.toString());if(e>globalThis.Number.MAX_SAFE_INTEGER)throw new globalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");if(e<globalThis.Number.MIN_SAFE_INTEGER)throw new globalThis.Error("Value is smaller than Number.MIN_SAFE_INTEGER");return e}var is,oi,ww,xw,vw;class fC{constructor(e){is.add(this),oi.set(this,void 0),v(this,oi,e,"f")}async updateVideoMetadata(e,i){const n=r(this,oi,"f");if(!n.logged_in)throw new m("You must be signed in to perform this operation.");const s={context:{client:{osName:"Android",clientName:parseInt(ma.ANDROID),clientVersion:D.ANDROID.VERSION,androidSdkVersion:D.ANDROID.SDK_VERSION,visitorData:n.context.client.visitorData,osVersion:"13",acceptLanguage:n.context.client.hl,acceptRegion:n.context.client.gl,deviceMake:"Google",deviceModel:"sdk_gphone64_x86_64",screenHeightPoints:840,screenWidthPoints:432,configInfo:{appInstallData:n.context.client.configInfo?.appInstallData},timeZone:n.context.client.timeZone,chipset:"qcom;taro"},activePlayers:[]},encryptedVideoId:e};if(i.title&&(s.title={newTitle:i.title}),i.description&&(s.description={newDescription:i.description}),i.license&&(s.license={newLicenseId:i.license}),i.tags&&(s.tags={newTags:i.tags}),i.thumbnail&&(s.videoStill={operation:3,image:{rawBytes:i.thumbnail},experimentImage:[]}),Reflect.has(i,"category")&&(s.category={newCategoryId:i.category}),Reflect.has(i,"privacy"))switch(i.privacy){case"PUBLIC":s.privacy={newPrivacy:1};break;case"UNLISTED":s.privacy={newPrivacy:2};break;case"PRIVATE":s.privacy={newPrivacy:3};break;default:throw new Error("Invalid privacy setting")}Reflect.has(i,"made_for_kids")&&(s.madeForKids={operation:1,newMfk:i.made_for_kids?1:2}),Reflect.has(i,"age_restricted")&&(s.racy={operation:1,newRacy:i.age_restricted?1:2});const o=eC.encode(s);return await n.actions.execute("/video_manager/metadata_update",{protobuf:!0,serialized_data:o.finish()})}async upload(e,i={}){if(!r(this,oi,"f").logged_in)throw new m("You must be signed in to perform this operation.");const n=await r(this,is,"m",ww).call(this),s=await r(this,is,"m",xw).call(this,n.upload_url,e);if(s.status!=="STATUS_SUCCESS")throw new m("Could not process video.");return await r(this,is,"m",vw).call(this,n,s,i)}}oi=new WeakMap,is=new WeakSet,ww=async function(){const e=`innertube_android:${V.shim.uuidv4()}:0:v=3,api=1,cf=3`,i={frontendUploadId:e,deviceDisplayName:"Pixel 6 Pro",fileId:`goog-edited-video://generated?videoFileUri=content://media/external/video/media/${V.shim.uuidv4()}`,mp4MoovAtomRelocationStatus:"UNSUPPORTED",transcodeResult:"DISABLED",connectionType:"WIFI"},n=await r(this,oi,"f").http.fetch("/upload/youtubei",{baseURL:te.YT_UPLOAD,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"start","x-goog-upload-protocol":"resumable"},body:JSON.stringify(i)});if(!n.ok)throw new m("Could not get initial upload data");return{frontend_upload_id:e,upload_id:n.headers.get("x-guploader-uploadid"),upload_url:n.headers.get("x-goog-upload-url"),scotty_resource_id:n.headers.get("x-goog-upload-header-scotty-resource-id"),chunk_granularity:n.headers.get("x-goog-upload-chunk-granularity")}},xw=async function(e,i){const n=await r(this,oi,"f").http.fetch_function(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-goog-upload-command":"upload, finalize","x-goog-upload-file-name":`file-${Date.now()}`,"x-goog-upload-offset":"0"},body:i});if(!n.ok)throw new m("Could not upload video");return await n.json()},vw=async function(e,i,n){return await r(this,oi,"f").actions.execute("/upload/createvideo",{resourceId:{scottyResourceId:{id:i.scottyResourceId}},frontendUploadId:e.frontend_upload_id,initialMetadata:{title:{newTitle:n.title},description:{newDescription:n.description,shouldSegment:!0},privacy:{newPrivacy:n.privacy||"PRIVATE"},draftState:{isDraft:!!n.is_draft}}})};var Nt;class mC{constructor(e){Nt.set(this,void 0),v(this,Nt,e,"f")}async getInfo(e=!1){if(!r(this,Nt,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");if(!e&&r(this,Nt,"f").session.context.user.onBehalfOfUser)throw new m('Boolean argument must be true when "on_behalf_of_user" is specified.');if(e)return(await new f({getAccountsListInnertubeEndpoint:{requestType:"ACCOUNTS_LIST_REQUEST_TYPE_CHANNEL_SWITCHER",callCircumstance:"SWITCHING_USERS_FULL"}}).call(r(this,Nt,"f"),{client:"WEB",parse:!0})).actions_memo?.getType(Yo)||[];const n=await new f({getAccountsListInnertubeEndpoint:{}}).call(r(this,Nt,"f"),{client:"TV"});return new AS(n)}async getSettings(){const i=await new f({browseEndpoint:{browseId:"SPaccount_overview"}}).call(r(this,Nt,"f"));return new Jh(r(this,Nt,"f"),i)}}Nt=new WeakMap;var po,ie,Ma;class _C{constructor(e){po.add(this),ie.set(this,void 0),v(this,ie,e,"f")}async create(e,i){if(j({title:e,video_ids:i}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const s=await new f({createPlaylistServiceEndpoint:{title:e,videoIds:i}}).call(r(this,ie,"f"));return{success:s.success,status_code:s.status_code,playlist_id:s.data.playlistId,data:s.data}}async delete(e){if(j({playlist_id:e}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const n=await new f({deletePlaylistServiceEndpoint:{sourcePlaylistId:e}}).call(r(this,ie,"f"));return{playlist_id:e,success:n.success,status_code:n.status_code,data:n.data}}async addToLibrary(e){if(j({playlist_id:e}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");return await new f({likeEndpoint:{status:"LIKE",target:e}}).call(r(this,ie,"f"))}async removeFromLibrary(e){if(j({playlist_id:e}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");return await new f({likeEndpoint:{status:"INDIFFERENT",target:e}}).call(r(this,ie,"f"))}async addVideos(e,i){if(j({playlist_id:e,video_ids:i}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const s=await new f({playlistEditEndpoint:{playlistId:e,actions:i.map(o=>({action:"ACTION_ADD_VIDEO",addedVideoId:o}))}}).call(r(this,ie,"f"));return{playlist_id:e,action_result:s.data.actions}}async removeVideos(e,i,n=!1){if(j({playlist_id:e,video_ids:i}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const s=await r(this,po,"m",Ma).call(this,e);if(!s.info.is_editable)throw new m("This playlist cannot be edited.",e);const o={playlistId:e,actions:[]},a=async _=>{const b=n?"set_video_id":"id";if(_.videos.filter(x=>i.includes(x.key(b).string())).forEach(x=>o.actions.push({action:"ACTION_REMOVE_VIDEO",setVideoId:x.key("set_video_id").string()})),o.actions.length<i.length){const x=await _.getContinuation();return a(x)}};if(await a(s),!o.actions.length)throw new m("Given video ids were not found in this playlist.",i);const d=await new f({playlistEditEndpoint:o}).call(r(this,ie,"f"));return{playlist_id:e,action_result:d.data.actions}}async moveVideo(e,i,n){if(j({playlist_id:e,moved_video_id:i,predecessor_video_id:n}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const s=await r(this,po,"m",Ma).call(this,e);if(!s.info.is_editable)throw new m("This playlist cannot be edited.",e);const o={playlistId:e,actions:[]};let a,l;const d=async k=>{const x=k.videos.find(C=>i===C.key("id").string()),I=k.videos.find(C=>n===C.key("id").string());if(a=a||x?.key("set_video_id").string(),l=l||I?.key("set_video_id").string(),!a||!l){const C=await k.getContinuation();return d(C)}};await d(s),o.actions.push({action:"ACTION_MOVE_VIDEO_AFTER",setVideoId:a,movedSetVideoIdPredecessor:l});const b=await new f({playlistEditEndpoint:o}).call(r(this,ie,"f"));return{playlist_id:e,action_result:b.data.actions}}async setName(e,i){if(j({playlist_id:e,name:i}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const n={playlist_id:e,actions:[]};n.actions.push({action:"ACTION_SET_PLAYLIST_NAME",playlistName:i});const o=await new f({playlistEditEndpoint:n}).call(r(this,ie,"f"));return{playlist_id:e,action_result:o.data.actions}}async setDescription(e,i){if(j({playlist_id:e,description:i}),!r(this,ie,"f").session.logged_in)throw new m("You must be signed in to perform this operation.");const n={playlistId:e,actions:[]};n.actions.push({action:"ACTION_SET_PLAYLIST_DESCRIPTION",playlistDescription:i});const o=await new f({playlistEditEndpoint:n}).call(r(this,ie,"f"));return{playlist_id:e,action_result:o.data.actions}}}ie=new WeakMap,po=new WeakSet,Ma=async function(e){e.startsWith("VL")||(e=`VL${e}`);const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,ie,"f"),{parse:!0});return new Xh(r(this,ie,"f"),n,!0)};var he;class bC{constructor(e){he.set(this,void 0),v(this,he,e,"f")}async like(e){if(j({video_id:e}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return new f({likeEndpoint:{status:"LIKE",target:e}}).call(r(this,he,"f"),{client:"TV"})}async dislike(e){if(j({video_id:e}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return new f({likeEndpoint:{status:"DISLIKE",target:e}}).call(r(this,he,"f"),{client:"TV"})}async removeRating(e){if(j({video_id:e}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return new f({likeEndpoint:{status:"INDIFFERENT",target:e}}).call(r(this,he,"f"),{client:"TV"})}async subscribe(e){if(j({channel_id:e}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return new f({subscribeEndpoint:{channelIds:[e],params:"EgIIAhgA"}}).call(r(this,he,"f"))}async unsubscribe(e){if(j({channel_id:e}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");return new f({unsubscribeEndpoint:{channelIds:[e],params:"CgIIAhgA"}}).call(r(this,he,"f"))}async comment(e,i){if(j({video_id:e,text:i}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");const n=ok.encode({videoId:e,params:{index:0},number:7}),s=encodeURIComponent(We(n.finish()));return new f({createCommentEndpoint:{commentText:i,createCommentParams:s}}).call(r(this,he,"f"))}async translate(e,i,n={}){j({text:e,target_language:i});const s=qm(22,{text:e,target_language:i,...n}),a=await new f({performCommentActionEndpoint:{action:s}}).call(r(this,he,"f")),l=a.data.frameworkUpdates.entityBatchUpdate.mutations[0].payload.commentEntityPayload;return{success:a.success,status_code:a.status_code,translated_content:l.translatedContent.content,data:a.data}}async setNotificationPreferences(e,i){if(j({channel_id:e,type:i}),!r(this,he,"f").session.logged_in)throw new Error("You must be signed in to perform this operation.");const n={PERSONALIZED:1,ALL:2,NONE:3};if(!Object.keys(n).includes(i.toUpperCase()))throw new Error(`Invalid notification preference type: ${i}`);const s=q0.encode({channelId:e,prefId:{index:n[i.toUpperCase()]},number0:0,number1:4}),o=encodeURIComponent(We(s.finish()));return new f({modifyChannelNotificationPreferenceEndpoint:{params:o}}).call(r(this,he,"f"))}}he=new WeakMap;var W;class op{constructor(e){W.set(this,void 0),v(this,W,e,"f")}static async create(e={}){return new op(await yw.create(e))}async getInfo(e,i){j({target:e});const n={videoId:e instanceof f?e.payload?.videoId:e,playlistId:e instanceof f?e.payload?.playlistId:void 0,playlistIndex:e instanceof f?e.payload?.playlistIndex:void 0,params:e instanceof f?e.payload?.params:void 0,racyCheckOk:!0,contentCheckOk:!0},s=new f({watchEndpoint:n}),o=new f({watchNextEndpoint:n}),a=r(this,W,"f"),l={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,lactMilliseconds:"-1",signatureTimestamp:a.player?.sts}},client:i};a.po_token&&(l.serviceIntegrityDimensions={poToken:a.po_token});const d=s.call(a.actions,l),_=o.call(a.actions),b=await Promise.all([d,_]),k=ai(16);return new kd(b,a.actions,k)}async getBasicInfo(e,i){j({video_id:e});const n=new f({watchEndpoint:{videoId:e}}),s=r(this,W,"f"),o={playbackContext:{contentPlaybackContext:{vis:0,splay:!1,lactMilliseconds:"-1",signatureTimestamp:s.player?.sts}},client:i};s.po_token&&(o.serviceIntegrityDimensions={poToken:s.po_token});const a=await n.call(s.actions,o),l=ai(16);return new kd([a],s.actions,l)}async getShortsVideoInfo(e,i){j({video_id:e});const n=new f({reelWatchEndpoint:{disablePlayerResponse:!1,params:"CAUwAg%3D%3D",videoId:e}}),s=r(this,W,"f").actions,o=n.call(s,{client:i}),a=_k.encode({shortId:e,params:{number:5},feature2:25,feature3:0}),l=encodeURIComponent(We(a.finish())),d=s.execute("/reel/reel_watch_sequence",{sequenceParams:l}),_=await Promise.all([o,d]),b=ai(16);return new XS([_[0]],s,b,_[1])}async search(e,i={}){j({query:e});const n={};if(n.filters={},i.sort_by&&(n.sortBy=O0[i.sort_by.toUpperCase()]),i.upload_date&&(n.filters.uploadDate=B0[i.upload_date.toUpperCase()]),i.type&&(n.filters.type=V0[i.type.toUpperCase()]),i.duration&&(n.filters.duration=U0[i.duration.toUpperCase()]),i.features)for(const a of i.features)switch(a){case"360":n.filters.features360=!0;break;case"3d":n.filters.features3d=!0;break;case"4k":n.filters.features4k=!0;break;case"creative_commons":n.filters.featuresCreativeCommons=!0;break;case"hd":n.filters.featuresHd=!0;break;case"hdr":n.filters.featuresHdr=!0;break;case"live":n.filters.featuresLive=!0;break;case"location":n.filters.featuresLocation=!0;break;case"purchased":n.filters.featuresPurchased=!0;break;case"subtitles":n.filters.featuresSubtitles=!0;break;case"vr180":n.filters.featuresVr180=!0;break}const o=await new f({searchEndpoint:{query:e,params:i?encodeURIComponent(We(Gm.encode(n).finish())):void 0}}).call(r(this,W,"f").actions);return new HS(this.actions,o)}async getSearchSuggestions(e,i){const n=r(this,W,"f"),s=new URL(`${te.YT_SUGGESTIONS}/complete/search`);s.searchParams.set("client","youtube"),s.searchParams.set("gs_ri","youtube"),s.searchParams.set("gs_id","0"),s.searchParams.set("cp","0"),s.searchParams.set("ds","yt"),s.searchParams.set("sugexp",D.WEB.SUGG_EXP_ID),s.searchParams.set("hl",n.context.client.hl),s.searchParams.set("gl",n.context.client.gl),s.searchParams.set("q",e),i&&s.searchParams.set("pq",i);const a=await(await n.http.fetch_function(s,{headers:{Cookie:n.cookie||""}})).text();return JSON.parse(a.replace("window.google.ac.h(","").slice(0,-1))[1].map(d=>d[0])}async getComments(e,i,n){j({video_id:e});const s={TOP_COMMENTS:0,NEWEST_FIRST:1},o=J0.encode({ctx:{videoId:e},unkParam:6,params:{opts:{videoId:e,sortBy:s[i||"TOP_COMMENTS"],type:2,commentId:n||""},target:"comments-section"}}),a=encodeURIComponent(We(o.finish())),d=await new f({continuationCommand:{request:"CONTINUATION_REQUEST_TYPE_WATCH_NEXT",token:a}}).call(r(this,W,"f").actions);return new xs(this.actions,d.data)}async getHomeFeed(){const i=await new f({browseEndpoint:{browseId:"FEwhat_to_watch"}}).call(r(this,W,"f").actions);return new NS(this.actions,i)}async getGuide(){const e=await this.actions.execute("/guide");return new DS(e.data)}async getLibrary(){const i=await new f({browseEndpoint:{browseId:"FElibrary"}}).call(r(this,W,"f").actions);return new OS(this.actions,i)}async getHistory(){const i=await new f({browseEndpoint:{browseId:"FEhistory"}}).call(r(this,W,"f").actions);return new jr(this.actions,i)}async getTrending(){const i=await new f({browseEndpoint:{browseId:"FEtrending"}}).call(r(this,W,"f").actions);return new vn(this.actions,i)}async getCourses(){const i=await new f({browseEndpoint:{browseId:"FEcourses_destination"}}).call(r(this,W,"f").actions,{parse:!0});return new re(this.actions,i)}async getSubscriptionsFeed(){const i=await new f({browseEndpoint:{browseId:"FEsubscriptions"}}).call(r(this,W,"f").actions,{parse:!0});return new re(this.actions,i)}async getChannelsFeed(){const i=await new f({browseEndpoint:{browseId:"FEchannels"}}).call(r(this,W,"f").actions,{parse:!0});return new re(this.actions,i)}async getChannel(e){j({id:e});const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,W,"f").actions);return new MS(this.actions,n)}async getNotifications(){const e=await this.actions.execute("/notification/get_notification_menu",{notificationsMenuRequestType:"NOTIFICATIONS_MENU_REQUEST_TYPE_INBOX"});return new Qh(this.actions,e)}async getUnseenNotificationsCount(){const e=await this.actions.execute("/notification/get_unseen_count");return e.data?.unseenCount||e.data?.actions?.[0].updateNotificationsUnseenCountAction?.unseenCount||0}async getPlaylists(){const i=await new f({browseEndpoint:{browseId:"FEplaylist_aggregation"}}).call(r(this,W,"f").actions,{parse:!0});return new re(this.actions,i)}async getPlaylist(e){j({id:e}),e.startsWith("VL")||(e=`VL${e}`);const n=await new f({browseEndpoint:{browseId:e}}).call(r(this,W,"f").actions);return new Xh(this.actions,n)}async getHashtag(e){j({hashtag:e});const i=dk.encode({params:{hashtag:e,type:1}}),n=encodeURIComponent(We(i.finish())),o=await new f({browseEndpoint:{browseId:"FEhashtag",params:n}}).call(r(this,W,"f").actions);return new zh(this.actions,o)}async getStreamingData(e,i={}){const s=(await this.getBasicInfo(e,i?.client)).chooseFormat(i);return s.url=s.decipher(r(this,W,"f").player),s}async download(e,i){return(await this.getBasicInfo(e,i?.client)).download(i)}async resolveURL(e){const i=await this.actions.execute("/navigation/resolve_url",{url:e,parse:!0});if(!i.endpoint)throw new m("Failed to resolve URL. Expected a NavigationEndpoint but got undefined",i);return i.endpoint}async getPost(e,i){j({post_id:e,channel_id:i});const n=gk.encode({f0:"community",f1:{postId:e},f2:{p1:1,p2:1}}),s=encodeURIComponent(We(n.finish()).replace(/\+/g,"-").replace(/\//g,"_")),a=await new f({browseEndpoint:{browseId:i,params:s}}).call(r(this,W,"f").actions,{parse:!0});return new re(this.actions,a)}async getPostComments(e,i,n){j({post_id:e,channel_id:i});const s={TOP_COMMENTS:0,NEWEST_FIRST:1},o=Ck.encode({title:"community",postContainer:{postId:e},f0:{f0:1,f1:1},commentDataContainer:{title:"comments-section",commentData:{sortBy:s[n||"TOP_COMMENTS"],f0:1,channelId:i,postId:e}}}),a=kk.encode({f0:{location:"FEcomment_post_detail_page_web_top_level",protoData:encodeURIComponent(We(o.finish()))}}),l=encodeURIComponent(We(a.finish())),_=await new f({continuationCommand:{request:"CONTINUATION_REQUEST_TYPE_BROWSE",token:l}}).call(r(this,W,"f").actions);return new xs(this.actions,_.data)}async getAttestationChallenge(e,i){const n={engagementType:e};return i&&(n.ids=i),this.actions.execute("/att/get",{parse:!0,...n})}call(e,i){return e.call(this.actions,i)}get music(){return new pT(r(this,W,"f"))}get studio(){return new fC(r(this,W,"f"))}get kids(){return new hT(r(this,W,"f"))}get account(){return new mC(r(this,W,"f").actions)}get playlist(){return new _C(r(this,W,"f").actions)}get interact(){return new bC(r(this,W,"f").actions)}get actions(){return r(this,W,"f").actions}get session(){return r(this,W,"f")}}W=new WeakMap;const Cf="JsRuntime";function yC(t,e){ps(Cf,`Evaluating JavaScript:
`,t);const i=new In;for(const[s,o]of Object.entries(e))i.scope.set(s,o);const n=i.evaluate(t);return ps(Cf,"Done. Result:",n),n}var ns,fo,mo,_o;const gC="Cache";class wC{constructor(e=!1,i){ns.add(this),fo.set(this,void 0),mo.set(this,void 0),v(this,fo,i||"","f"),v(this,mo,e,"f")}get cache_dir(){return r(this,mo,"f")?r(this,fo,"f"):""}async get(e){const i=await r(this,ns,"m",_o).call(this);if(i)return new Promise((n,s)=>{const o=i.transaction("kv-store","readonly").objectStore("kv-store").get(e);o.onerror=s,o.onsuccess=function(){const a=this.result?.v;a instanceof ArrayBuffer?n(a):ArrayBuffer.isView(a)?n(a.buffer):n(void 0)}})}async set(e,i){const n=await r(this,ns,"m",_o).call(this);if(n)return new Promise((s,o)=>{const a=n.transaction("kv-store","readwrite").objectStore("kv-store").put({k:e,v:i});a.onerror=o,a.onsuccess=()=>s()})}async remove(e){const i=await r(this,ns,"m",_o).call(this);if(i)return new Promise((n,s)=>{const o=i.transaction("kv-store","readwrite").objectStore("kv-store").delete(e);o.onerror=s,o.onsuccess=()=>n()})}}fo=new WeakMap,mo=new WeakMap,ns=new WeakSet,_o=function(){const e=Reflect.get(globalThis,"indexedDB")||Reflect.get(globalThis,"webkitIndexedDB")||Reflect.get(globalThis,"mozIndexedDB")||Reflect.get(globalThis,"msIndexedDB");return e?new Promise((i,n)=>{const s=e.open("youtubei.js",1);s.onsuccess=function(){i(this.result)},s.onerror=function(o){n("indexedDB request error"),console.error(o)},s.onupgradeneeded=function(){const o=this.result.createObjectStore("kv-store",{keyPath:"k"});o.transaction.oncomplete=function(){i(this.db)}}}):ve(gC,"IndexedDB is not supported. No cache will be used.")};V.load({runtime:"browser",server:!1,info:{version:oa.version,bugs_url:oa.bugs.url,repo_url:oa.homepage.split("#")[0]},Cache:wC,sha1Hash:sT,uuidv4(){return globalThis.crypto?.randomUUID()?globalThis.crypto.randomUUID():"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>{const e=parseInt(t);return(e^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},eval:yC,fetch:globalThis.fetch,Request:globalThis.Request,Response:globalThis.Response,Headers:globalThis.Headers,FormData:globalThis.FormData,File:globalThis.File,ReadableStream:globalThis.ReadableStream,CustomEvent:globalThis.CustomEvent});let ra;const rp=async()=>(ra||(ra=await op.create({fetch:application.networkRequest,cookie:"CONSENT=YES+"})),ra),xC=async t=>t.apiId?{items:(await(await rp()).getPlaylist(t.apiId)).items.filter(s=>"id"in s&&"author"in s).map(s=>({apiId:s.id,title:s.title.toString(),duration:s.duration.seconds,channelName:s.author.name,channelApiId:s.author.id,images:s.thumbnails}))}:{items:[]},vC=async t=>({items:(await(await rp()).search(t.query,{type:"video"})).videos.filter(s=>"id"in s&&"author"in s).map(s=>({apiId:s.id,title:s.title.toString(),duration:s.duration.seconds,channelName:s.author.name,channelApiId:s.author.id,images:s.thumbnails}))}),kC=async t=>({items:(await(await rp()).search(t.query,{type:"channel"})).channels.map(s=>({apiId:s.id,name:s.author.name,images:s.author.thumbnails}))}),Da=t=>{application.postUiMessage(t)},kw=async()=>{const t=Z.getItem("usePlayer");return!t||t==="true"},SC=async()=>{const e=document.location.host.split(".");e.shift();const i=e.join("."),n=`${document.location.protocol}//${i}`,s=await application.getPluginId(),o=await application.getLocale(),a=await application.getPlaylistsInfo(),l=Z.getItem("apiKey")??"",d=Z.getItem("clientId")??"",_=Z.getItem("clientSecret")??"",b=await kw(),k=await Tt();Da({type:"info",origin:n,pluginId:s,apiKey:l,clientId:d,clientSecret:_,usePlayer:b,instance:k,locale:o,playlists:a})},TC=async t=>{const i=new URL(t).searchParams.get("list");if(i){const n=await Ew({apiId:i,isUserPlaylist:!1});return{...n.playlist,videos:n.items}}throw new Error("Couldn't retreive playlist")},Sw=async t=>{const e=[];t.forEach(l=>{try{const d=/^(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu.be)\/(?:watch\?v=|embed\/|v\/)?([a-zA-Z0-9_-]+)(?:\S+)?$/,_=l.match(d);_&&e.push(_[1])}catch{}});const i=e.length,n=50;let s=0,o=n;const a=[];for(;s<i;){const l=e.slice(s,o),d=await Wf(l);a.push(...d),s+=n,o+=n}return a};application.onUiMessage=async t=>{switch(t.type){case"check-login":const e=Z.getItem("access_token");e&&Da({type:"login",accessToken:e}),await SC();break;case"login":Ff(t.accessToken,t.refreshToken),application.onGetUserPlaylists=jf;break;case"logout":Z.removeItem("access_token"),Z.removeItem("refresh_token"),application.onGetUserPlaylists=void 0;break;case"set-keys":Z.setItem("apiKey",t.apiKey),Z.setItem("clientId",t.clientId),Z.setItem("clientSecret",t.clientSecret),application.createNotification({message:"Api Keys saved!"});break;case"useplayer":Z.setItem("usePlayer",String(t.usePlayer));break;case"endvideo":application.endVideo();break;case"getinstnace":const i=await Lf();Da({type:"sendinstance",instance:i});break;case"resolve-urls":const n=await Sw(t.videoUrls.split(`
`));await application.addVideosToPlaylist(t.playlistId,n),application.createNotification({message:"Success!"});break}};async function Tw(t){return await application.isNetworkRequestCorsDisabled()?vC(t):ox(t)}async function Cw(t){return await application.isNetworkRequestCorsDisabled()?kC(t):ax(t)}async function CC(t){return cx(t)}async function Iw(t){return rx(t)}async function Ew(t){return await application.isNetworkRequestCorsDisabled()?xC(t):t.isUserPlaylist?kx(t):ux(t)}async function IC(){try{return await vx()}catch{return await lx()}}async function EC(t){return Of(t.apiId)}async function PC(t){return Bf(t)}async function RC(t){const e={apiId:t.videoApiId,pageInfo:t.pageInfo};return Bf(e)}async function AC(t){const e=Tw(t),i=Iw(t),n=Cw(t),[s,o,a]=await Promise.all([e,i,n]);return{videos:s,playlists:o,channels:a}}async function MC(t,e){const i=/^.*(youtu.be\/|list=)([^#\&\?]*).*/,n=/^(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu.be)\/(?:watch\?v=|embed\/|v\/)?([a-zA-Z0-9_-]+)(?:\S+)?$/;if(!i.test(t)&&!n.test(t))return!1;switch(e){case"playlist":return new URL(t).searchParams.has("list");case"video":return!0;default:return!1}}async function DC(t){return sx(t)}application.onSearchAll=AC;application.onSearchVideos=Tw;application.onSearchPlaylists=Iw;application.onSearchChannels=Cw;application.onGetChannelVideos=CC;application.onGetPlaylistVideos=Ew;application.onGetVideoComments=PC;application.onGetCommentReplies=RC;application.onGetTopItems=IC;application.onUsePlayer=kw;application.onGetVideo=EC;application.onLookupPlaylistUrl=TC;application.onLookupVideoUrls=Sw;application.onCanParseUrl=MC;application.onGetSearchSuggestions=DC;const Pw=t=>{localStorage.setItem("kb-color-mode",t)};application.onChangeTheme=async t=>{Pw(t)};const NC=async()=>{const t=await application.getTheme();Pw(t),Z.getItem("access_token")&&(application.onGetUserPlaylists=jf),await La()};NC();
